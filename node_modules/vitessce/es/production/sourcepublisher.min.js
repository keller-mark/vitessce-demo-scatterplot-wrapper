/*! For license information please see sourcepublisher.min.js.LICENSE.txt */
module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./",r(r.s=812)}([function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";e.exports=r(187)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return i}))},function(e,t,r){e.exports=r(303)()},function(e,t,r){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(11),i=r(38);function a(e,t){return!t||"object"!==Object(n.a)(t)&&"function"!==typeof t?Object(i.a)(e):t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(149);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(n.a)(e,t)}},function(e,t,r){e.exports=r(363)},function(e,t,r){"use strict";r(291);var n=r(120),i=r(88),a=r(40),o=r(23),s=Object(a.isBrowser)(),u=s&&"undefined"!==typeof document,c={webgl2:!0,webgl1:!0,throwOnError:!1,manageState:!0,canvas:null,debug:!1,width:800,height:600};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(s,"createGLContext on available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var t,r=e=Object.assign({},c,e),n=r.width,i=r.height;function a(t){if(e.throwOnError)throw new Error(t);return null}var u=e,l=u.canvas,h=p({canvas:l,width:n,height:i,onError:a});return(t=d(h,e))?(v(t=f(t,e)),t):null}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||g(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var r=t=Object.assign({},c,t),n=r.manageState,u=r.debug;return n&&Object(i.a)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.i.log.apply(o.i,[1].concat(t))()}}),s&&u&&(a.global.makeDebugContext?(e=a.global.makeDebugContext(e,t),o.i.level=Math.max(o.i.level,1)):o.i.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var r=Object(o.e)(t.useDevicePixels);m(e,r,t)}else{var n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}}function d(e,t){var r=t.onError,n=void 0===r?function(e){return null}:r,i=function(e){return n("WebGL context: ".concat(e.statusMessage||"error"))};e.addEventListener("webglcontextcreationerror",i,!1);var a=t.webgl1,o=void 0===a||a,s=t.webgl2,u=void 0===s||s,c=null;return u&&(c=(c=c||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),o&&(c=(c=c||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),c||n("Failed to create ".concat(u&&!o?"WebGL2":"WebGL"," context"))}function p(e){var t,r=e.canvas,n=e.width,i=void 0===n?800:n,a=e.height,o=void 0===a?600:a,s=e.onError,c=void 0===s?function(){}:s;"string"===typeof r?(u&&"complete"===document.readyState||c("createGLContext called on canvas '".concat(r,"' before page was loaded")),t=document.getElementById(r)):r?t=r:((t=document.createElement("canvas")).id="lumagl-canvas",t.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",t.style.height=Number.isFinite(o)?"".concat(o,"px"):"100%",document.body.insertBefore(t,document.body.firstChild));return t}function v(e){var t=Object(o.h)(e)?"WebGL2":"WebGL1",r=function(e){var t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info");return{vendor:n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937)||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";o.i.info(1,"".concat(t).concat(i," context ").concat(n))()}function g(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function m(e,t,r){var n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;n&&i||(o.i.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var a=e.luma.canvasSizeInfo;if(a.clientWidth!==n||a.clientHeight!==i||a.devicePixelRatio!==t){var s=t,u=Math.floor(n*s),c=Math.floor(i*s);e.canvas.width=u,e.canvas.height=c,e.drawingBufferWidth===u&&e.drawingBufferHeight===c||(o.i.warn("Device pixel ratio clamped")(),s=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*s),e.canvas.height=Math.floor(i*s)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}r.d(t,"d",(function(){return n.a})),r.d(t,"k",(function(){return n.c})),r.d(t,"i",(function(){return n.b})),r.d(t,"l",(function(){return n.d})),r.d(t,"a",(function(){return l})),r.d(t,"j",(function(){return h})),r.d(t,"e",(function(){return f})),r.d(t,"h",(function(){return o.i})),r.d(t,"c",(function(){return o.c})),r.d(t,"b",(function(){return o.b})),r.d(t,"f",(function(){return o.g})),r.d(t,"g",(function(){return o.h}))},function(e,t,r){"use strict";var n=r(276);var i=r(277);function a(e,t){return Object(n.a)(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}(e,t)||Object(i.a)()}r.d(t,"a",(function(){return a}))},function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",(function(){return n}))},function(e,t,r){e.exports=r(363)},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return a}));var n=1e-6,i="undefined"!==typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},function(e,t,r){"use strict";r.r(t);var n=r(294);r.d(t,"Vector2",(function(){return n.d})),r.d(t,"Vector3",(function(){return n.e})),r.d(t,"Vector4",(function(){return n.f})),r.d(t,"Matrix3",(function(){return n.a})),r.d(t,"Matrix4",(function(){return n.b})),r.d(t,"Quaternion",(function(){return n.c})),r.d(t,"config",(function(){return n.t})),r.d(t,"configure",(function(){return n.u})),r.d(t,"formatValue",(function(){return n.z})),r.d(t,"isArray",(function(){return n.A})),r.d(t,"clone",(function(){return n.s})),r.d(t,"equals",(function(){return n.x})),r.d(t,"exactEquals",(function(){return n.y})),r.d(t,"toRadians",(function(){return n.G})),r.d(t,"toDegrees",(function(){return n.F})),r.d(t,"radians",(function(){return n.C})),r.d(t,"degrees",(function(){return n.w})),r.d(t,"sin",(function(){return n.D})),r.d(t,"cos",(function(){return n.v})),r.d(t,"tan",(function(){return n.E})),r.d(t,"asin",(function(){return n.n})),r.d(t,"acos",(function(){return n.m})),r.d(t,"atan",(function(){return n.p})),r.d(t,"clamp",(function(){return n.r})),r.d(t,"lerp",(function(){return n.B})),r.d(t,"_withEpsilon",(function(){return n.l})),r.d(t,"checkNumber",(function(){return n.q})),r.d(t,"_MathUtils",(function(){return n.h})),r.d(t,"_SphericalCoordinates",(function(){return n.k})),r.d(t,"_Pose",(function(){return n.j})),r.d(t,"_Euler",(function(){return n.g})),r.d(t,"_Polygon",(function(){return n.i})),r.d(t,"assert",(function(){return n.o}))},function(e,t,r){"use strict";r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return l})),r.d(t,"l",(function(){return h})),r.d(t,"m",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"s",(function(){return g})),r.d(t,"r",(function(){return m})),r.d(t,"o",(function(){return y})),r.d(t,"i",(function(){return b})),r.d(t,"p",(function(){return _})),r.d(t,"h",(function(){return w})),r.d(t,"q",(function(){return x})),r.d(t,"b",(function(){return O})),r.d(t,"a",(function(){return E})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return j})),r.d(t,"n",(function(){return S})),r.d(t,"j",(function(){return P})),r.d(t,"k",(function(){return A})),r.d(t,"t",(function(){return T}));var n=r(11),i=r(150),a=r(16),o=r(91),s=1/Math.PI*180,u=1/180*Math.PI,c={};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)Object(o.a)(t in c),c[t]=e[t];return c}function f(e){return Math.round(e/c.EPSILON)*c.EPSILON}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.precision,n=void 0===r?c.precision||4:r;return e=f(e),"".concat(parseFloat(e.toPrecision(n)))}function d(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function p(e){return e.clone?e.clone():Object(i.a)(Array,Object(a.a)(e))}function v(e,t,r){if(d(e)){r=r||((i=e).clone?i.clone():new Array(i.length));for(var n=0;n<r.length&&n<e.length;++n)r[n]=t(e[n],n,r);return r}var i;return t(e)}function g(e){return y(e)}function m(e){return b(e)}function y(e,t){return v(e,(function(e){return e*u}),t)}function b(e,t){return v(e,(function(e){return e*s}),t)}function _(e){return v(e,(function(e){return Math.sin(e)}))}function w(e){return v(e,(function(e){return Math.cos(e)}))}function x(e){return v(e,(function(e){return Math.tan(e)}))}function O(e){return v(e,(function(e){return Math.asin(e)}))}function E(e){return v(e,(function(e){return Math.acos(e)}))}function k(e){return v(e,(function(e){return Math.atan(e)}))}function j(e,t,r){return v(e,(function(e){return Math.max(t,Math.min(r,e))}))}function S(e,t,r){return d(e)?e.map((function(e,n){return S(e,t[n],r)})):r*t+(1-r)*e}function P(e,t,r){var n=c.EPSILON;r&&(c.EPSILON=r);try{if(e===t)return!0;if(d(e)&&d(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!P(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=c.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{c.EPSILON=n}}function A(e,t){if(e===t)return!0;if(e&&"object"===Object(n.a)(e)&&t&&"object"===Object(n.a)(t)){if(e.constructor!==t.constructor)return!1;if(e.exactEquals)return e.exactEquals(t)}if(d(e)&&d(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!A(e[r],t[r]))return!1;return!0}return!1}function T(e,t){var r,n=c.EPSILON;c.EPSILON=e;try{r=t()}finally{c.EPSILON=n}return r}c.EPSILON=1e-12,c.debug=!1,c.precision=4,c.printTypes=!1,c.printDegrees=!1,c.printRowMajor=!0},function(e,t,r){"use strict";var n=r(142);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s}));var n=r(15);function i(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function a(e,t,r){if(n.f.debug&&!function(e,t){if(e.length!==t)return!1;for(var r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(""|r," some fields set to invalid numbers'"));return e}var o={};function s(e,t){o[e]||(o[e]=!0,console.warn("".concat(e," has been removed in version ").concat(t,", see upgrade guide for more information")))}},function(e,t,r){"use strict";var n=r(5);function i(e,t,r){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(n.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}r.d(t,"a",(function(){return i}))},function(e,t,r){(function(e){!function(r,n){"use strict";var i={};r.PubSub=i;var a=r.define;!function(e){var t={},r=-1;function n(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function i(e,t,r){try{e(t,r)}catch(n){setTimeout(function(e){return function(){throw e}}(n),0)}}function a(e,t,r){e(t,r)}function o(e,r,n,o){var s,u=t[r],c=o?a:i;if(t.hasOwnProperty(r))for(s in u)u.hasOwnProperty(s)&&c(u[s],e,n)}function s(e,r,i,a){var s=function(e,t,r){return function(){var n=String(e),i=n.lastIndexOf(".");for(o(e,e,t,r);-1!==i;)i=(n=n.substr(0,i)).lastIndexOf("."),o(e,n,t,r)}}(e="symbol"===typeof e?e.toString():e,r,a);return!!function(e){for(var r=String(e),i=Boolean(t.hasOwnProperty(r)&&n(t[r])),a=r.lastIndexOf(".");!i&&-1!==a;)a=(r=r.substr(0,a)).lastIndexOf("."),i=Boolean(t.hasOwnProperty(r)&&n(t[r]));return i}(e)&&(!0===i?s():setTimeout(s,0),!0)}e.publish=function(t,r){return s(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return s(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!==typeof n)return!1;e="symbol"===typeof e?e.toString():e,t.hasOwnProperty(e)||(t[e]={});var i="uid_"+String(++r);return t[e][i]=n,i},e.subscribeOnce=function(t,r){var n=e.subscribe(t,(function(){e.unsubscribe(n),r.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var r;for(r in t)t.hasOwnProperty(r)&&0===r.indexOf(e)&&delete t[r]},e.countSubscriptions=function(e){var r,n=0;for(r in t)t.hasOwnProperty(r)&&0===r.indexOf(e)&&n++;return n},e.getSubscriptions=function(e){var r,n=[];for(r in t)t.hasOwnProperty(r)&&0===r.indexOf(e)&&n.push(r);return n},e.unsubscribe=function(r){var n,i,a,o="string"===typeof r&&(t.hasOwnProperty(r)||function(e){var r;for(r in t)if(t.hasOwnProperty(r)&&0===r.indexOf(e))return!0;return!1}(r)),s=!o&&"string"===typeof r,u="function"===typeof r,c=!1;if(!o){for(n in t)if(t.hasOwnProperty(n)){if(i=t[n],s&&i[r]){delete i[r],c=r;break}if(u)for(a in i)i.hasOwnProperty(a)&&i[a]===r&&(delete i[a],c=!0)}return c}e.clearSubscriptions(r)}}(i),"function"===typeof a&&a.amd?a((function(){return i})):(void 0!==e&&e.exports&&(t=e.exports=i),t.PubSub=i,e.exports=t=i)}("object"===typeof window&&window||this)}).call(this,r(130)(e))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return o}));var n=r(22),i={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(i,"IDENTITY",{get:function(){return n.a.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var a={WEB_MERCATOR:1,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},o={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},function(e,t,r){"use strict";var n=r(208);t.a=new n.a({id:"deck"})},function(e,t,r){"use strict";var n=r(208);function i(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function a(e){for(var t in e)return!1;return!0}function o(e,t){if(e===t)return!0;var r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function s(e){if(e.canvas&&e.luma){var t=e.luma.canvasSizeInfo.clientWidth;return t?e.drawingBufferWidth/t:1}return 1}function u(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=s(e),i=e.drawingBufferWidth,a=e.drawingBufferHeight;return l(t,n,i,a,r)}function c(e){var t="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function l(e,t,r,n,i){var a,o=f(e[0],t,r),s=h(e[1],t,n,i),u=f(e[0]+1,t,r),c=u===r-1?u:u-1;return u=h(e[1]+1,t,n,i),i?(a=s,s=u=0===u?u:u+1):a=u===n-1?u:u-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(a-s+1,1)}}function f(e,t,r){return Math.min(Math.round(e*t),r-1)}function h(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}function d(e){return Boolean(e&&Number.isFinite(e._version))}function p(e){return Boolean(e&&2===e._version)}r.d(t,"i",(function(){return v})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"f",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"h",(function(){return p}));var v=new n.a({id:"luma.gl"})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"p",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"o",(function(){return u})),r.d(t,"n",(function(){return c})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return h})),r.d(t,"m",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return v})),r.d(t,"i",(function(){return g})),r.d(t,"h",(function(){return m})),r.d(t,"f",(function(){return y})),r.d(t,"b",(function(){return b}));var n=r(13);function i(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function a(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=r*s-n*o,b=r*u-i*o,_=r*c-a*o,w=n*u-i*s,x=n*c-a*s,O=i*c-a*u,E=l*v-f*p,k=l*g-h*p,j=l*m-d*p,S=f*g-h*v,P=f*m-d*v,A=h*m-d*g,T=y*A-b*P+_*S+w*j-x*k+O*E;return T?(T=1/T,e[0]=(s*A-u*P+c*S)*T,e[1]=(i*P-n*A-a*S)*T,e[2]=(v*O-g*x+m*w)*T,e[3]=(h*x-f*O-d*w)*T,e[4]=(u*j-o*A-c*k)*T,e[5]=(r*A-i*j+a*k)*T,e[6]=(g*_-p*O-m*b)*T,e[7]=(l*O-h*_+d*b)*T,e[8]=(o*P-s*j+c*E)*T,e[9]=(n*j-r*P-a*E)*T,e[10]=(p*x-v*_+m*y)*T,e[11]=(f*_-l*x-d*y)*T,e[12]=(s*k-o*S-u*E)*T,e[13]=(r*S-n*k+i*E)*T,e[14]=(v*b-p*w-g*y)*T,e[15]=(l*w-f*b+h*y)*T,e):null}function o(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15];return(t*o-r*a)*(f*g-h*v)-(t*s-n*a)*(l*g-h*p)+(t*u-i*a)*(l*v-f*p)+(r*s-n*o)*(c*g-h*d)-(r*u-i*o)*(c*v-f*d)+(n*u-i*s)*(c*p-l*d)}function s(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],y=t[15],b=r[0],_=r[1],w=r[2],x=r[3];return e[0]=b*n+_*s+w*f+x*v,e[1]=b*i+_*u+w*h+x*g,e[2]=b*a+_*c+w*d+x*m,e[3]=b*o+_*l+w*p+x*y,b=r[4],_=r[5],w=r[6],x=r[7],e[4]=b*n+_*s+w*f+x*v,e[5]=b*i+_*u+w*h+x*g,e[6]=b*a+_*c+w*d+x*m,e[7]=b*o+_*l+w*p+x*y,b=r[8],_=r[9],w=r[10],x=r[11],e[8]=b*n+_*s+w*f+x*v,e[9]=b*i+_*u+w*h+x*g,e[10]=b*a+_*c+w*d+x*m,e[11]=b*o+_*l+w*p+x*y,b=r[12],_=r[13],w=r[14],x=r[15],e[12]=b*n+_*s+w*f+x*v,e[13]=b*i+_*u+w*h+x*g,e[14]=b*a+_*c+w*d+x*m,e[15]=b*o+_*l+w*p+x*y,e}function u(e,t,r){var n,i,a,o,s,u,c,l,f,h,d,p,v=r[0],g=r[1],m=r[2];return t===e?(e[12]=t[0]*v+t[4]*g+t[8]*m+t[12],e[13]=t[1]*v+t[5]*g+t[9]*m+t[13],e[14]=t[2]*v+t[6]*g+t[10]*m+t[14],e[15]=t[3]*v+t[7]*g+t[11]*m+t[15]):(n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=n*v+s*g+f*m+t[12],e[13]=i*v+u*g+h*m+t[13],e[14]=a*v+c*g+d*m+t[14],e[15]=o*v+l*g+p*m+t[15]),e}function c(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function l(e,t,r,i){var a,o,s,u,c,l,f,h,d,p,v,g,m,y,b,_,w,x,O,E,k,j,S,P,A=i[0],T=i[1],R=i[2],C=Math.hypot(A,T,R);return C<n.b?null:(A*=C=1/C,T*=C,R*=C,a=Math.sin(r),s=1-(o=Math.cos(r)),u=t[0],c=t[1],l=t[2],f=t[3],h=t[4],d=t[5],p=t[6],v=t[7],g=t[8],m=t[9],y=t[10],b=t[11],_=A*A*s+o,w=T*A*s+R*a,x=R*A*s-T*a,O=A*T*s-R*a,E=T*T*s+o,k=R*T*s+A*a,j=A*R*s+T*a,S=T*R*s-A*a,P=R*R*s+o,e[0]=u*_+h*w+g*x,e[1]=c*_+d*w+m*x,e[2]=l*_+p*w+y*x,e[3]=f*_+v*w+b*x,e[4]=u*O+h*E+g*k,e[5]=c*O+d*E+m*k,e[6]=l*O+p*E+y*k,e[7]=f*O+v*E+b*k,e[8]=u*j+h*S+g*P,e[9]=c*j+d*S+m*P,e[10]=l*j+p*S+y*P,e[11]=f*j+v*S+b*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function f(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*n,e[5]=o*i+l*n,e[6]=s*i+f*n,e[7]=u*i+h*n,e[8]=c*i-a*n,e[9]=l*i-o*n,e[10]=f*i-s*n,e[11]=h*i-u*n,e}function h(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*n,e[1]=o*i-l*n,e[2]=s*i-f*n,e[3]=u*i-h*n,e[8]=a*n+c*i,e[9]=o*n+l*i,e[10]=s*n+f*i,e[11]=u*n+h*i,e}function d(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*n,e[1]=o*i+l*n,e[2]=s*i+f*n,e[3]=u*i+h*n,e[4]=c*i-a*n,e[5]=l*i-o*n,e[6]=f*i-s*n,e[7]=h*i-u*n,e}function p(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,c=r*o,l=n*o,f=n*s,h=i*o,d=i*s,p=i*u,v=a*o,g=a*s,m=a*u;return e[0]=1-f-p,e[1]=l+m,e[2]=h-g,e[3]=0,e[4]=l-m,e[5]=1-c-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t,r,n,i,a,o){var s=1/(r-t),u=1/(i-n),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}function g(e,t,r,n,i){var a,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function m(e,t,r,n,i,a,o){var s=1/(t-r),u=1/(n-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(o+a)*c,e[15]=1,e}function y(e,t,r,i){var a,o,s,u,c,l,f,h,d,p,v=t[0],g=t[1],m=t[2],y=i[0],b=i[1],_=i[2],w=r[0],x=r[1],O=r[2];return Math.abs(v-w)<n.b&&Math.abs(g-x)<n.b&&Math.abs(m-O)<n.b?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(f=v-w,h=g-x,d=m-O,a=b*(d*=p=1/Math.hypot(f,h,d))-_*(h*=p),o=_*(f*=p)-y*d,s=y*h-b*f,(p=Math.hypot(a,o,s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0),u=h*s-d*o,c=d*a-f*s,l=f*o-h*a,(p=Math.hypot(u,c,l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0),e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=o,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=l,e[10]=d,e[11]=0,e[12]=-(a*v+o*g+s*m),e[13]=-(u*v+c*g+l*m),e[14]=-(f*v+h*g+d*m),e[15]=1,e)}function b(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],y=e[15],b=t[0],_=t[1],w=t[2],x=t[3],O=t[4],E=t[5],k=t[6],j=t[7],S=t[8],P=t[9],A=t[10],T=t[11],R=t[12],C=t[13],M=t[14],I=t[15];return Math.abs(r-b)<=n.b*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-_)<=n.b*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-w)<=n.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-x)<=n.b*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-O)<=n.b*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(u-E)<=n.b*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-k)<=n.b*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-j)<=n.b*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(f-S)<=n.b*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(h-P)<=n.b*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(d-A)<=n.b*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(p-T)<=n.b*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(v-R)<=n.b*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(g-C)<=n.b*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(m-M)<=n.b*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-I)<=n.b*Math.max(1,Math.abs(y),Math.abs(I))}},function(e,t,r){"use strict";var n=r(122);var i=r(123);function a(e,t){return Object(n.a)(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}(e,t)||Object(i.a)()}r.d(t,"a",(function(){return a}))},function(e,t,r){"use strict";r.d(t,"h",(function(){return i})),r.d(t,"s",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return f})),r.d(t,"i",(function(){return h})),r.d(t,"k",(function(){return d})),r.d(t,"l",(function(){return p})),r.d(t,"m",(function(){return v})),r.d(t,"n",(function(){return g})),r.d(t,"r",(function(){return m})),r.d(t,"q",(function(){return y})),r.d(t,"o",(function(){return b})),r.d(t,"p",(function(){return _})),r.d(t,"j",(function(){return w})),r.d(t,"g",(function(){return x}));var n=".add",i="clear_please_wait",a="view.info",o="cells"+n,s="".concat("cells",".selection"),u="".concat("cells",".color"),c="".concat("cells",".hover"),l="".concat("cells",".sets.modify"),f="".concat("cells",".sets.view"),h="clusters"+n,d="factors"+n,p="genes"+n,v="molecules"+n,g="neighborhoods"+n,m="".concat("status",".warn"),y="".concat("status",".info"),b="raster"+n,_=function(e){return"".concat("sliders",".change.").concat(e)},w=function(e){return"".concat("colors",".change.").concat(e)},x=function(e){return"".concat("channel_visibility",".change.").concat(e)}},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(98);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(n.a)(e,t)}},function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(34);function a(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?Object(i.a)(e):t}r.d(t,"a",(function(){return a}))},function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,"a",(function(){return n}))},,,function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(38),u=r(7),c=r(10),l=r(49);function f(e,t){var r=l.n([],t,e);return l.k(r,r,1/r[3]),r}function h(e,t){var r=e%t;return r<0?t+r:r}function d(e,t,r){return r*t+(1-r)*e}var p=r(25),v=r(52),g=r(39);function m(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}var y=Math.PI,b=y/4,_=y/180,w=180/y;function x(e){return Math.pow(2,e)}function O(e){return Math.log2(e)}function E(e){var t=Object(c.a)(e,2),r=t[0],n=t[1];m(Number.isFinite(r)),m(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");var i=n*_;return[512*(r*_+y)/(2*y),512*(y+Math.log(Math.tan(b+.5*i)))/(2*y)]}function k(e){var t=Object(c.a)(e,2),r=t[0],n=t[1],i=r/512*(2*y)-y,a=2*(Math.atan(Math.exp(n/512*(2*y)-y))-b);return[i*w,a*w]}function j(e){var t=e.latitude;return m(Number.isFinite(t)),O(4003e4*Math.cos(t*_))-9}function S(e){var t=e.latitude,r=e.longitude,n=e.highPrecision,i=void 0!==n&&n;m(Number.isFinite(t)&&Number.isFinite(r));var a={},o=Math.cos(t*_),s=512/360/o,u=512/4003e4/o;if(a.unitsPerMeter=[u,u,u],a.metersPerUnit=[1/u,1/u,1/u],a.unitsPerDegree=[512/360,s,u],a.degreesPerUnit=[.703125,1/s,1/u],i){var c=_*Math.tan(t*_)/o,l=512/360*c/2,f=512/4003e4*c,h=f/s*u;a.unitsPerDegree2=[0,l,f],a.unitsPerMeter2=[h,0,h]}return a}function P(e,t){var r=Object(c.a)(e,3),n=r[0],i=r[1],a=r[2],o=Object(c.a)(t,3),s=o[0],u=o[1],l=o[2],f=S({longitude:n,latitude:i,highPrecision:!0}),h=f.unitsPerMeter,d=f.unitsPerMeter2,p=E(e);p[0]+=s*(h[0]+d[0]*u),p[1]+=u*(h[1]+d[1]*u);var v=k(p),g=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[v[0],v[1],g]:v}function A(e){var t=e.height,r=e.pitch,n=e.bearing,i=e.altitude,a=e.scale,o=e.center,s=void 0===o?null:o,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return p.o(u,u,[0,0,-i]),p.k(u,u,-r*_),p.m(u,u,n*_),a/=t,p.n(u,u,[a,a,a]),s&&p.o(u,u,g.h([],s)),u}function T(e){var t=e.width,r=e.height,n=e.altitude,i=void 0===n?1.5:n,a=e.pitch,o=void 0===a?0:a,s=e.nearZMultiplier,u=void 0===s?1:s,c=e.farZMultiplier,l=void 0===c?1:c,f=o*_,h=Math.atan(.5/i),d=Math.sin(h)*i/Math.sin(Math.PI/2-f-h);return{fov:2*h,aspect:t/r,focalDistance:i,near:u,far:(Math.cos(Math.PI/2-f)*d+i)*l}}function R(e){var t=e.width,r=e.height,n=e.pitch,i=T({width:t,height:r,altitude:e.altitude,pitch:n,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),a=i.fov,o=i.aspect,s=i.near,u=i.far;return p.i([],a,o,s,u)}function C(e,t){var r=Object(c.a)(e,3),n=r[0],i=r[1],a=r[2],o=void 0===a?0:a;return m(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o)),f(t,[n,i,o,1])}function M(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object(c.a)(e,3),i=n[0],a=n[1],o=n[2];if(m(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=f(t,[i,a,o,1]);return s}var u=f(t,[i,a,0,1]),l=f(t,[i,a,1,1]),h=u[2],d=l[2],p=h===d?0:((r||0)-h)/(d-h);return v.c([],u,l,p)}var I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(e){var t=e.width,r=e.height,n=e.bounds,i=e.minExtent,a=void 0===i?0:i,o=e.maxZoom,s=void 0===o?24:o,u=e.padding,l=void 0===u?0:u,f=e.offset,h=void 0===f?[0,0]:f,d=Object(c.a)(n,2),p=Object(c.a)(d[0],2),v=p[0],g=p[1],y=Object(c.a)(d[1],2),b=y[0],_=y[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else m(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var w=new F({width:t,height:r,longitude:0,latitude:0,zoom:0}),x=w.project([v,_]),O=w.project([b,g]),E=[Math.max(Math.abs(O[0]-x[0]),a),Math.max(Math.abs(O[1]-x[1]),a)],k=[t-l.left-l.right-2*Math.abs(h[0]),r-l.top-l.bottom-2*Math.abs(h[1])];m(k[0]>0&&k[1]>0);var j=k[0]/E[0],S=k[1]/E[1],P=(l.right-l.left)/2/j,A=(l.bottom-l.top)/2/S,T=[(O[0]+x[0])/2+P,(O[1]+x[1])/2+A],R=w.unproject(T),C=Math.min(s,w.zoom+Math.log2(Math.abs(Math.min(j,S))));return m(Number.isFinite(C)),{longitude:R[0],latitude:R[1],zoom:C}}var F=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.width,u=r.height,c=r.latitude,l=void 0===c?0:c,f=r.longitude,h=void 0===f?0:f,d=r.zoom,p=void 0===d?0:d,v=r.pitch,g=void 0===v?0:v,m=r.bearing,y=void 0===m?0:m,b=r.altitude,_=void 0===b?1.5:b,w=r.nearZMultiplier,O=void 0===w?.02:w,k=r.farZMultiplier,j=void 0===k?1.01:k;Object(n.a)(this,t),i=i||1,u=u||1;var P=x(p);_=Math.max(.75,_);var T=E([h,l]);T[2]=0;var C=R({width:i,height:u,pitch:g,bearing:y,altitude:_,nearZMultiplier:O,farZMultiplier:j}),M=A({height:u,scale:P,center:T,pitch:g,bearing:y,altitude:_});return(e=Object(a.a)(this,Object(o.a)(t).call(this,{width:i,height:u,scale:P,viewMatrix:M,projectionMatrix:C}))).latitude=l,e.longitude=h,e.zoom=p,e.pitch=g,e.bearing=y,e.altitude=_,e.center=T,e.unitsPerMeter=S(Object(s.a)(e)).unitsPerMeter[2],Object.freeze(Object(s.a)(e)),e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"projectFlat",value:function(e){return E(e)}},{key:"unprojectFlat",value:function(e){return k(e)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=M(e.pos,this.pixelUnprojectionMatrix),n=E(t),i=v.a([],n,v.d([],r));return k(v.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,i=this.height,a=L(Object.assign({width:n,height:i,bounds:e},r)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:n,height:i,longitude:o,latitude:s,zoom:u})}}]),t}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width,i=t.height,a=t.scale,o=t.viewMatrix,s=void 0===o?I:o,u=t.projectionMatrix,c=void 0===u?I:u;Object(n.a)(this,e),this.width=r||1,this.height=i||1,this.scale=a,this.unitsPerMeter=1,this.viewMatrix=s,this.projectionMatrix=c;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.g(l,l,this.projectionMatrix),p.g(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.n(f,f,[this.width/2,-this.height/2,1]),p.o(f,f,[1,-1,0]),p.g(f,f,this.viewProjectionMatrix);var h=p.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=h,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(i.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&p.b(t.projectionMatrix,this.projectionMatrix)&&p.b(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=this.projectPosition(e),a=C(i,this.pixelProjectionMatrix),o=Object(c.a)(a,2),s=o[0],u=o[1],l=n?u:this.height-u;return 2===e.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=t.targetZ,a=Object(c.a)(e,3),o=a[0],s=a[1],u=a[2],l=n?s:this.height-s,f=i&&i*this.unitsPerMeter,h=M([o,l,u],this.pixelUnprojectionMatrix,f),d=this.unprojectPosition(h),p=Object(c.a)(d,3),v=p[0],g=p[1],m=p[2];return Number.isFinite(u)?[v,g,m]:Number.isFinite(i)?[v,g,i]:[v,g]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),r=Object(c.a)(t,2);return[r[0],r[1],(e[2]||0)*this.unitsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),r=Object(c.a)(t,2);return[r[0],r[1],(e[2]||0)/this.unitsPerMeter]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),e}());function N(e){var t=e.width,r=e.height,n=e.longitude,i=e.latitude,a=e.zoom,o=e.pitch,s=void 0===o?0:o,u=e.bearing,c=void 0===u?0:u;(n<-180||n>180)&&(n=h(n+180,360)-180),(c<-180||c>180)&&(c=h(c+180,360)-180);var l=new F({width:t,height:r,longitude:n,latitude:i,zoom:a}),f=l.project([n,85.05113])[1],d=l.project([n,-85.05113])[1],p=0;return d-f<r&&(a+=Math.log2(r/(d-f)),f=(l=new F({width:t,height:r,longitude:n,latitude:i,zoom:a})).project([n,85.05113])[1],d=l.project([n,-85.05113])[1]),f>0?p=f:d<r&&(p=d-r),p&&(i=l.unproject([t/2,r/2+p])[1]),{width:t,height:r,longitude:n,latitude:i,zoom:a,pitch:s,bearing:c}}var D=["longitude","latitude","zoom"],B={curve:1.414,speed:1.2};function U(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},a=V(e,t,n),o=a.startZoom,s=a.startCenterXY,u=a.uDelta,c=a.w0,l=a.u1,f=a.S,h=a.rho,p=a.rho2,g=a.r0;if(l<.01){var m=!0,y=!1,b=void 0;try{for(var _,w=D[Symbol.iterator]();!(m=(_=w.next()).done);m=!0){var x=_.value,E=e[x],j=t[x];i[x]=d(E,j,r)}}catch(I){y=!0,b=I}finally{try{m||null==w.return||w.return()}finally{if(y)throw b}}return i}var S=r*f,P=Math.cosh(g)/Math.cosh(g+h*S),A=c*((Math.cosh(g)*Math.tanh(g+h*S)-Math.sinh(g))/p)/l,T=1/P,R=o+O(T),C=v.e([],u,A);v.a(C,C,s);var M=k(C);return i.longitude=M[0],i.latitude=M[1],i.zoom=R,i}function z(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n=Object.assign({},B,n),a=i.screenSpeed,o=i.speed,s=i.maxDuration,u=V(e,t,n),c=u.S,l=u.rho,f=1e3*c;return r=Number.isFinite(a)?f/(a/l):f/o,Number.isFinite(s)&&r>s?0:r}function V(e,t,r){var n=(r=Object.assign({},B,r)).curve,i=e.zoom,a=[e.longitude,e.latitude],o=x(i),s=t.zoom,u=[t.longitude,t.latitude],c=x(s-i),l=E(a),f=E(u),h=v.f([],f,l),d=Math.max(e.width,e.height),p=d/c,g=v.b(h)*o,m=Math.max(g,.01),y=n*n,b=(p*p-d*d+y*y*m*m)/(2*d*y*m),_=(p*p-d*d-y*y*m*m)/(2*p*y*m),w=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(_*_+1)-_);return{startZoom:i,startCenterXY:l,uDelta:h,w0:d,u1:g,S:(O-w)/n,rho:n,rho2:y,r0:w,r1:O}}r.d(t,"c",(function(){return F})),r.d(t,"a",(function(){return F})),r.d(t,"d",(function(){return L})),r.d(t,"m",(function(){return N})),r.d(t,"e",(function(){return U})),r.d(t,"g",(function(){return z})),r.d(t,"l",(function(){return E})),r.d(t,"p",(function(){return k})),r.d(t,"q",(function(){return C})),r.d(t,"n",(function(){return M})),r.d(t,"r",(function(){return x})),r.d(t,"o",(function(){return O})),r.d(t,"h",(function(){return j})),r.d(t,"f",(function(){return S})),r.d(t,"b",(function(){return P})),r.d(t,"k",(function(){return A})),r.d(t,"i",(function(){return R})),r.d(t,"j",(function(){return T}))},function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"g",(function(){return a})),r.d(t,"e",(function(){return o})),r.d(t,"h",(function(){return s})),r.d(t,"i",(function(){return u})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"o",(function(){return f})),r.d(t,"n",(function(){return h})),r.d(t,"p",(function(){return d})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return v})),r.d(t,"l",(function(){return g})),r.d(t,"a",(function(){return m})),r.d(t,"m",(function(){return y})),r.d(t,"f",(function(){return b}));var n=r(13);function i(){var e=new n.a(3);return n.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function o(e,t,r){var i=new n.a(3);return i[0]=e,i[1]=t,i[2]=r,i}function s(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function u(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function c(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function l(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2];return e[0]=i*u-a*s,e[1]=a*o-n*u,e[2]=n*s-i*o,e}function f(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}function h(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e}function d(e,t,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=t[0],u=t[1],c=t[2],l=i*c-a*u,f=a*s-n*c,h=n*u-i*s,d=i*h-a*f,p=a*l-n*h,v=n*f-i*l,g=2*o;return l*=g,f*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+l+d,e[1]=u+f+p,e[2]=c+h+v,e}function p(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function v(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function g(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function m(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(a*a+o*o+s*s),l=u&&c(e,t)/u;return Math.acos(Math.min(Math.max(l,-1),1))}var y=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},b=a;!function(){var e=i()}()},function(e,t,r){e.exports=r(462)},,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"g",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"l",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"k",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"m",(function(){return f})),r.d(t,"j",(function(){return h})),r.d(t,"d",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"n",(function(){return v})),r.d(t,"o",(function(){return g})),r.d(t,"f",(function(){return m})),r.d(t,"e",(function(){return y}));var n=r(13);function i(e){var t=new n.a(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,r,i){var a=new n.a(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function u(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function l(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function f(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function h(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o,e}function d(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function p(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e[3]=s+n*(r[3]-s),e}function v(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}function g(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*a-u*i,f=c*i+u*n-o*a,h=c*a+o*i-s*n,d=-o*n-s*i-u*a;return e[0]=l*c+d*-o+f*-u-h*-s,e[1]=f*c+d*-s+h*-o-l*-u,e[2]=h*c+d*-u+l*-s-f*-o,e[3]=t[3],e}function m(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function y(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-s)<=n.b*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=n.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=n.b*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-l)<=n.b*Math.max(1,Math.abs(o),Math.abs(l))}!function(){var e=function(){var e=new n.a(4);return n.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}()},function(e,t,r){"use strict";var n=r(121);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";(function(e,n){r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));var i=r(11),a={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof e&&e,document:"undefined"!==typeof document&&document,process:"object"===("undefined"===typeof n?"undefined":Object(i.a)(n))&&n},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,r(62),r(68))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"i",(function(){return f})),r.d(t,"j",(function(){return h})),r.d(t,"f",(function(){return d}));var n=r(13);function i(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function a(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function o(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function s(e,t){return e[0]=-t[0],e[1]=-t[1],e}function u(e,t,r,n){var i=t[0],a=t[1];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e}function c(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function l(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function f(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function h(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}var d=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e};!function(){var e=function(){var e=new n.a(2);return n.a!=Float32Array&&(e[0]=0,e[1]=0),e}()}()},,function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o}));var n=r(22),i={};function a(e){i=e}function o(e){var t;n.a.level>0&&i[e]&&(t=i[e]).call.apply(t,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var n={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},i={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(38),u=r(7),c=r(66),l=r(79),f=r(83),h=r(108),d=r(9),p=r(253),v=r(28),g={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},m={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:g},y={removedProps:g},b=function(e){function t(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,e,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=i.target||(r.gl.webgl2?36662:34962),r.initialize(i),Object.seal(Object(s.a)(r)),r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Object(p.a)("Buffer",e,m),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=Object(p.a)("Buffer",e,y))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new l.a(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,r=t.data,n=t.offset,i=void 0===n?0:n,a=t.srcOffset,o=void 0===a?0:a,s=e.byteLength||e.length;Object(v.a)(r);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==s?(Object(f.a)(this.gl),this.gl.bufferSubData(this.target,i,r,o,s)):this.gl.bufferSubData(u,i,r),this.gl.bindBuffer(u,null),this.debugData=null,this._inferType(r),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,r=e.readOffset,n=void 0===r?0:r,i=e.writeOffset,a=void 0===i?0:i,o=e.size,s=this.gl;return Object(f.a)(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,r=void 0===t?null:t,n=e.srcByteOffset,i=void 0===n?0:n,a=e.dstOffset,o=void 0===a?0:a,s=e.length,u=void 0===s?0:s;Object(f.a)(this.gl);var c,l,d=Object(h.c)(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(i),g=o;r?c=(l=r.length)-g:l=g+(c=Math.min(p,u||p));var m=Math.min(p,c);return u=u||m,Object(v.a)(u<=m),r=r||new d(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,r,o,u),this.gl.bindBuffer(36662,null),r}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,i=void 0===n?this.accessor&&this.accessor.index:n,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===r||35982===r?void 0!==s?this.gl.bindBufferRange(r,i,this.handle,o,s):(Object(v.a)(0===o),this.gl.bindBufferBase(r,i,this.handle)):this.gl.bindBuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,i=void 0===n?this.accessor&&this.accessor.index:n,a=35345===r||35982===r;return a?this.gl.bindBufferBase(r,i,null):this.gl.bindBuffer(r,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Object(v.a)(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,this.usage),this.gl.bufferSubData(n,t,e),this.gl.bindBuffer(n,null),this.debugData=e.slice(0,10),this.bytesUsed=r,this._trackAllocatedMemory(r);var i=Object(h.b)(e);return Object(v.a)(i),this.setAccessor(new l.a(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(e>=0),this._trackDeallocatedMemory();var r=e;0===e&&(r=new Float32Array(0));var n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new l.a(this.accessor,{type:Object(h.b)(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return d.h.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return d.h.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new l.a(this.accessor,e),this}},{key:"type",get:function(){return d.h.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return d.h.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),t}(c.a)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(63);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},,,function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},function(e,t){e.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){Object(n.a)(e,t,r[t])}))}return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),i=r(3),a=r(9),o=r(182),s=r(83),u=r(125),c=r(138),l=r(28),f=r(475),h="Resource subclass must define virtual methods",d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e),Object(s.b)(t);var i=r.id,a=r.userData,o=void 0===a?{}:a;this.gl=t,this.id=i||Object(c.c)(this.constructor.name),this.userData=o,this._bound=!1,this._handle=r.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(i.a)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,r=void 0!==t&&t,n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&r&&n.filter(Boolean).forEach((function(e){e.delete()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(u.b)(this.gl,e),Object(l.a)(e);var r=this.constructor.PARAMETERS||{},n=r[e];if(n){var i=Object(a.g)(this.gl),o=(!("webgl2"in n)||i)&&(!("extension"in n)||this.gl.getExtension(n.extension));if(!o){var s=n.webgl1,c="webgl2"in n?n.webgl2:n.webgl1,f=i?c:s;return f}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=t.parameters,n=t.keys,i=this.constructor.PARAMETERS||{},o=Object(a.g)(this.gl),s={},c=r||Object.keys(i),l=!0,f=!1,h=void 0;try{for(var d,p=c[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value,g=i[v],m=g&&(!("webgl2"in g)||o)&&(!("extension"in g)||this.gl.getExtension(g.extension));if(m){var y=n?Object(u.a)(this.gl,v):v;s[y]=this.getParameter(v,e),n&&"GLenum"===g.type&&(s[y]=Object(u.a)(this.gl,s[y]))}}}catch(b){f=!0,h=b}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}return s}},{key:"setParameter",value:function(e,t){e=Object(u.b)(this.gl,e),Object(l.a)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var n=Object(a.g)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=Object(u.b)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,r){return Object(f.a)(this,e,t,r)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(h)}},{key:"_deleteHandle",value:function(){throw new Error(h)}},{key:"_bindHandle",value:function(){throw new Error(h)}},{key:"_getOptsFromHandle",value:function(){throw new Error(h)}},{key:"_getParameter",value:function(e,t){throw new Error(h)}},{key:"_setParameter",value:function(e,t){throw new Error(h)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=o.a.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;o.a.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,r=o.a.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=o.a.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return g})),r.d(t,"c",(function(){return m})),r.d(t,"f",(function(){return y}));var n=r(106),i=r(14);function a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(e,t){var r=e%t;return r<0?t+r:r}function s(e){var t=e.viewMatrix,r=e.viewMatrixInverse;return{eye:[r[12],r[13],r[14]],direction:[-t[2],-t[6],-t[10]],up:[t[1],t[5],t[9]],right:[t[0],t[4],t[8]]}}var u,c=new i.Vector3,l=new i.Vector3,f=new i.Vector3,h=new i.Vector3,d=new i.Vector3,p=new i.Vector3,v=new i.Vector3;function g(e){var t=e.aspect,r=e.near,n=e.far,a=e.fovyRadians,o=e.position,s=e.direction,u=e.up,g=e.right;l.copy(s);var m=1/l.len();l.normalize(),c.copy(o),f.copy(u);var y=1/f.len();f.normalize(),h.copy(g).normalize();var b=2*Math.tan(a/2)*r*y,_=b*t;d.copy(l).scale(r*m).add(c),p.copy(l).scale(n*m).add(c);var w=l.clone().negate(),x=w.dot(d),O={near:{distance:x,normal:w},far:{distance:l.dot(p),normal:l.clone()}};return v.copy(h).scale(.5*_).add(d).subtract(c).normalize(),w=new i.Vector3(v).cross(f),x=c.dot(w),O.right={normal:w,distance:x},v.copy(h).scale(.5*-_).add(d).subtract(c).normalize(),w=new i.Vector3(f).cross(v),x=c.dot(w),O.left={normal:w,distance:x},v.copy(f).scale(.5*b).add(d).subtract(c).normalize(),w=new i.Vector3(h).cross(v),x=c.dot(w),O.top={normal:w,distance:x},v.copy(f).scale(.5*-b).add(d).subtract(c).normalize(),w=new i.Vector3(v).cross(h),x=c.dot(w),O.bottom={normal:w,distance:x},O}function m(e){return e-Math.fround(e)}function y(e,t){var r=t.size,i=void 0===r?1:r,a=t.startIndex,o=void 0===a?0:a,s=t.endIndex;Number.isFinite(s)||(s=e.length);var c=(s-o)/i;u=n.a.allocate(u,c,{type:Float32Array,size:2*i});for(var l=o,f=0;l<s;){for(var h=0;h<i;h++){var d=e[l++];u[f+h]=d,u[f+h+i]=m(d)}f+=2*i}return u.subarray(0,c*i*2)}},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(e,t,r){"use strict";function n(e){var t=e.source,r=e.target,n=e.start,i=void 0===n?0:n,a=e.end,o=e.getData;a=a||r.length;var s=t.length,u=a-i;if(s>u)r.set(t.subarray(0,u),i);else if(r.set(t,i),o)for(var c=s;c<u;)for(var l=o(c,t),f=0;f<l.length;f++)r[i+c]=l[f],c++}r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return l}));var i={interpolation:{duration:0,easing:function(e){return e}},spring:{stiffness:.05,damping:.5}};function a(e,t){return e?(Number.isFinite(e)&&(e={duration:e}),e.type=e.type||"interpolation",Object.assign({},i[e.type],t,e)):null}function o(e,t){return t.getBuffer()?[t.getBuffer(),{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function s(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function u(e){e.push(e.shift())}function c(e,t){var r=e.doublePrecision,n=e.settings,i=e.value,a=e.size,o=r?2:1;return(n.noAlloc?i.length:t*a)*o}function l(e){var t=e.buffer,r=e.numInstances,i=e.attribute,a=e.fromLength,o=e.fromStartIndices,s=e.getData,u=void 0===s?function(e){return e}:s,l=i.doublePrecision?2:1,f=i.size*l,h=i.byteOffset,d=i.startIndices,p=o&&d,v=c(i,r),g=i.state.constant;if(p||!(a>=v)){var m=g?i.value:i.getBuffer().getData({srcByteOffset:h});if(i.settings.normalized&&!g){var y=u;u=function(e,t){return i._normalizeConstant(y(e,t))}}var b=g?function(e,t){return u(m,t)}:function(e,t){return u(m.subarray(e,e+f),t)},_=t.getData({length:a}),w=new Float32Array(v);!function(e){var t=e.source,r=e.target,i=e.size,a=e.getData,o=e.sourceStartIndices,s=e.targetStartIndices;if(!Array.isArray(s))return n({source:t,target:r,getData:a}),r;for(var u=0,c=0,l=a&&function(e,t){return a(e+c,t)},f=Math.min(o.length,s.length),h=1;h<f;h++){var d=o[h]*i,p=s[h]*i;n({source:t.subarray(u,d),target:r,start:c,end:p,getData:l}),u=d,c=p}c<r.length&&n({source:[],target:r,start:c,getData:l})}({source:_,target:w,sourceStartIndices:o,targetStartIndices:d,size:f,getData:b}),t.byteLength<w.byteLength+h&&t.reallocate(w.byteLength+h),t.subData({data:w,offset:h})}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(10),i=r(2),a=r(3),o=r(22),s=r(67),u=r(14),c=r(25),l=r(37),f=r(21),h=Math.PI/180,d=Object(s.a)(),p=[0,0,0],v={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var r=t.id,n=void 0===r?null:r,a=t.x,o=void 0===a?0:a,s=t.y,u=void 0===s?0:s,c=t.width,l=void 0===c?1:c,f=t.height,h=void 0===f?1:f;this.id=n||this.constructor.displayName||"viewport",this.x=o,this.y=u,this.width=l||1,this.height=h||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(a.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Object(u.equals)(t.projectionMatrix,this.projectionMatrix)&&Object(u.equals)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,i=void 0===r||r,a=this.projectPosition(e),o=Object(l.q)(a,this.pixelProjectionMatrix),s=Object(n.a)(o,2),u=s[0],c=s[1],f=i?c:this.height-c;return 2===e.length?[u,f]:[u,f,o[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,i=void 0===r||r,a=t.targetZ,o=Object(n.a)(e,3),s=o[0],u=o[1],c=o[2],f=i?u:this.height-u,h=a&&a*this.distanceScales.unitsPerMeter[2],d=Object(l.n)([s,f,c],this.pixelUnprojectionMatrix,h),p=this.unprojectPosition(d),v=Object(n.a)(p,3),g=v[0],m=v[1],y=v[2];return Number.isFinite(c)?[g,m,y]:Number.isFinite(a)?[g,m,a]:[g,m]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),r=Object(n.a)(t,2);return[r[0],r[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),r=Object(n.a)(t,2);return[r[0],r[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return this.isGeospatial?Object(l.l)(e):e}},{key:"unprojectFlat",value:function(e){return this.isGeospatial?Object(l.p)(e):e}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?Object(l.f)({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(e){var t=e.x,r=e.y,n=e.width,i=void 0===n?1:n,a=e.height,o=void 0===a?1:a;return t<this.x+this.width&&this.x<t+i&&r<this.y+this.height&&this.y<r+o}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var e=this.projectionProps,t=e.near,r=e.far,n=e.fovyRadians,i=e.aspect;return Object.assign(this._frustumPlanes,Object(s.d)({aspect:i,near:t,far:r,fovyRadians:n,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(e){var t=e.orthographic,r=e.fovyRadians,n=e.aspect,i=e.focalDistance,a=e.near,o=e.far;return t?(new u.Matrix4).orthographic({fovy:r,aspect:n,focalDistance:i,near:a,far:o}):(new u.Matrix4).perspective({fovy:r,aspect:n,near:a,far:o})}},{key:"_initViewMatrix",value:function(e){var t=e.viewMatrix,r=void 0===t?d:t,n=e.longitude,i=void 0===n?null:n,a=e.latitude,o=void 0===a?null:a,s=e.zoom,c=void 0===s?null:s,f=e.position,h=void 0===f?null:f,g=e.modelMatrix,m=void 0===g?null:g,y=e.focalDistance,b=void 0===y?1:y,_=e.distanceScales,w=void 0===_?null:_;this.isGeospatial=Number.isFinite(o)&&Number.isFinite(i),this.zoom=c,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(l.h)({latitude:o})+Math.log2(b):0);var x=Math.pow(2,this.zoom);this.scale=x,this.distanceScales=this.isGeospatial?Object(l.f)({latitude:o,longitude:i}):w||v,this.focalDistance=b,this.distanceScales.metersPerUnit=new u.Vector3(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new u.Vector3(this.distanceScales.unitsPerMeter),this.position=p,this.meterOffset=p,h&&(this.position=h,this.modelMatrix=m,this.meterOffset=m?m.transformVector(h):h),this.isGeospatial?(this.longitude=i,this.latitude=o,this.center=this._getCenterInWorld({longitude:i,latitude:o})):this.center=h?this.projectPosition(h):[0,0,0],this.viewMatrixUncentered=r,this.viewMatrix=(new u.Matrix4).multiplyRight(this.viewMatrixUncentered).translate(new u.Vector3(this.center||p).negate())}},{key:"_getCenterInWorld",value:function(e){var t=e.longitude,r=e.latitude,n=this.meterOffset,i=this.distanceScales,a=this.projectFlat([t,r]),o=new u.Vector3(a[0],a[1],0);if(n){var s=new u.Vector3(n).scale(i.unitsPerMeter);o.add(s)}return o}},{key:"_initProjectionMatrix",value:function(e){var t=e.projectionMatrix,r=void 0===t?null:t,n=e.orthographic,i=void 0!==n&&n,a=e.fovyRadians,o=e.fovy,s=void 0===o?75:o,u=e.near,c=void 0===u?.1:u,l=e.far,f=void 0===l?1e3:l,d=e.focalDistance,p=void 0===d?1:d;this.projectionProps={orthographic:i,fovyRadians:a||s*h,aspect:this.width/this.height,focalDistance:p,near:c,far:f},this.projectionMatrix=r||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var e=Object(s.a)();c.g(e,e,this.projectionMatrix),c.g(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=c.e([],this.viewMatrix)||this.viewMatrix;var t=Object(s.b)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),r=t.eye,n=t.direction,i=t.up,a=t.right;this.cameraPosition=r,this.cameraDirection=n,this.cameraUp=i,this.cameraRight=a;var u=Object(s.a)(),l=Object(s.a)();c.n(u,u,[this.width/2,-this.height/2,1]),c.o(u,u,[1,-1,0]),c.g(l,u,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=u,this.pixelUnprojectionMatrix=c.e(Object(s.a)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||o.a.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?f.c.WEB_MERCATOR:f.c.WEB_MERCATOR_AUTO_OFFSET:f.c.IDENTITY}}]),e}();g.displayName="Viewport"},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(2),i=r(6),a=r(5),o=r(3),s=r(7),u=r(66),c=r(57),l=r(107),f=r(9),h=r(40),d=r(83),p=r(138),v=r(28),g=[9729,9728],m=h.global.WebGLBuffer||function(){},y=function(e){function t(e,r){var o;Object(n.a)(this,t);var s=r.id,u=void 0===s?Object(p.c)("texture"):s,c=r.handle,l=r.target;return(o=Object(i.a)(this,Object(a.a)(t).call(this,e,{id:u,handle:c}))).target=l,o.textureUnit=void 0,o.loaded=!1,o.width=void 0,o.height=void 0,o.depth=void 0,o.format=void 0,o.type=void 0,o.dataFormat=void 0,o.border=void 0,o.textureUnit=void 0,o.mipmaps=void 0,o}return Object(s.a)(t,e),Object(o.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.format,n=t.linearFiltering,i=!0;return r&&(i=(i=i&&Object(l.d)(e,r))&&(!n||Object(l.e)(e,r))),i}}]),Object(o.a)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then((function(r){return e.initialize(Object.assign({},t,{pixels:r,data:r}))})),this;var n=t.pixels,i=void 0===n?null:n,a=t.format,o=void 0===a?6408:a,s=t.border,u=void 0===s?0:s,c=t.recreate,l=void 0!==c&&c,h=t.parameters,d=void 0===h?{}:h,p=t.pixelStore,v=void 0===p?{}:p,g=t.textureUnit,m=void 0===g?void 0:g,y=t.mipmaps,b=void 0===y||y;r||(r=i);var _=t.width,w=t.height,x=t.dataFormat,O=t.type,E=t.depth,k=void 0===E?0:E,j=this._deduceParameters({format:o,type:O,dataFormat:x,compressed:!1,data:r,width:_,height:w});return _=j.width,w=j.height,x=j.dataFormat,O=j.type,this.width=_,this.height=w,this.depth=k,this.format=o,this.type=O,this.dataFormat=x,this.border=u,this.textureUnit=m,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),b&&this._isNPOT()&&(f.h.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),b=!1,this._updateForNPOT(d)),this.mipmaps=b,this.setImageData({data:r,width:_,height:w,depth:k,format:o,type:O,dataFormat:x,border:u,mipmaps:b,parameters:v}),b&&this.generateMipmap(),this.setParameters(d),l&&(this.data=r),this}},{key:"resize",value:function(e){var t=e.height,r=e.width,n=e.mipmaps,i=void 0!==n&&n;return r!==this.width||t!==this.height?this.initialize({width:r,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(f.h.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(f.l)(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,r=void 0===t?this.target:t,n=e.pixels,i=void 0===n?null:n,a=e.level,o=void 0===a?0:a,s=e.format,u=void 0===s?this.format:s,c=e.border,h=void 0===c?this.border:c,p=e.offset,g=void 0===p?0:p,m=e.parameters,y=void 0===m?{}:m,b=e.data,_=void 0===b?null:b,w=e.type,x=void 0===w?this.type:w,O=e.width,E=void 0===O?this.width:O,k=e.height,j=void 0===k?this.height:k,S=e.dataFormat,P=void 0===S?this.dataFormat:S,A=e.compressed,T=void 0!==A&&A;_||(_=i);var R=this._deduceParameters({format:u,type:x,dataFormat:P,compressed:T,data:_,width:E,height:j});x=R.type,P=R.dataFormat,T=R.compressed,E=R.width,j=R.height;var C=this.gl;C.bindTexture(this.target,this.handle);var M,I=this._getDataType({data:_,compressed:T});if(_=I.data,M=I.dataType,Object(f.l)(this.gl,y,(function(){switch(M){case"null":C.texImage2D(r,o,u,E,j,h,P,x,_);break;case"typed-array":C.texImage2D(r,o,u,E,j,h,P,x,_,g);break;case"buffer":Object(d.a)(C),C.bindBuffer(35052,_.handle||_),C.texImage2D(r,o,u,E,j,h,P,x,g),C.bindBuffer(35052,null);break;case"browser-object":Object(f.g)(C)?C.texImage2D(r,o,u,E,j,h,P,x,_):C.texImage2D(r,o,u,P,x,_);break;case"compressed":C.compressedTexImage2D(r,o,u,E,j,h,_);break;default:Object(v.a)(!1,"Unknown image data type")}})),_&&_.byteLength)this._trackAllocatedMemory(_.byteLength,"Texture");else{var L=l.a[this.dataFormat]||4,F=l.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*L*F,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,r=e.target,n=void 0===r?this.target:r,i=e.pixels,a=void 0===i?null:i,o=e.data,s=void 0===o?null:o,u=e.x,l=void 0===u?0:u,h=e.y,p=void 0===h?0:h,g=e.width,y=void 0===g?this.width:g,b=e.height,_=void 0===b?this.height:b,w=e.level,x=void 0===w?0:w,O=e.format,E=void 0===O?this.format:O,k=e.type,j=void 0===k?this.type:k,S=e.dataFormat,P=void 0===S?this.dataFormat:S,A=e.compressed,T=void 0!==A&&A,R=e.offset,C=void 0===R?0:R,M=e.border,I=(void 0===M&&this.border,e.parameters),L=void 0===I?{}:I,F=this._deduceParameters({format:E,type:j,dataFormat:P,compressed:T,data:s,width:y,height:_});if(j=F.type,P=F.dataFormat,T=F.compressed,y=F.width,_=F.height,Object(v.a)(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=a),s&&s.data){var N=s;s=N.data,y=N.shape[0],_=N.shape[1]}s instanceof c.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(f.l)(this.gl,L,(function(){T?t.gl.compressedTexSubImage2D(n,x,l,p,y,_,E,s):null===s?t.gl.texSubImage2D(n,x,l,p,y,_,P,j,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(n,x,l,p,y,_,P,j,s,C):s instanceof m?(Object(d.a)(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(n,x,l,p,y,_,P,j,C),t.gl.bindBuffer(35052,null)):Object(f.g)(t.gl)?t.gl.texSubImage2D(n,x,l,p,y,_,P,j,s):t.gl.texSubImage2D(n,x,l,p,P,j,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f.h.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,r=e.compressed;return void 0!==r&&r?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof c.a?{data:t.handle,dataType:"buffer"}:t instanceof m?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,r=e.data,n=e.width,i=e.height,a=e.dataFormat,o=e.type,s=e.compressed,u=l.b[t];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var c=this._deduceImageSize(r,n,i);return{dataFormat:a,type:o,compressed:s,width:n=c.width,height:i=c.height,format:t,data:r}}},{key:"_deduceImageSize",value:function(e,t,r){var n;return n="undefined"!==typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:r}:{width:t>=0?t:1,height:r>=0?r:1},Object(v.a)(n,"Could not deduced texture size"),Object(v.a)(void 0===t||n.width===t,"Deduced texture width does not match supplied width"),Object(v.a)(void 0===r||n.height===r,"Deduced texture height does not match supplied height"),n}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(v.a)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(f.g)(this.gl)&&(!(!this.width||!this.height)&&(!Object(p.b)(this.width)||!Object(p.b)(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===g.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}(u.a)},function(e,t,r){"use strict";function n(e,t,r){var n=t[0],i=t[1],a=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/a,e[1]=(r[1]*n+r[5]*i)/a,e}function i(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a||1;return e[0]=(r[0]*n+r[4]*i+r[8]*a)/o,e[1]=(r[1]*n+r[5]*i+r[9]*a)/o,e[2]=(r[2]*n+r[6]*i+r[10]*a)/o,e}function a(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function o(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function s(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*a,e[1]=r[1]*n+r[4]*i+r[7]*a,e[2]=r[2]*n+r[5]*i+r[8]*a,e[3]=t[3],e}r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"i",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"h",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return f})),r.d(t,"c",(function(){return h}));var n=r(13);function i(){var e=new n.a(9);return n.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function a(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function o(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*o-s*c,h=-l*a+s*u,d=c*a-o*u,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-l*n+i*c)*p,e[2]=(s*n-i*o)*p,e[3]=h*p,e[4]=(l*r-i*u)*p,e[5]=(-s*r+i*a)*p,e[6]=d*p,e[7]=(-c*r+n*u)*p,e[8]=(o*r-n*a)*p,e):null}function s(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*(c*a-o*u)+r*(-c*i+o*s)+n*(u*i-a*s)}function u(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],b=r[7],_=r[8];return e[0]=h*n+d*o+p*c,e[1]=h*i+d*s+p*l,e[2]=h*a+d*u+p*f,e[3]=v*n+g*o+m*c,e[4]=v*i+g*s+m*l,e[5]=v*a+g*u+m*f,e[6]=y*n+b*o+_*c,e[7]=y*i+b*s+_*l,e[8]=y*a+b*u+_*f,e}function c(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=h*n+d*o+c,e[7]=h*i+d*s+l,e[8]=h*a+d*u+f,e}function l(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*o,e[1]=d*i+h*s,e[2]=d*a+h*u,e[3]=d*o-h*n,e[4]=d*s-h*i,e[5]=d*u-h*a,e[6]=c,e[7]=l,e[8]=f,e}function f(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function h(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,c=r*o,l=n*o,f=n*s,h=i*o,d=i*s,p=i*u,v=a*o,g=a*s,m=a*u;return e[0]=1-f-p,e[3]=l-m,e[6]=h+g,e[1]=l+m,e[4]=1-c-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-c-f,e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return s}));var n=[],i=[];function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,a=n,o={index:-1,data:e,target:[]};return e?"function"===typeof e[Symbol.iterator]?a=e:e.length>0&&(i.length=e.length,a=i):a=n,(t>0||Number.isFinite(r))&&(a=(Array.isArray(a)?a:Array.from(a)).slice(t,r),o.index=t-1),{iterable:a,objectInfo:o}}function o(e){return e&&e[Symbol.asyncIterator]}function s(e,t){var r=t.size,n=t.stride,i=t.offset,a=t.startIndices,o=t.nested,s=e.BYTES_PER_ELEMENT,u=n?n/s:r,c=i?i/s:0,l=Math.floor((e.length-c)/u);return function(t,n){var i=n.index,s=n.target;if(!a){for(var f=i*u+c,h=0;h<r;h++)s[h]=e[f+h];return s}var d,p=a[i],v=a[i+1]||l;if(o){d=new Array(v-p);for(var g=p;g<v;g++){var m=g*u+c;s=new Array(r);for(var y=0;y<r;y++)s[y]=e[m+y];d[g-p]=s}}else if(u===r)d=e.subarray(p*r+c,v*r+c);else{d=new e.constructor((v-p)*r);for(var b=0,_=p;_<v;_++)for(var w=_*u+c,x=0;x<r;x++)d[b++]=e[w+x]}return d}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(150),i=r(2),a=r(3),o=r(108),s=r(28),u=r(253),c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},l={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},f=function(){function e(){var t=this;Object(i.a)(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];n.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Object(a.a)(e,null,[{key:"getBytesPerElement",value:function(e){return Object(o.c)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return Object(s.a)(e.size),Object(o.c)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Object(n.a)(e,[c].concat(r))}}]),Object(a.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=Object(u.a)("Accessor",e,l)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"===typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}()},,,function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"e",(function(){return v})),r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y})),r.d(t,"d",(function(){return _}));var n,i,a,o=r(10),s=r(16),u=r(0),c=r(23),l=(n={},Object(u.a)(n,3042,!1),Object(u.a)(n,32773,new Float32Array([0,0,0,0])),Object(u.a)(n,32777,32774),Object(u.a)(n,34877,32774),Object(u.a)(n,32969,1),Object(u.a)(n,32968,0),Object(u.a)(n,32971,1),Object(u.a)(n,32970,0),Object(u.a)(n,3106,new Float32Array([0,0,0,0])),Object(u.a)(n,3107,[!0,!0,!0,!0]),Object(u.a)(n,2884,!1),Object(u.a)(n,2885,1029),Object(u.a)(n,2929,!1),Object(u.a)(n,2931,1),Object(u.a)(n,2932,513),Object(u.a)(n,2928,new Float32Array([0,1])),Object(u.a)(n,2930,!0),Object(u.a)(n,3024,!0),Object(u.a)(n,36006,null),Object(u.a)(n,2886,2305),Object(u.a)(n,33170,4352),Object(u.a)(n,2849,1),Object(u.a)(n,32823,!1),Object(u.a)(n,32824,0),Object(u.a)(n,10752,0),Object(u.a)(n,32938,1),Object(u.a)(n,32939,!1),Object(u.a)(n,3089,!1),Object(u.a)(n,3088,new Int32Array([0,0,1024,1024])),Object(u.a)(n,2960,!1),Object(u.a)(n,2961,0),Object(u.a)(n,2968,4294967295),Object(u.a)(n,36005,4294967295),Object(u.a)(n,2962,519),Object(u.a)(n,2967,0),Object(u.a)(n,2963,4294967295),Object(u.a)(n,34816,519),Object(u.a)(n,36003,0),Object(u.a)(n,36004,4294967295),Object(u.a)(n,2964,7680),Object(u.a)(n,2965,7680),Object(u.a)(n,2966,7680),Object(u.a)(n,34817,7680),Object(u.a)(n,34818,7680),Object(u.a)(n,34819,7680),Object(u.a)(n,2978,[0,0,1024,1024]),Object(u.a)(n,3333,4),Object(u.a)(n,3317,4),Object(u.a)(n,37440,!1),Object(u.a)(n,37441,!1),Object(u.a)(n,37443,37444),Object(u.a)(n,35723,4352),Object(u.a)(n,36010,null),Object(u.a)(n,35977,!1),Object(u.a)(n,3330,0),Object(u.a)(n,3332,0),Object(u.a)(n,3331,0),Object(u.a)(n,3314,0),Object(u.a)(n,32878,0),Object(u.a)(n,3316,0),Object(u.a)(n,3315,0),Object(u.a)(n,32877,0),n),f=function(e,t,r){return t?e.enable(r):e.disable(r)},h=function(e,t,r){return e.hint(r,t)},d=function(e,t,r){return e.pixelStorei(r,t)};function p(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var v=(i={},Object(u.a)(i,3042,f),Object(u.a)(i,32773,(function(e,t){return e.blendColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,32777,"blendEquation"),Object(u.a)(i,34877,"blendEquation"),Object(u.a)(i,32969,"blendFunc"),Object(u.a)(i,32968,"blendFunc"),Object(u.a)(i,32971,"blendFunc"),Object(u.a)(i,32970,"blendFunc"),Object(u.a)(i,3106,(function(e,t){return e.clearColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,3107,(function(e,t){return e.colorMask.apply(e,Object(s.a)(t))})),Object(u.a)(i,2884,f),Object(u.a)(i,2885,(function(e,t){return e.cullFace(t)})),Object(u.a)(i,2929,f),Object(u.a)(i,2931,(function(e,t){return e.clearDepth(t)})),Object(u.a)(i,2932,(function(e,t){return e.depthFunc(t)})),Object(u.a)(i,2928,(function(e,t){return e.depthRange.apply(e,Object(s.a)(t))})),Object(u.a)(i,2930,(function(e,t){return e.depthMask(t)})),Object(u.a)(i,3024,f),Object(u.a)(i,35723,h),Object(u.a)(i,36006,(function(e,t){var r=Object(c.h)(e)?36009:36160;return e.bindFramebuffer(r,t)})),Object(u.a)(i,2886,(function(e,t){return e.frontFace(t)})),Object(u.a)(i,33170,h),Object(u.a)(i,2849,(function(e,t){return e.lineWidth(t)})),Object(u.a)(i,32823,f),Object(u.a)(i,32824,"polygonOffset"),Object(u.a)(i,10752,"polygonOffset"),Object(u.a)(i,35977,f),Object(u.a)(i,32938,"sampleCoverage"),Object(u.a)(i,32939,"sampleCoverage"),Object(u.a)(i,3089,f),Object(u.a)(i,3088,(function(e,t){return e.scissor.apply(e,Object(s.a)(t))})),Object(u.a)(i,2960,f),Object(u.a)(i,2961,(function(e,t){return e.clearStencil(t)})),Object(u.a)(i,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Object(u.a)(i,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Object(u.a)(i,2962,"stencilFuncFront"),Object(u.a)(i,2967,"stencilFuncFront"),Object(u.a)(i,2963,"stencilFuncFront"),Object(u.a)(i,34816,"stencilFuncBack"),Object(u.a)(i,36003,"stencilFuncBack"),Object(u.a)(i,36004,"stencilFuncBack"),Object(u.a)(i,2964,"stencilOpFront"),Object(u.a)(i,2965,"stencilOpFront"),Object(u.a)(i,2966,"stencilOpFront"),Object(u.a)(i,34817,"stencilOpBack"),Object(u.a)(i,34818,"stencilOpBack"),Object(u.a)(i,34819,"stencilOpBack"),Object(u.a)(i,2978,(function(e,t){return e.viewport.apply(e,Object(s.a)(t))})),Object(u.a)(i,3333,d),Object(u.a)(i,3317,d),Object(u.a)(i,37440,d),Object(u.a)(i,37441,d),Object(u.a)(i,37443,d),Object(u.a)(i,3330,d),Object(u.a)(i,3332,d),Object(u.a)(i,3331,d),Object(u.a)(i,36010,(function(e,t){return e.bindFramebuffer(36008,t)})),Object(u.a)(i,3314,d),Object(u.a)(i,32878,d),Object(u.a)(i,3316,d),Object(u.a)(i,3315,d),Object(u.a)(i,32877,d),Object(u.a)(i,"framebuffer",(function(e,t){var r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)})),Object(u.a)(i,"blend",(function(e,t){return t?e.enable(3042):e.disable(3042)})),Object(u.a)(i,"blendColor",(function(e,t){return e.blendColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,"blendEquation",(function(e,t){t=p(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(s.a)(t))})),Object(u.a)(i,"blendFunc",(function(e,t){t=p(t)&&2===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,e.blendFuncSeparate.apply(e,Object(s.a)(t))})),Object(u.a)(i,"clearColor",(function(e,t){return e.clearColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,"clearDepth",(function(e,t){return e.clearDepth(t)})),Object(u.a)(i,"clearStencil",(function(e,t){return e.clearStencil(t)})),Object(u.a)(i,"colorMask",(function(e,t){return e.colorMask.apply(e,Object(s.a)(t))})),Object(u.a)(i,"cull",(function(e,t){return t?e.enable(2884):e.disable(2884)})),Object(u.a)(i,"cullFace",(function(e,t){return e.cullFace(t)})),Object(u.a)(i,"depthTest",(function(e,t){return t?e.enable(2929):e.disable(2929)})),Object(u.a)(i,"depthFunc",(function(e,t){return e.depthFunc(t)})),Object(u.a)(i,"depthMask",(function(e,t){return e.depthMask(t)})),Object(u.a)(i,"depthRange",(function(e,t){return e.depthRange.apply(e,Object(s.a)(t))})),Object(u.a)(i,"dither",(function(e,t){return t?e.enable(3024):e.disable(3024)})),Object(u.a)(i,"derivativeHint",(function(e,t){e.hint(35723,t)})),Object(u.a)(i,"frontFace",(function(e,t){return e.frontFace(t)})),Object(u.a)(i,"mipmapHint",(function(e,t){return e.hint(33170,t)})),Object(u.a)(i,"lineWidth",(function(e,t){return e.lineWidth(t)})),Object(u.a)(i,"polygonOffsetFill",(function(e,t){return t?e.enable(32823):e.disable(32823)})),Object(u.a)(i,"polygonOffset",(function(e,t){return e.polygonOffset.apply(e,Object(s.a)(t))})),Object(u.a)(i,"sampleCoverage",(function(e,t){return e.sampleCoverage.apply(e,Object(s.a)(t))})),Object(u.a)(i,"scissorTest",(function(e,t){return t?e.enable(3089):e.disable(3089)})),Object(u.a)(i,"scissor",(function(e,t){return e.scissor.apply(e,Object(s.a)(t))})),Object(u.a)(i,"stencilTest",(function(e,t){return t?e.enable(2960):e.disable(2960)})),Object(u.a)(i,"stencilMask",(function(e,t){var r=t=p(t)?t:[t,t],n=Object(o.a)(r,2),i=n[0],a=n[1];e.stencilMaskSeparate(1028,i),e.stencilMaskSeparate(1029,a)})),Object(u.a)(i,"stencilFunc",(function(e,t){var r=t=p(t)&&3===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,n=Object(o.a)(r,6),i=n[0],a=n[1],u=n[2],c=n[3],l=n[4],f=n[5];e.stencilFuncSeparate(1028,i,a,u),e.stencilFuncSeparate(1029,c,l,f)})),Object(u.a)(i,"stencilOp",(function(e,t){var r=t=p(t)&&3===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,n=Object(o.a)(r,6),i=n[0],a=n[1],u=n[2],c=n[3],l=n[4],f=n[5];e.stencilOpSeparate(1028,i,a,u),e.stencilOpSeparate(1029,c,l,f)})),Object(u.a)(i,"viewport",(function(e,t){return e.viewport.apply(e,Object(s.a)(t))})),i);function g(e,t,r){return void 0!==t[e]?t[e]:r[e]}var m={blendEquation:function(e,t,r){return e.blendEquationSeparate(g(32777,t,r),g(34877,t,r))},blendFunc:function(e,t,r){return e.blendFuncSeparate(g(32969,t,r),g(32968,t,r),g(32971,t,r),g(32970,t,r))},polygonOffset:function(e,t,r){return e.polygonOffset(g(32824,t,r),g(10752,t,r))},sampleCoverage:function(e,t,r){return e.sampleCoverage(g(32938,t,r),g(32939,t,r))},stencilFuncFront:function(e,t,r){return e.stencilFuncSeparate(1028,g(2962,t,r),g(2967,t,r),g(2963,t,r))},stencilFuncBack:function(e,t,r){return e.stencilFuncSeparate(1029,g(34816,t,r),g(36003,t,r),g(36004,t,r))},stencilOpFront:function(e,t,r){return e.stencilOpSeparate(1028,g(2964,t,r),g(2965,t,r),g(2966,t,r))},stencilOpBack:function(e,t,r){return e.stencilOpSeparate(1029,g(34817,t,r),g(34818,t,r),g(34819,t,r))}},y={enable:function(e,t){return e(Object(u.a)({},t,!0))},disable:function(e,t){return e(Object(u.a)({},t,!1))},pixelStorei:function(e,t,r){return e(Object(u.a)({},t,r))},hint:function(e,t,r){return e(Object(u.a)({},t,r))},bindFramebuffer:function(e,t,r){var n;switch(t){case 36160:return e((n={},Object(u.a)(n,36006,r),Object(u.a)(n,36010,r),n));case 36009:return e(Object(u.a)({},36006,r));case 36008:return e(Object(u.a)({},36010,r));default:return null}},blendColor:function(e,t,r,n,i){return e(Object(u.a)({},32773,new Float32Array([t,r,n,i])))},blendEquation:function(e,t){var r;return e((r={},Object(u.a)(r,32777,t),Object(u.a)(r,34877,t),r))},blendEquationSeparate:function(e,t,r){var n;return e((n={},Object(u.a)(n,32777,t),Object(u.a)(n,34877,r),n))},blendFunc:function(e,t,r){var n;return e((n={},Object(u.a)(n,32969,t),Object(u.a)(n,32968,r),Object(u.a)(n,32971,t),Object(u.a)(n,32970,r),n))},blendFuncSeparate:function(e,t,r,n,i){var a;return e((a={},Object(u.a)(a,32969,t),Object(u.a)(a,32968,r),Object(u.a)(a,32971,n),Object(u.a)(a,32970,i),a))},clearColor:function(e,t,r,n,i){return e(Object(u.a)({},3106,new Float32Array([t,r,n,i])))},clearDepth:function(e,t){return e(Object(u.a)({},2931,t))},clearStencil:function(e,t){return e(Object(u.a)({},2961,t))},colorMask:function(e,t,r,n,i){return e(Object(u.a)({},3107,[t,r,n,i]))},cullFace:function(e,t){return e(Object(u.a)({},2885,t))},depthFunc:function(e,t){return e(Object(u.a)({},2932,t))},depthRange:function(e,t,r){return e(Object(u.a)({},2928,new Float32Array([t,r])))},depthMask:function(e,t){return e(Object(u.a)({},2930,t))},frontFace:function(e,t){return e(Object(u.a)({},2886,t))},lineWidth:function(e,t){return e(Object(u.a)({},2849,t))},polygonOffset:function(e,t,r){var n;return e((n={},Object(u.a)(n,32824,t),Object(u.a)(n,10752,r),n))},sampleCoverage:function(e,t,r){var n;return e((n={},Object(u.a)(n,32938,t),Object(u.a)(n,32939,r),n))},scissor:function(e,t,r,n,i){return e(Object(u.a)({},3088,new Int32Array([t,r,n,i])))},stencilMask:function(e,t){var r;return e((r={},Object(u.a)(r,2968,t),Object(u.a)(r,36005,t),r))},stencilMaskSeparate:function(e,t,r){return e(Object(u.a)({},1028===t?2968:36005,r))},stencilFunc:function(e,t,r,n){var i;return e((i={},Object(u.a)(i,2962,t),Object(u.a)(i,2967,r),Object(u.a)(i,2963,n),Object(u.a)(i,34816,t),Object(u.a)(i,36003,r),Object(u.a)(i,36004,n),i))},stencilFuncSeparate:function(e,t,r,n,i){var a;return e((a={},Object(u.a)(a,1028===t?2962:34816,r),Object(u.a)(a,1028===t?2967:36003,n),Object(u.a)(a,1028===t?2963:36004,i),a))},stencilOp:function(e,t,r,n){var i;return e((i={},Object(u.a)(i,2964,t),Object(u.a)(i,2965,r),Object(u.a)(i,2966,n),Object(u.a)(i,34817,t),Object(u.a)(i,34818,r),Object(u.a)(i,34819,n),i))},stencilOpSeparate:function(e,t,r,n,i){var a;return e((a={},Object(u.a)(a,1028===t?2964:34817,r),Object(u.a)(a,1028===t?2965:34818,n),Object(u.a)(a,1028===t?2966:34819,i),a))},viewport:function(e,t,r,n,i){return e(Object(u.a)({},2978,[t,r,n,i]))}},b=function(e,t){return e.isEnabled(t)},_=(a={},Object(u.a)(a,3042,b),Object(u.a)(a,2884,b),Object(u.a)(a,2929,b),Object(u.a)(a,3024,b),Object(u.a)(a,32823,b),Object(u.a)(a,32926,b),Object(u.a)(a,32928,b),Object(u.a)(a,3089,b),Object(u.a)(a,2960,b),Object(u.a)(a,35977,b),a)},function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o}));var n=r(28),i=r(9);function a(e){Object(n.a)(Object(i.f)(e),"Invalid WebGLRenderingContext")}function o(e){Object(n.a)(Object(i.g)(e),"Requires WebGL2")}},,,,function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(e)?i(e,t,[]):t(e)?[e]:[]}function i(e,t,r){for(var n=-1;++n<e.length;){var a=e[n];Array.isArray(a)?i(a,t,r):t(a)&&r.push(a)}return r}function a(e){for(var t=e.target,r=e.source,n=e.start,i=void 0===n?0:n,a=e.count,o=void 0===a?1:a,s=r.length,u=o*s,c=0,l=i;c<s;c++)t[l++]=r[c];for(;c<u;)c<u-c?(t.copyWithin(i+c,i,i+c),c*=2):(t.copyWithin(i+c,i,i+u-c),c=u);return t}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}))},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return p}));var n=r(2),i=r(3),a=r(82),o=r(120),s=r(23);function u(e,t){var r=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=r.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:r.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function c(e,t,r){var n=e[t].bind(e);e[t]=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=r.apply(void 0,[e.state._updateCache].concat(i)),s=o.valueChanged,u=o.oldValue;return s&&n.apply(void 0,i),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function l(e){var t=e.useProgram.bind(e);e.useProgram=function(r){e.state.program!==r&&(t(r),e.state.program=r)}}var f=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.copyState,s=void 0!==i&&i,u=r.log,c=void 0===u?function(){}:u;Object(n.a)(this,e),this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=s?Object(o.a)(t):Object.assign({},a.c),this.log=c,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(o.c)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,r=!1,n=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e){Object(s.a)(void 0!==i);var a=e[i],o=this.cache[i];Object(s.d)(a,o)||(r=!0,t=o,n&&!(i in n)&&(n[i]=o),this.cache[i]=a)}return{valueChanged:r,oldValue:t}}}]),e}();function h(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enable,i=void 0===n||n,o=r.copyState;if(Object(s.a)(void 0!==o),!t.state){var h="undefined"!==typeof e?e:window;for(var d in h.polyfillContext&&h.polyfillContext(t),t.state=new f(t,{copyState:o,enable:i}),l(t),a.b){var p=a.b[d];c(t,d,p)}u(t,"getParameter"),u(t,"isEnabled")}return t.state.enable=i,t}function d(e){e.state||h(e,{copyState:!1}),e.state.push()}function p(e){Object(s.a)(e.state),e.state.pop()}}).call(this,r(62))},function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(0),i=r(10),a=r(2),o=r(6),s=r(38),u=r(5),c=r(19),l=r(3),f=r(7),h=r(9),d=r(66),p=r(137),v=r(134),g=r(210),m=r(249),y=r(476),b=r(83),_=r(125),w=r(28),x=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)(this,t),(r=Object(o.a)(this,Object(u.a)(t).call(this,e,n))).width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.ownResources=[],r.initialize(n),Object.seal(Object(s.a)(r)),r}return Object(f.a)(t,e),Object(l.a)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferFloat,n=t.colorBufferHalfFloat,i=!0;return r&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),n&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(l.a)(t,[{key:"initialize",value:function(e){var t=e.width,r=void 0===t?1:t,n=e.height,i=void 0===n?1:n,a=e.attachments,o=void 0===a?null:a,s=e.color,u=void 0===s||s,c=e.depth,l=void 0===c||c,f=e.stencil,h=void 0!==f&&f,d=e.check,p=void 0===d||d,v=e.readBuffer,g=e.drawBuffers;if(Object(w.a)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,o)for(var m in o){var y=o[m];(Array.isArray(y)?y[0]:y).resize({width:r,height:i})}else o=this._createDefaultAttachments(u,l,h,r,i);this.update({clearAttachments:!0,attachments:o,readBuffer:v,drawBuffers:g}),o&&p&&this.checkStatus()}},{key:"delete",value:function(){var e=!0,r=!1,n=void 0;try{for(var i,a=this.ownResources[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.delete()}}catch(o){r=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(r)throw n}}Object(c.a)(Object(u.a)(t.prototype),"delete",this).call(this)}},{key:"update",value:function(e){var t=e.attachments,r=void 0===t?{}:t,n=e.readBuffer,i=e.drawBuffers,a=e.clearAttachments,o=void 0!==a&&a,s=e.resizeAttachments,u=void 0===s||s;this.attach(r,{clearAttachments:o,resizeAttachments:u});var c=this.gl,l=c.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,l||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return Object(w.a)(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var n in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&h.h.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r))(),this.attachments)this.attachments[n].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.clearAttachments,a=void 0!==n&&n,o=r.resizeAttachments,s=void 0===o||o,u={};a&&Object.keys(this.attachments).forEach((function(e){u[e]=null})),Object.assign(u,e);var c=this.gl.bindFramebuffer(36160,this.handle);for(var l in u){Object(w.a)(void 0!==l,"Misspelled framebuffer binding point?");var f=Number(l),h=u[f],d=h;if(d)if(d instanceof v.a)this._attachRenderbuffer({attachment:f,renderbuffer:d});else if(Array.isArray(h)){var p=Object(i.a)(h,3),g=p[0],m=p[1],y=void 0===m?0:m,b=p[2],_=void 0===b?0:b;d=g,this._attachTexture({attachment:f,texture:g,layer:y,level:_})}else this._attachTexture({attachment:f,texture:d,layer:0,level:0});else this._unattach(f);s&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,c||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(O(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,n=e.stencil,i=e.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(t||r||n)&&Object(g.a)(this.gl,{color:t,depth:r,stencil:n}),a.forEach((function(e,t){Object(g.b)({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h.h.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h.h.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h.h.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h.h.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h.h.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h.h.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,r=void 0===t?[]:t,n=e.x,i=void 0===n?0:n,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,c=this.gl;Object(b.a)(c);var l=c.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===s&&void 0===u?c.invalidateFramebuffer(36008,r):c.invalidateFramebuffer(36008,r,i,o,s,u),c.bindFramebuffer(36008,l),this}},{key:"getAttachmentParameter",value:function(e,t,r){var n=this._getAttachmentParameterFallback(t);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&n>1e3&&(n=Object(_.a)(this.gl,n)),n}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],n={},i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=t?Object(_.a)(this.gl,c):c;n[l]=this.getAttachmentParameter(e,c,t)}}catch(f){a=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),r={},n=0,i=t;n<i.length;n++){var a=i[n],o=Number(a),s=e?Object(_.a)(this.gl,o):o;r[s]=this.getAttachmentParameters(o,e)}return r}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(Object(m.a)(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>h.h.level||"undefined"===typeof window)return this;t=t||"Framebuffer ".concat(this.id);var r=Object(m.a)(this,{maxHeight:100});return h.h.image({logLevel:e,message:t,image:r},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?36160:t;return this.gl.bindFramebuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?36160:t;return this.gl.bindFramebuffer(r,null),this}},{key:"_createDefaultAttachments",value:function(e,t,r,i,a){var o,s=null;e&&((s=s||{})[36064]=new p.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:a,mipmaps:!1,parameters:(o={},Object(n.a)(o,10241,9729),Object(n.a)(o,10240,9729),Object(n.a)(o,10242,33071),Object(n.a)(o,10243,33071),o)}),this.ownResources.push(s[36064]));return t&&r?((s=s||{})[33306]=new v.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):t?((s=s||{})[36096]=new v.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:a}),this.ownResources.push(s[36096])):r&&Object(w.a)(!1),s}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof v.a?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,r=void 0===t?36064:t,n=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}},{key:"_attachTexture",value:function(e){var t=e.attachment,r=void 0===t?36064:t,n=e.texture,i=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:o.framebufferTextureLayer(36160,r,n.target,a,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,r,s,n.handle,a);break;case 3553:o.framebufferTexture2D(36160,r,3553,n.handle,a);break;default:Object(w.a)(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[r]=n}},{key:"_setReadBuffer",value:function(e){var t=this.gl;Object(h.g)(t)?t.readBuffer(e):Object(w.a)(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if(Object(h.g)(t))t.drawBuffers(e);else{var r=t.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(e):Object(w.a)(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=Object(y.a)(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(d.a);function O(e){return(x.STATUS||{})[e]||"Framebuffer error ".concat(e)}x.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(2),i=r(3);function a(){}var o={onStart:a,onUpdate:a,onInterrupt:a,onEnd:a},s=function(){function e(t){Object(n.a)(this,e),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return Object(i.a)(e,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},o,e),this._inProgress=!0;var t=this.timeline,r=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:r.duration}),r.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){return!!this._inProgress&&(this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0)}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}));var n="vs",i="fs"},,function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(65),i=r(2),a=r(3),o=r(138),s=r(28),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var r=t.id,n=void 0===r?Object(o.c)("geometry"):r,a=t.drawMode,s=void 0===a?u.TRIANGLES:a,c=t.attributes,l=void 0===c?{}:c,f=t.indices,h=void 0===f?null:f,d=t.vertexCount,p=void 0===d?null:d;this.id=n,this.drawMode=0|s,this.attributes={},this.userData={},this._setAttributes(l,h),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}return Object(a.a)(e,null,[{key:"DRAW_MODE",get:function(){return u}}]),Object(a.a)(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Object(n.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var r in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var n=e[r];n=ArrayBuffer.isView(n)?{value:n}:n,Object(s.a)(ArrayBuffer.isView(n.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),"POSITION"!==r&&"positions"!==r||n.size||(n.size=3),"indices"===r?(Object(s.a)(!this.indices),this.indices=n):this.attributes[r]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var r=1/0;for(var n in e){var i=e[n],a=i.value,o=i.size;!i.constant&&a&&o>=1&&(r=Math.min(r,a.length/o))}return Object(s.a)(Number.isFinite(r)),r}},{key:"mode",get:function(){return this.drawMode}}]),e}()},,,,function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(238),c=r(14),l=["longitude","latitude","zoom","bearing","pitch"],f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,e))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"interpolateProps",value:function(e,t,r){var n={};for(var i in t)n[i]=Object(c.lerp)(e[i],t[i],r);return n}}]),t}(u.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r(2),i=r(3),a=r(99),o=r(90),s=function(){},u={BREAK:1,SNAP_TO_END:2,IGNORE:3},c={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new a.a,transitionInterruption:u.BREAK,onTransitionStart:s,onTransitionInterrupt:s,onTransitionEnd:s},l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e),this.ControllerState=t,this.props=Object.assign({},c,r),this.propsInTransition=null,this.transition=new o.a(r.timeline),this.onViewStateChange=r.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(i.a)(e,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var t=!1,r=this.props;if(e=Object.assign({},c,e),this.props=e,this._shouldIgnoreViewportChange(r,e))return t;if(this._isTransitionEnabled(e)){var n=this.transition.settings,i=n.interruption,a=n.endProps,o=Object.assign({},r,i===u.SNAP_TO_END?a:this.propsInTransition||r);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,r=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(r)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this.transition.inProgress?this.transition.settings.interruption===u.IGNORE||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){var r=new this.ControllerState(e),n=new this.ControllerState(t).shortestPathFrom(r),i=t.transitionInterpolator,a=i.getDuration?i.getDuration(e,t):t.transitionDuration,o=t.transitionInterpolator.initializeProps(e,n);this.propsInTransition={},this.duration=a,this.transition.start({duration:a,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:o.start,endProps:o.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.updateTransition()}},{key:"_onTransitionEnd",value:function(e){var t=this;return function(r){t.propsInTransition=null,e(r)}}},{key:"_onTransitionUpdate",value:function(e){var t=e.time,r=e.settings,n=r.interpolator,i=r.startProps,a=r.endProps,o=r.duration,s=(0,r.easing)(t/o),u=n.interpolateProps(i,a,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,u)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),e}();l.defaultProps=c},function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;if(!e||!t)return!1;for(var r in e){var i=e[r],a=t[r];if(!(i===a||Array.isArray(i)&&Array.isArray(a)&&n(i,a)))return!1}return!0}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n=r(29),i=r(98);function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,r){return(o=a()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Object(i.a)(a,r.prototype),a}).apply(null,arguments)}function s(e){var t="function"===typeof Map?new Map:void 0;return(s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return o(e,arguments,Object(n.a)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(a,e)})(e)}r.d(t,"a",(function(){return s}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),i=r(3),a=r(100),o=r(22),s=r(31),u={transitionDuration:0},c=["wheel"],l=["panstart","panmove","panend"],f=["pinchstart","pinchmove","pinchend"],h=["doubletap"],d=["keydown"],p=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e),Object(s.a)(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new a.b(t,r),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(r)}return Object(i.a)(e,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){var t=this.ControllerState;switch(this.controllerState=new t(Object.assign({},this.controllerStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=this.controllerStateProps,r=t.x,n=t.y,i=e.offsetCenter;return[i.x-r,i.y-n]}},{key:"isPointInBounds",value:function(e,t){var r=this.controllerStateProps,n=r.width,i=r.height;if(t&&t.handled)return!1;var a=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return a&&t&&t.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(e){"onViewportChange"in e&&o.a.removed("onViewportChange")(),"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var t=e.scrollZoom,r=void 0===t||t,n=e.dragPan,i=void 0===n||n,a=e.dragRotate,s=void 0===a||a,u=e.doubleClickZoom,p=void 0===u||u,v=e.touchZoom,g=void 0===v||v,m=e.touchRotate,y=void 0!==m&&m,b=e.keyboard,_=void 0===b||b,w=Boolean(this.onViewStateChange);this.toggleEvents(c,w&&r),this.toggleEvents(l,w&&(i||s)),this.toggleEvents(f,w&&(g||y)),this.toggleEvents(h,w&&p),this.toggleEvents(d,w&&_),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=p,this.touchZoom=g,this.touchRotate=y,this.keyboard=_}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,t){var r=this;this.eventManager&&e.forEach((function(e){r._events[e]!==t&&(r._events[e]=t,t?r.eventManager.on(e,r.handleEvent):r.eventManager.off(e,r.handleEvent))}))}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},e.getViewportProps(),t),i=this.controllerState!==e;if(i){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:n,interactionState:r,oldViewState:a})}Object.assign(this._state,e.getInteractiveState(),r),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var r=this.controllerState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(r,u,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){if(!this.isDragging())return!1;var t=this.isFunctionKeyPressed(e)||e.rightButton;return(t=this.invertPan?!t:t)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function(e){var t=this.controllerState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),r=this.controllerState.pan({pos:t});return this.updateViewport(r,u,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,r=e.deltaY,n=this.controllerState.getViewportProps(),i=t/n.width,a=r/n.height,o=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:a});return this.updateViewport(o,u,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var r=e.delta,n=2/(1+Math.exp(-Math.abs(.01*r)));r<0&&0!==n&&(n=1/n);var i=this.controllerState.zoom({pos:t,scale:n});return this.updateViewport(i,u,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var r=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(r,u,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.controllerState;if(this.touchZoom){var r=e.scale,n=this.getCenter(e);t=t.zoom({pos:n,scale:r})}if(this.touchRotate){var i=e.rotation,a=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-a)/180})}return this.updateViewport(t,u,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(e){var t=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var r=this.isFunctionKeyPressed(e),n=this.controllerState.zoom({pos:t,scale:r?.5:2});return this.updateViewport(n,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,r=this.isFunctionKeyPressed(e),n=this.controllerState,i={};switch(e.srcEvent.keyCode){case 189:t=r?n.zoomOut().zoomOut():n.zoomOut(),i.isZooming=!0;break;case 187:t=r?n.zoomIn().zoomIn():n.zoomIn(),i.isZooming=!0;break;case 37:r?(t=n.rotateLeft(),i.isRotating=!0):(t=n.moveLeft(),i.isPanning=!0);break;case 39:r?(t=n.rotateRight(),i.isRotating=!0):(t=n.moveRight(),i.isPanning=!0);break;case 38:r?(t=n.rotateUp(),i.isRotating=!0):(t=n.moveUp(),i.isPanning=!0);break;case 40:r?(t=n.rotateDown(),i.isRotating=!0):(t=n.moveDown(),i.isPanning=!0);break;default:return!1}return this.updateViewport(t,this._getTransitionProps(),i),!0}},{key:"_getTransitionProps",value:function(){return u}},{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}}]),e}()},function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n,i=r(10),a=r(0),o=r(28),s=(n={},Object(a.a)(n,5126,[5126,1,"float"]),Object(a.a)(n,35664,[5126,2,"vec2"]),Object(a.a)(n,35665,[5126,3,"vec3"]),Object(a.a)(n,35666,[5126,4,"vec4"]),Object(a.a)(n,5124,[5124,1,"int"]),Object(a.a)(n,35667,[5124,2,"ivec2"]),Object(a.a)(n,35668,[5124,3,"ivec3"]),Object(a.a)(n,35669,[5124,4,"ivec4"]),Object(a.a)(n,5125,[5125,1,"uint"]),Object(a.a)(n,36294,[5125,2,"uvec2"]),Object(a.a)(n,36295,[5125,3,"uvec3"]),Object(a.a)(n,36296,[5125,4,"uvec4"]),Object(a.a)(n,35670,[5126,1,"bool"]),Object(a.a)(n,35671,[5126,2,"bvec2"]),Object(a.a)(n,35672,[5126,3,"bvec3"]),Object(a.a)(n,35673,[5126,4,"bvec4"]),Object(a.a)(n,35674,[5126,8,"mat2"]),Object(a.a)(n,35685,[5126,8,"mat2x3"]),Object(a.a)(n,35686,[5126,8,"mat2x4"]),Object(a.a)(n,35675,[5126,12,"mat3"]),Object(a.a)(n,35687,[5126,12,"mat3x2"]),Object(a.a)(n,35688,[5126,12,"mat3x4"]),Object(a.a)(n,35676,[5126,16,"mat4"]),Object(a.a)(n,35689,[5126,16,"mat4x2"]),Object(a.a)(n,35690,[5126,16,"mat4x3"]),n);function u(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(o.a)(!1),0}}function c(e){var t=s[e];if(!t)return null;var r=Object(i.a)(t,2);return{type:r[0],components:r[1]}}function l(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=5126}for(var r in s){var n=Object(i.a)(s[r],3),a=n[0],o=n[1],u=n[2];if(a===e&&o===t)return{glType:r,name:u}}return null}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u}));var n=r(0),i=r(183);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);var t=e.parseTextSync||e.parseSync||e.parse||e.parseStream||e.parseInBatches,r=e.options&&e.options[e.id];return t=t||r&&r.workerUrl}function u(e){var t;return Object(i.a)(e,"null loader"),Object(i.a)(s(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=o({},e=e[0],{options:o({},e.options,{},t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),Object(i.a)(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}},function(e,t,r){"use strict";var n=r(2),i=r(3),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.overAlloc,i=void 0===r?2:r,a=t.poolSize,o=void 0===a?100:a;Object(n.a)(this,e),this.overAlloc=i,this.poolSize=o,this._pool=[]}return Object(i.a)(e,[{key:"allocate",value:function(e,t,r){var n=r.size,i=void 0===n?1:n,a=r.type,o=r.padding,s=void 0===o?0:o,u=r.copy,c=void 0!==u&&u,l=a||e&&e.constructor||Float32Array,f=t*i+s;if(ArrayBuffer.isView(e)){if(f<=e.length)return e;if(f*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,f)}var h=this._allocate(l,f);return e&&c?h.set(e):h.fill(0,0,4),this._release(e),h}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,t){t=Math.max(Math.ceil(t*this.overAlloc),1);var r=this._pool,n=e.BYTES_PER_ELEMENT*t,i=r.findIndex((function(e){return e.byteLength>=n}));return i>=0?new e(r.splice(i,1)[0],0,t):new e(t)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var t=this._pool,r=e.buffer,n=r.byteLength,i=t.findIndex((function(e){return e.byteLength>=n}));i<0?t.push(r):(i>0||t.length<this.poolSize)&&t.splice(i,0,r),t.length>this.poolSize&&t.shift()}}}]),e}();t.a=new a},function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return h}));var n,i,a,o=r(0),s=r(9),u=(n={},Object(o.a)(n,6407,{dataFormat:6407,types:[5121,33635]}),Object(o.a)(n,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(o.a)(n,6406,{dataFormat:6406,types:[5121]}),Object(o.a)(n,6409,{dataFormat:6409,types:[5121]}),Object(o.a)(n,6410,{dataFormat:6410,types:[5121]}),Object(o.a)(n,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(o.a)(n,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(o.a)(n,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(o.a)(n,34836,{dataFormat:6408,types:[5126],gl2:!0}),n),c=(i={},Object(o.a)(i,6403,1),Object(o.a)(i,36244,1),Object(o.a)(i,33319,2),Object(o.a)(i,33320,2),Object(o.a)(i,6407,3),Object(o.a)(i,36248,3),Object(o.a)(i,6408,4),Object(o.a)(i,36249,4),Object(o.a)(i,6402,1),Object(o.a)(i,34041,1),Object(o.a)(i,6406,1),Object(o.a)(i,6409,1),Object(o.a)(i,6410,2),i),l=(a={},Object(o.a)(a,5126,4),Object(o.a)(a,5125,4),Object(o.a)(a,5124,4),Object(o.a)(a,5123,2),Object(o.a)(a,5122,2),Object(o.a)(a,5131,2),Object(o.a)(a,5120,1),Object(o.a)(a,5121,1),a);function f(e,t){var r=u[t];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;var n=Object(s.g)(e)&&r.gl2||r.gl1;return"string"===typeof n?e.getExtension(n):n}function h(e,t){var r=u[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return o}));function n(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.clamped,n=void 0===r||r;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(e){var t=e.data,r=e.width,n=e.height,i=e.bytesPerPixel,a=void 0===i?4:i,o=e.temp,s=r*a;o=o||new Uint8Array(s);for(var u=0;u<n/2;++u){var c=u*s,l=(n-u-1)*s;o.set(t.subarray(c,c+s)),t.copyWithin(c,l,l+s),t.set(o,l)}}function o(e){for(var t=e.data,r=e.width,n=e.height,i=Math.round(r/2),a=Math.round(n/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)o[4*(s*i+u)+c]=t[4*(2*s*r+2*u)+c];return{data:o,width:i,height:a}}},,,,function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a}));var n=r(11),i=r(113);function a(){return!("object"===("undefined"===typeof e?"undefined":Object(n.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,r(68))},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var n=r(11);function i(t){if("undefined"!==typeof window&&"object"===Object(n.a)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!==typeof e&&"object"===Object(n.a)(e.versions)&&Boolean(e.versions.electron))return!0;var r="object"===("undefined"===typeof navigator?"undefined":Object(n.a)(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent,i=t||r;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,r(68))},function(e,t,r){"use strict";var n=r(11),i=r(2),a=r(3),o=r(71),s=/([0-9]+\.?[0-9]*)(%|px)/;function u(e){switch(Object(n.a)(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(s);if(t&&t.length>=3){var r="%"===t[2],i=parseFloat(t[1]);return{position:r?i/100:i,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function c(e,t){return e.relative?Math.round(e.position*t):e.position}var l=r(101),f=r(31);r.d(t,"a",(function(){return h}));var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var r=t.id,n=void 0===r?null:r,a=t.x,s=void 0===a?0:a,u=t.y,c=void 0===u?0:u,l=t.width,h=void 0===l?"100%":l,d=t.height,p=void 0===d?"100%":d,v=t.projectionMatrix,g=void 0===v?null:v,m=t.fovy,y=void 0===m?50:m,b=t.near,_=void 0===b?.1:b,w=t.far,x=void 0===w?1e3:w,O=t.modelMatrix,E=void 0===O?null:O,k=t.viewportInstance,j=void 0===k?null:k,S=t.type,P=void 0===S?o.a:S;Object(f.a)(!j||j instanceof o.a),this.viewportInstance=j,this.id=n||this.constructor.displayName||"view",this.type=P,this.props=Object.assign({},t,{id:this.id,projectionMatrix:g,fovy:y,near:_,far:x,modelMatrix:E}),this._parseDimensions({x:s,y:c,width:h,height:p}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(a.a)(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Object(l.a)(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,r=e.height,n=e.viewState;if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);var i=this.getDimensions({width:t,height:r}),a=Object.assign({viewState:n},n,this.props,i);return this._getViewport(a)}},{key:"getViewStateId",value:function(){switch(Object(n.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===Object(n.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var r in this.props.viewState)"id"!==r&&(t[r]=this.props.viewState[r]);return t}return e}},{key:"getDimensions",value:function(e){var t=e.width,r=e.height;return{x:c(this._x,t),y:c(this._y,r),width:c(this._width,t),height:c(this._height,r)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"===typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function(e){var t=e.x,r=e.y,n=e.width,i=e.height;this._x=u(t),this._y=u(r),this._width=u(n),this._height=u(i)}}]),e}()},,,,,,function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return c}));var n=r(82),i=r(88),a=r(23);function o(e,t){if(Object(a.a)(Object(a.g)(e),"setParameters requires a WebGL context"),!Object(a.f)(t)){var r={};for(var i in t){var o=Number(i),s=n.e[i];s&&("string"===typeof s?r[s]=!0:s(e,t[i],o))}var u=e.state&&e.state.cache;if(u)for(var c in r){(0,n.a[c])(e,t,u)}}}function s(e,t){if("number"===typeof(t=t||n.c)){var r=t,i=n.d[r];return i?i(e,r):e.getParameter(r)}var a=Array.isArray(t)?t:Object.keys(t),o={},s=!0,u=!1,c=void 0;try{for(var l,f=a[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n.d[h];o[h]=d?d(e,Number(h)):e.getParameter(Number(h))}}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return o}function u(e){o(e,n.c)}function c(e,t,r){if(Object(a.f)(t))return r(e);var n,s=t.nocatch,u=void 0===s||s;if(Object(i.c)(e),o(e,t),u)n=r(e),Object(i.b)(e);else try{n=r(e)}finally{Object(i.b)(e)}return n}},function(e,t,r){"use strict";function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(149);var c=r(150);function l(e){var t="function"===typeof Map?new Map:void 0;return(l=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Object(c.a)(e,arguments,Object(o.a)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(u.a)(n,e)})(e)}var f=r(15);r.d(t,"a",(function(){return h}));var h=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}},{key:"to",value:function(e){return e===this?this:Object(f.m)(e)?this.toArray(e):this.toObject(e)}},{key:"toTarget",value:function(e){return e?this.to(e):this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(f.f)}},{key:"formatString",value:function(e){for(var t="",r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+Object(f.l)(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(f.j)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"lerp",value:function(e,t,r){void 0===r&&(r=t,t=e,e=this);for(var n=0;n<this.ELEMENTS;++n){var i=e[n];this[n]=i+r*(t[n]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}},{key:"multiplyByScalar",value:function(e){return this.scale(e)}},{key:"check",value:function(){if(f.f.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"elements",get:function(){return this}}]),t}(l(Array))},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a}));var n=r(28);function i(e,t){if("string"!==typeof t)return t;var r=Number(t);if(!isNaN(r))return r;var i=e[t=t.replace(/^.*\./,"")];return Object(n.a)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function a(e,t){for(var r in t=Number(t),e)if(e[r]===t)return"GL.".concat(r);return String(t)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(239),c=r(9),l=r(210),f=r(22),h=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(e){var t=this.gl;return Object(c.k)(t,{framebuffer:e.target}),this._drawLayers(e)}},{key:"_drawLayers",value:function(e){var t=e.viewports,r=e.views,n=e.onViewportActive,i=e.clearCanvas,a=void 0===i||i,o=this.gl;a&&function(e){var t=e.drawingBufferWidth,r=e.drawingBufferHeight;Object(c.k)(e,{viewport:[0,0,t,r]}),e.clear(16640)}(o);var s=[],u=!0,l=!1,f=void 0;try{for(var h,d=t[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var p=h.value,v=p.viewport||p,g=r&&r[v.id];n(v),e.view=g;var m=v.subViewports||[v],y=!0,b=!1,_=void 0;try{for(var w,x=m[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var O=w.value;e.viewport=O;var E=this._drawLayersInViewport(o,e);s.push(E)}}catch(k){b=!0,_=k}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}}catch(k){l=!0,f=k}finally{try{u||null==d.return||d.return()}finally{if(l)throw f}}return s}},{key:"_drawLayersInViewport",value:function(e,t){var r=t.layers,n=t.layerFilter,i=t.onError,a=t.viewport,o=t.view,s=t.pass,u=void 0===s?"unknown":s,h=t.effects,d=t.moduleParameters,p=function(e,t){var r=t.viewport,n=e.canvas?e.canvas.clientHeight||e.canvas.height:100,i=r,a=Object(c.c)(e);return[i.x*a,(n-i.y-i.height)*a,i.width*a,i.height*a]}(e,{viewport:a});if(o&&o.props.clear){var v=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;Object(c.l)(e,{scissorTest:!0,scissor:p},(function(){return Object(l.a)(e,v)}))}var g={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(c.k)(e,{viewport:p});for(var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return function(i,a){var o,s=i.props._offset,u=i.id,c=i.parent&&i.parent.id;if(c in n){var l=n[c]=n[c]||e(r[c],r);o=l(i,a),n[u]=l}else Number.isFinite(s)?(o=s+(r[c]||0),n[u]=null):o=t;return a&&o>=t&&(t=o+1),r[u]=o,o}}(),y=0;y<r.length;y++){var b=r[y],_=this._shouldDrawLayer(b,a,u,n),w=m(b,_);if(_&&b.props.pickable&&g.pickableCount++,b.isComposite&&g.compositeCount++,_){g.visibleCount++;var x=this._getModuleParameters(b,h,u,d),O=this.getLayerParameters(b,y);x.viewport=a;try{b.drawLayer({moduleParameters:x,uniforms:{layerIndex:w},parameters:O})}catch(E){i?i(E,b):f.a.error("error during drawing of ".concat(b),E)()}}}return g}},{key:"shouldDrawLayer",value:function(e){return!0}},{key:"getModuleParameters",value:function(e,t){return null}},{key:"getLayerParameters",value:function(e,t){return e.props.parameters}},{key:"_shouldDrawLayer",value:function(e,t,r,n){var i=this.shouldDrawLayer(e)&&!e.isComposite&&e.props.visible;return i&&n&&(i=n({layer:e,viewport:t,isPicking:r.startsWith("picking"),renderPass:r})),i}},{key:"_getModuleParameters",value:function(e,t,r,n){var i=Object.assign(Object.create(e.props),{viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Object(c.c)(this.gl)});if(t){var a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;Object.assign(i,f.getModuleParameters(e))}}catch(h){o=!0,s=h}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}return Object.assign(i,this.getModuleParameters(e,t),n)}}]),t}(u.a)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(122),i=r(121),a=r(123);function o(e){return Object(n.a)(e)||Object(i.a)(e)||Object(a.a)()}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(2),i=r(3),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r=t.id,i=void 0===r?"effect":r;this.id=i,this.props={},Object.assign(this.props,t)}return Object(i.a)(e,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(151),c=r(15),l=r(18),f=r(39),h=r(76),d=[0,0,0],p=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0)),1===arguments.length&&Object(c.m)(r)?e.copy(r):(c.f.debug&&(Object(l.a)(r),Object(l.a)(i),Object(l.a)(s)),e[0]=r,e[1]=i,e[2]=s),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"set",value:function(e,t,r){return this[0]=e,this[1]=t,this[2]=r,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return c.f.debug&&(Object(l.a)(e.x),Object(l.a)(e.y),Object(l.a)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"angle",value:function(e){return f.a(this,e)}},{key:"cross",value:function(e){return f.c(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?d:r;return f.j(this,this,n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?d:r;return f.k(this,this,n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,r=e.origin,n=void 0===r?d:r;return f.l(this,this,n,t),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return f.o(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return Object(h.c)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return f.n(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return Object(h.b)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return f.p(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}}]),t}(u.a)},function(e,t,r){"use strict";var n=r(820),i=r(21),a=Object.keys(i.a).map((function(e){return"const int COORDINATE_SYSTEM_".concat(e," = ").concat(i.a[e],";")})).join(""),o=Object.keys(i.c).map((function(e){return"const int PROJECTION_MODE_".concat(e," = ").concat(i.c[e],";")})).join(""),s="".concat(a,"\n").concat(o,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64Low, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),u=r(163),c={};t.a={name:"project",dependencies:[n.a],vs:s,getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return e.viewport?Object(u.b)(e):{}}}},function(e,t,r){"use strict";var n,i=r(2),a=r(6),o=r(5),s=r(38),u=r(3),c=r(7),l=r(66),f=r(0),h="EXT_color_buffer_float",d=(n={},Object(f.a)(n,33189,{bpp:2}),Object(f.a)(n,33190,{gl2:!0,bpp:3}),Object(f.a)(n,36012,{gl2:!0,bpp:4}),Object(f.a)(n,36168,{bpp:1}),Object(f.a)(n,34041,{bpp:4}),Object(f.a)(n,35056,{gl2:!0,bpp:4}),Object(f.a)(n,36013,{gl2:!0,bpp:5}),Object(f.a)(n,32854,{bpp:2}),Object(f.a)(n,36194,{bpp:2}),Object(f.a)(n,32855,{bpp:2}),Object(f.a)(n,33321,{gl2:!0,bpp:1}),Object(f.a)(n,33330,{gl2:!0,bpp:1}),Object(f.a)(n,33329,{gl2:!0,bpp:1}),Object(f.a)(n,33332,{gl2:!0,bpp:2}),Object(f.a)(n,33331,{gl2:!0,bpp:2}),Object(f.a)(n,33334,{gl2:!0,bpp:4}),Object(f.a)(n,33333,{gl2:!0,bpp:4}),Object(f.a)(n,33323,{gl2:!0,bpp:2}),Object(f.a)(n,33336,{gl2:!0,bpp:2}),Object(f.a)(n,33335,{gl2:!0,bpp:2}),Object(f.a)(n,33338,{gl2:!0,bpp:4}),Object(f.a)(n,33337,{gl2:!0,bpp:4}),Object(f.a)(n,33340,{gl2:!0,bpp:8}),Object(f.a)(n,33339,{gl2:!0,bpp:8}),Object(f.a)(n,32849,{gl2:!0,bpp:3}),Object(f.a)(n,32856,{gl2:!0,bpp:4}),Object(f.a)(n,32857,{gl2:!0,bpp:4}),Object(f.a)(n,36220,{gl2:!0,bpp:4}),Object(f.a)(n,36238,{gl2:!0,bpp:4}),Object(f.a)(n,36975,{gl2:!0,bpp:4}),Object(f.a)(n,36214,{gl2:!0,bpp:8}),Object(f.a)(n,36232,{gl2:!0,bpp:8}),Object(f.a)(n,36226,{gl2:!0,bpp:16}),Object(f.a)(n,36208,{gl2:!0,bpp:16}),Object(f.a)(n,33325,{gl2:h,bpp:2}),Object(f.a)(n,33327,{gl2:h,bpp:4}),Object(f.a)(n,34842,{gl2:h,bpp:8}),Object(f.a)(n,33326,{gl2:h,bpp:4}),Object(f.a)(n,33328,{gl2:h,bpp:8}),Object(f.a)(n,34836,{gl2:h,bpp:16}),Object(f.a)(n,35898,{gl2:h,bpp:4}),n),p=r(9),v=r(28);function g(e,t,r){var n=r[t];if(!n)return!1;var i=Object(p.g)(e)&&n.gl2||n.gl1;return"string"===typeof i?e.getExtension(i):i}r.d(t,"a",(function(){return m}));var m=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,e,n))).initialize(n),Object.seal(Object(s.a)(r)),r}return Object(c.a)(t,e),Object(u.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.format;return!r||g(e,r,d)}},{key:"getSamplesForFormat",value:function(e,t){var r=t.format;return e.getInternalformatParameter(36161,r,32937)}}]),Object(u.a)(t,[{key:"initialize",value:function(e){var t=e.format,r=e.width,n=void 0===r?1:r,i=e.height,a=void 0===i?1:i,o=e.samples,s=void 0===o?0:o;return Object(v.a)(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(p.g)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,n,a):this.gl.renderbufferStorage(36161,t,n,a),this.format=t,this.width=n,this.height=a,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*d[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(l.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(205);function i(e){return new n.a(e)}},function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return a}));var n="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!==typeof window?window:e,a=("undefined"!==typeof e||window,"undefined"!==typeof document&&document,!1);try{var o={get passive(){return a=!0,!0}};i.addEventListener("test",o,o),i.removeEventListener("test",o,o)}catch(s){}}).call(this,r(62))},function(e,t,r){"use strict";var n=r(2),i=r(6),a=r(5),o=r(38),s=r(3),u=r(7),c=r(75),l=r(83),f=r(28),h="";function d(e,t){return Object(f.a)("string"===typeof e),e=h+e,new Promise((function(r,n){try{var i=new Image;i.onload=function(){return r(i)},i.onerror=function(){return n(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(a){n(a)}}))}r.d(t,"a",(function(){return p}));var p=function(e){function t(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,t),Object(l.b)(e),(s instanceof Promise||"string"===typeof s)&&(s={data:s}),"string"===typeof s.data&&(s=Object.assign({},s,{data:d(s.data)})),(r=Object(i.a)(this,Object(a.a)(t).call(this,e,Object.assign({},s,{target:3553})))).initialize(s),Object.seal(Object(o.a)(r)),r}return Object(u.a)(t,e),Object(s.a)(t,null,[{key:"isSupported",value:function(e,t){return c.a.isSupported(e,t)}}]),t}(c.a)},function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));var n=r(28),i={};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";i[e]=i[e]||1;var t=i[e]++;return"".concat(e,"-").concat(t)}function o(e){return Object(n.a)("number"===typeof e,"Input must be a number"),e&&0===(e&e-1)}function s(e){var t=!0;for(var r in e){t=!1;break}return t}},,,,function(e,t,r){"use strict";function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;if(Array.isArray(e)){var r=e.length;if(!t||t.length!==r)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function i(e){var t,r={};return function(i){for(var a in i)if(!n(i[a],r[a])){t=e(i),r=i;break}return t}}r.d(t,"a",(function(){return i}))},,function(e,t,r){"use strict";var n=r(10),i=r(2),a=r(3),o=r(6),s=r(5),u=r(7),c=r(21),l=r(233),f=r(0),h=r(70),d=r(14),p=r(90),v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"_onUpdate",value:function(){var e=this.time,t=this.settings,r=t.fromValue,n=t.toValue,i=t.duration,a=(0,t.easing)(e/i);this._value=Object(d.lerp)(r,n,a)}},{key:"value",get:function(){return this._value}}]),t}(p.a);function g(e,t,r,n,i){var a=t-e;return(r-t)*i+-a*n+a+t}function m(e,t){if(Array.isArray(e)){for(var r=0,n=0;n<e.length;n++){var i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}var y=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"_onUpdate",value:function(){var e=this.settings,t=e.fromValue,r=e.toValue,n=e.damping,i=e.stiffness,a=this._prevValue,o=void 0===a?t:a,s=this._currValue,u=void 0===s?t:s,c=function(e,t,r,n,i){if(Array.isArray(r)){for(var a=[],o=0;o<r.length;o++)a[o]=g(e[o],t[o],r[o],n,i);return a}return g(e,t,r,n,i)}(o,u,r,n,i),l=m(c,r),f=m(c,u);l<1e-5&&f<1e-5&&(c=r,this.end()),this._prevValue=u,this._currValue=c}},{key:"value",get:function(){return this._currValue}}]),t}(p.a),b=r(22);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var w={interpolation:v,spring:y},x=function(){function e(t){Object(i.a)(this,e),this.transitions=new Map,this.timeline=t}return Object(a.a)(e,[{key:"add",value:function(e,t,r,n){var i=this.transitions;i.has(e)&&(t=i.get(e).value,this.remove(e));if(n=Object(h.e)(n)){var a=w[n.type];if(a){var o=new a(this.timeline);o.start(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n,{fromValue:t,toValue:r})),i.set(e,o)}else b.a.error("unsupported transition type '".concat(n.type,"'"))()}}},{key:"remove",value:function(e){var t=this.transitions;t.has(e)&&(t.get(e).cancel(),t.delete(e))}},{key:"update",value:function(){var e={},t=!0,r=!1,i=void 0;try{for(var a,o=this.transitions[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=Object(n.a)(a.value,2),u=s[0],c=s[1];c.update(),e[u]=c.value,c.inProgress||this.remove(u)}}catch(l){r=!0,i=l}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return e}},{key:"clear",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.transitions.keys()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this.remove(a)}}catch(o){t=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"active",get:function(){return this.transitions.size>0}}]),e}(),O=r(188),E=r(226),k=r(54),j=r(9),S=r(31),P=r(225),A=r(191),T=r(106),R=r(55),C=r(78),M=r(11),I={boolean:{validate:function(e,t){return!0},equal:function(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return t.optional&&!e||D(e)&&(3===e.length||4===e.length)},equal:function(e,t,r){return L(e,t)}},accessor:{validate:function(e,t){var r=B(e);return"function"===r||r===B(t.value)},equal:function(e,t,r){return"function"===typeof t||L(e,t)}},array:{validate:function(e,t){return t.optional&&!e||D(e)},equal:function(e,t,r){return r.compare?L(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"===typeof e},equal:function(e,t,r){return!r.compare||e===t}}};function L(e,t){if(e===t)return!0;if(!D(e)||!D(t))return!1;var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function F(e,t){switch(B(t)){case"object":return N(e,t);case"array":return N(e,{type:"array",value:t,compare:!1});case"boolean":return N(e,{type:"boolean",value:t});case"number":return N(e,{type:"number",value:t});case"function":return N(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function N(e,t){return"type"in t?Object.assign({name:e},I[t.type],t):"value"in t?Object.assign({name:e,type:B(t.value)},t):{name:e,type:"object",value:t}}function D(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function B(e){return D(e)?"array":null===e?"null":Object(M.a)(e)}var U=R.b.COMPONENT,z=R.b.ASYNC_ORIGINAL,V=R.b.ASYNC_RESOLVED,G=R.b.ASYNC_DEFAULTS;function H(){var e=this,t=W(e.constructor),r=Object.create(t);r[U]=e,r[z]={},r[V]={};for(var n=0;n<arguments.length;++n){var i=arguments[n];for(var a in i)r[a]=i[a]}return Object.freeze(r),r}function W(e){var t=Y(e,"_mergedDefaultProps");return t||(function(e){if(!e.prototype)return;var t=Object.getPrototypeOf(e),r=W(t),i=function(e){for(var t={},r={},i={},a=0,o=Object.entries(e);a<o.length;a++){var s=Object(n.a)(o[a],2),u=s[0],c=s[1];if(c&&c.deprecatedFor)i[u]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var l=F(u,c);t[u]=l,r[u]=l.value}}return{propTypes:t,defaultProps:r,deprecatedProps:i}}(Y(e,"defaultProps")||{}),a=function(e,t,r){var n=Object.create(null);Object.assign(n,t,e);var i=function(e){var t=Y(e,"layerName")||Y(e,"componentName");t||b.a.once(0,"".concat(e.name,".componentName not specified"))();return t||e.name}(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}(i.defaultProps,r,e),o=Object.assign({},t._propTypes,i.propTypes);!function(e,t){var r={},n={};for(var i in t){var a=t[i],o=a.name,s=a.value;a.async&&(r[o]=s,n[o]=X(o))}e[G]=r,e[z]={},Object.defineProperties(e,n)}(a,o);var s=Object.assign({},t._deprecatedProps,i.deprecatedProps);(function(e,t){var r=function(r){Object.defineProperty(e,r,{enumerable:!1,set:function(e){var n="".concat(this.id,": ").concat(r),i=!0,a=!1,o=void 0;try{for(var s,u=t[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;Z(this,c)||(this[c]=e)}}catch(l){a=!0,o=l}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}b.a.deprecated(n,t[r].join("/"))()}})};for(var n in t)r(n)})(a,s),e._mergedDefaultProps=a,e._propTypes=o,e._deprecatedProps=s}(e),e._mergedDefaultProps)}function X(e){return{enumerable:!0,set:function(t){"string"===typeof t||t instanceof Promise||Object(C.c)(t)?this[z][e]=t:this[V][e]=t},get:function(){if(this[V]){if(e in this[V]){var t=this[V][e];return"data"===e?t||this[G][e]:t}if(e in this[z]){var r=this[U]&&this[U].internalState;if(r&&r.hasAsyncProp(e))return r.getAsyncProp(e)}}return this[G][e]}}}function Z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Y(e,t){return Z(e,t)&&e[t]}var q=r(8),K=r.n(q),$=r(17),Q=r(164),J=R.b.ASYNC_ORIGINAL,ee=R.b.ASYNC_RESOLVED,te=R.b.ASYNC_DEFAULTS,re=Object.freeze({}),ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(i.a)(this,e),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=re,this.oldAsyncProps=null}return Object(a.a)(e,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){if(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(var r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}},{key:"setAsyncProps",value:function(e){var t=e[ee]||{},r=e[J]||e,n=e[te]||{};for(var i in t){var a=t[i];this._createAsyncPropData(i,a,n[i]),this._updateAsyncProp(i,a)}for(var o in r){var s=r[o];this._createAsyncPropData(o,s,n[o]),this._updateAsyncProp(o,s)}}},{key:"_updateAsyncProp",value:function(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"===typeof t){var r=this.layer&&this.layer.props.fetch;r&&(t=r(t,{propName:e,layer:this.layer}))}t instanceof Promise?this._watchPromise(e,t):Object(C.c)(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function(e,t){var r=this.asyncProps[e];return t!==r.lastValue&&(r.lastValue=t,!0)}},{key:"_setPropValue",value:function(e,t){var r=this.asyncProps[e];r.value=t,r.resolvedValue=t,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,t,r){var n=this.asyncProps[e];n&&r>=n.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),n.resolvedValue=t,n.resolvedLoadCount=r,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function(e,t){var r=this,n=this.asyncProps[e];n.pendingLoadCount++;var i=n.pendingLoadCount;t.then((function(t){t=r._postProcessValue(e,t),r._setAsyncPropValue(e,t,i);var n=r.layer&&r.layer.props.onDataLoad;"data"===e&&n&&n(t,{propName:e,layer:r.layer})})).catch((function(e){return b.a.error(e)()}))}},{key:"_resolveAsyncIterable",value:function(){var e=Object($.a)(K.a.mark((function e(t,r){var n,i,a,o,s,u,c,l,f,h,d,p;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,r),(n=this.asyncProps[t]).pendingLoadCount++,i=n.pendingLoadCount,a=[],o=0,s=!0,u=!1,e.prev=8,l=Object(Q.a)(r);case 10:return e.next=12,l.next();case 12:return f=e.sent,s=f.done,e.next=16,f.value;case 16:if(h=e.sent,s){e.next=26;break}d=h,a=this._postProcessValue(t,d,a),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:o,endRow:a.length}]}),o=a.length,this._setAsyncPropValue(t,a,i);case 23:s=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),u=!0,c=e.t0;case 32:if(e.prev=32,e.prev=33,s||null==l.return){e.next=37;break}return e.next=37,l.return();case 37:if(e.prev=37,!u){e.next=40;break}throw c;case 40:return e.finish(37);case 41:return e.finish(32);case 42:(p=this.layer&&this.layer.props.onDataLoad)&&p(a,{propName:t,layer:this.layer});case 44:case"end":return e.stop()}}),e,this,[[8,28,32,42],[33,,37,41]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_postProcessValue",value:function(e,t,r){var n=(this.component?this.component.props:{}).dataTransform;return"data"!==e?t:n?n(t,r):r?r.concat(t):t}},{key:"_createAsyncPropData",value:function(e,t,r){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0})}}]),e}(),ie=R.b.ASYNC_ORIGINAL,ae=R.b.ASYNC_RESOLVED,oe=R.b.ASYNC_DEFAULTS,se=0,ue=function(){function e(){Object(i.a)(this,e),this.props=H.apply(this,arguments),this.id=this.props.id,this.count=se++,this.lifecycle=R.a.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(a.a)(e,[{key:"clone",value:function(e){var t=this.props,r={};for(var n in t[oe])n in t[ae]?r[n]=t[ae][n]:n in t[ie]&&(r[n]=t[ie][n]);return new this.constructor(Object.assign({},t,r,e))}},{key:"_initState",value:function(){this.internalState=new ne({})}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();ue.componentName="Component",ue.defaultProps={};var ce=function(e){function t(e){var r,n=e.attributeManager,a=e.layer;return Object(i.a)(this,t),(r=Object(o.a)(this,Object(s.a)(t).call(this,a))).attributeManager=n,r.model=null,r.needsRedraw=!0,r.subLayers=null,r}return Object(u.a)(t,e),Object(a.a)(t,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),t}(ne),le=r(37),fe=function(e){return"boolean"===typeof e},he=function(e){return"function"===typeof e},de=function(e){return null!==e&&"object"===Object(M.a)(e)},pe=function(e){return e&&"function"===typeof e[Symbol.iterator]},ve=function(e){return e&&"function"===typeof e[Symbol.asyncIterator]},ge=function(e){return"undefined"!==typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json},me=function(e){return function(e){return"undefined"!==typeof File&&e instanceof File}(e)||function(e){return"undefined"!==typeof Blob&&e instanceof Blob}(e)},ye=function(e){return function(e){return"undefined"!==typeof ReadableStream&&e instanceof ReadableStream||de(e)&&he(e.tee)&&he(e.cancel)&&he(e.getReader)}(e)||function(e){return de(e)&&he(e.read)&&he(e.pipe)&&fe(e.readable)}(e)},be="",_e={};function we(e){for(var t in _e)if(e.startsWith(t)){var r=_e[t];return e.replace(t,r)}return e+=be}var xe=r(183),Oe=function(){function e(t,r){Object(i.a)(this,e),this._fileOrBlob=t,this.bodyUsed=!1}return Object(a.a)(e,[{key:"arrayBuffer",value:function(){var e=Object($.a)(K.a.mark((function e(){var t,r,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),r=t.reader,n=t.promise,r.readAsArrayBuffer(this._fileOrBlob),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"text",value:function(){var e=Object($.a)(K.a.mark((function e(){var t,r,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),r=t.reader,n=t.promise,r.readAsText(this._fileOrBlob),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"json",value:function(){var e=Object($.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getFileReader",value:function(){Object(xe.a)(!this.bodyUsed),this.bodyUsed=!0;var e=new FileReader,t=new Promise((function(t,r){try{e.onerror=function(e){return r(new Error("Read error"))},e.onabort=function(){return r(new Error("Read aborted."))},e.onload=function(){return t(e.result)}}catch(n){r(n)}}));return{reader:e,promise:t}}},{key:"headers",get:function(){return new Headers({"Content-Length":this._fileOrBlob.size,"Content-Type":this._fileOrBlob.type})}},{key:"ok",get:function(){return!0}},{key:"status",get:function(){return 200}},{key:"url",get:function(){return this._fileOrBlob.name||""}}]),e}();function Ee(e,t){return Promise.resolve(new Oe(e,t))}function ke(e){return je.apply(this,arguments)}function je(){return(je=Object($.a)(K.a.mark((function e(t){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,!t.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=r,e.next=7,t.text();case 7:r=e.t0+=e.sent,e.next=11;break;case 10:r+=t.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",r);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Se(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object($.a)(K.a.mark((function e(t,r){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!me(t)){e.next=2;break}return e.abrupt("return",Ee(t,r));case 2:return t=we(t),e.next=5,fetch(t,r);case 5:if((n=e.sent).ok||!r.throws){e.next=12;break}return e.t0=Error,e.next=10,ke(n);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=r(105);function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.1.1";Object(xe.a)(e,"no loader provided");var r=e.version;t&&r&&(t=Re(t),r=Re(r))}function Re(e){var t=e.split(".").map(Number);return{major:t[0],minor:t[1]}}var Ce=function(){function e(){Object(i.a)(this,e)}return Object(a.a)(e,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),e}(),Me={CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function e(){Object(i.a)(this,e),this.console=console}return Object(a.a)(e,[{key:"log",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.log).bind.apply(e,[this.console].concat(r))}},{key:"info",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.info).bind.apply(e,[this.console].concat(r))}},{key:"warn",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.warn).bind.apply(e,[this.console].concat(r))}},{key:"error",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.error).bind.apply(e,[this.console].concat(r))}}]),e}()),dataType:"arraybuffer"};function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fe=function(e){return e&&"object"===Object(M.a)(e)&&e.constructor==={}.constructor},Ne=Le({},Me);function De(e,t,r){var n=Le({},e&&(e.DEFAULT_LOADER_OPTIONS||e.defaultOptions||e.options||{}));return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new Ce),Be(n,Ne),Be(n,t),n}function Be(e,t){for(var r in t)if(r in t){var n=t[r];Fe(n)&&Fe(e[r])?e[r]=Le({},e[r],{},t[r]):e[r]=t[r]}}var Ue=r(135),ze=r(168),Ve=r(822);function Ge(e){if(Ve.a||Ve.b>=10){if("function"===typeof e[Symbol.asyncIterator])return e;if("function"===typeof e.getIterator)return e.getIterator()}return Ve.a?function(e){return He.apply(this,arguments)}(e):function(e){return We.apply(this,arguments)}(e)}function He(){return(He=Object(ze.a)(K.a.mark((function e(t){var r,n,i,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getReader(),e.prev=1;case 2:return e.next=5,Object(Ue.a)(r.read());case 5:if(n=e.sent,i=n.done,a=n.value,!i){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,a;case 12:e.next=2;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),r.releaseLock();case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function We(){return(We=Object(ze.a)(K.a.mark((function e(t){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ue.a)(t);case 2:t=e.sent;case 3:if(null===(r=t.read())){e.next=9;break}return e.next=8,r;case 8:return e.abrupt("continue",3);case 9:if(!t._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Object(Ue.a)(Xe(t));case 13:e.next=3;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object($.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.once("readable",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t){var r=e instanceof ArrayBuffer?new Uint8Array(e):e,n=t instanceof ArrayBuffer?new Uint8Array(t):t,i=new Uint8Array(r.byteLength+n.byteLength);return i.set(r,0),i.set(n,r.byteLength),i}var qe=K.a.mark((function(e){var t,r=arguments;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.length>1&&void 0!==r[1]?r[1]:{},"string"!==typeof e){n.next=4;break}return n.delegateYield(tt(e,t),"t0",3);case 3:return n.abrupt("return");case 4:if(!(e instanceof ArrayBuffer)){n.next=7;break}return n.delegateYield(et(e,t),"t1",6);case 6:return n.abrupt("return");case 7:throw new Error("assert");case 8:case"end":return n.stop()}}),qe)})),Ke=K.a.mark(et),$e=K.a.mark(tt);function Qe(e){return Je.apply(this,arguments)}function Je(){return(Je=Object($.a)(K.a.mark((function e(t){var r,n,i,a,o,s,u,c,l;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new ArrayBuffer(0),n="",i=!0,a=!1,e.prev=4,s=Object(Q.a)(t);case 6:return e.next=8,s.next();case 8:return u=e.sent,i=u.done,e.next=12,u.value;case 12:if(c=e.sent,i){e.next=19;break}"string"===typeof(l=c)?n+=l:r=Ye(r,l);case 16:i=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),a=!0,o=e.t0;case 25:if(e.prev=25,e.prev=26,i||null==s.return){e.next=30;break}return e.next=30,s.return();case 30:if(e.prev=30,!a){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(25);case 35:return e.abrupt("return",n||r);case 36:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function et(e){var t,r,n,i,a,o,s,u=arguments;return K.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:t=u.length>1&&void 0!==u[1]?u[1]:{},r=t.chunkSize,n=void 0===r?262144:r,i=0;case 3:if(!(i<e.byteLength)){c.next=14;break}return a=Math.min(e.byteLength-i,n),o=new ArrayBuffer(a),s=new Uint8Array(e,i,a),new Uint8Array(o).set(s),i+=a,c.next=12,o;case 12:c.next=3;break;case 14:case"end":return c.stop()}}),Ke)}function tt(e){var t,r,n,i,a,o,s=arguments;return K.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},r=t.chunkSize,n=void 0===r?262144:r,i=0;case 3:if(!(i<e.length)){u.next=11;break}return a=Math.min(e.length-i,n),o=e.slice(i,i+a),i+=a,u.next=9,o;case 9:u.next=3;break;case 11:case"end":return u.stop()}}),$e)}function rt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object($.a)(K.a.mark((function e(t){var r,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=12;break}return r="fetch failed ".concat(t.status," "),e.prev=2,e.next=5,t.text();case 5:n=e.sent,r+=n,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:throw new Error(r);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var it="Cannot convert supplied data type";function at(e,t){return ge(e)?t=t||e.url:me(t)&&(t=t.name),"string"===typeof t?t.replace(/\?.*/,""):t}function ot(e,t){if(t.text&&"string"===typeof e)return e;if(e instanceof ArrayBuffer){var r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)||(a=e)&&"object"===Object(M.a)(a)&&a.isBuffer){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);var n=e.buffer,i=e.byteLength||e.length;return 0===e.byteOffset&&i===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+i)),n}var a;throw new Error(it)}function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=Object($.a)(K.a.mark((function e(t,r){var n,i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,n=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!==typeof t&&!n){e.next=6;break}return e.abrupt("return",ot(t,r));case 6:if(!me(t)){e.next=10;break}return e.next=9,Ee(t);case 9:t=e.sent;case 10:if(!ge(t)){e.next=24;break}return i=t,e.next=14,rt(i);case 14:if(!r.binary){e.next=20;break}return e.next=17,i.arrayBuffer();case 17:e.t0=e.sent,e.next=23;break;case 20:return e.next=22,i.text();case 22:e.t0=e.sent;case 23:return e.abrupt("return",e.t0);case 24:if(ye(t)&&(t=Ge(t)),!pe(t)&&!ve(t)){e.next=27;break}return e.abrupt("return",Qe(t));case 27:throw new Error(it);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ct=r(16);function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e,t,r){return r||(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({fetch:e.fetch||Se},e),Array.isArray(e.loaders)||(e.loaders=null),e)}function ht(e,t){if(!t&&!Array.isArray(e))return e;var r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){var n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[].concat(Object(ct.a)(r),Object(ct.a)(n)):n}return r&&r.length?r:null}var dt=r(247);function pt(e){if(dt.toArrayBuffer&&(e=Object(dt.toArrayBuffer)(e)),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"===typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return Object(xe.a)(!1)}var vt=new Map;function gt(e){return"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n}")}function mt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=r||new Set;if(e){if(yt(e))n.add(e);else if(yt(e.buffer))n.add(e.buffer);else if(t&&"object"===Object(M.a)(e))for(var i in e)mt(e[i],t,n)}else;return void 0===r?Array.from(n):null}function yt(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&e instanceof MessagePort||("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}var bt=0;function _t(e){var t=e.data;(0,e.resolve)(t)}var wt=function(){function e(t){var r=t.source,n=t.name,a=void 0===n?"web-worker-".concat(bt++):n,o=t.onMessage;Object(i.a)(this,e);var s=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],Object(xe.a)("string"===typeof e,"worker source"),e.startsWith("url(")&&e.endsWith(")")){var t=e.match(/^url\((.*)\)$/)[1];if(t&&!t.startsWith("http"))return t;e=gt(t)}var r=vt.get(e);if(!r){var n=new Blob([e],{type:"application/javascript"});r=URL.createObjectURL(n),vt.set(e,r)}return r}(r,a);this.worker=new Worker(s,{name:a}),this.name=a,this.onMessage=o||_t}return Object(a.a)(e,[{key:"process",value:function(){var e=Object($.a)(K.a.mark((function e(t){var r=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r.worker.onmessage=function(t){return r.onMessage({worker:r.worker,data:t.data,resolve:e,reject:n})},r.worker.onerror=function(e){var t="".concat(r.name,": WorkerThread.process() failed");e.message&&(t+=" ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));var i=new Error(t);console.error(e),n(i)};var i=mt(t);r.worker.postMessage(t,i)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}(),xt=function(){function e(t){var r=t.source,n=t.name,a=void 0===n?"unnamed":n,o=t.maxConcurrency,s=void 0===o?1:o,u=t.onMessage,c=t.onDebug,l=void 0===c?function(){}:c;Object(i.a)(this,e),this.source=r,this.name=a,this.maxConcurrency=s,this.onMessage=u,this.onDebug=l,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1}return Object(a.a)(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(){var e=Object($.a)(K.a.mark((function e(t,r){var n=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){n.jobQueue.push({data:t,jobName:r,resolve:e,reject:i}),n._startQueuedJob()})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_startQueuedJob",value:function(){var e=this;if(this.jobQueue.length){var t=this._getAvailableWorker();if(t){var r=this.jobQueue.shift();this.onDebug({message:"processing",worker:t.name,job:r.jobName,backlog:this.jobQueue.length}),t.process(r.data).then((function(e){return r.resolve(e)})).catch((function(e){return r.reject(e)})).then((function(){return e._onWorkerDone(t)}))}}}},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.idleQueue.push(e),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new wt({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),e}(),Ot=function(){function e(t){var r=t.maxConcurrency,n=void 0===r?5:r,a=t.onMessage,o=t.onDebug,s=void 0===o?function(){}:o;Object(i.a)(this,e),this.maxConcurrency=n,this.onMessage=a,this.onDebug=s,this.workerPools=new Map}return Object(a.a)(e,null,[{key:"isSupported",value:function(){return"undefined"!==typeof Worker}}]),Object(a.a)(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug)}},{key:"destroy",value:function(){this.workerPools.forEach((function(e){return e.destroy()}))}},{key:"process",value:function(){var e=Object($.a)(K.a.mark((function e(t,r,n){var i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._getWorkerPool(t,r),e.abrupt("return",i.process(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_getWorkerPool",value:function(e,t){var r=this.workerPools.get(t);return r||(r=new xt({source:e,name:t,onMessage:this.onMessage,maxConcurrency:this.maxConcurrency,onDebug:this.onDebug}),this.workerPools.set(t,r)),r}}]),e}();function Et(e,t,r,n){if(!Ot.isSupported())return!1;var i=r&&r[e.id];return!!("local"===r.worker&&i&&i.localWorkerUrl||r.worker&&i&&i.workerUrl)&&(!e.useWorker||e.useWorker(r))}function kt(e,t,r,n){var i=(r||{}).worker,a=r&&r[e.id]||{},o="local"===i?a.localWorkerUrl:a.workerUrl,s="url(".concat(o,")"),u=e.name,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.maxConcurrency&&(t.maxConcurrency=e.maxConcurrency);e.onDebug&&(t.onDebug=e.onDebug);jt||(jt=new Ot({onMessage:St}));return jt.setProps(t),jt}(r);r=JSON.parse(JSON.stringify(r));var l="2.1.1"!==e.version?"(core version ".concat("2.1.1",")"):"";return c.process(s,"".concat(u,"-worker@").concat(e.version).concat(l),{arraybuffer:pt(t),options:r,source:"loaders.gl@".concat("2.1.1"),type:"parse"})}var jt=null;function St(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object($.a)(K.a.mark((function e(t){var r,n,i,a,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.worker,n=t.data,i=t.resolve,a=t.reject,e.t0=n.type,e.next="done"===e.t0?4:"parse"===e.t0?6:"error"===e.t0?17:19;break;case 4:return i(n.result),e.abrupt("break",19);case 6:return e.prev=6,e.next=9,Vt(n.arraybuffer,n.options,n.url);case 9:o=e.sent,r.postMessage({type:"parse-done",id:n.id,result:o},mt(o)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),r.postMessage({type:"parse-error",id:n.id,message:e.t1.message});case 16:return e.abrupt("break",19);case 17:return a(n.message),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}var At=r(352),Tt=/\.([^.]+)$/,Rt=/^data:(.*?)(;|,)/;function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.nothrow,a=void 0!==i&&i;if(t=t||"",e&&!Array.isArray(e)){var o=e;return Object(Ae.b)(o),o}Mt(e=[].concat(Object(ct.a)(e||[]),Object(ct.a)(Object(At.a)())));var s=It(e,t=t.replace(/\?.*/,""));if(!(s=(s=s||Ft(e,r))||Nt(e,r))){if(a)return null;var u="No valid loader found";throw r&&(u+=' for data starting with "'.concat(Ut(r),'"')),t&&(u+=" for ".concat(t)),new Error(u)}return s}function Mt(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;Object(Ae.b)(o)}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}function It(e,t){var r=t.match(Rt),n=r&&r[1];if(n)return Lt(e,n);var i=(r=t.match(Tt))&&r[1];return i&&function(e,t){t=t.toLowerCase();var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,u=!0,c=!1,l=void 0;try{for(var f,h=s.extensions[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){if(f.value.toLowerCase()===t)return s}}catch(d){c=!0,l=d}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}}catch(d){n=!0,i=d}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}(e,i)}function Lt(e,t){var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if(s.mimeTypes&&s.mimeTypes.includes(t))return s}}catch(u){n=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}function Ft(e,t){return t&&ge(t)&&t.headers?Lt(e,t.headers.get("content-type")):null}function Nt(e,t){if(!t)return null;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if("string"===typeof t){if(Dt(t,s))return s}else if(ArrayBuffer.isView(t)){if(Bt(t.buffer,t.byteOffset,s))return s}else if(t instanceof ArrayBuffer){if(Bt(t,0,s))return s}}}catch(u){n=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}function Dt(e,t){return t.testText&&t.testText(e)}function Bt(e,t,r){switch(Array.isArray(r.test)?"array":Object(M.a)(r.test)){case"function":return r.test(e,r);case"string":case"array":return(Array.isArray(r.test)?r.test:[r.test]).some((function(r){return r===zt(e,t,r.length)}));default:return!1}}function Ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return zt(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var r=0;return zt(e,r,t)}return""}function zt(e,t,r){if(e.byteLength<=t+r)return"";for(var n=new DataView(e),i="",a=0;a<r;a++)i+=String.fromCharCode(n.getUint8(t+a));return i}function Vt(e,t,r,n){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object($.a)(K.a.mark((function e(t,r,n,i){var a,o,s,u;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||Array.isArray(r)||Object(Ae.a)(r)||(i=n,n=r,r=null),a="","string"===typeof i&&(a=i,i=null),n=n||{},o=at(t,a),s=ht(r,i),u=Ct(s,o,t)){e.next=9;break}return e.abrupt("return",null);case 9:return n=De(u,n,o),i=ft({url:o,parse:Vt,loaders:s},0,i),e.next=13,Ht(u,t,n,i);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t,r,n){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object($.a)(K.a.mark((function e(t,r,n,i){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(t),e.next=3,st(r,t);case 3:if(r=e.sent,!t.parseTextSync||"string"!==typeof r){e.next=7;break}return n.dataType="text",e.abrupt("return",t.parseTextSync(r,n,i,t));case 7:if(!Et(t,0,n)){e.next=11;break}return e.next=10,kt(t,r,n);case 10:return e.abrupt("return",e.sent);case 11:if(!t.parse){e.next=15;break}return e.next=14,t.parse(r,n,i,t);case 14:return e.abrupt("return",e.sent);case 15:return Object(xe.a)(!t.parseSync),e.abrupt("return",Object(xe.a)(!1));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(){return(Xt=Object($.a)(K.a.mark((function e(t,r,n){var i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(r)||Object(Ae.a)(r)||(n=r,r=null),i=t,"string"!==typeof t){e.next=8;break}return e.next=5,Se(t,n);case 5:i=e.sent,e.next=9;break;case 8:t=null;case 9:if(!me(t)){e.next=14;break}return e.next=12,Se(t,n);case 12:i=e.sent,t=null;case 14:return e.next=16,Vt(i,r,n,t);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.d(t,"a",(function(){return Kt}));var Zt=Object.freeze([]),Yt=new Uint8ClampedArray(0),qt={data:{type:"data",value:Zt,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(e){return e&&e.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(e,t){return function(e,t,r){return Xt.apply(this,arguments)}(e,t.layer.getLoadOptions())},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:c.a.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Kt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"toString",value:function(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(e){var t=this.context.viewport,r=Object(A.a)(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),i=Object(le.q)(r,t.pixelProjectionMatrix),a=Object(n.a)(i,3),o=a[0],s=a[1],u=a[2];return 2===e.length?[o,s]:[o,s,u]}},{key:"unproject",value:function(e){return this.context.viewport.unproject(e)}},{key:"projectPosition",value:function(e){return Object(A.b)(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var e=this.props.coordinateSystem;return e===c.a.DEFAULT||e===c.a.LNGLAT||e===c.a.CARTESIAN}},{key:"onHover",value:function(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}},{key:"onClick",value:function(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function(e){Object(S.a)(e instanceof Uint8Array);var t=Object(n.a)(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.props.extensions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=Object(P.a)(e,o.getShaders.call(this,o))}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"shouldUpdateState",value:function(e){e.oldProps,e.props,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){e.oldProps,e.props,e.context;var t=e.changeFlags,r=this.getAttributeManager();if(t.dataChanged&&r){var n=t.dataChanged;if(Array.isArray(n)){var i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r.invalidateAll(c)}}catch(l){a=!0,o=l}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else r.invalidateAll()}}},{key:"finalizeState",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.delete()}}catch(o){t=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}var a=this.getAttributeManager();a&&a.finalize(),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.draw(e)}}catch(o){r=!0,n=o}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"getPickingInfo",value:function(e){var t=e.info,r=(e.mode,t.index);return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.getAttributeManager());t&&("all"===e?t.invalidateAll():t.invalidate(e))}},{key:"updateAttributes",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._setModelAttributes(o,e)}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"_updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var r=this.getNumInstances(e),n=this.getStartIndices(e);t.update({data:e.data,numInstances:r,startIndices:n,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"_updateUniformTransition",value:function(){var e=this.internalState.uniformTransitions;if(e.active){var t=e.update(),r=Object.create(this.props);for(var n in t)Object.defineProperty(r,n,{value:t[n]});return r}return this.props}},{key:"calculateInstancePickingColors",value:function(e,t){var r=t.numInstances,n=Yt.length/3;if(n<r){var i=(Yt=T.a.allocate(Yt,r,{size:3,copy:!0})).length/3,a=[];Object(S.a)(i<16777215,"index out of picking color range");for(var o=n;o<i;o++)this.encodePickingColor(o,a),Yt[3*o+0]=a[0],Yt[3*o+1]=a[1],Yt[3*o+2]=a[2]}e.value=Yt.subarray(0,3*r)}},{key:"_setModelAttributes",value:function(e,t){var r=this.getAttributeManager(),n=e.userData.excludeAttributes||{},i=r.getShaderAttributes(t,n);e.setAttributes(i)}},{key:"clearPickingColor",value:function(e){var t=this.getAttributeManager().attributes,r=t.pickingColors,n=t.instancePickingColors,i=r||n,a=this.decodePickingColor(e),o=i.getVertexOffset(a),s=i.getVertexOffset(a+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}},{key:"restorePickingColors",value:function(){var e=this.getAttributeManager().attributes,t=e.pickingColors,r=e.instancePickingColors;(t||r).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Object(E.a)(e.data)}},{key:"getStartIndices",value:function(e){return void 0!==(e=e||this.props).startIndices?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){Object(k.a)("layer.initialize",this),this._initState(),this.initializeState(this.context);var e=!0,t=!1,r=void 0;try{for(var n,i=this.props.extensions[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a.initializeState.call(this,this.context,a)}}catch(o){t=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var e=this.needsUpdate();Object(k.a)("layer.update",this,e),e&&this._updateState()}},{key:"_updateState",value:function(){var e=this.props,t=this._updateUniformTransition();this.internalState.propsInTransition=t,this.props=t;var r=this._getUpdateParams();if(this.context.gl)this.updateState(r);else try{this.updateState(r)}catch(c){}var n=!0,i=!1,a=void 0;try{for(var o,s=this.props.extensions[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.updateState.call(this,r,u)}}catch(l){i=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}this._updateModules(r),this.isComposite?this._renderLayers(r):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function(){Object(k.a)("layer.finalize",this),Object(S.a)(this.internalState&&this.state),this.finalizeState(this.context);var e=!0,t=!1,r=void 0;try{for(var n,i=this.props.extensions[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a.finalizeState.call(this,a)}}catch(o){t=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"drawLayer",value:function(e){var t=this,r=e.moduleParameters,n=void 0===r?null:r,i=e.uniforms,a=void 0===i?{}:i,o=e.parameters,s=void 0===o?{}:o;this._updateAttributeTransition();var u=this.props;this.props=this.internalState.propsInTransition||u;var c=this.props.opacity;a.opacity=Math.pow(c,1/2.2),n&&this.setModuleParameters(n);var l=this.props.getPolygonOffset,f=l&&l(a)||[0,0];Object(j.k)(this.context.gl,{polygonOffset:f}),Object(j.l)(this.context.gl,s,(function(){var e={moduleParameters:n,uniforms:a,parameters:s,context:t.context},r=!0,i=!1,o=void 0;try{for(var u,c=t.props.extensions[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value;l.draw.call(t,e,l)}}catch(f){i=!0,o=f}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}t.draw(e)})),this.props=u}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this.internalState.changeFlags;for(var r in t)e[r]&&!t[r]&&(t[r]=e[r],Object(k.a)("layer.changeFlag",this,r,e));var n=t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged;t.propsOrDataChanged=n,t.somethingChanged=n||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(e,t){var r=Object(O.b)(e,t);if(r.updateTriggersChanged)for(var n in r.updateTriggersChanged)r.updateTriggersChanged[n]&&this.invalidateAttribute(n);if(r.transitionsChanged)for(var i in r.transitionsChanged)this.internalState.uniformTransitions.add(i,t[i],e[i],e.transitions[i]);return this.setChangeFlags(r)}},{key:"validateProps",value:function(){Object(O.c)(this.props)}},{key:"setModuleParameters",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(o){r=!0,n=o}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"_updateModules",value:function(e){var t=e.props,r=e.oldProps,n=t.autoHighlight,i=t.highlightedObjectIndex,a=t.highlightColor;if(r.autoHighlight!==n||r.highlightedObjectIndex!==i||r.highlightColor!==a){var o={};n||(o.pickingSelectedColor=null),a[3]=a[3]||255,o.pickingHighlightColor=a,Number.isInteger(i)&&(o.pickingSelectedColor=i>=0?this.encodePickingColor(i):null),this.setModuleParameters(o)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;var r=this.getAttributeManager(),n=r&&r.getNeedsRedraw(e);return t=t||n}},{key:"_getAttributeManager",value:function(){return new l.a(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){Object(S.a)(!this.internalState&&!this.state),Object(S.a)(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new ce({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return b.a.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e}}),this.internalState.layer=this,this.internalState.uniformTransitions=new x(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(e){Object(k.a)("layer.matched",this,this===e);var t=e.state,r=e.internalState;Object(S.a)(t&&r),this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}}]),t}(ue);Kt.layerName="Layer",Kt.defaultProps=qt},function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var r,s,u=o(e),c=1;c<arguments.length;c++){for(var l in r=Object(arguments[c]))i.call(r,l)&&(u[l]=r[l]);if(n){s=n(r);for(var f=0;f<s.length;f++)a.call(r,s[f])&&(u[s[f]]=r[s[f]])}}return u}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(2),i=r(3),a=r(14),o=[255,255,255],s=[0,0,-1],u=0,c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r=t.color,i=void 0===r?o:r,c=t.intensity,l=void 0===c?1:c,f=t.direction,h=void 0===f?s:f,d=t._shadow,p=void 0!==d&&d;this.id=t.id||"directional-".concat(u++),this.color=i,this.intensity=l,this.type="directional",this.direction=new a.Vector3(h).normalize().toArray(),this.shadow=p}return Object(i.a)(e,[{key:"getProjectedLight",value:function(){return this}}]),e}()},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(19),u=r(7),c=r(273),l=r(302),f=r(22),h=r(145),d=r(201),p=r(94),v=r(0),g=r(369);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var y=function(e){function t(e){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{attributes:{positions:{size:3,padding:18,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getGeometryFromBuffer",value:function(e){return this.normalize?Object(s.a)(Object(o.a)(t.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){if(!this.normalize){var t=e.length/this.positionSize;return this.opts.loop?t+2:t}var r=this.getPathLength(e);return r<2?0:this.isClosed(e)?r<3?0:r+2:r}},{key:"updateGeometryAttributes",value:function(e,t){0!==t.geometrySize&&(this._updateSegmentTypes(e,t),this._updatePositions(e,t))}},{key:"_updateSegmentTypes",value:function(e,t){var r=this.attributes.segmentTypes,n=this.isClosed(e),i=t.vertexStart,a=t.geometrySize;r.fill(0,i,i+a),n?(r[i]=4,r[i+a-2]=4):(r[i]+=1,r[i+a-2]+=2),r[i+a-1]=4}},{key:"_updatePositions",value:function(e,t){var r=this.attributes.positions;if(r)for(var n=t.vertexStart,i=t.geometrySize,a=n,o=0;o<i;a++,o++){var s=this.getPointOnPath(e,o);r[3*a]=s[0],r[3*a+1]=s[1],r[3*a+2]=s[2]||0}}},{key:"getPathLength",value:function(e){return Number.isFinite(e[0])?e.length/this.positionSize:e.length}},{key:"getPointOnPath",value:function(e,t){if(Number.isFinite(e[0])){var r=this.positionSize;return t*r>=e.length&&(t+=1-e.length/r),[e[t*r],e[t*r+1],3===r?e[t*r+2]:0]}return t>=e.length&&(t+=1-e.length),e[t]}},{key:"isClosed",value:function(e){if(!this.normalize)return this.opts.loop;var t=this.getPathLength(e),r=this.getPointOnPath(e,0),n=this.getPointOnPath(e,t-1);return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]}}]),t}(g.a);r.d(t,"a",(function(){return x}));var b=[0,0,0,255],_={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:b},getWidth:{type:"accessor",value:1}},w={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},x=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(){return Object(s.a)(Object(o.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec2 deltaA = (currPoint.xy - prevPoint.xy) / width;\n  vec2 deltaB = (nextPoint.xy - currPoint.xy) / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * jointType * 4.0 * flipIfTrue(isStartCap), isJoint);\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec2 width = project_pixel_size_to_clipspace(widthPixels);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      width\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    vec2 width = project_pixel_size(widthPixels);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (jointType > 0.0 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (jointType == 0.0 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:w,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:w,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:w,defaultValue:b},instancePickingColors:{size:3,type:5121,accessor:function(t,r){var n=r.index,i=r.target;return e.encodePickingColor(n,i)}}}),this.setState({pathTesselator:new y({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&f.a.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var r=e.oldProps,n=e.props,i=e.changeFlags;Object(s.a)(Object(o.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i});var a=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var u=this.state.pathTesselator,c=n.data.attributes||{};u.updateGeometry({data:n.data,geometryBuffer:c.getPath,buffers:c,normalize:!n._pathType,loop:"loop"===n._pathType,getGeometry:n.getPath,positionFormat:n.positionFormat,dataChanged:i.dataChanged}),this.setState({numInstances:u.instanceCount,startIndices:u.vertexStarts}),i.dataChanged||a.invalidateAll()}if(i.extensionsChanged){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),a.invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.viewport,n=this.props,i=n.rounded,a=n.billboard,o=n.miterLimit,s=n.widthUnits,u=n.widthScale,c=n.widthMinPixels,l=n.widthMaxPixels,f="pixels"===s?r.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(i),billboard:a,widthScale:u*f,miterLimit:o,widthMinPixels:c,widthMaxPixels:l})).draw()}},{key:"_getModel",value:function(e){return new d.a(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new p.a({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateSegmentTypes",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}]),t}(h.a);x.layerName="PathLayer",x.defaultProps=_},function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(149);function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,r){return(a=i()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&Object(n.a)(a,r.prototype),a}).apply(null,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(124),c=r(18),l=r(91),f=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r){var n=this[r]-e[r];t+=n*n}return Object(c.a)(t)}},{key:"dot",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return Object(c.a)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++)for(var a=i[n],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return Object(l.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(c.a)(this[e])}},{key:"setComponent",value:function(e,t){return Object(l.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(c.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(c.a)(e)}}]),t}(u.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n=r(10),i=r(2),a=r(6),o=r(5),s=r(3),u=r(7),c=r(18),l=r(206),f=r(76),h=r(25),d=r(52),p=r(39),v=r(49),g=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),m=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),y=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),b={},_=function(e){function t(e){var r;return Object(i.a)(this,t),r=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(e)?r.copy(e):r.identity(),r}return Object(u.a)(t,e),Object(s.a)(t,[{key:"INDICES",get:function(){return y}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return b.IDENTITY=b.IDENTITY||Object.freeze(new t(g)),b.IDENTITY}},{key:"ZERO",get:function(){return b.ZERO=b.ZERO||Object.freeze(new t(m)),b.ZERO}}]),Object(s.a)(t,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}},{key:"set",value:function(e,t,r,n,i,a,o,s,u,c,l,f,h,d,p,v){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=d,this[14]=p,this[15]=v,this.check()}},{key:"setRowMajor",value:function(e,t,r,n,i,a,o,s,u,c,l,f,h,d,p,v){return this[0]=e,this[1]=i,this[2]=u,this[3]=h,this[4]=t,this[5]=a,this[6]=c,this[7]=d,this[8]=r,this[9]=o,this[10]=l,this[11]=p,this[12]=n,this[13]=s,this[14]=f,this[15]=v,this.check()}},{key:"toRowMajor",value:function(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}},{key:"identity",value:function(){return this.copy(g)}},{key:"fromQuaternion",value:function(e){return h.c(this,e),this.check()}},{key:"frustum",value:function(e){var r=e.left,n=e.right,i=e.bottom,a=e.top,o=e.near,s=e.far;return s===1/0?t._computeInfinitePerspectiveOffCenter(this,r,n,i,a,o):h.d(this,r,n,i,a,o,s),this.check()}},{key:"lookAt",value:function(e,t,r){if(1===arguments.length){var n=e;e=n.eye,t=n.center,r=n.up}return t=t||[0,0,0],r=r||[0,1,0],h.f(this,e,t,r),this.check()}},{key:"ortho",value:function(e){var t=e.left,r=e.right,n=e.bottom,i=e.top,a=e.near,o=void 0===a?.1:a,s=e.far,u=void 0===s?500:s;return h.h(this,t,r,n,i,o,u),this.check()}},{key:"orthographic",value:function(e){var r=e.fovy,n=void 0===r?45*Math.PI/180:r,i=e.aspect,a=void 0===i?1:i,o=e.focalDistance,s=void 0===o?1:o,u=e.near,c=void 0===u?.1:u,l=e.far,f=void 0===l?500:l;if(n>2*Math.PI)throw Error("radians");var h=n/2,d=s*Math.tan(h),p=d*a;return(new t).ortho({left:-p,right:p,bottom:-d,top:d,near:c,far:f})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,r=e.fov,n=void 0===r?45*Math.PI/180:r,i=e.aspect,a=void 0===i?1:i,o=e.near,s=void 0===o?.1:o,u=e.far,c=void 0===u?500:u;if((t=t||n)>2*Math.PI)throw Error("radians");return h.i(this,t,a,s,c),this.check()}},{key:"determinant",value:function(){return h.a(this)}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(t||[-0,-0,-0]),n=1/r[0],i=1/r[1],a=1/r[2];return e[0]=this[0]*n,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*n,e[5]=this[5]*i,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*n,e[9]=this[9]*i,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"getRotationMatrix3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getScale(t||[-0,-0,-0]),n=1/r[0],i=1/r[1],a=1/r[2];return e[0]=this[0]*n,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=this[4]*n,e[4]=this[5]*i,e[5]=this[6]*a,e[6]=this[8]*n,e[7]=this[9]*i,e[8]=this[10]*a,e}},{key:"transpose",value:function(){return h.p(this,this),this.check()}},{key:"invert",value:function(){return h.e(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return h.g(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return h.g(this,this,e),this.check()}},{key:"rotateX",value:function(e){return h.k(this,this,e),this.check()}},{key:"rotateY",value:function(e){return h.l(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return h.m(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=Object(n.a)(e,3),r=t[0],i=t[1],a=t[2];return this.rotateX(r).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(e,t){return h.j(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?h.n(this,this,e):h.n(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return h.o(this,this,e),this.check()}},{key:"transform",value:function(e,t){return 4===e.length?(t=v.n(t||[-0,-0,-0,-0],e,this),Object(c.b)(t,4),t):this.transformAsPoint(e,t)}},{key:"transformAsPoint",value:function(e,t){switch(e.length){case 2:t=d.j(t||[-0,-0],e,this);break;case 3:t=p.o(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(t,e.length),t}},{key:"transformAsVector",value:function(e,t){switch(e.length){case 2:t=Object(f.a)(t||[-0,-0],e,this);break;case 3:t=Object(f.c)(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(t,e.length),t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,r){return this.identity().translate([e,t,r])}},{key:"transformPoint",value:function(e,t){return Object(c.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}},{key:"transformVector",value:function(e,t){return Object(c.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}},{key:"transformDirection",value:function(e,t){return Object(c.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(e,t,r,n,i,a){var o=2*a/(r-t),s=2*a/(i-n),u=(r+t)/(r-t),c=(i+n)/(i-n),l=-2*a;return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=u,e[9]=c,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0,e}}]),t}(l.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(10),i=r(2),a=r(6),o=r(5),s=r(3),u=r(7),c=r(124),l=r(15),f=r(18),h=r(177),d="Unknown Euler angle order";var p=function(e){function t(){var e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;(Object(i.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0,-0)),arguments.length>0&&Array.isArray(arguments[0]))?(r=e).fromVector3.apply(r,arguments):e.set(n,s,u,c);return e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),Object(s.a)(t,[{key:"fromQuaternion",value:function(e){var r=Object(n.a)(e,4),i=r[0],a=r[1],o=r[2],s=r[3],u=a*a,c=-2*(u+o*o)+1,l=2*(i*a+s*o),f=-2*(i*o-s*a),h=2*(a*o+s*i),d=-2*(i*i+u)+1;return f=(f=f>1?1:f)<-1?-1:f,new t(Math.atan2(h,d),Math.asin(f),Math.atan2(l,c),t.RollPitchYaw)}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return this[0]=e,this[1]=t,this[2]=r,this[3]=Number.isFinite(n)?n:this[3],this.check()}},{key:"validate",value:function(){return(e=this[3])>=0&&e<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var e}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}},{key:"fromRollPitchYaw",value:function(e,r,n){return this.set(e,r,n,t.ZYX)}},{key:"fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder;return this._fromRotationMatrix(e,r),this.check()}},{key:"getRotationMatrix",value:function(e){return this._getRotationMatrix(e)}},{key:"getQuaternion",value:function(){var e=new h.a;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(d)}}},{key:"_fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,n=e.elements,i=n[0],a=n[4],o=n[8],s=n[1],u=n[5],c=n[9],f=n[2],h=n[6],p=n[10];switch(r=r||this[3]){case t.XYZ:this[1]=Math.asin(Object(l.d)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(-c,p),this[2]=Math.atan2(-a,i)):(this[0]=Math.atan2(h,u),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-Object(l.d)(c,-1,1)),Math.abs(c)<.99999?(this[1]=Math.atan2(o,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-f,i),this[2]=0);break;case t.ZXY:this[0]=Math.asin(Object(l.d)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-f,p),this[2]=Math.atan2(-a,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case t.ZYX:this[1]=Math.asin(-Object(l.d)(f,-1,1)),Math.abs(f)<.99999?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-a,u));break;case t.YZX:this[2]=Math.asin(Object(l.d)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-f,i)):(this[0]=0,this[1]=Math.atan2(o,p));break;case t.XZY:this[2]=Math.asin(-Object(l.d)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(h,u),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,p),this[1]=0);break;default:throw new Error(d)}return this[3]=r,this}},{key:"_getRotationMatrix",value:function(e){var r=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=this.x,i=this.y,a=this.z,o=Math.cos(n),s=Math.cos(i),u=Math.cos(a),c=Math.sin(n),l=Math.sin(i),f=Math.sin(a);switch(this[3]){case t.XYZ:var h=o*u,p=o*f,v=c*u,g=c*f;r[0]=s*u,r[4]=-s*f,r[8]=l,r[1]=p+v*l,r[5]=h-g*l,r[9]=-c*s,r[2]=g-h*l,r[6]=v+p*l,r[10]=o*s;break;case t.YXZ:var m=s*u,y=s*f,b=l*u,_=l*f;r[0]=m+_*c,r[4]=b*c-y,r[8]=o*l,r[1]=o*f,r[5]=o*u,r[9]=-c,r[2]=y*c-b,r[6]=_+m*c,r[10]=o*s;break;case t.ZXY:var w=s*u,x=s*f,O=l*u,E=l*f;r[0]=w-E*c,r[4]=-o*f,r[8]=O+x*c,r[1]=x+O*c,r[5]=o*u,r[9]=E-w*c,r[2]=-o*l,r[6]=c,r[10]=o*s;break;case t.ZYX:var k=o*u,j=o*f,S=c*u,P=c*f;r[0]=s*u,r[4]=S*l-j,r[8]=k*l+P,r[1]=s*f,r[5]=P*l+k,r[9]=j*l-S,r[2]=-l,r[6]=c*s,r[10]=o*s;break;case t.YZX:var A=o*s,T=o*l,R=c*s,C=c*l;r[0]=s*u,r[4]=C-A*f,r[8]=R*f+T,r[1]=f,r[5]=o*u,r[9]=-c*u,r[2]=-l*u,r[6]=T*f+R,r[10]=A-C*f;break;case t.XZY:var M=o*s,I=o*l,L=c*s,F=c*l;r[0]=s*u,r[4]=-f,r[8]=l*u,r[1]=M*f+F,r[5]=o*u,r[9]=I*f-L,r[2]=L*f-I,r[6]=c*u,r[10]=F*f+M;break;default:throw new Error(d)}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},{key:"toQuaternion",value:function(){var e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),n=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),a=Math.sin(.5*this.pitch),o=e*r*i+t*n*a,s=e*n*i-t*r*a,u=e*r*a+t*n*i,c=t*r*i-e*n*a;return new h.a(s,u,c,o)}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(f.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(f.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(f.a)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=Object(f.a)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=Object(f.a)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=Object(f.a)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=Object(f.a)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=Object(f.a)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=Object(f.a)(e)}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=Object(f.a)(e)}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=Object(f.a)(e)}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=Object(f.a)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=function(e){if(e<0&&e>=6)throw new Error(d);return e}(e)}}]),t}(c.a)},function(e,t,r){"use strict";var n=r(16),i=r(10),a=r(21),o=r(133),s=r(14),u=r(143),c=r(37),l=Object(u.a)((function(e){var t=e.viewport,r=e.center;return new s.Matrix4(t.viewProjectionMatrix).invert().transform(r)})),f=Object(u.a)((function(e){var t=e.viewport,r=e.shadowMatrices,a=[],o=t.pixelUnprojectionMatrix,u=t.isGeospatial?void 0:1,l=[[0,0,u],[t.width,0,u],[0,t.height,u],[t.width,t.height,u],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((function(e){return function(e,t){var r=Object(i.a)(e,3),n=r[0],a=r[1],o=r[2],s=Object(c.n)([n,a,o],t);if(Number.isFinite(o))return s;return[s[0],s[1],0]}(e,o)})),f=!0,h=!1,d=void 0;try{for(var p,v=function(){var e=p.value,r=e.clone().translate(new s.Vector3(t.center).negate()),i=l.map((function(e){return r.transform(e)})),o=(new s.Matrix4).ortho({left:Math.min.apply(Math,Object(n.a)(i.map((function(e){return e[0]})))),right:Math.max.apply(Math,Object(n.a)(i.map((function(e){return e[0]})))),bottom:Math.min.apply(Math,Object(n.a)(i.map((function(e){return e[1]})))),top:Math.max.apply(Math,Object(n.a)(i.map((function(e){return e[1]})))),near:Math.min.apply(Math,Object(n.a)(i.map((function(e){return-e[2]})))),far:Math.max.apply(Math,Object(n.a)(i.map((function(e){return-e[2]}))))});a.push(o.multiplyRight(e))},g=r[Symbol.iterator]();!(f=(p=g.next()).done);f=!0)v()}catch(m){h=!0,d=m}finally{try{f||null==g.return||g.return()}finally{if(h)throw d}}return a})),h=[0,0,0,1],d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function p(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||h,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},n=l({viewport:e.viewport,center:t.project_uCenter}),i=[],o=f({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice(),u=0;u<e.shadowMatrices.length;u++){var c=o[u],p=c.clone().translate(new s.Vector3(e.viewport.center).negate());t.project_uCoordinateSystem===a.a.LNGLAT&&t.project_uProjectionMode===a.c.WEB_MERCATOR?(o[u]=p,i[u]=n):(o[u]=c.clone().multiplyRight(d),i[u]=p.transform(n))}for(var v=0;v<o.length;v++)r["shadow_uViewProjectionMatrices[".concat(v,"]")]=o[v],r["shadow_uProjectCenters[".concat(v,"]")]=i[v],e.shadowMaps&&e.shadowMaps.length>0?r["shadow_uShadowMap".concat(v)]=e.shadowMaps[v]:r["shadow_uShadowMap".concat(v)]=e.dummyShadowMap;return r}t.a={name:"shadow",dependencies:[o.a],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){var r={},n=e.shadowEnabled,i=void 0===n||n;return i&&e.shadowMatrices&&e.shadowMatrices.length>0?Object.assign(r,p(e,t)):Object.assign(r,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),r}return{}}}},function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";var n,i,a=r(0),o=r(23),s=function(e){return Object(o.h)(e)?void 0:0},u=(n={},Object(a.a)(n,3074,(function(e){return Object(o.h)(e)?void 0:36064})),Object(a.a)(n,35723,(function(e){return Object(o.h)(e)?void 0:4352})),Object(a.a)(n,35977,s),Object(a.a)(n,32937,s),Object(a.a)(n,36795,(function(e,t){var r=Object(o.h)(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0})),Object(a.a)(n,37445,(function(e,t){var r=e.getExtension("WEBGL_debug_renderer_info");return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)})),Object(a.a)(n,37446,(function(e,t){var r=e.getExtension("WEBGL_debug_renderer_info");return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)})),Object(a.a)(n,34047,(function(e,t){var r=e.luma.extensions.EXT_texture_filter_anisotropic;return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(a.a)(n,32883,s),Object(a.a)(n,35071,s),Object(a.a)(n,37447,s),Object(a.a)(n,36063,(function(e,t){if(!Object(o.h)(e)){var r=e.getExtension("WEBGL_draw_buffers");return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(a.a)(n,35379,s),Object(a.a)(n,35374,s),Object(a.a)(n,35377,s),Object(a.a)(n,34852,(function(e){if(!Object(o.h)(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(a.a)(n,36203,(function(e){return e.getExtension("OES_element_index")?2147483647:65535})),Object(a.a)(n,33001,(function(e){return e.getExtension("OES_element_index")?16777216:65535})),Object(a.a)(n,33e3,(function(e){return 16777216})),Object(a.a)(n,37157,s),Object(a.a)(n,35373,s),Object(a.a)(n,35657,s),Object(a.a)(n,36183,s),Object(a.a)(n,37137,s),Object(a.a)(n,34045,s),Object(a.a)(n,35978,s),Object(a.a)(n,35979,s),Object(a.a)(n,35968,s),Object(a.a)(n,35376,s),Object(a.a)(n,35375,s),Object(a.a)(n,35659,s),Object(a.a)(n,37154,s),Object(a.a)(n,35371,s),Object(a.a)(n,35658,s),Object(a.a)(n,35076,s),Object(a.a)(n,35077,s),Object(a.a)(n,35380,s),n);r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l}));var c=(i={},Object(a.a)(i,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(o.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(i,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Object(o.a)(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),i),l={readBuffer:function(e,t,r){Object(o.h)(e)&&t(r)},getVertexAttrib:function(e,t,r,n){var i,a=function(e,t){return{webgl2:Object(o.h)(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),s=a.webgl2,u=a.ext;switch(n){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:t(r,n)},getProgramParameter:function(e,t,r,n){if(!Object(o.h)(e))switch(n){case 35967:return 35981;case 35971:case 35382:return 0}return t(r,n)},getInternalformatParameter:function(e,t,r,n,i){if(!Object(o.h)(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter:function(e,t,r,n){switch(n){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;n=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(r,n)},getParameter:function(e,t,r){var n=u[r],i="function"===typeof n?n(e,t,r):n;return void 0!==i?i:t(r)},hint:function(e,t,r,n){return t(r,n)}}},,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return v}));var n=r(25),i=r(49),a=r(21),o=r(143),s=r(31),u=[0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[0,0,0],h=[0,0,0],d=Object(o.a)((function(e){var t=e.viewport,r=e.devicePixelRatio,o=e.coordinateSystem,s=e.coordinateOrigin,l=function(e,t,r){var a=e.viewMatrixUncentered,o=e.projectionMatrix,s=e.viewMatrix,l=e.viewProjectionMatrix,f=u,h=e.cameraPosition,d=p(e,t,r),v=d.geospatialOrigin,g=d.shaderCoordinateOrigin;if(d.offsetMode){var m=e.projectPosition(v||g);h=[h[0]-m[0],h[1]-m[1],h[2]-m[2]],m[3]=1,f=i.n([],m,l),s=a||s,l=n.g([],o,s),l=n.g([],l,c)}return{viewMatrix:s,viewProjectionMatrix:l,projectionCenter:f,cameraPosCommon:h,shaderCoordinateOrigin:g,geospatialOrigin:v}}(t,o,s),h=l.projectionCenter,d=l.viewProjectionMatrix,v=l.cameraPosCommon,g=l.shaderCoordinateOrigin,m=l.geospatialOrigin,y=t.getDistanceScales(),b=[t.width*r,t.height*r],_={project_uCoordinateSystem:o,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:g,project_uCenter:h,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:b,project_uDevicePixelRatio:r,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:y.unitsPerMeter,project_uCommonUnitsPerWorldUnit:y.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:f,project_uScale:t.scale,project_uViewProjectionMatrix:d,project_uCameraPosition:v};if(m){var w=t.getDistanceScales(m);switch(o){case a.a.METER_OFFSETS:_.project_uCommonUnitsPerWorldUnit=w.unitsPerMeter,_.project_uCommonUnitsPerWorldUnit2=w.unitsPerMeter2;break;case a.a.LNGLAT:case a.a.LNGLAT_OFFSETS:_.project_uCommonUnitsPerWorldUnit=w.unitsPerDegree,_.project_uCommonUnitsPerWorldUnit2=w.unitsPerDegree2;break;case a.a.CARTESIAN:_.project_uCommonUnitsPerWorldUnit=[1,1,w.unitsPerMeter[2]],_.project_uCommonUnitsPerWorldUnit2=[0,0,w.unitsPerMeter2[2]]}}return _}));function p(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,i=n,o=!0;switch(r=t===a.a.LNGLAT_OFFSETS||t===a.a.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case a.c.WEB_MERCATOR:t!==a.a.LNGLAT&&t!==a.a.CARTESIAN||(o=!1);break;case a.c.WEB_MERCATOR_AUTO_OFFSET:t===a.a.LNGLAT?i=r:t===a.a.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],r=e.unprojectPosition(i));break;case a.c.IDENTITY:i=e.position.map(Math.fround);break;default:o=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,r=e.devicePixelRatio,n=void 0===r?1:r,i=e.modelMatrix,o=void 0===i?null:i,u=e.coordinateSystem,c=void 0===u?a.a.DEFAULT:u,f=e.coordinateOrigin,h=e.wrapLongitude,p=void 0!==h&&h;e.projectionMode,e.positionOrigin;Object(s.a)(t),c===a.a.DEFAULT&&(c=t.isGeospatial?a.a.LNGLAT:a.a.CARTESIAN);var v=d({viewport:t,devicePixelRatio:n,coordinateSystem:c,coordinateOrigin:f});return v.project_uWrapLongitude=p,v.project_uModelMatrix=o||l,v}},function(e,t,r){"use strict";function n(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),i=r(3),a=r(31),o=function(){function e(t){Object(n.a)(this,e),Object(a.a)(Number.isFinite(t.width),"`width` must be supplied"),Object(a.a)(Number.isFinite(t.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(t)}return Object(i.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),e}()},function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return g})),r.d(t,"a",(function(){return m}));var n=r(353),i=r.n(n),a=Math.PI/4,o=Math.PI/360;function s(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function u(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function c(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function l(e,t,r,n){for(var i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function f(e,t,r,n){for(var i=t,a=r.length,o=0;o<a;o++)for(var s=0;s<n;s++)e[i++]=r[o][s]||0;if(!c(r))for(var u=0;u<n;u++)e[i++]=r[0][u]||0;return i}function h(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=(a=a||r.length)-i;if(o<=0)return t;for(var s=t,u=0;u<o;u++)e[s++]=r[i+u];if(!l(r,n,i,a))for(var c=0;c<n;c++)e[s++]=r[i+c];return s}function d(e){return(c(e)?0:1)+e.length}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;return r>=(n=n||e.length)?0:(l(e,t,r,n)?0:1)+(n-r)/t}function v(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!r)return(e=e.positions||e).length/t;if(s(e),e.positions){var n=e,i=n.positions,a=n.holeIndices;if(a){for(var o=0,c=0;c<=a.length;c++)o+=p(e.positions,t,a[c-1],a[c]);return o}e=i}if(Number.isFinite(e[0]))return p(e,t);if(!u(e)){var l=0,f=!0,h=!1,v=void 0;try{for(var g,m=e[Symbol.iterator]();!(f=(g=m.next()).done);f=!0){var y=g.value;l+=d(y)}}catch(b){h=!0,v=b}finally{try{f||null==m.return||m.return()}finally{if(h)throw v}}return l}return d(e)}function g(e,t,r){s(e),r=r||v(e,t);var n=new Float64Array(r*t),i=[];if(e.positions){var a=e,o=a.positions,c=a.holeIndices;if(c){for(var l=0,d=0;d<=c.length;d++)l=h(n,l,o,t,c[d-1],c[d]),i.push(l);return i.pop(),{positions:n,holeIndices:i}}e=o}if(Number.isFinite(e[0]))return h(n,0,e,t),n;if(!u(e)){var p=0,g=!0,m=!1,y=void 0;try{for(var b,_=e[Symbol.iterator]();!(g=(b=_.next()).done);g=!0){p=f(n,p,b.value,t),i.push(p)}}catch(w){m=!0,y=w}finally{try{g||null==_.return||_.return()}finally{if(m)throw y}}return i.pop(),{positions:n,holeIndices:i}}return f(n,0,e,t),n}function m(e,t,r){var n=null;e.holeIndices&&(n=e.holeIndices.map((function(e){return e/t})));var s=e.positions||e;if(r){var u=s.length;s=s.slice();for(var c=0;c<u;c+=t){var l=s[c+1];s[c+1]=Math.log(Math.tan(a+l*o))}}return i()(s,n,t)}},,function(e,t,r){"use strict";var n=r(205);function i(e){var t,r;function i(t,r){try{var o=e[t](r),s=o.value,u=s instanceof n.a;Promise.resolve(u?s.wrapped:s).then((function(e){u?i("return"===t?"return":"next",e):a(o.done?"return":"normal",e)}),(function(e){i("throw",e)}))}catch(c){a("throw",c)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(a,o){var s={key:e,arg:n,resolve:a,reject:o,next:null};r?r=r.next=s:(t=r=s,i(e,n))}))},"function"!==typeof e.return&&(this.return=void 0)}function a(e){return function(){return new i(e.apply(this,arguments))}}"function"===typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)},r.d(t,"a",(function(){return a}))},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(14),c=r(103),l=r(165),f=r(99),h=r(100),d=r(67),p={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},v={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new f.a(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:h.a.BREAK},g=function(e){return Math.pow(2,e)},m=function(e){function t(e){var r,i=e.ViewportType,s=e.width,u=e.height,c=e.orbitAxis,l=void 0===c?p.orbitAxis:c,f=e.rotationX,h=void 0===f?p.rotationX:f,d=e.rotationOrbit,v=void 0===d?p.rotationOrbit:d,g=e.target,m=void 0===g?p.target:g,y=e.zoom,b=void 0===y?p.zoom:y,_=e.minRotationX,w=void 0===_?p.minRotationX:_,x=e.maxRotationX,O=void 0===x?p.maxRotationX:x,E=e.minZoom,k=void 0===E?p.minZoom:E,j=e.maxZoom,S=void 0===j?p.maxZoom:j,P=e.startPanPosition,A=e.startTarget,T=e.startRotationX,R=e.startRotationOrbit,C=e.startZoomPosition,M=e.startZoom;return Object(n.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,{width:s,height:u,orbitAxis:l,rotationX:h,rotationOrbit:v,target:m,zoom:b,minRotationX:w,maxRotationX:O,minZoom:k,maxZoom:S})))._interactiveState={startPanPosition:P,startTarget:A,startRotationX:T,startRotationOrbit:R,startZoomPosition:C,startZoom:M},r.ViewportType=i,r}return Object(s.a)(t,e),Object(i.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos,r=this._viewportProps.target;return this._getUpdatedState({startPanPosition:t,startTarget:r})}},{key:"pan",value:function(e){var t=e.pos,r=(e.startPos,this._interactiveState),n=r.startPanPosition,i=r.startTarget,a=new u.Vector2(t).subtract(n);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:i,pixelOffset:a})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,r=e.deltaScaleY,n=this._interactiveState,i=n.startRotationX,a=n.startRotationOrbit;return Number.isFinite(i)&&Number.isFinite(a)?((i<-90||i>90)&&(t*=-1),this._getUpdatedState({rotationX:i+180*r,rotationOrbit:a+180*t,isRotating:!0})):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),r=Object.assign({},this._viewportProps),n=r.rotationOrbit;return Math.abs(n-t.rotationOrbit)>180&&(r.rotationOrbit=n<0?n+360:n-360),r}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomPosition:t,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,r=e.startPos,n=e.scale,i=this._viewportProps,a=i.zoom,o=i.width,s=i.height,u=i.target,c=this._interactiveState,l=c.startZoom,f=c.startZoomPosition,h=c.startTarget;Number.isFinite(l)||(l=a,h=u,f=r||t);var d=this._calculateNewZoom({scale:n,startZoom:l}),p=g(l),v=g(d),m=(o/2-f[0])*(v/p-1),y=(s/2-f[1])*(v/p-1);return this._getUpdatedState({zoom:d,target:this._calculateNewTarget({startTarget:h,zoom:d,pixelOffset:[m,y]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function(){var e=[-50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"moveRight",value:function(){var e=[50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"moveUp",value:function(){var e=[0,-50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"moveDown",value:function(){var e=[0,50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:e})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,r=e.startZoom,n=this._viewportProps,i=n.maxZoom,a=n.minZoom;Number.isFinite(r)||(r=this._viewportProps.zoom);var o=r+Math.log2(t);return Object(u.clamp)(o,a,i)}},{key:"_calculateNewTarget",value:function(e){var t=e.startTarget,r=e.zoom,n=e.pixelOffset,i=Object.assign({},this._viewportProps);Number.isFinite(r)&&(i.zoom=r),t&&(i.target=t);var a=new this.ViewportType(i),o=a.project(i.target);return a.unproject([o[0]-n[0],o[1]-n[1],o[2]])}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,r=e.minZoom,n=e.zoom,i=e.maxRotationX,a=e.minRotationX,o=e.rotationOrbit;return e.zoom=Object(u.clamp)(n,r,t),e.rotationX=Object(u.clamp)(e.rotationX,a,i),(o<-180||o>180)&&(e.rotationOrbit=Object(d.e)(o+180,360)-180),e}}]),t}(l.a),y=function(e){function t(e){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,m,e))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"_getTransitionProps",value:function(){return v}}]),t}(c.a)},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(19),u=r(7),c=r(273),l=r(833),f=r(302),h=r(21),d=r(145),p=r(476),v=r(246),g=r(201),m=r(94),y=r(0),b=r(166);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var w=function(e){function t(e){Object(n.a)(this,t);var r=e.fp64,i=e.IndexType,s=void 0===i?Uint32Array:i;return Object(a.a)(this,Object(o.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(y.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:s,size:1}}})))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"get",value:function(e){var t=this.attributes;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}},{key:"updateGeometry",value:function(e){Object(s.a)(Object(o.a)(t.prototype),"updateGeometry",this).call(this,e);var r=this.buffers.indices;r&&(this.vertexCount=(r.value||r).length)}},{key:"getGeometrySize",value:function(e){return b.b(e,this.positionSize,this.normalize)}},{key:"getGeometryFromBuffer",value:function(e){return this.normalize||!this.buffers.indices?Object(s.a)(Object(o.a)(t.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"updateGeometryAttributes",value:function(e,t){this.normalize&&(e=b.c(e,this.positionSize,t.geometrySize)),this._updateIndices(e,t),this._updatePositions(e,t),this._updateVertexValid(e,t)}},{key:"_updateIndices",value:function(e,t){var r=t.geometryIndex,n=t.vertexStart,i=t.indexStart,a=this.attributes,o=this.indexStarts,s=this.typedArrayManager,u=a.indices;if(u){var c=i,l=b.a(e,this.positionSize,this.opts.preproject);u=s.allocate(u,i+l.length,{copy:!0});for(var f=0;f<l.length;f++)u[c++]=l[f]+n;o[r+1]=i+l.length,a.indices=u}}},{key:"_updatePositions",value:function(e,t){var r=t.vertexStart,n=t.geometrySize,i=this.attributes.positions,a=this.positionSize;if(i)for(var o=e.positions||e,s=r,u=0;u<n;s++,u++){var c=o[u*a],l=o[u*a+1],f=a>2?o[u*a+2]:0;i[3*s]=c,i[3*s+1]=l,i[3*s+2]=f}}},{key:"_updateVertexValid",value:function(e,t){var r=t.vertexStart,n=t.geometrySize,i=this.attributes.vertexValid,a=this.positionSize,o=e&&e.holeIndices;if(i.fill(1,r,r+n),o)for(var s=0;s<o.length;s++)i[r+o[s]/a-1]=0;i[r+n-1]=0}}]),t}(r(369).a),x="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n    \n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",O="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(x,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),E="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(x,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64Low = instancePositions64Low;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64Low = nextPositions64Low;\n\n  calculatePosition(props);\n}\n");r.d(t,"a",(function(){return P}));var k=[0,0,0,255],j={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:k},getLineColor:{type:"accessor",value:k},material:!0},S={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},P=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(e){return Object(s.a)(Object(o.a)(t.prototype),"getShaders",this).call(this,{vs:e,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{},modules:[c.a,l.a,f.a]})}},{key:"initializeState",value:function(){var e=this,t=this.context,r=t.gl,n=t.viewport,i=this.props.coordinateSystem;n.isGeospatial&&i===h.a.DEFAULT&&(i=h.a.LNGLAT),this.setState({numInstances:0,polygonTesselator:new w({preproject:i===h.a.LNGLAT,fp64:this.use64bitPositions(),IndexType:!r||Object(p.c)(r,v.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var a=this.getAttributeManager();a.remove(["instancePickingColors"]),a.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:S,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:S,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:S,accessor:"getFillColor",defaultValue:k,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:S,accessor:"getLineColor",defaultValue:k,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(t,r){var n=r.index,i=r.target;return e.encodePickingColor(n,i)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,n=r.extruded,i=r.filled,a=r.wireframe,o=r.elevationScale,s=this.state,u=s.topModel,c=s.sideModel,l=s.polygonTesselator,f=Object.assign({},t,{extruded:Boolean(n),elevationScale:o});c&&(c.setInstanceCount(l.instanceCount-1),c.setUniforms(f),a&&(c.setDrawMode(3),c.setUniforms({isWireframe:!0}).draw()),i&&(c.setDrawMode(6),c.setUniforms({isWireframe:!1}).draw())),u&&(u.setVertexCount(l.vertexCount),u.setUniforms(f).draw())}},{key:"updateState",value:function(e){Object(s.a)(Object(o.a)(t.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var r=e.props,n=e.oldProps,i=e.changeFlags,a=this.getAttributeManager();(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded)&&(this.state.models&&this.state.models.forEach((function(e){return e.delete()})),this.setState(this._getModels(this.context.gl)),a.invalidateAll())}},{key:"updateGeometry",value:function(e){var t=e.props,r=(e.oldProps,e.changeFlags);if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){var n=this.state.polygonTesselator,i=t.data.attributes||{};n.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:t.getPolygon,positionFormat:t.positionFormat,fp64:this.use64bitPositions(),dataChanged:r.dataChanged}),this.setState({numInstances:n.instanceCount,startIndices:n.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(e){var t,r,n=this.props,i=n.id,a=n.filled,o=n.extruded;if(a){var s=this.getShaders(O);s.defines.NON_INSTANCED_MODEL=1,t=new g.a(e,Object.assign({},s,{id:"".concat(i,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return o&&((r=new g.a(e,Object.assign({},this.getShaders(E),{id:"".concat(i,"-side"),geometry:new m.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[r,t].filter(Boolean),topModel:t,sideModel:r}}},{key:"calculateIndices",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.indexStarts,e.value=t.get("indices")}},{key:"calculatePositions",value:function(e){var t=this.state.polygonTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateVertexValid",value:function(e){e.value=this.state.polygonTesselator.get("vertexValid")}}]),t}(d.a);P.layerName="SolidPolygonLayer",P.defaultProps=j},function(e,t,r){"use strict";(function(e){function n(){var t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof e&&e.hrtime){var r=e.hrtime();t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}r.d(t,"a",(function(){return n}))}).call(this,r(68))},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(124),c=r(18),l=r(91),f=r(13),h=r(77),d=r(39),p=r(49);function v(){var e=new f.a(4);return f.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function g(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function m(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+o*s+i*c-a*u,e[1]=i*l+o*u+a*s-n*c,e[2]=a*l+o*c+n*u-i*s,e[3]=o*l-n*s-i*u-a*c,e}function y(e,t,r,n){var i,a,o,s,u,c=t[0],l=t[1],h=t[2],d=t[3],p=r[0],v=r[1],g=r[2],m=r[3];return(a=c*p+l*v+h*g+d*m)<0&&(a=-a,p=-p,v=-v,g=-g,m=-m),1-a>f.b?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n),e[0]=s*c+u*p,e[1]=s*l+u*v,e[2]=s*h+u*g,e[3]=s*d+u*m,e}function b(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}p.b,p.g,p.c,p.l;var _=p.a,w=p.k,x=p.d,O=p.i,E=p.h,k=p.m,j=p.j,S=(p.f,p.e,function(){var e=d.b(),t=d.e(1,0,0),r=d.e(0,1,0);return function(n,i,a){var o=d.d(i,a);return o<-.999999?(d.c(e,t,i),d.f(e)<1e-6&&d.c(e,r,i),d.i(e,e),g(n,e,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(d.c(e,i,a),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+o,j(n,n))}}());(function(){var e=v(),t=v()})(),function(){var e=h.a()}();r.d(t,"a",(function(){return A}));var P=[0,0,0,1],A=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(n.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0,-0)),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,i,s,u),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"set",value:function(e,t,r,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this.check()}},{key:"fromMatrix3",value:function(e){return b(this,e),this.check()}},{key:"identity",value:function(){var e;return(e=this)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.check()}},{key:"fromAxisRotation",value:function(e,t){return g(this,e,t),this.check()}},{key:"setAxisAngle",value:function(e,t){return this.fromAxisRotation(e,t)}},{key:"len",value:function(){return E(this)}},{key:"lengthSquared",value:function(e){return k(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return x(this,e)}},{key:"rotationTo",value:function(e,t){return S(this,e,t),this.check()}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return _(this,this,e),this.check()}},{key:"calculateW",value:function(){return function(e,t){var r=t[0],n=t[1],i=t[2];e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i))}(this,this),this.check()}},{key:"conjugate",value:function(){var e,t;return t=this,(e=this)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],this.check()}},{key:"invert",value:function(){return function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=a*s}(this,this),this.check()}},{key:"lerp",value:function(e,t,r){return O(this,e,t,r),this.check()}},{key:"multiplyRight",value:function(e,t){return Object(l.a)(!t),m(this,this,e),this.check()}},{key:"multiplyLeft",value:function(e,t){return Object(l.a)(!t),m(this,e,this),this.check()}},{key:"normalize",value:function(){var e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}},{key:"rotateX",value:function(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-n*s}(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u-a*s,e[1]=i*u+o*s,e[2]=a*u+n*s,e[3]=o*u-i*s}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u+i*s,e[1]=i*u-n*s,e[2]=a*u+o*s,e[3]=o*u-a*s}(this,this,e),this.check()}},{key:"scale",value:function(e){return w(this,this,e),this.check()}},{key:"slerp",value:function(e,t,r){switch(arguments.length){case 1:var n=arguments[0],i=n.start;e=void 0===i?P:i,t=n.target,r=n.ratio;break;case 2:var a=Array.prototype.slice.call(arguments);t=a[0],r=a[1],e=this}return y(this,e,t,r),this.check()}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return p.o(t,e,this),Object(c.b)(t,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(e,t){return this.setAxisAngle(e,t)}},{key:"premultiply",value:function(e,t){return this.multiplyLeft(e,t)}},{key:"multiply",value:function(e,t){return this.multiplyRight(e,t)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(c.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(c.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(c.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(c.a)(e)}}]),t}(u.a)},,function(e,t,r){"use strict";(function(e,n){r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var i=r(11),a={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof e&&e,document:"undefined"!==typeof document&&document},o=a.global||a.self||a.window,s="object"!==("undefined"===typeof n?"undefined":Object(i.a)(n))||"[object process]"!==String(n)||n.browser,u="undefined"!==typeof n&&n.version&&n.version.match(/v([0-9]*)/);u&&parseFloat(u[1])}).call(this,r(62),r(68))},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),i=r(3),a=r(9),o=r(362),s=r(40),u=new(function(){function e(){Object(n.a)(this,e),this.stats=new Map}return Object(i.a)(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new o.a({id:e})),this.stats.get(e)}}]),e}());if(s.global.luma&&"8.1.0"!==s.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(s.global.luma.VERSION," vs ").concat("8.1.0"));s.global.luma||(Object(s.isBrowser)()&&a.h.log(1,"luma.gl ".concat("8.1.0"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),s.global.luma=s.global.luma||{VERSION:"8.1.0",version:"8.1.0",log:a.h,stats:u,globals:{modules:{},nodeIO:{}}});s.global.luma},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,"a",(function(){return n}))},function(e,t,r){var n;!function(i,a,o,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=a.createElement("div"),f=Math.round,h=Math.abs,d=Date.now;function p(e,t,r){return setTimeout(w(e,r),t)}function v(e,t,r){return!!Array.isArray(e)&&(g(e,r[t],r),!0)}function g(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(void 0!==e.length)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function m(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=i.console&&(i.console.warn||i.console.log);return a&&a.call(i.console,n,r),e.apply(this,arguments)}}u="function"!==typeof Object.assign?function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Object.assign;var y=m((function(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;)(!r||r&&void 0===e[n[i]])&&(e[n[i]]=t[n[i]]),i++;return e}),"extend","Use `assign`."),b=m((function(e,t){return y(e,t,!0)}),"merge","Use `assign`.");function _(e,t,r){var n,i=t.prototype;(n=e.prototype=Object.create(i)).constructor=e,n._super=i,r&&u(n,r)}function w(e,t){return function(){return e.apply(t,arguments)}}function x(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function O(e,t){return void 0===e?t:e}function E(e,t,r){g(P(t),(function(t){e.addEventListener(t,r,!1)}))}function k(e,t,r){g(P(t),(function(t){e.removeEventListener(t,r,!1)}))}function j(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function P(e){return e.trim().split(/\s+/g)}function A(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function R(e,t,r){for(var n=[],i=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];A(i,o)<0&&n.push(e[a]),i[a]=o,a++}return r&&(n=t?n.sort((function(e,r){return e[t]>r[t]})):n.sort()),n}function C(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),a=0;a<c.length;){if((n=(r=c[a])?r+i:t)in e)return n;a++}}var M=1;function I(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var L="ontouchstart"in i,F=void 0!==C(i,"PointerEvent"),N=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D=["x","y"],B=["clientX","clientY"];function U(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){x(e.options.enable,[e])&&r.handler(t)},this.init()}function z(e,t,r){var n=r.pointers.length,i=r.changedPointers.length,a=1&t&&n-i===0,o=12&t&&n-i===0;r.isFirst=!!a,r.isFinal=!!o,a&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,i=n.length;r.firstInput||(r.firstInput=V(t));i>1&&!r.firstMultiple?r.firstMultiple=V(t):1===i&&(r.firstMultiple=!1);var a=r.firstInput,o=r.firstMultiple,s=o?o.center:a.center,u=t.center=G(n);t.timeStamp=d(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=Z(s,u),t.distance=X(s,u),function(e,t){var r=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};1!==t.eventType&&4!==a.eventType||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=i.x+(r.x-n.x),t.deltaY=i.y+(r.y-n.y)}(r,t),t.offsetDirection=W(t.deltaX,t.deltaY);var c=H(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=h(c.x)>h(c.y)?c.x:c.y,t.scale=o?(l=o.pointers,f=n,X(f[0],f[1],B)/X(l[0],l[1],B)):1,t.rotation=o?function(e,t){return Z(t[1],t[0],B)+Z(e[1],e[0],B)}(o.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,n,i,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(8!=t.eventType&&(s>25||void 0===o.velocity)){var u=t.deltaX-o.deltaX,c=t.deltaY-o.deltaY,l=H(s,u,c);n=l.x,i=l.y,r=h(l.x)>h(l.y)?l.x:l.y,a=W(u,c),e.lastInterval=t}else r=o.velocity,n=o.velocityX,i=o.velocityY,a=o.direction;t.velocity=r,t.velocityX=n,t.velocityY=i,t.direction=a}(r,t);var l,f;var p=e.element;j(t.srcEvent.target,p)&&(p=t.srcEvent.target);t.target=p}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function V(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:f(e.pointers[r].clientX),clientY:f(e.pointers[r].clientY)},r++;return{timeStamp:d(),pointers:t,center:G(t),deltaX:e.deltaX,deltaY:e.deltaY}}function G(e){var t=e.length;if(1===t)return{x:f(e[0].clientX),y:f(e[0].clientY)};for(var r=0,n=0,i=0;i<t;)r+=e[i].clientX,n+=e[i].clientY,i++;return{x:f(r/t),y:f(n/t)}}function H(e,t,r){return{x:t/e||0,y:r/e||0}}function W(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function X(e,t,r){r||(r=D);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function Z(e,t,r){r||(r=D);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}U.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(I(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4};function q(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,U.apply(this,arguments)}_(q,U,{handler:function(e){var t=Y[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},$={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",J="pointermove pointerup pointercancel";function ee(){this.evEl=Q,this.evWin=J,U.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(Q="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),_(ee,U,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),i=K[n],a=$[e.pointerType]||e.pointerType,o="touch"==a,s=A(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&i&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),r&&t.splice(s,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function re(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,U.apply(this,arguments)}function ne(e,t){var r=T(e.touches),n=T(e.changedTouches);return 12&t&&(r=R(r.concat(n),"identifier",!0)),[r,n]}_(re,U,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var r=ne.call(this,e,t);12&t&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ae(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},U.apply(this,arguments)}function oe(e,t){var r=T(e.touches),n=this.targetIds;if(3&t&&1===r.length)return n[r[0].identifier]=!0,[r,r];var i,a,o=T(e.changedTouches),s=[],u=this.target;if(a=r.filter((function(e){return j(e.target,u)})),1===t)for(i=0;i<a.length;)n[a[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&s.push(o[i]),12&t&&delete n[o[i].identifier],i++;return s.length?[R(a.concat(s),"identifier",!0),s]:void 0}_(ae,U,{handler:function(e){var t=ie[e.type],r=oe.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}});function se(){U.apply(this,arguments);var e=w(this.handler,this);this.touch=new ae(this.manager,e),this.mouse=new q(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ue(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ce.call(this,t)):12&e&&ce.call(this,t)}function ce(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout((function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)}),2500)}}function le(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],a=Math.abs(t-i.x),o=Math.abs(r-i.y);if(a<=25&&o<=25)return!0}return!1}_(se,U,{handler:function(e,t,r){var n="touch"==r.pointerType,i="mouse"==r.pointerType;if(!(i&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)ue.call(this,t,r);else if(i&&le.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var fe=C(l.style,"touchAction"),he=void 0!==fe,de=function(){if(!he)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){e[r]=!t||i.CSS.supports("touch-action",r)})),e}();function pe(e,t){this.manager=e,this.set(t)}pe.prototype={set:function(e){"compute"==e&&(e=this.compute()),he&&this.manager.element.style&&de[e]&&(this.manager.element.style[fe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){x(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(S(e,"none"))return"none";var t=S(e,"pan-x"),r=S(e,"pan-y");if(t&&r)return"none";if(t||r)return t?"pan-x":"pan-y";if(S(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=S(n,"none")&&!de.none,a=S(n,"pan-y")&&!de["pan-y"],o=S(n,"pan-x")&&!de["pan-x"];if(i){var s=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(s&&u&&c)return}if(!o||!a)return i||a&&6&r||o&&24&r?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ve(e){this.options=u({},this.defaults,e||{}),this.id=M++,this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ge(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function me(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ye(e,t){var r=t.manager;return r?r.get(e):e}function be(){ve.apply(this,arguments)}function _e(){be.apply(this,arguments),this.pX=null,this.pY=null}function we(){be.apply(this,arguments)}function xe(){ve.apply(this,arguments),this._timer=null,this._input=null}function Oe(){be.apply(this,arguments)}function Ee(){be.apply(this,arguments)}function ke(){ve.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function je(e,t){return(t=t||{}).recognizers=O(t.recognizers,je.defaults.preset),new Se(e,t)}ve.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ye(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)||(e=ye(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===A(t,e=ye(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=ye(e,this);var t=A(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function n(r){t.manager.emit(r,e)}r<8&&n(t.options.event+ge(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=8&&n(t.options.event+ge(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!x(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},_(be,ve,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,i=this.attrTest(e);return n&&(8&r||!i)?16|t:n||i?4&r?8|t:2&t?4|t:2:32}}),_(_e,be,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(6&t.direction?(i=0===a?1:a<0?2:4,r=a!=this.pX,n=Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,r=o!=this.pY,n=Math.abs(e.deltaY))),e.direction=i,r&&n>t.threshold&&i&t.direction},attrTest:function(e){return be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=me(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),_(we,be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),_(xe,ve,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!n||!r||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),_(Oe,be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),_(Ee,be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return _e.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return 30&r?t=e.overallVelocity:6&r?t=e.overallVelocityX:24&r&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=me(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),_(ke,ve,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(n&&i&&r){if(4!=e.eventType)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||X(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),je.VERSION="2.0.7",je.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Oe,{enable:!1}],[we,{enable:!1},["rotate"]],[Ee,{direction:6}],[_e,{direction:6},["swipe"]],[ke],[ke,{event:"doubletap",taps:2},["tap"]],[xe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Se(e,t){this.options=u({},je.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=function(e){var t=e.options.inputClass;return new(t||(F?ee:N?ae:L?se:q))(e,z)}(this),this.touchAction=new pe(this,this.options.touchAction),Pe(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Pe(e,t){var r,n=e.element;n.style&&(g(e.options.cssProps,(function(i,a){r=C(n.style,a),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""})),t||(e.oldCssProps={}))}Se.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<n.length;)r=n[a],2===t.stopped||i&&r!=i&&!r.canRecognizeWith(i)?r.reset():r.recognize(e),!i&&14&r.state&&(i=t.curRecognizer=r),a++}},get:function(e){if(e instanceof ve)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=A(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var r=this.handlers;return g(P(e),(function(e){r[e]=r[e]||[],r[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var r=this.handlers;return g(P(e),(function(e){t?r[e]&&r[e].splice(A(r[e],t),1):delete r[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var r=a.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},destroy:function(){this.element&&Pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(je,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Se,Input:U,TouchAction:pe,TouchInput:ae,MouseInput:q,PointerEventInput:ee,TouchMouseInput:se,SingleTouchInput:re,Recognizer:ve,AttrRecognizer:be,Tap:ke,Pan:_e,Swipe:Ee,Pinch:we,Rotate:Oe,Press:xe,on:E,off:k,each:g,merge:b,extend:y,assign:u,inherit:_,bindFn:w,prefixed:C}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=je,void 0===(n=function(){return je}.call(t,r,t,e))||(e.exports=n)}(window,document)},,,function(e,t,r){"use strict";var n=r(146),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||y}function w(){}function x(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||y}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var O=x.prototype=new w;O.constructor=x,n(O,_.prototype),O.isPureReactComponent=!0;var E={current:null},k=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var n,i={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,n)&&!j.hasOwnProperty(n)&&(i[n]=t[n]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(n in u=e.defaultProps)void 0===i[n]&&(i[n]=u[n]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:E.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g,T=[];function R(e,t,r,n){if(T.length){var i=T.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function C(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>T.length&&T.push(e)}function M(e,t,r){return null==e?0:function e(t,r,n,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case a:case o:u=!0}}if(u)return n(i,t,""===r?"."+I(t,0):r),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+I(s=t[c],c);u+=e(s,l,n,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=g&&t[g]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=r+I(s,c++),n,i);else if("object"===s)throw n=""+t,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return u}(e,"",t,r)}function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?N(e,n,r,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+r)),n.push(e))}function N(e,t,r,n,i){var a="";null!=r&&(a=(""+r).replace(A,"$&/")+"/"),M(e,F,t=R(t,a,n,i)),C(t)}var D={current:null};function B(){var e=D.current;if(null===e)throw Error(m(321));return e}var U={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return N(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;M(e,L,t=R(null,null,t,r)),C(t)},count:function(e){return M(e,(function(){return null}),null)},toArray:function(e){var t=[];return N(e,t,null,(function(e){return e})),t},only:function(e){if(!P(e))throw Error(m(143));return e}},t.Component=_,t.Fragment=s,t.Profiler=c,t.PureComponent=x,t.StrictMode=u,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(m(267,e));var i=n({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!j.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return B().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,r){return B().useReducer(e,t,r)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.13.0"},function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return u}));var n=r(11),i=r(55).b.COMPONENT;function a(e){var t=h(e);for(var r in t){var n=t[r],i=n.validate;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function o(e,t){var r=u({newProps:e,oldProps:t,propTypes:h(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=function(e,t){if(null===t)return"oldProps is null, initial diff";var r=null,n=e.dataComparator,i=e._dataDiff;n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied");r&&i&&(r=i(e.data,t.data)||r);return r}(e,t),i=!1;return n||(i=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if(f(e,t,"all"))return{all:!0}}var r={},n=!1;for(var i in e.updateTriggers){if("all"!==i)f(e,t,i)&&(r[i]=!0,n=r)}return n}(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:l(e,t),transitionsChanged:s(e,t)}}function s(e,t){if(!e.transitions)return null;var r={},n=h(e);for(var i in e.transitions){var a=n[i],o=a&&a.type;("number"===o||"color"===o||"array"===o)&&c(e[i],t[i],a)&&(r[i]=!0)}return r}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,r=e.oldProps,i=e.ignoreProps,a=void 0===i?{}:i,o=e.propTypes,s=void 0===o?{}:o,u=e.triggerName,l=void 0===u?"props":u;if(r===t)return null;if("object"!==Object(n.a)(t)||null===t)return"".concat(l," changed shallowly");if("object"!==Object(n.a)(r)||null===r)return"".concat(l," changed shallowly");for(var f=0,h=Object.keys(t);f<h.length;f++){var d=h[f];if(!(d in a)){if(!(d in r))return"".concat(l,".").concat(d," added");var p=c(t[d],r[d],s[d]);if(p)return"".concat(l,".").concat(d," ").concat(p)}}for(var v=0,g=Object.keys(r);v<g.length;v++){var m=g[v];if(!(m in a)){if(!(m in t))return"".concat(l,".").concat(m," dropped");if(!Object.hasOwnProperty.call(t,m)){var y=c(t[m],r[m],s[m]);if(y)return"".concat(l,".").concat(m," ").concat(y)}}}return null}function c(e,t,r){var n=r&&r.equal;return n&&!n(e,t,r)?"changed deeply":n||!(n=e&&t&&e.equals)||n.call(e,t)?n||t===e?null:"changed shallowly":"changed deeply"}function l(e,t){if(null===t)return"oldProps is null, initial diff";var r=t.extensions,n=e.extensions;if(n===r)return!1;if(n.length!==r.length)return!0;for(var i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function f(e,t,r){var n=e.updateTriggers[r];n=void 0===n||null===n?{}:n;var i=t.updateTriggers[r];return u({oldProps:i=void 0===i||null===i?{}:i,newProps:n,triggerName:r})}function h(e){var t=e[i],r=t&&t.constructor;return r?r._propTypes:{}}},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(355),c=r(137),l=r(232),f=r(147),h=r(131),d=r(14),p=r(0),v=r(19),g=r(127),m=r(134),y=r(89),b=r(9);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var w=function(e){function t(e,r){var i,s,u;return Object(n.a)(this,t),(u=Object(a.a)(this,Object(o.a)(t).call(this,e,r))).shadowMap=new c.a(e,{width:1,height:1,parameters:(i={},Object(p.a)(i,10241,9729),Object(p.a)(i,10240,9729),Object(p.a)(i,10242,33071),Object(p.a)(i,10243,33071),i)}),u.depthBuffer=new m.a(e,{format:33189,width:1,height:1}),u.fbo=new y.a(e,{id:"shadowmap",width:1,height:1,attachments:(s={},Object(p.a)(s,36064,u.shadowMap),Object(p.a)(s,36096,u.depthBuffer),s)}),u}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(e){var r=this,n=this.fbo;Object(b.l)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=e.viewports[0],a=Object(b.c)(r.gl),s=i.width*a,u=i.height*a;s===n.width&&u===n.height||n.resize({width:s,height:u}),Object(v.a)(Object(o.a)(t.prototype),"render",r).call(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{target:n,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(e){return!1!==e.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),t}(g.a),x=r(154);r.d(t,"a",(function(){return j}));var O={color:[255,255,255],intensity:1},E=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],k=[0,0,0,200/255],j=function(e){function t(e){var r;for(var i in Object(n.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,e))).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=k,r.shadowPasses=[],r.shadowMaps=[],r.dummyShadowMap=null,r.shadow=!1,r.programManager=null,e){var s=e[i];switch(s.type){case"ambient":r.ambientLight=s;break;case"directional":r.directionalLights.push(s);break;case"point":r.pointLights.push(s)}}return r._applyDefaultLights(),r.shadow=r.directionalLights.some((function(e){return e.shadow})),r}return Object(s.a)(t,e),Object(i.a)(t,[{key:"preRender",value:function(e,t){var r=t.layers,n=t.layerFilter,i=t.viewports,a=t.onViewportActive,o=t.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=u.a.getDefaultProgramManager(e),x.a&&this.programManager.addDefaultModule(x.a)),this.dummyShadowMap||(this.dummyShadowMap=new c.a(e,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:a,views:o,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(e){var t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(t){return t.getProjectedLight({layer:e})})),pointLights:this.pointLights.map((function(t){return t.getProjectedLight({layer:e})}))},t}},{key:"cleanup",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.shadowPasses[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.delete()}}catch(a){t=!0,r=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(x.a),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,a=this.directionalLights[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=(new d.Matrix4).lookAt({eye:new d.Vector3(o.direction).negate()});e.push(s)}}catch(u){r=!0,n=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"_createShadowPasses",value:function(e){for(var t=0;t<this.directionalLights.length;t++){var r=new w(e);this.shadowPasses[t]=r,this.shadowMaps[t]=r.shadowMap}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,r=this.directionalLights;e||0!==t.length||0!==r.length||(this.ambientLight=new l.a(O),this.directionalLights.push(new f.a(E[0]),new f.a(E[1])))}}]),t}(h.a)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return f}));var n=r(10),i=r(21),a=r(163),o=r(49),s=r(39),u=r(37);function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(n.a)(e,3),a=i[0],o=i[1],s=i[2],u=void 0===s?0:s,c=t.projectFlat(e),l=Object(n.a)(c,2),f=l[0],h=l[1],d=t.getDistanceScales(r&&[a,o]),p=u*d.unitsPerMeter[2];return[f,h,p]}function l(e,t){var r=t.viewport,a=t.modelMatrix,s=t.coordinateSystem,l=t.coordinateOrigin,f=t.offsetMode,h=Object(n.a)(e,3),d=h[0],p=h[1],v=h[2];if(a){var g=o.n([],[d,p,v,1],a),m=Object(n.a)(g,3);d=m[0],p=m[1],v=m[2]}switch(s){case i.a.LNGLAT:return c([d,p,v],r,f);case i.a.LNGLAT_OFFSETS:return c([d+l[0],p+l[1],v+(l[2]||0)],r,f);case i.a.METER_OFFSETS:return c(Object(u.b)(l,[d,p,v]),r,f);case i.a.CARTESIAN:default:return r.isGeospatial?[d,p,v]:r.projectPosition([d,p,v])}}function f(e,t){var r=function(e){var t=Object.assign({},e),r=e.coordinateSystem,n=e.viewport,a=e.coordinateOrigin,o=e.fromCoordinateSystem,s=e.fromCoordinateOrigin;return r===i.a.DEFAULT&&(r=n.isGeospatial?i.a.LNGLAT:i.a.CARTESIAN),void 0===o&&(t.fromCoordinateSystem=r),void 0===s&&(t.fromCoordinateOrigin=a),t.coordinateSystem=r,t}(t),n=r.viewport,o=r.coordinateSystem,u=r.coordinateOrigin,c=r.modelMatrix,f=r.fromCoordinateSystem,h=r.fromCoordinateOrigin,d=Object(a.a)(n,o,u),p=d.geospatialOrigin,v=d.shaderCoordinateOrigin,g=d.offsetMode,m=l(e,{viewport:n,modelMatrix:c,coordinateSystem:f,coordinateOrigin:h,offsetMode:g});if(g){var y=n.projectPosition(p||v);s.m(m,m,y)}return m}},function(e,t,r){"use strict";var n="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",i=(t.a={name:"lights",vs:n,fs:n,getUniforms:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if("lightSources"in t){var r=t.lightSources||{},n=r.ambientLight,a=r.pointLights,s=r.directionalLights,u=n||a&&a.length>0||s&&s.length>0;return u?Object.assign({},o({ambientLight:n,pointLights:a,directionalLights:s}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var c={pointLights:[],directionalLights:[]},l=!0,f=!1,h=void 0;try{for(var d,p=(t.lights||[])[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;switch(v.type){case"ambient":c.ambientLight=v;break;case"directional":c.directionalLights.push(v);break;case"point":c.pointLights.push(v)}}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}return e({lightSources:c})}return{}},defines:{MAX_LIGHTS:3}},{});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=void 0===t?[0,0,0]:t,n=e.intensity,i=void 0===n?1:n;return r.map((function(e){return e*i/255}))}function o(e){var t=e.ambientLight,r=e.pointLights,n=void 0===r?[]:r,i=e.directionalLights,o=void 0===i?[]:i,s={};return s["lighting_uAmbientLight.color"]=t?a(t):[0,0,0],n.forEach((function(e,t){s["lighting_uPointLight[".concat(t,"].color")]=a(e),s["lighting_uPointLight[".concat(t,"].position")]=e.position,s["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation||[1,0,0]})),s.lighting_uPointLightCount=n.length,o.forEach((function(e,t){s["lighting_uDirectionalLight[".concat(t,"].color")]=a(e),s["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction})),s.lighting_uDirectionalLightCount=o.length,s}},,function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",a=r?"!":"",o=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+i+"typeof "+t+n+'"object"'+i+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+o+"("+t+" % 1)"+i+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var r="",i=a(e);for(var o in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+n(o,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var a=t[n];(i[a]||"array"===e&&"array"===a)&&(r[r.length]=a)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:a,getProperty:u,escapeQuotes:c,equal:r(313),ucs2length:r(548),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(l,"").replace(f,"").replace(h,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(d);r&&2==r.length&&(e=t?e.replace(v,"").replace(g,"return data;"):e.replace(p,"").replace("return errors === 0;","validate.errors = null; return true;"));return(r=e.match(m))&&3===r.length?e.replace(y,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:b,getPathExpr:function(e,t,r,n){return x(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=b(r?"/"+O(t):u(t));return x(e,n)},getData:function(e,t,r){var n,i,a,o;if(""===e)return"rootData";if("/"==e[0]){if(!_.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,a="rootData"}else{if(!(o=e.match(w)))throw new Error("Invalid JSON-pointer: "+e);if(n=+o[1],"#"==(i=o[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(a="data"+(t-n||""),!i)return a}for(var s=a,c=i.split("/"),l=0;l<c.length;l++){var f=c[l];f&&(a+=u(E(f)),s+=" && "+a)}return s},unescapeFragment:function(e){return E(decodeURIComponent(e))},unescapeJsonPointer:E,escapeFragment:function(e){return encodeURIComponent(O(e))},escapeJsonPointer:O};var i=a(["string","number","integer","boolean","null"]);function a(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var o=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function u(e){return"number"==typeof e?"["+e+"]":o.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var l=/else\s*{\s*}/g,f=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,h=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var d=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,v=/var errors = 0;|var vErrors = null;/g,g=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,m=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,y=/if \(rootData === undefined\) rootData = data;/;function b(e){return"'"+c(e)+"'"}var _=/^\/(?:[^~]|~0|~1)*$/,w=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function O(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function E(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},,,,,,,function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(3),o=r(9),s=r(355),u=r(138),c=r(28),l=r(210),f=r(831),h=r(79),d=r(57),p=r(6),v=r(38),g=r(5),m=r(19),y=r(7),b=r(66),_=null;function w(e,t){var r;return new e((r=e.BYTES_PER_ELEMENT*t,(!_||_.byteLength<r)&&(_=new ArrayBuffer(r)),_),0,t)}var x=r(51),O=r(112),E=r(113);function k(e){if(!e&&!Object(O.a)())return"Node";if(Object(E.a)(e))return"Electron";var t="undefined"!==typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return n||i?"IE":x.b.chrome?"Chrome":x.b.safari?"Safari":x.b.mozInnerScreenX?"Firefox":"Unknown"}var j="elements must be GL.ELEMENT_ARRAY_BUFFER",S=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t);var a=n.id||n.program&&n.program.id;return(r=Object(p.a)(this,Object(g.a)(t).call(this,e,Object.assign({},n,{id:a})))).buffer=null,r.bufferValue=null,r.isDefaultArray=n.isDefaultArray||!1,r.initialize(n),Object.seal(Object(v.a)(r)),r}return Object(y.a)(t,e),Object(a.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t.constantAttributeZero||(Object(o.g)(e)||"Chrome"===k())}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,r,n){switch(n.constructor){case Float32Array:t._setConstantFloatArray(e,r,n);break;case Int32Array:t._setConstantIntArray(e,r,n);break;case Uint32Array:t._setConstantUintArray(e,r,n);break;default:Object(c.a)(!1)}}}]),Object(a.a)(t,[{key:"delete",value:function(){Object(m.a)(Object(g.a)(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(!t||34963===t.target,j),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);var n=r.size,i=r.type,a=r.stride,s=r.offset,u=r.normalized,l=r.integer,f=r.divisor,h=this.gl;return e=Number(e),this.bind((function(){h.bindBuffer(34962,t.handle),l?(Object(c.a)(Object(o.g)(h)),h.vertexAttribIPointer(e,n,i,a,s)):h.vertexAttribPointer(e,n,i,u,a,s),h.enableVertexAttribArray(e),h.vertexAttribDivisor(e,f||0)})),this}},{key:"enable",value:function(e){var r=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!n&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return i||(e=Number(e),this.bind((function(){return n?r.gl.enableVertexAttribArray(e):r.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t,r){var n=this._normalizeConstantArrayValue(t,r),i=n.byteLength*e,a=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new d.a(this.gl,i),o=(o=o||this.buffer.reallocate(i))||!this._compareConstantArrayValues(n,this.bufferValue)){var s=w(t.constructor,a);!function(e){for(var t=e.target,r=e.source,n=e.start,i=void 0===n?0:n,a=e.count,o=void 0===a?1:a,s=r.length,u=o*s,c=0,l=i;c<s;c++)t[l++]=r[c];for(;c<u;)c<u-c?(t.copyWithin(i+c,i,i+c),c*=2):(t.copyWithin(i+c,i,i+u-c),c=u)}({target:s,source:n,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var r=this,n=t.location;return Object(c.a)(Number.isFinite(n)),this.bind((function(){switch(e){case 34373:return r.gl.getVertexAttribOffset(n,e);default:return r.gl.getVertexAttrib(n,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function(e,t,r){switch(Object(c.a)(Object(o.g)(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function(e,t,r){switch(Object(c.a)(Object(o.g)(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:Object(c.a)(!1)}}}]),t}(b.a),P=r(475),A=/^(.+)__LOCATION_([0-9]+)$/,T=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],R=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,e);var n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new S(t),Object(P.a)(this,"VertexArray","v6.0",T),this.initialize(r),Object.seal(this)}return Object(a.a)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var r in e){var n=e[r];t._setAttribute(r,n)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,r);var n=this._resolveLocationAndAccessor(e,t,t.accessor,r),i=n.location,a=n.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,a)),this}},{key:"setConstant",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r)),i=n.location,a=n.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,a),this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new d.a(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof d.a&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var r=e.values[t];r instanceof d.a&&e.setBuffer(t,r)}})),this}},{key:"bindForDraw",value:function(e,t,r){var n,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(e,t),n=r()})),n}},{key:"_resolveLocationAndAccessor",value:function(e,t,r,n){var i=this,a=this._getAttributeIndex(e),s=a.location,u=a.name;if(!Number.isFinite(s)||s<0)return this.unused[e]=t,o.h.once(3,(function(){return"unused value ".concat(e," in ").concat(i.id)}))(),this;var l=this._getAttributeInfo(u||s);if(!l)return{location:-1,accessor:null};var f=this.accessors[s]||{},d=h.a.resolve(l.accessor,f,r,n),p=d.size,v=d.type;return Object(c.a)(Number.isFinite(p)&&Number.isFinite(v)),{location:s,accessor:d}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var r=A.exec(e),n=r?r[1]:e,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(n)+i,name:n}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof d.a)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof d.a){var r=t[0],n=t[1];this.setBuffer(e,r,n)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var i=t;this.setConstant(e,i)}else{if(!(t.buffer instanceof d.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var a=t;this.setBuffer(e,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(e,t){var r=Math.max(0|e,0|t),n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,r);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)n=this.values[i],ArrayBuffer.isView(n)&&this._setConstantAttribute(i,n)}},{key:"_setConstantAttributeZero",value:function(e,t){if(S.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){S.setConstant(this.gl,e,t)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var r=this.values[t],n=this.accessors[t];if(r){var i=n.divisor>0;if(e.isInstanced=e.isInstanced||i,r instanceof d.a){var a=r;if(i){var o=a.getVertexCount(n);e.instanceCount=Math.min(e.instanceCount,o)}else{var s=a.getVertexCount(n);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.h.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}(),C=r(821),M=r(125),I=r(104);function L(e,t){for(var r=t.maxElts,n=void 0===r?16:r,i=t.size,a=void 0===i?1:i,o="[",s=0;s<e.length&&s<n;++s)s>0&&(o+=",".concat(s%a===0?" ":"")),o+=F(e[s],t);var u=e.length>n?"...":"]";return"".concat(o).concat(u)}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=1e-16,n=t.isInteger,i=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return L(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var a=e.toPrecision(2),o=a.indexOf(".0");return o===a.length-2?a.slice(0,-1):a}function N(e,t,r,i){var a,o,s=e.gl;if(!t)return o={},Object(n.a)(o,i,"null"),Object(n.a)(o,"Format ","N/A"),o;var u,c,l,f="NOT PROVIDED",h="N/A",p="N/A",v="N/A";if(r&&(f=r.type,h=r.size,u=-1!==(f=String(f).replace("Array","")).indexOf("nt")),t instanceof d.a){var g,m,y=t,b=y.getDebugData(),_=b.data;if(c=b.modified?"*":"",l=_,p=(v=y.byteLength)/_.BYTES_PER_ELEMENT/h,r){var w=r.divisor>0;m="".concat(w?"I ":"P "," ").concat(p," (x").concat(h,"=").concat(v," bytes ").concat(Object(M.a)(s,f),")")}else u=!0,m="".concat(v," bytes");return g={},Object(n.a)(g,i,"".concat(c).concat(F(l,{size:h,isInteger:u}))),Object(n.a)(g,"Format ",m),g}return l=t,h=t.length,u=-1!==(f=String(t.constructor.name).replace("Array","")).indexOf("nt"),a={},Object(n.a)(a,i,"".concat(F(l,{size:h,isInteger:u})," (constant)")),Object(n.a)(a,"Format ","".concat(h,"x").concat(f," (constant)")),a}function D(e,t){var r=t.type,n=t.size,i=Object(I.b)(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,r=void 0===t?"Uniforms":t,i=e.program,a=e.uniforms,o=e.undefinedOnly,s=void 0!==o&&o;Object(c.a)(i);var u=".*_.*",l=".*Matrix",f=i._uniformSetters,h={},d=Object.keys(f).sort(),p=0,v=!0,g=!1,m=void 0;try{for(var y,b=d[Symbol.iterator]();!(v=(y=b.next()).done);v=!0){var _=y.value;_.match(u)||_.match(l)||U({table:h,header:r,uniforms:a,uniformName:_,undefinedOnly:s})&&p++}}catch(D){g=!0,m=D}finally{try{v||null==b.return||b.return()}finally{if(g)throw m}}var w=!0,x=!1,O=void 0;try{for(var E,k=d[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){var j=E.value;j.match(l)&&U({table:h,header:r,uniforms:a,uniformName:j,undefinedOnly:s})&&p++}}catch(D){x=!0,O=D}finally{try{w||null==k.return||k.return()}finally{if(x)throw O}}var S=!0,P=!1,A=void 0;try{for(var T,R=d[Symbol.iterator]();!(S=(T=R.next()).done);S=!0){var C=T.value;h[C]||U({table:h,header:r,uniforms:a,uniformName:C,undefinedOnly:s})&&p++}}catch(D){P=!0,A=D}finally{try{S||null==R.return||R.return()}finally{if(P)throw A}}var M=0,I={};if(!s)for(var L in a){var N=a[L];h[L]||(M++,I[L]=Object(n.a)({Type:"NOT USED: ".concat(N)},r,F(N)))}return{table:h,count:p,unusedTable:I,unusedCount:M}}function U(e){var t,r=e.table,i=e.header,a=e.uniforms,o=e.uniformName,s=e.undefinedOnly,u=a[o],c=function(e){return void 0!==e&&null!==e}(u);return(!s||!c)&&(r[o]=(t={},Object(n.a)(t,i,c?F(u):"N/A"),Object(n.a)(t,"Uniform Type",c?u:"NOT PROVIDED"),t),!0)}function z(e){var t=e.accessor,r=t.type,n=t.size,i=Object(I.b)(r,n);return i?"".concat(i.name," ").concat(e.name):e.name}var V=r(65),G={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function H(e,t){var r=(t||{}).attributeMap,n=void 0===r?G:r;return n&&n[e]||e}function W(e,t){var r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors"}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}Object(c.a)(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}r.d(t,"a",(function(){return Y}));var X=function(){},Z={},Y=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,e);var n=r.id,a=void 0===n?Object(u.c)("model"):n;Object(c.a)(Object(o.f)(t)),this.id=a,this.gl=t,this.id=r.id||Object(u.c)("Model"),this.lastLogTime=0,this.initialize(r)}return Object(a.a)(e,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||s.a.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,r=void 0===t?null:t,n=e.vs,i=e.fs,a=e.modules,o=e.defines,u=e.inject,l=e.varyings,f=e.bufferMode,h=e.transpileToGLSL100;this.programProps={program:r,vs:n,fs:i,modules:a,defines:o,inject:u,varyings:l,bufferMode:f,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Object(c.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&this.programManager.release(this.program),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var t=e.program,r=e.vs,n=e.fs,i=e.modules,a=e.defines,o=e.inject,s=e.varyings,u=e.bufferMode,c=e.transpileToGLSL100;this.programProps={program:t,vs:r,fs:n,modules:i,defines:a,inject:o,varyings:s,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return Object(c.a)(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return Object(c.a)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,r){var n={},i=t.indices;for(var a in t.attributes){var o=t.attributes[a],s=H(a,r);if("indices"===a)i=o;else if(o.constant)n[s]=o.value;else{var u=o.value,l=Object(V.a)({},o);delete l.value,n[s]=[new d.a(e,u),l],W(a,l)}}if(i){var f=i.value||i;Object(c.a)(f instanceof Uint16Array||f instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};n.indices=[new d.a(e,{data:f,target:34963}),h]}return n}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(e))return this;var t={};for(var r in e){var n=e[r];t[r]=n.getValue?n.getValue():n}return this.vertexArray.setAttributes(t),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return Object(l.a)(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t,r=e.moduleSettings,n=void 0===r?null:r,i=e.framebuffer,a=e.uniforms,s=void 0===a?{}:a,u=e.attributes,c=void 0===u?{}:u,l=e.transformFeedback,f=void 0===l?this.transformFeedback:l,h=e.parameters,d=void 0===h?{}:h,p=e.vertexArray,v=void 0===p?this.vertexArray:p;this.setAttributes(c),this.updateModuleSettings(n),this.setUniforms(s),o.h.priority>=2&&(t=this._logDrawCallStart(2));var g=this.vertexArray.getDrawParams(),m=this.props,y=m.isIndexed,b=void 0===y?g.isIndexed:y,_=m.indexType,w=void 0===_?g.indexType:_,x=m.indexOffset,O=void 0===x?g.indexOffset:x,E=m.vertexArrayInstanced,k=void 0===E?g.isInstanced:E;k&&!this.isInstanced&&o.h.warn("Found instanced attributes on non-instanced model",this.id)();var j=this.isInstanced,S=this.instanceCount,P=this.props,A=P.onBeforeRender,T=void 0===A?X:A,R=P.onAfterRender,C=void 0===R?X:R;T(),this.program.setUniforms(this.uniforms);var M=this.program.draw(Object.assign(Z,e,{logPriority:t,uniforms:null,framebuffer:i,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:v,transformFeedback:f,isIndexed:b,indexType:w,isInstanced:j,instanceCount:S,offset:b?O:0}));return C(),o.h.priority>=2&&this._logDrawCallEnd(t,v,i),M}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,r=void 0===t||t,i=e.feedbackBuffers,a=e.unbindModels,o=void 0===a?[]:a,s=e.parameters;i&&this._setFeedbackBuffers(i),r&&(s=Object.assign({},s,Object(n.a)({},35977,r))),o.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:s}))}finally{o.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.h.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(e){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var r=this.programProps,n=r.vs,i=r.fs,a=r.modules,o=r.inject,s=r.defines,u=r.varyings,l=r.bufferMode,h=r.transpileToGLSL100;t=this.programManager.get({vs:n,fs:i,modules:a,inject:o,defines:s,varyings:u,bufferMode:l,transpileToGLSL100:h}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(c.a)(t instanceof f.a,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new R(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof d.a&&t.delete()}}},{key:"_setAnimationProps",value:function(e){if(this.animated){Object(c.a)(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);Object.assign(this.uniforms,t)}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new C.a(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),o.h.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:o.h.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,r,i){if(void 0!==e){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,r=e.header,n=void 0===r?"Attributes":r;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=N(t,t.elements,null,n));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),c=t.accessors[s.location];c&&(u="".concat(o,": ").concat(D(s.name,c))),i[u]=N(t,a[o],c,n)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),s=B({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),u=s.table,c=s.unusedTable,l=s.unusedCount,f=B({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0}),h=f.table;f.count>0&&o.h.log("MISSING UNIFORMS",Object.keys(h))(),l>0&&o.h.log("UNUSED UNIFORMS",Object.keys(c))();var d=function(e){var t={},r="Accessors for ".concat(e.id),i=!0,a=!1,o=void 0;try{for(var s,u=e.attributeInfos[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c){var l=z(c);t["in ".concat(l)]=Object(n.a)({},r,JSON.stringify(c.accessor))}}}catch(y){a=!0,o=y}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var f=!0,h=!1,d=void 0;try{for(var p,v=e.varyingInfos[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;if(g){var m=z(g);t["out ".concat(m)]=Object(n.a)({},r,JSON.stringify(g.accessor))}}}catch(y){h=!0,d=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}return t}(this.vertexArray.configuration);o.h.table(e,a)(),o.h.table(e,u)(),o.h.table(e+1,d)(),i&&i.log({logLevel:2,message:"Rendered to ".concat(i.id)}),o.h.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}()},,function(e,t){},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t,r){"use strict";function n(e){this.wrapped=e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(124),c=r(18),l=r(15),f=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"toString",value:function(){var e="[";if(l.f.printRowMajor){e+="row-major:";for(var t=0;t<this.RANK;++t)for(var r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+t])}else{e+="column-major:";for(var n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]"}},{key:"getElementIndex",value:function(e,t){return t*this.RANK+e}},{key:"getElement",value:function(e,t){return this[t*this.RANK+e]}},{key:"setElement",value:function(e,t,r){return this[t*this.RANK+e]=Object(c.a)(r),this}},{key:"getColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),r=e*this.RANK,n=0;n<this.RANK;++n)t[n]=this[r+n];return t}},{key:"setColumn",value:function(e,t){for(var r=e*this.RANK,n=0;n<this.RANK;++n)this[r+n]=t[n];return this}}]),t}(u.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(0),i=r(2),a=r(3),o=r(6),s=r(5),u=r(19),c=r(7),l=r(127),f=r(9);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={blendFunc:[1,0,32771,0],blendEquation:32774},v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(e){e.pickingFBO?this._drawPickingBuffer(e):Object(u.a)(Object(s.a)(t.prototype),"render",this).call(this,e)}},{key:"_drawPickingBuffer",value:function(e){var r=this,n=e.layers,i=e.layerFilter,a=e.viewports,o=e.onViewportActive,c=e.pickingFBO,l=e.deviceRect,h=l.x,v=l.y,g=l.width,m=l.height,y=e.pass,b=void 0===y?"picking":y,_=e.redrawReason,w=e.pickZ,x=this.gl;return this.pickZ=w,Object(f.l)(x,d({scissorTest:!0,scissor:[h,v,g,m],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},p,{blend:!w}),(function(){Object(u.a)(Object(s.a)(t.prototype),"render",r).call(r,{target:c,layers:n,layerFilter:i,viewports:a,onViewportActive:o,pass:b,redrawReason:_})}))}},{key:"shouldDrawLayer",value:function(e){return e.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(e,t){var r=this.pickZ?{blend:!1}:d({},p,{blend:!0,blendColor:[0,0,0,(t+1)/255]});return Object.assign({},e.props.parameters,r)}}]),t}(l.a)},function(e,t,r){"use strict";var n=r(11),i=r(16),a=r(0),o=r(2),s=r(3),u=r(112),c="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source",l=Object(u.a)();function f(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch(n){return null}}var h=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,e),this.storage=f(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return Object(s.a)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function d(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));var a=e.width*r,o=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var p={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function v(e){return"string"===typeof e?p[e.toUpperCase()]||p.WHITE:e}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r),i=!0,a=!1,o=void 0;try{for(var s,u=function(){var r=s.value;"function"===typeof e[r]&&(t.find((function(e){return r===e}))||(e[r]=e[r].bind(e)))},c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u()}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}function m(e,t){if(!e)throw new Error(t||"Assertion failed")}var y=r(51);function b(){var e;if(l&&y.b.performance)e=y.b.performance.now();else if(y.a.hrtime){var t=y.a.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}r.d(t,"a",(function(){return j}));var _={debug:l&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},w={enabled:!0,level:0};function x(){}var O={},E={once:!0};function k(e){for(var t in e)for(var r in e[t])return r||"untitled";return"empty"}var j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id;Object(o.a)(this,e),this.id=r,this.VERSION=c,this._startTs=b(),this._deltaTs=b(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new h("__probe-".concat(this.id,"__"),w),this.userData={},this.timeStamp("".concat(this.id," started")),g(this),Object.seal(this)}return Object(s.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((b()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((b()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){m(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,_.warn,arguments,E)}},{key:"error",value:function(e){return this._getLogFunction(0,e,_.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,_.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,_.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,_.debug||_.info,arguments,E)}},{key:"table",value:function(e,t,r){return t?this._getLogFunction(e,t,console.table||x,r&&[r],{tag:k(t)}):x}},{key:"image",value:function(e){var t=e.logLevel,n=e.priority,a=e.image,o=e.message,s=void 0===o?"":o,u=e.scale,c=void 0===u?1:u;return this._shouldLog(t||n)?l?function(e){var t=e.image,r=e.message,n=void 0===r?"":r,a=e.scale,o=void 0===a?1:a;if("string"===typeof t){var s=new Image;return s.onload=function(){var e,t=d(s,n,o);(e=console).log.apply(e,Object(i.a)(t))},s.src=t,x}var u=t.nodeName||"";if("img"===u.toLowerCase()){var c;return(c=console).log.apply(c,Object(i.a)(d(t,n,o))),x}if("canvas"===u.toLowerCase()){var l=new Image;return l.onload=function(){var e;return(e=console).log.apply(e,Object(i.a)(d(l,n,o)))},l.src=t.toDataURL(),x}return x}({image:a,message:s,scale:c}):function(e){var t=e.image,n=(e.message,e.scale),i=void 0===n?1:n,a=null;try{a=r(203)}catch(o){}if(a)return function(){return a(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(e){return console.log(e)}))};return x}({image:a,message:s,scale:c}):x}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Object(a.a)({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||x)}},{key:"group",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},n=r=P({logLevel:e,message:t,opts:r}),i=n.collapsed;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}},{key:"groupCollapsed",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||x)}},{key:"withGroup",value:function(e,t,r){this.group(e,t)();try{r()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=S(e)}},{key:"_getLogFunction",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var o;a=P({logLevel:e,message:t,args:n,opts:a}),m(r=r||a.method),a.total=this.getTotal(),a.delta=this.getDelta(),this._deltaTs=b();var s=a.tag||a.message;if(a.once){if(O[s])return x;O[s]=b()}return t=A(this.id,a.message,a),(o=r).bind.apply(o,[console,t].concat(Object(i.a)(a.args)))}return x}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function S(e){if(!e)return 0;var t;switch(Object(n.a)(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return m(Number.isFinite(t)&&t>=0),t}function P(e){var t=e.logLevel,r=e.message;e.logLevel=S(t);for(var i=e.args?Array.from(e.args):[];i.length&&i.shift()!==r;);switch(e.args=i,Object(n.a)(t)){case"string":case"function":void 0!==r&&i.unshift(r),e.message=t;break;case"object":Object.assign(e,t)}"function"===typeof e.message&&(e.message=e.message());var a=Object(n.a)(e.message);return m("string"===a||"object"===a),Object.assign(e,e.opts)}function A(e,t,r){if("string"===typeof t){var n=r.time?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}((s=r.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),i=t,a=r.color,o=r.background,l||"string"!==typeof i||(a&&(a=v(a),i="\x1b[".concat(a,"m").concat(i,"\x1b[39m")),o&&(a=v(o),i="\x1b[".concat(o+10,"m").concat(i,"\x1b[49m"))),t=i}var i,a,o,s;return t}j.VERSION=c},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u}));var n=r(10),i=r(9),a=r(83),o=r(28);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,n=void 0===r?null:r,a=t.color,s=void 0===a?null:a,u=t.depth,c=void 0===u?null:u,l=t.stencil,f=void 0===l?null:l,h={};n&&(h.framebuffer=n);var d=0;s&&(d|=16384,!0!==s&&(h.clearColor=s)),c&&(d|=256,!0!==c&&(h.clearDepth=c)),f&&(d|=1024,!0!==c&&(h.clearStencil=c)),Object(o.a)(0!==d,"clear: bad arguments"),Object(i.l)(e,h,(function(){e.clear(d)}))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,s=void 0===r?null:r,u=t.buffer,c=void 0===u?6144:u,l=t.drawBuffer,f=void 0===l?0:l,h=t.value,d=void 0===h?[0,0,0,0]:h;Object(a.a)(e),Object(i.l)(e,{framebuffer:s},(function(){switch(c){case 6144:switch(d.constructor){case Int32Array:e.clearBufferiv(c,f,d);break;case Uint32Array:e.clearBufferuiv(c,f,d);break;case Float32Array:default:e.clearBufferfv(c,f,d)}break;case 6145:e.clearBufferfv(6145,0,[d]);break;case 6146:e.clearBufferiv(6146,0,[d]);break;case 34041:var t=Object(n.a)(d,2),r=t[0],i=t[1];e.clearBufferfi(34041,0,r,i);break;default:Object(o.a)(!1,"clear: bad arguments")}}))}},function(e,t,r){"use strict";var n,i=r(0),a=r(92),o=r(209);r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return h})),r.d(t,"b",(function(){return d}));var s=(n={},Object(i.a)(n,a.b,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(i.a)(n,a.a,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),n),u="__LUMA_INJECT_DECLARATIONS__",c=/void\s+main\s*\([^)]*\)\s*\{\n?/,l=/}\n?[^{}]*$/,f=[];function h(e,t,r,n){var i=t===a.b,o=function(t){var n=r[t];n.sort((function(e,t){return e.order-t.order})),f.length=n.length;for(var a=0,o=n.length;a<o;++a)f[a]=n[a].injection;var s="".concat(f.join("\n"),"\n");switch(t){case"vs:#decl":i&&(e=e.replace(u,s));break;case"vs:#main-start":i&&(e=e.replace(c,(function(e){return e+s})));break;case"vs:#main-end":i&&(e=e.replace(l,(function(e){return s+e})));break;case"fs:#decl":i||(e=e.replace(u,s));break;case"fs:#main-start":i||(e=e.replace(c,(function(e){return e+s})));break;case"fs:#main-end":i||(e=e.replace(l,(function(e){return s+e})));break;default:e=e.replace(t,(function(e){return e+s}))}};for(var h in r)o(h);return e=e.replace(u,""),n&&(e=e.replace(/\}\s*$/,(function(e){return e+s[t]}))),e}function d(e){var t={};return Object(o.a)(Array.isArray(e)&&e.length>1),e.forEach((function(e){for(var r in e)t[r]=t[r]?"".concat(t[r],"\n").concat(e[r]):e[r]})),t}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(19),u=r(7),c=r(145),l=r(54),f=r(87),h=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(e){Object(s.a)(Object(o.a)(t.prototype),"setState",this).call(this,e),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(e){var t=e.info,r=t.object;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id?Object.assign(t,{object:r.__source.object,index:r.__source.index}):t}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(e,t){var r=this.props._subLayerProps;return t&&t.length||r&&r[e]}},{key:"getSubLayerClass",value:function(e,t){var r=this.props._subLayerProps;return r&&r[e]&&r[e].type||t}},{key:"getSubLayerRow",value:function(e,t,r){return e.__source={parent:this,object:t,index:r},e}},{key:"getSubLayerAccessor",value:function(e){if("function"===typeof e){var t={data:this.props.data,target:[]};return function(r,n){return r.__source?(t.index=r.__source.index,e(r.__source.object,t)):e(r,n)}}return e}},{key:"getSubLayerProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,r=t.opacity,n=t.pickable,i=t.visible,a=t.parameters,o=t.getPolygonOffset,s=t.highlightedObjectIndex,u=t.autoHighlight,c=t.highlightColor,l=t.coordinateSystem,f=t.coordinateOrigin,h=t.wrapLongitude,d=t.positionFormat,p=t.modelMatrix,v=t.extensions,g=t._subLayerProps,m={opacity:r,pickable:n,visible:i,parameters:a,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:u,highlightColor:c,coordinateSystem:l,coordinateOrigin:f,wrapLongitude:h,positionFormat:d,modelMatrix:p,extensions:v},y=g&&g[e.id],b=y&&y.updateTriggers,_=e.id||"sublayer";if(y){var w=this.constructor._propTypes;for(var x in y){var O=w[x];O&&"accessor"===O.type&&(y[x]=this.getSubLayerAccessor(y[x]))}}Object.assign(m,e,y,{id:"".concat(this.props.id,"-").concat(_),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers,b)});var E=!0,k=!1,j=void 0;try{for(var S,P=v[Symbol.iterator]();!(E=(S=P.next()).done);E=!0){var A=S.value,T=A.getSubLayerProps.call(this,A);T&&Object.assign(m,T,{updateTriggers:Object.assign(m.updateTriggers,T.updateTriggers)})}}catch(R){k=!0,j=R}finally{try{E||null==P.return||P.return()}finally{if(k)throw j}}return m}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers,t=!e||this.needsUpdate();t&&(e=this.renderLayers(),e=Object(f.b)(e,Boolean),this.internalState.subLayers=e),Object(l.a)("compositeLayer.renderLayers",this,t,e);var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){a.value.parent=this}}catch(s){n=!0,i=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Object(s.a)(Object(o.a)(t.prototype),"isLoaded",this)&&this.getSubLayers().every((function(e){return e.isLoaded}))}}]),t}(c.a);h.layerName="CompositeLayer"},,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t){if(!t)return e;var r=Object.assign({},e,t);if("defines"in t&&(r.defines=Object.assign({},e.defines,t.defines)),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some((function(e){return"project64"===e.name})))){var a=r.modules.findIndex((function(e){return"project32"===e.name}));a>=0&&r.modules.splice(a,1)}if("inject"in t)if(e.inject){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.inject);for(var s in t.inject)o[s]=(o[s]||"")+t.inject[s];r.inject=o}else r.inject=t.inject;return r}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(11);function i(e){if(null===(t=e)||"object"!==Object(n.a)(t))throw new Error("count(): argument not an object");var t;if("function"===typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===Object(n.a)(e)&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(103),c=r(174),l=r(99),f=r(100),h={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new l.a(["target","zoom"]),transitionInterruption:f.a.BREAK},d=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,c.a,e))).invertPan=!0,r}return Object(s.a)(t,e),Object(i.a)(t,[{key:"_onPanRotate",value:function(e){return!1}},{key:"_getTransitionProps",value:function(){return h}}]),t}(u.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(114),c=r(229),l=r(230),f=function(e){function t(e){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,Object.assign({},e,{type:c.a})))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:l.a})}}]),t}(u.a);f.displayName="MapView"},function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(0),i=r(2),a=r(3),o=r(6),s=r(5),u=r(38),c=r(7),l=r(71),f=r(37),h=r(52),d=r(14);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=r.latitude,a=void 0===n?0:n,c=r.longitude,l=void 0===c?0:c,h=r.zoom,p=void 0===h?11:h,v=r.pitch,g=void 0===v?0:v,m=r.bearing,y=void 0===m?0:m,b=r.nearZMultiplier,_=void 0===b?.1:b,w=r.farZMultiplier,x=void 0===w?1.01:w,O=r.orthographic,E=void 0!==O&&O,k=r.repeat,j=void 0!==k&&k,S=r.worldOffset,P=void 0===S?0:S,A=r.width,T=r.height,R=r.altitude,C=void 0===R?1.5:R,M=Math.pow(2,p);A=A||1,T=T||1,C=Math.max(.75,C);var I=Object(f.j)({width:A,height:T,pitch:g,altitude:C,nearZMultiplier:_,farZMultiplier:x}),L=I.fov,F=I.aspect,N=I.focalDistance,D=I.near,B=I.far,U=Object(f.k)({height:T,pitch:g,bearing:y,scale:M,altitude:C});if(P){var z=(new d.Matrix4).translate([512*P,0,0]);U=z.multiplyLeft(U)}var V=Object.assign({},r,{width:A,height:T,viewMatrix:U,longitude:l,latitude:a,zoom:p,orthographic:E,fovyRadians:L,aspect:F,focalDistance:E?N:1,near:D,far:B});return(e=Object(o.a)(this,Object(s.a)(t).call(this,V))).latitude=a,e.longitude=l,e.zoom=p,e.pitch=g,e.bearing=y,e.altitude=C,e.orthographic=E,e._subViewports=j?[]:null,Object.freeze(Object(u.a)(e)),e}return Object(c.a)(t,e),Object(a.a)(t,[{key:"addMetersToLngLat",value:function(e,t){return Object(f.b)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=e.pos,n=Object(f.n)(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),a=h.a([],i,h.d([],n)),o=h.a([],this.center,a);return this.unprojectFlat(o)}},{key:"fitBounds",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,i=this.height,a=Object(f.d)(Object.assign({width:n,height:i,bounds:e},r)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:n,height:i,longitude:o,latitude:s,zoom:u})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var e=this.unproject([0,0]),r=this.unproject([this.width,0]),n=this.unproject([0,this.height]),i=this.unproject([this.width,this.height]),a=Math.min(e[0],r[0],n[0],i[0]),o=Math.max(e[0],r[0],n[0],i[0]),s=Math.floor((a+180)/360),u=Math.ceil((o-180)/360),c=s;c<=u;c++){var l=c?new t(v({},this,{worldOffset:c})):this;this._subViewports.push(l)}return this._subViewports}}]),t}(l.a);g.displayName="WebMercatorViewport"},function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(10),i=r(2),a=r(3),o=r(6),s=r(5),u=r(7),c=r(14),l=r(103),f=r(165),h=r(37),d=r(31),p=r(99),v=r(100),g={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new p.a,transitionInterruption:v.a.BREAK},m={transitionDuration:0},y=0,b=20,_=0,w=60,x=0,O=0,E=1.5,k=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width,a=r.height,u=r.latitude,c=r.longitude,l=r.zoom,f=r.bearing,h=void 0===f?O:f,p=r.pitch,v=void 0===p?x:p,g=r.altitude,m=void 0===g?E:g,k=r.maxZoom,j=void 0===k?b:k,S=r.minZoom,P=void 0===S?y:S,A=r.maxPitch,T=void 0===A?w:A,R=r.minPitch,C=void 0===R?_:R,M=r.startPanLngLat,I=r.startZoomLngLat,L=r.startBearing,F=r.startPitch,N=r.startZoom;return Object(i.a)(this,t),Object(d.a)(Number.isFinite(c),"`longitude` must be supplied"),Object(d.a)(Number.isFinite(u),"`latitude` must be supplied"),Object(d.a)(Number.isFinite(l),"`zoom` must be supplied"),(e=Object(o.a)(this,Object(s.a)(t).call(this,{width:n,height:a,latitude:u,longitude:c,zoom:l,bearing:h,pitch:v,altitude:m,maxZoom:j,minZoom:P,maxPitch:T,minPitch:C})))._interactiveState={startPanLngLat:M,startZoomLngLat:I,startBearing:L,startPitch:F,startZoom:N},e}return Object(u.a)(t,e),Object(a.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,r=e.startPos,i=this._interactiveState.startPanLngLat||this._unproject(r);if(!i)return this;var a=this._calculateNewLngLat({startPanLngLat:i,pos:t}),o=Object(n.a)(a,2),s=o[0],u=o[1];return this._getUpdatedState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,r=void 0===t?0:t,n=e.deltaScaleY,i=void 0===n?0:n,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:i,startBearing:o,startPitch:s}),c=u.pitch,l=u.bearing;return this._getUpdatedState({bearing:l,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,r=e.startPos,i=e.scale,a=this._interactiveState,o=a.startZoom,s=a.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,s=this._unproject(r)||this._unproject(t));var u=this._calculateNewZoom({scale:i,startZoom:o}),c=new h.c(Object.assign({},this._viewportProps,{zoom:u})).getMapCenterByLngLatPosition({lngLat:s,pos:t}),l=Object(n.a)(c,2),f=l[0],d=l[1];return this._getUpdatedState({zoom:u,longitude:f,latitude:d})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),r=Object.assign({},this._viewportProps),n=r.bearing,i=r.longitude;return Math.abs(n-t.bearing)>180&&(r.bearing=n<0?n+360:n-360),Math.abs(i-t.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,r=t.width,n=t.height;return this.zoom({pos:[r/2,n/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,r=t.width,n=t.height;return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,r=e.minZoom,n=e.zoom;e.zoom=Object(c.clamp)(n,r,t);var i=e.maxPitch,a=e.minPitch,o=e.pitch;return e.pitch=Object(c.clamp)(o,a,i),Object.assign(e,Object(h.m)(e)),e}},{key:"_unproject",value:function(e){var t=new h.c(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,r=e.pos;return new h.c(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,r=e.startZoom,n=this._viewportProps,i=n.maxZoom,a=n.minZoom,o=r+Math.log2(t);return Object(c.clamp)(o,a,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,r=e.deltaScaleY,n=e.startBearing,i=e.startPitch;r=Object(c.clamp)(r,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,u=i;return r>0?u=i+r*(s-i):r<0&&(u=i-r*(o-i)),{pitch:u,bearing:n+180*t}}}]),t}(f.a),j=function(e){function t(e){var r;return Object(i.a)(this,t),(r=Object(o.a)(this,Object(s.a)(t).call(this,k,e))).invertPan=!0,r}return Object(u.a)(t,e),Object(a.a)(t,[{key:"_getTransitionProps",value:function(){return g}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,r=e.deltaY,i=this.getCenter(e),a=Object(n.a)(i,2)[1],o=a-r,s=this.controllerState.getViewportProps(),u=s.width,c=s.height,l=t/u,f=0;r>0?Math.abs(c-o)>5&&(f=r/(o-c)*1.2):r<0&&o>5&&(f=1-a/o),f=Math.min(1,Math.max(-1,f));var h=this.controllerState.rotate({deltaScaleX:l,deltaScaleY:f});return this.updateViewport(h,m,{isDragging:!0,isRotating:!0})}}]),t}(l.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(2),i=r(3),a=r(31),o=r(478),s=r(145),u=r(55),c=r(22),l=r(54),f=r(87),h=r(362),d=r(71),p=r(236),v=Object.seal({layerManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),g=function(e){return e instanceof s.a?"".concat(e):e?"invalid":"null"},m=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.deck,a=r.stats,s=r.viewport,u=void 0===s?null:s,c=r.timeline,l=void 0===c?null:c;Object(n.a)(this,e),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},v,{layerManager:this,deck:i,gl:t,programManager:t&&Object(p.a)(t),stats:a||new h.a({id:"deck.gl"}),viewport:u||new d.a({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:l||new o.a}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Object(i.a)(e,[{key:"finalize",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.layers[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this._finalizeLayer(a)}}catch(o){t=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var r=!0,n=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,u=s.getNeedsRedraw(e);t=t||u}}catch(c){n=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return t}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,r=void 0===t?null:t;return r?this.layers.filter((function(e){return r.find((function(t){return 0===e.id.indexOf(t)}))})):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers),"onError"in e&&(this._onError=e.onError)}},{key:"setLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t||e!==this.lastRenderedLayers;if(Object(l.a)("layerManager.setLayers",this,r,e),!r)return this;this.lastRenderedLayers=e,e=Object(f.b)(e,Boolean);var n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.context=this.context}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return this._updateLayers(this.layers,e),this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();if(e){this.setNeedsRedraw("updating layers: ".concat(e));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function(e){Object(a.a)(e,"LayerManager: viewport not set");var t=this.context.viewport;if(!t||!e.equals(t)){Object(l.a)("layerManager.activateViewport",this,e),this.context.viewport=e;var r={viewportChanged:!0},n=!0,i=!1,o=void 0;try{for(var s,u=this.layers[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;c.setChangeFlags(r),this._updateLayer(c)}}catch(f){i=!0,o=f}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}return this}},{key:"_handleError",value:function(e,t,r){this._onError?this._onError(t,r):c.a.error("error during ".concat(e," of ").concat(g(r)),t)()}},{key:"_updateLayers",value:function(e,t){var r={},n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;r[u.id]?c.a.warn("Multiple old layers with same id ".concat(g(u)))():r[u.id]=u}}catch(p){i=!0,a=p}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}var l=[];this._updateSublayersRecursively(t,r,l),this._finalizeOldLayers(r);for(var f=!1,h=0,d=l;h<d.length;h++){if(d[h].hasUniformTransition()){f=!0;break}}this._needsUpdate=f,this.layers=l}},{key:"_updateSublayersRecursively",value:function(e,t,r){var n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.context=this.context;var l=t[u.id];null===l&&c.a.warn("Multiple new layers with same id ".concat(g(u)))(),t[u.id]=null;var f=null;try{this._debug&&l!==u&&u.validateProps(),l?(this._transferLayerState(l,u),this._updateLayer(u)):this._initializeLayer(u),r.push(u),f=u.isComposite&&u.getSubLayers()}catch(h){this._handleError("matching",h,u)}f&&this._updateSublayersRecursively(f,t,r)}}catch(h){i=!0,a=h}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"_finalizeOldLayers",value:function(e){for(var t in e){var r=e[t];r&&this._finalizeLayer(r)}}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle=u.a.INITIALIZED}catch(t){this._handleError("initialization",t,e)}}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=u.a.MATCHED,t!==e&&(e.lifecycle=u.a.AWAITING_GC)}},{key:"_updateLayer",value:function(e){try{e._update()}catch(t){this._handleError("update",t,e)}}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(g(e)),e.lifecycle=u.a.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=u.a.FINALIZED}catch(t){this._handleError("finalization",t,e)}}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),i=[255,255,255],a=0,o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r=t.color,o=void 0===r?i:r,s=t.intensity,u=void 0===s?1:s;this.id=t.id||"ambient-".concat(a++),this.color=o,this.intensity=u,this.type="ambient"}},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(0),o=r(10),s=r(6),u=r(5),c=r(19),l=r(7),f=r(476),h=r(246),d=r(57);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var v=function(){function e(t,r){Object(n.a)(this,e),this.opts=r,this.source=t}return Object(i.a)(e,[{key:"getValue",value:function(){var e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];var r=this.source.value,n=t.size,i=r;if(r&&r.length!==n){i=new Float32Array(n);for(var a=t.elementOffset||0,o=0;o<n;++o)i[o]=r[a+o]}return i}},{key:"getAccessor",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.source.getAccessor(),{},this.opts)}},{key:"value",get:function(){return this.source.value}}]),e}();var g=r(106),m=r(67),y=r(22);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){return e.stride||e.size*e.bytesPerElement}function x(e,t){t.offset&&y.a.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var r=w(e);return _({},t,{offset:("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*r+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0),stride:r})}var O=function(){function e(t,r){Object(n.a)(this,e),this.gl=t,this.id=r.id,this.size=r.size;var i=r.logicalType||r.type,a=5130===i,o=r.defaultValue;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),r.defaultValue=o;var s=i;a?s=5126:!s&&r.isIndexed?s=t&&Object(f.b)(t,h.a.ELEMENT_INDEX_UINT32)?5125:5123:s||(s=5126),r.logicalType=i,r.type=s;var u=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||s||5126);this.shaderAttributes={},this.doublePrecision=a,a&&!1===r.fp64&&(u=Float32Array),r.bytesPerElement=u.BYTES_PER_ELEMENT,this.defaultType=u,this.value=null,this.settings=r,this.state={externalBuffer:null,bufferAccessor:r,allocatedValue:null,constant:!1},this._buffer=null,this.setData(r)}return Object(i.a)(e,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),g.a.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,t){if(this.doublePrecision){var r={},n=this.value instanceof Float64Array,i=function(e,t){var r=x(e,t);return{high:r,low:_({},r,{offset:r.offset+4*e.size})}}(this.getAccessor(),t||{});return r[e]=new v(this,i.high),r["".concat(e,"64Low")]=n?new v(this,i.low):new Float32Array(this.size),r}if(t){var o=x(this.getAccessor(),t);return Object(a.a)({},e,new v(this,o))}return Object(a.a)({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(e){var t=this.state;ArrayBuffer.isView(e)?e={value:e}:e instanceof d.a&&(e={buffer:e});var r=_({},this.settings,{},e);if(t.bufferAccessor=r,e.constant){var n=e.value;if(n=this._normalizeValue(n,[],0),this.settings.normalized&&(n=this._normalizeConstant(n)),!(!t.constant||!this._areValuesEqual(n,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=n}else if(e.buffer){var i=e.buffer;t.externalBuffer=i,t.constant=!1,this.value=e.value;var a=e.value instanceof Float64Array;r.type=e.type||i.accessor.type,r.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(a?2:1),r.stride=w(r)}else if(e.value){this._checkExternalBuffer(e);var o=e.value;t.externalBuffer=null,t.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=w(r);var s=this.buffer,u=this.byteOffset;this.doublePrecision&&o instanceof Float64Array&&(o=Object(m.f)(o,r)),s.byteLength<o.byteLength+u&&s.reallocate(2*(o.byteLength+u)),s.setAccessor(null),s.subData({data:o,offset:u}),r.type=e.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.value,r=e.startOffset,n=void 0===r?0:r,i=e.endOffset;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?Object(m.f)(t,{size:this.size,startIndex:n,endIndex:i}):t.subarray(n,i),offset:n*t.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var t=e.numInstances,r=e.copy,n=void 0!==r&&r,i=this.state,a=i.allocatedValue,o=g.a.allocate(a,t+1,{size:this.size,type:this.defaultType,copy:n});this.value=o;var s=this.buffer,u=this.byteOffset;return s.byteLength<o.byteLength+u&&(s.reallocate(o.byteLength+u),n&&a&&s.subData({data:a instanceof Float64Array?Object(m.f)(a,this):a,offset:u})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var t=e.value;if(!e.constant&&t){var r=this.defaultType,n=!1;if(this.doublePrecision&&(n=t.BYTES_PER_ELEMENT<4),n)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof r||!this.settings.normalized||"normalized"in e||y.a.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((function(e){return(e+128)/255*2-1}));case 5122:return new Float32Array(e).map((function(e){return(e+32768)/65535*2-1}));case 5121:return new Float32Array(e).map((function(e){return e/255}));case 5123:return new Float32Array(e).map((function(e){return e/65535}));default:return e}}},{key:"_normalizeValue",value:function(e,t,r){var n=this.settings,i=n.defaultValue,a=n.size;if(Number.isFinite(e))return t[r]=e,t;if(!e)return t[r]=i[0],t;switch(a){case 4:t[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:for(var o=a;--o>=0;)t[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return t}},{key:"_areValuesEqual",value:function(e,t){if(!e||!t)return!1;for(var r=this.size,n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings,t=e.isIndexed,r=e.type;this._buffer=new d.a(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*w(e):0}}]),e}(),E=r(31),k=r(78),j=r(87),S=[],P=[[0,1/0]];function A(e,t){if(e===P)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;for(var r=[],n=e.length,i=0,a=0;a<n;a++){var o=e[a];o[1]<t[0]?(r.push(o),i=a+1):o[0]>t[1]?r.push(o):t=[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}return r.splice(i,0,t),r}var T=r(70),R=function(e){function t(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,t),r=Object(s.a)(this,Object(u.a)(t).call(this,e,i));var a=i.transition,o=void 0!==a&&a,c=i.noAlloc,l=void 0!==c&&c,f=i.update,h=void 0===f?null:f,d=i.accessor,p=void 0===d?null:d,v=i.transform,g=void 0===v?null:v,m=i.startIndices,y=void 0===m?null:m;return Object.assign(r.settings,{transition:o,noAlloc:l,update:h||p&&r._autoUpdater,accessor:p,transform:g}),Object.assign(r.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:P,startIndices:y}),Object.seal(r.settings),Object.seal(r.state),r._validateAttributeUpdaters(),r}return Object(l.a)(t,e),Object(i.a)(t,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearChangedFlags,r=void 0!==t&&t,n=this.state.needsRedraw;return this.state.needsRedraw=n&&!r,n}},{key:"getUpdateTriggers",value:function(){var e=this.settings.accessor;return[this.id].concat("function"!==typeof e&&e||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(e){var t=this.settings.accessor,r=this.settings.transition;if(!this.supportsTransition())return null;var n=Array.isArray(t)?e[t.find((function(t){return e[t]}))]:e[t];return Object(T.e)(n,r)}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){var r=t.startRow,n=void 0===r?0:r,i=t.endRow,a=void 0===i?1/0:i;this.state.updateRanges=A(this.state.updateRanges,[n,a])}else this.state.updateRanges=P}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=S}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}},{key:"update",value:function(e){this.setData(e)}},{key:"allocate",value:function(e){var r=this.state,n=this.settings;return!n.noAlloc&&(!!n.update&&(Object(E.a)(Number.isFinite(e)),Object(c.a)(Object(u.a)(t.prototype),"allocate",this).call(this,{numInstances:e,copy:r.updateRanges!==P}),!0))}},{key:"updateBuffer",value:function(e){var r=e.numInstances,n=e.data,i=e.props,a=e.context;if(!this.needsUpdate())return!1;var s=this.state.updateRanges,l=this.settings,f=l.update,h=l.noAlloc,d=!0;if(f){var p=!0,v=!1,g=void 0;try{for(var m,y=s[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=Object(o.a)(m.value,2),_=b[0],w=b[1];f.call(a,this,{data:n,startRow:_,endRow:w,props:i,numInstances:r})}}catch(C){v=!0,g=C}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var x=!0,O=!1,E=void 0;try{for(var k,j=s[Symbol.iterator]();!(x=(k=j.next()).done);x=!0){var S=Object(o.a)(k.value,2),P=S[0],A=S[1],T=Number.isFinite(P)?this.getVertexOffset(P):0,R=Number.isFinite(A)?this.getVertexOffset(A):h||!Number.isFinite(r)?this.value.length:r*this.size;Object(c.a)(Object(u.a)(t.prototype),"updateSubBuffer",this).call(this,{startOffset:T,endOffset:R})}}catch(C){O=!0,E=C}finally{try{x||null==j.return||j.return()}finally{if(O)throw E}}}else;this._checkAttributeArray()}else d=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),d}},{key:"setConstantValue",value:function(e){return void 0!==e&&"function"!==typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(e){var t=this.state;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.state,n=this.settings;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(n.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;r.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e});var i=n.transform||t!==this.startIndices;if(i){Object(E.a)(ArrayBuffer.isView(e.value),"invalid ".concat(n.accessor));var a=e.size&&e.size!==this.size;return r.binaryAccessor=Object(k.b)(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}},{key:"getVertexOffset",value:function(e){var t=this.startIndices;return(t?t[e]:e)*this.size}},{key:"getShaderAttributes",value:function(){var e=this.settings.shaderAttributes||Object(a.a)({},this.id,null),r={};for(var n in e)Object.assign(r,Object(c.a)(Object(u.a)(t.prototype),"getShaderAttributes",this).call(this,n,e[n]));return r}},{key:"_autoUpdater",value:function(e,t){var r=t.data,n=t.startRow,i=t.endRow,a=t.props,o=t.numInstances,s=e.settings,u=e.state,c=e.value,l=e.size,f=e.startIndices,h=s.accessor,d=s.transform,p=u.binaryAccessor||("function"===typeof h?h:a[h]);Object(E.a)("function"===typeof p,'accessor "'.concat(h,'" is not a function'));var v=e.getVertexOffset(n),g=Object(k.a)(r,n,i),m=g.iterable,y=g.objectInfo,b=!0,_=!1,w=void 0;try{for(var x,O=m[Symbol.iterator]();!(b=(x=O.next()).done);b=!0){var S=x.value;y.index++;var P=p(S,y);if(d&&(P=d.call(this,P)),f){var A=(f[y.index+1]||o)-f[y.index];if(P&&Array.isArray(P[0])){var T=v,R=!0,C=!1,M=void 0;try{for(var I,L=P[Symbol.iterator]();!(R=(I=L.next()).done);R=!0){var F=I.value;e._normalizeValue(F,c,T),T+=l}}catch(N){C=!0,M=N}finally{try{R||null==L.return||L.return()}finally{if(C)throw M}}}else P&&P.length>l?c.set(P,v):(e._normalizeValue(P,y.target,0),Object(j.a)({target:c,source:y.target,start:v,count:A}));v+=A*l}else e._normalizeValue(P,c,v),v+=l}}catch(N){_=!0,w=N}finally{try{b||null==O.return||O.return()}finally{if(_)throw w}}e.constant=!1}},{key:"_validateAttributeUpdaters",value:function(){var e=this.settings;if(!(e.noAlloc||"function"===typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value,t=Math.min(4,this.size);if(e&&e.length>=t){var r=!0;switch(t){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(e){this.state.startIndices=e}}]),t}(O),C=r(54),M=r(830),I=r(90);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(){function e(t){var r=t.gl,i=t.attribute,a=t.timeline;Object(n.a)(this,e),this.gl=r,this.type="interpolation",this.transition=new I.a(a),this.attribute=i,this.attributeInTransition=new R(r,i.settings),this.currentStartIndices=i.startIndices,this.currentLength=0,this.transform=function(e,t){var r=Object(T.c)(t.size);return new M.a(e,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}(r,i);var o={byteLength:0,usage:35050};this.buffers=[new d.a(r,o),new d.a(r,o)]}return Object(i.a)(e,[{key:"start",value:function(e,t){if(e.duration<=0)this.transition.cancel();else{var r=this.gl,n=this.buffers,i=this.attribute;Object(T.a)(n);var a={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},o=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;Object(T.f)(F({buffer:f},a))}}catch(h){s=!0,u=h}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}this.currentStartIndices=i.startIndices,this.currentLength=Object(T.b)(i,t),this.attributeInTransition.update({buffer:n[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:n[0],aTo:Object(T.d)(r,i)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var e=this.transition.update();if(e){var t=this.transition,r=t.time,n=t.settings,i=n.duration,a=(0,n.easing)(r/i);this.transform.run({uniforms:{time:a}})}return e}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}();var D=r(249),B=r(137),U=r(89);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={interpolation:N,spring:function(){function e(t){var r=t.gl,i=t.attribute,o=t.timeline;Object(n.a)(this,e),this.gl=r,this.type="spring",this.transition=new I.a(o),this.attribute=i,this.attributeInTransition=new R(r,Object.assign({},i.settings,{normalized:!1})),this.currentStartIndices=i.startIndices,this.currentLength=0,this.texture=function(e){return new B.a(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(r),this.framebuffer=function(e,t){return new U.a(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(a.a)({},36064,t)})}(r,this.texture),this.transform=function(e,t,r){var n=Object(T.c)(t.size);return new M.a(e,{framebuffer:r,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}(r,i,this.framebuffer);var s={byteLength:0,usage:35050};this.buffers=[new d.a(r,s),new d.a(r,s),new d.a(r,s)]}return Object(i.a)(e,[{key:"start",value:function(e,t){var r=this.gl,n=this.buffers,i=this.attribute,a={numInstances:t,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},o=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;Object(T.f)(V({buffer:f},a))}}catch(h){s=!0,u=h}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}this.currentStartIndices=i.startIndices,this.currentLength=Object(T.b)(i,t),this.attributeInTransition.update({buffer:n[1],value:i.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Object(T.d)(r,i)}})}},{key:"update",value:function(){var e=this.buffers,t=this.transform,r=this.framebuffer,n=this.transition;return!!n.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:n.settings.stiffness,damping:n.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Object(T.a)(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),Object(D.c)(r)[0]>0||n.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}()},H=function(){function e(t,r){var i=r.id,a=r.timeline;Object(n.a)(this,e),this.id=i,this.gl=t,this.timeline=a,this.transitions={},this.needsRedraw=!1,this.numInstances=1,M.a.isSupported(t)?this.isSupported=!0:t&&y.a.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(i.a)(e,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var t=e.attributes,r=e.transitions,n=void 0===r?{}:r,i=e.numInstances;if(this.numInstances=i||1,this.isSupported){for(var a in t){var o=t[a],s=o.getTransitionSetting(n);s&&this._updateAttribute(a,o,s)}for(var u in this.transitions){var c=t[u];c&&c.getTransitionSetting(n)||this._removeTransition(u)}}}},{key:"hasAttribute",value:function(e){var t=this.transitions[e];return t&&t.inProgress}},{key:"getAttributes",value:function(){var e={};for(var t in this.transitions){var r=this.transitions[t];r.inProgress&&(e[t]=r.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}var t=this.needsRedraw;return this.needsRedraw=!1,t}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,t,r){var n=this.transitions[e],i=!n||n.type!==r.type;if(i){n&&this._removeTransition(e);var a=G[r.type];a?this.transitions[e]=new a({attribute:t,timeline:this.timeline,gl:this.gl}):(y.a.error("unsupported transition type '".concat(r.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}]),e}();r.d(t,"a",(function(){return W}));var W=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.id,a=void 0===i?"attribute-manager":i,o=r.stats,s=r.timeline;Object(n.a)(this,e),this.id=a,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new H(t,{id:"".concat(a,"-transitions"),timeline:s}),Object.seal(this)}return Object(i.a)(e,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(e,t){this._add(e,t)}},{key:"addInstanced",value:function(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];void 0!==this.attributes[r]&&(this.attributes[r].delete(),delete this.attributes[r])}}},{key:"invalidate",value:function(e,t){var r=this._invalidateTrigger(e,t);Object(C.a)("attributeManager.invalidate",this,e,r)}},{key:"invalidateAll",value:function(e){for(var t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Object(C.a)("attributeManager.invalidate",this,"all")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.numInstances,n=e.startIndices,i=void 0===n?null:n,a=e.transitions,o=e.props,s=void 0===o?{}:o,u=e.buffers,c=void 0===u?{}:u,l=e.context,f=void 0===l?{}:l,h=!1;for(var d in Object(C.a)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var p=this.attributes[d],v=p.settings.accessor;p.startIndices=i,s[d]&&y.a.removed("props.".concat(d),"data.attributes.".concat(d))(),p.setExternalBuffer(c[d])||p.setBinaryValue(c[v],t.startIndices)||!c[v]&&p.setConstantValue(s[v])||p.needsUpdate()&&(h=!0,this._updateAttribute({attribute:p,numInstances:r,data:t,props:s,context:f})),this.needsRedraw|=p.needsRedraw()}h&&Object(C.a)("attributeManager.updateEnd",this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:a})}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},t=this.attributes,r=this.attributeTransitionManager,n=Object.assign({},r.getAttributes());for(var i in t){var a=t[i];a.needsRedraw(e)&&!r.hasAttribute(i)&&(n[i]=a)}return n}},{key:"getShaderAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=this.getAttributes());var r={};for(var n in e)t[n]||Object.assign(r,e[n].getShaderAttributes());return r}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&y.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var n={};for(var i in e){var a=e[i],o=this._createAttribute(i,a,r);n[i]=o}Object.assign(this.attributes,n),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,t,r){var n={id:e,constant:t.constant||!1,isIndexed:t.isIndexed||t.elements,size:t.elements?1:t.size,value:t.value||null,divisor:t.instanced||r.instanced?1:t.divisor};return new R(this.gl,Object.assign({},t,n))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={},r=function(r){e.attributes[r].getUpdateTriggers().forEach((function(e){t[e]||(t[e]=[]),t[e].push(r)}))};for(var n in this.attributes)r(n);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function(e,t){var r=this.attributes,n=this.updateTriggers[e];return n&&n.forEach((function(e){var n=r[e];n&&n.setNeedsUpdate(n.id,t)})),n}},{key:"_updateAttribute",value:function(e){var t=e.attribute,r=e.numInstances;Object(C.a)("attribute.updateStart",t),t.allocate(r)&&Object(C.a)("attribute.allocate",t,r),t.updateBuffer(e)&&(this.needsRedraw=!0,Object(C.a)("attribute.updateEnd",t,r))}}]),e}()},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(19),u=r(7),c=r(273),l=r(302),f=r(145),h=r(201),d=r(94);r.d(t,"a",(function(){return g}));var p=[0,0,0,255],v={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:p},getLineColor:{type:"accessor",value:p},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},g=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(e){return Object(s.a)(Object(o.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[c.a,l.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var r=e.props,n=e.oldProps,i=e.changeFlags;if(Object(s.a)(Object(o.a)(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i}),i.extensionsChanged){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.viewport,n=this.props,i=n.radiusScale,a=n.radiusMinPixels,o=n.radiusMaxPixels,s=n.stroked,u=n.filled,c=n.lineWidthUnits,l=n.lineWidthScale,f=n.lineWidthMinPixels,h=n.lineWidthMaxPixels,d="pixels"===c?r.metersPerPixel:1;this.state.model.setUniforms(t).setUniforms({stroked:s?1:0,filled:u,radiusScale:i,radiusMinPixels:a,radiusMaxPixels:o,lineWidthScale:l*d,lineWidthMinPixels:f,lineWidthMaxPixels:h}).draw()}},{key:"_getModel",value:function(e){return new h.a(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new d.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0}))}}]),t}(f.a);g.layerName="ScatterplotLayer",g.defaultProps=v},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(3),o=r(54),s=r(6),u=r(5),c=r(7),l=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(r(127).a),f=r(207),h=r(89);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}r.d(t,"a",(function(){return p}));var p=function(){function e(t){Object(i.a)(this,e),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new l(t),this.pickLayersPass=new f.a(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Object(a.a)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in e&&(this._onError=e.onError)}},{key:"renderLayers",value:function(e){var t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.onError=this._onError,e.effects=e.effects||[],e.target=e.target||h.a.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);var r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=t.render(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{target:r}));this._postRender(e.effects,e),this.renderCount++,Object(o.a)("deckRenderer.renderLayers",this,i,e)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"finalize",value:function(){var e=this.renderBuffers,t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.delete()}}catch(o){r=!0,n=o}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}e.length=0}},{key:"_preRender",value:function(e,t){var r=null,n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.preRender(this.gl,t),u.postRender&&(r=u)}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;0===e.length&&e.push(new h.a(this.gl),new h.a(this.gl));var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.resize()}}catch(o){r=!0,n=o}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"_postRender",value:function(e,t){var r=this.renderBuffers,n={inputBuffer:r[0],swapBuffer:r[1],target:null},i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.postRender){if(c===this.lastPostProcessEffect){n.target=t.target,c.postRender(this.gl,n);break}var l=c.postRender(this.gl,n);n.inputBuffer=l,n.swapBuffer=l===r[0]?r[1]:r[0]}}}catch(f){a=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}]),e}()},function(e,t,r){"use strict";var n=r(355),i={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},a=r(133);r.d(t,"a",(function(){return u}));var o=[i,a.a],s=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function u(e){var t=n.a.getDefaultProgramManager(e),r=!0,i=!1,a=void 0;try{for(var u,c=o[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var l=u.value;t.addDefaultModule(l)}}catch(m){i=!0,a=m}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}var f=!0,h=!1,d=void 0;try{for(var p,v=s[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;t.addShaderHook(g)}}catch(m){h=!0,d=m}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}return t}},function(e,t,r){"use strict";function n(e){for(var t=e.data,r=e.getIndex,n=e.dataRange,i=e.replace,a=n.startRow,o=void 0===a?0:a,s=n.endRow,u=void 0===s?1/0:s,c=t.length,l=c,f=c,h=0;h<c;h++){var d=r(t[h]);if(l>h&&d>=o&&(l=h),d>=u){f=h;break}}for(var p=l,v=f-l!==i.length,g=v&&t.slice(f),m=0;m<i.length;m++)t[p++]=i[m];if(v){for(var y=0;y<g.length;y++)t[p++]=g[y];t.length=p}return{startRow:l,endRow:l+i.length}}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(2),i=r(3),a=r(14),o=r(31),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var r=t,i=r.compare,a=r.extract,o=r.required;this._propsToCompare=i,this._propsToExtract=a,this._requiredProps=o}return Object(i.a)(e,[{key:"arePropsEqual",value:function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,s=(this._propsToCompare||Object.keys(t))[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(!(u in e)||!(u in t)||!Object(a.equals)(e[u],t[u]))return!1}}catch(c){n=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return!0}},{key:"initializeProps",value:function(e,t){var r;if(this._propsToExtract){var n={},i={},a=!0,o=!1,s=void 0;try{for(var u,c=this._propsToExtract[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;n[l]=e[l],i[l]=t[l]}}catch(f){o=!0,s=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r={start:n,end:i}}else r={start:e,end:t};return this._checkRequiredProps(r.start),this._checkRequiredProps(r.end),r}},{key:"interpolateProps",value:function(e,t,r){return t}},{key:"getDuration",value:function(e,t){return t.transitionDuration}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach((function(t){var r=e[t];Object(o.a)(Number.isFinite(r)||Array.isArray(r),"".concat(t," is required for transition"))}))}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(2),i=r(3),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e);var i=r.id,a=void 0===i?"pass":i;this.id=a,this.gl=t,this.props={},Object.assign(this.props,r)}return Object(i.a)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),e}()},,,,,function(e,t,r){"use strict";(function(e){var n=r(169);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){if("undefined"!==typeof window&&"object"===(0,i.default)(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!==typeof e&&"object"===(0,i.default)(e.versions)&&Boolean(e.versions.electron))return!0;var r="object"===("undefined"===typeof navigator?"undefined":(0,i.default)(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||r;if(n&&n.indexOf("Electron")>=0)return!0;return!1};var i=n(r(204))}).call(this,r(68))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n,i=r(0),a=r(89),o=r(137),s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};t.b=(n={},Object(i.a)(n,s.WEBGL2,[!1,!0]),Object(i.a)(n,s.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(i.a)(n,s.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(i.a)(n,s.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(i.a)(n,s.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(i.a)(n,s.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(i.a)(n,s.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(i.a)(n,s.FLOAT_BLEND,["EXT_float_blend"]),Object(i.a)(n,s.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(i.a)(n,s.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(i.a)(n,s.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(i.a)(n,s.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(i.a)(n,s.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(i.a)(n,s.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(i.a)(n,s.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(i.a)(n,s.COLOR_ATTACHMENT_RGBA32F,[function(e){var t=new o.a(e,{format:6408,type:5126,dataFormat:6408}),r=new a.a(e,{id:"test-framebuffer",check:!1,attachments:Object(i.a)({},36064,t)}),n=r.getStatus();return t.delete(),r.delete(),36053===n},"EXT_color_buffer_float"]),Object(i.a)(n,s.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(i.a)(n,s.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(i.a)(n,s.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(i.a)(n,s.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(i.a)(n,s.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(i.a)(n,s.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),n)},function(e,t){},,function(e,t,r){"use strict";var n=r(57),i=r(89),a=r(75),o=r(9),s=r(83),u=r(108),c=r(28);function l(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(c.a)(!1),0}}var f=r(349);function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sourceX,n=void 0===r?0:r,i=t.sourceY,a=void 0===i?0:i,o=t.sourceFormat,s=void 0===o?6408:o,l=t.sourceAttachment,f=void 0===l?36064:l,h=t.target,d=void 0===h?null:h,p=t.sourceWidth,v=t.sourceHeight,y=t.sourceType,b=g(e),_=b.framebuffer,w=b.deleteFramebuffer;Object(c.a)(_);var x=_.gl,O=_.handle,E=_.attachments;p=p||_.width,v=v||_.height,36064===f&&null===O&&(f=1028),Object(c.a)(E[f]),d=m(d,y=y||E[f].type,s,p,v),y=y||Object(u.b)(d);var k=x.bindFramebuffer(36160,O);return x.readPixels(n,a,p,v,s,y,d),x.bindFramebuffer(36160,k||null),w&&_.delete(),d}function d(e,t){var r=t.sourceX,i=void 0===r?0:r,a=t.sourceY,u=void 0===a?0:a,f=t.sourceFormat,h=void 0===f?6408:f,d=t.target,p=void 0===d?null:d,v=t.targetByteOffset,m=void 0===v?0:v,y=t.sourceWidth,b=t.sourceHeight,_=t.sourceType,w=g(e),x=w.framebuffer,O=w.deleteFramebuffer;Object(c.a)(x);var E=x.gl;if(y=y||x.width,b=b||x.height,Object(s.a)(E),_=_||(p?p.type:5121),!p){var k=l(h),j=function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(c.a)(!1),0}}(_),S=m+y*b*k*j;p=new n.a(E,{byteLength:S,accessor:{type:_,size:k}})}return p.bind({target:35051}),Object(o.l)(E,{framebuffer:x},(function(){E.readPixels(i,u,y,b,h,_,m)})),p.unbind({target:35051}),O&&x.delete(),p}function p(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sourceAttachment,n=void 0===r?36064:r,i=t.targetMaxHeight,a=void 0===i?Number.MAX_SAFE_INTEGER:i,o=h(e,{sourceAttachment:n}),s=e.width,c=e.height;c>a;){var l=Object(u.d)({data:o,width:s,height:c});o=l.data,s=l.width,c=l.height}Object(u.a)({data:o,width:s,height:c});var f=document.createElement("canvas");f.width=s,f.height=c;var d=f.getContext("2d"),p=d.createImageData(s,c);return p.data.set(o),d.putImageData(p,0,0),f.toDataURL()}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.sourceX,i=void 0===n?0:n,o=r.sourceY,s=void 0===o?0:o,u=r.targetX,l=r.targetY,f=r.targetZ,h=r.targetMipmaplevel,d=void 0===h?0:h,p=r.targetInternalFormat,v=void 0===p?6408:p,m=r.width,y=r.height,b=g(e),_=b.framebuffer,w=b.deleteFramebuffer;Object(c.a)(_);var x=_.gl,O=_.handle,E="undefined"!==typeof u||"undefined"!==typeof l||"undefined"!==typeof f;u=u||0,l=l||0,f=f||0;var k=x.bindFramebuffer(36160,O);Object(c.a)(t);var j=null;if(t instanceof a.a&&(j=t,m=Number.isFinite(m)?m:j.width,y=Number.isFinite(y)?y:j.height,j.bind(0),t=j.target),E)switch(t){case 3553:case 34067:x.copyTexSubImage2D(t,d,u,l,i,s,m,y);break;case 35866:case 32879:x.copyTexSubImage3D(t,d,u,l,f,i,s,m,y)}else x.copyTexImage2D(t,d,v,i,s,m,y,0);return j&&j.unbind(),x.bindFramebuffer(36160,k||null),w&&_.delete(),j}function g(e){return e instanceof i.a?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Object(f.b)(e),deleteFramebuffer:!0}}function m(e,t,r,n,i){return e||(t=t||5121,new(Object(u.c)(t,{clamped:!1}))(n*i*l(r)))}r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return v}))},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(209),o=r(11),s={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function u(e){var t=c(e);return"object"===t?e?"type"in e?Object.assign({},e,s[e.type]):"value"in e?(t=c(e.value),Object.assign({type:t},e,s[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},s[t])}function c(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":Object(o.a)(e)}r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return f}));var l=function(){function e(t){var r=t.name,i=t.vs,o=t.fs,s=t.dependencies,c=void 0===s?[]:s,l=t.uniforms,f=t.getUniforms,h=t.deprecations,d=void 0===h?[]:h,p=t.defines,v=void 0===p?{}:p,g=t.inject,m=void 0===g?{}:g,y=t.vertexShader,b=t.fragmentShader;Object(n.a)(this,e),Object(a.a)("string"===typeof r),this.name=r,this.vs=i||y,this.fs=o||b,this.getModuleUniforms=f,this.dependencies=c,this.deprecations=this._parseDeprecationDefinitions(d),this.defines=v,this.injections=function(e){var t={vs:{},fs:{}};for(var r in e){var n=e[r],i=r.slice(0,2);"string"===typeof n&&(n={injection:n}),t[i][r]=n}return t}(m),l&&(this.uniforms=function(e){var t={};for(var r in e){var n=u(e[r]);t[r]=n}return t}(l))}return Object(i.a)(e,[{key:"getModuleSource",value:function(e){var t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Object(a.a)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(r){r.regex.test(e)&&(r.deprecated?t.deprecated(r.old,r.new)():t.removed(r.old,r.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=this.uniforms;for(var n in r){var i=r[n];n in e&&!i.private?(i.validate&&Object(a.a)(i.validate(e[n],i),"".concat(this.name,": invalid ").concat(n)),t[n]=e[n]):t[n]=i.value}return t}}]),e}();function f(e){if(!e.normalized&&(e.normalized=!0,e.uniforms&&!e.getUniforms)){var t=new l(e);e.getUniforms=t.getUniforms.bind(t)}return e}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(9);function i(e,t,r){var i=r.removedProps,a=void 0===i?{}:i,o=r.deprecatedProps,s=void 0===o?{}:o,u=r.replacedProps,c=void 0===u?{}:u;for(var l in a)if(l in t){var f=a[l]?"".concat(e,".").concat(a[l]):"N/A";n.h.removed("".concat(e,".").concat(l),f)()}for(var h in s)if(h in t){var d=s[h];n.h.deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(d))()}var p=null;for(var v in c)if(v in t){var g=c[v];n.h.deprecated("".concat(e,".").concat(v),"".concat(e,".").concat(g))(),(p=p||Object.assign({},t))[g]=t[v],delete p[v]}return p||t}},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(133);t.a={name:"project32",dependencies:[n.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},,function(e,t,r){"use strict";var n=r(352),i=r(829),a=r(40),o=r(22),s=r(54);var u={name:"JSON",extensions:["json","geojson"],testText:function(e){var t=e[0],r=e[e.length-1];return"{"===t&&"}"===r||"["===t&&"]"===r},parseTextSync:JSON.parse},c=a.global.deck&&a.global.deck.VERSION;if(c&&"8.1.0"!==c)throw new Error("deck.gl - multiple versions detected: ".concat(c," vs ").concat("8.1.0"));c||(a.global.deck=Object.assign(a.global.deck||{},{VERSION:"8.1.0",version:"8.1.0",log:o.a,_registerLoggers:s.b}),Object(n.b)([u,i.a]));t.a=a.global.deck},function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n=r(546),i=r(312),a=r(550),o=r(395),s=r(396),u=r(551),c=r(552),l=r(573),f=r(194);e.exports=m,m.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);!0!==r.$async&&(this.errors=r.errors);return i},m.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},m.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var a=0;a<e.length;a++)this.addSchema(e[a],void 0,r,n);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return O(this,t=i.normalizeId(t||o)),this._schemas[t]=this._addSchema(e,r,n,!0),this},m.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},m.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},m.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var a=r.schema,s=r.root,u=r.baseId,c=n.call(e,a,s,void 0,u);return e._fragments[t]=new o({ref:t,fragment:!0,schema:a,root:s,baseId:u,validate:c}),c}}(this,e)}},m.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var a=this._getId(e);a&&(a=i.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},m.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},m.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",a=0;a<e.length;a++){var o=e[a];o&&(i+=n+o.dataPath+" "+o.message+r)}return i.slice(0,-r.length)},m.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var a=this._opts.serialize,s=a?a(e):e,u=this._cache.get(s);if(u)return u;n=n||!1!==this._opts.addUsedSchema;var c=i.normalizeId(this._getId(e));c&&n&&O(this,c);var l,f=!1!==this._opts.validateSchema&&!t;f&&!(l=c&&c==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=i.ids.call(this,e),d=new o({id:c,schema:e,localRefs:h,cacheKey:s,meta:r});"#"!=c[0]&&n&&(this._refs[c]=d);this._cache.put(s,d),f&&l&&this.validateSchema(e,!0);return d},m.prototype._compile=function(e,t){if(e.compiling)return e.validate=a,a.schema=e.schema,a.errors=null,a.root=t||a,!0===e.schema.$async&&(a.$async=!0),a;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=n.call(this,e.schema,t,e.localRefs)}catch(o){throw delete e.validate,o}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function a(){var t=e.validate,r=t.apply(this,arguments);return a.errors=t.errors,r}},m.prototype.compileAsync=r(574);var h=r(575);m.prototype.addKeyword=h.add,m.prototype.getKeyword=h.get,m.prototype.removeKeyword=h.remove,m.prototype.validateKeyword=h.validate;var d=r(314);m.ValidationError=d.Validation,m.MissingRefError=d.MissingRef,m.$dataMetaSchema=l;var p="http://json-schema.org/draft-07/schema",v=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function m(e){if(!(this instanceof m))return new m(e);e=this._opts=f.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:E,warn:E,error:E};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(e.format),this._cache=e.cache||new a,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return x;case"id":return _;default:return w}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=f.copy(e._opts),r=0;r<v.length;r++)delete t[v[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(578),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(402);e._opts.$data&&(n=l(n,g));e.addMetaSchema(n,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function _(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function w(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function x(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function O(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function E(){}},,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(3),i=r(5),a=r(2),o=r(6),s=r(7),u=r(114),c=r(71),l=r(14),f=r(227),h=(new l.Matrix4).lookAt({eye:[0,0,1]});function d(e){var t=e.width,r=e.height,n=e.near,i=e.far;return t=t||1,r=r||1,(new l.Matrix4).ortho({left:-t/2,right:t/2,bottom:r/2,top:-r/2,near:n,far:i})}var p=function(e){function t(e){var r=e.id,n=e.x,i=e.y,s=e.width,u=e.height,l=e.near,f=void 0===l?.1:l,p=e.far,v=void 0===p?1e3:p,g=e.zoom,m=void 0===g?0:g,y=e.target,b=void 0===y?[0,0,0]:y;Object(a.a)(this,t);var _=Math.pow(2,m);return Object(o.a)(void 0,new c.a({id:r,x:n,y:i,width:s,height:u,position:b,viewMatrix:h.clone().scale(_),projectionMatrix:d({width:s,height:u,near:f,far:v}),zoom:m}))}return Object(s.a)(t,e),t}(c.a),v=function(e){function t(e){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).call(this,Object.assign({},e,{type:p})))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:f.a,ViewportType:p})}}]),t}(u.a);v.displayName="OrthographicView"},,,,function(e,t,r){"use strict";(function(e,n,i){r.d(t,"a",(function(){return ie})),r.d(t,"b",(function(){return Hn})),r.d(t,"c",(function(){return Vn}));var a=r(155),o=r(129),s=r(26),u=r(50),c=r(30),l=r(12),f=r.n(l),h=r(24),d=r(33),p=r(29),v=r(34),g=r(32),m=r(102),y=r(21),b=r(273),_=r(145),w=r(213),x=r(286),O=r(459),E=r(64),k=r.n(E),j=r(201),S=r(94),P=r(137),A=r(1),T=r.n(A),R=r(482),C=f.a.mark(He);function M(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){M(a,n,i,o,s,"next",e)}function s(e){M(a,n,i,o,s,"throw",e)}o(void 0)}))}}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e,t,r){return(W="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(dr){i=!0,a=dr}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Z(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Y=[0,0,0],q={"<u1":{format:k.a.R8UI,dataFormat:k.a.RED_INTEGER,type:k.a.UNSIGNED_BYTE,max:Math.pow(2,8)-1},"<u2":{format:k.a.R16UI,dataFormat:k.a.RED_INTEGER,type:k.a.UNSIGNED_SHORT,max:Math.pow(2,16)-1},"<u4":{format:k.a.R32UI,dataFormat:k.a.RED_INTEGER,type:k.a.UNSIGNED_INT,max:Math.pow(2,32)-1},"<f4":{format:k.a.R32F,dataFormat:k.a.RED,type:k.a.FLOAT,max:Math.pow(2,31)-1}},K={pickable:!1,coordinateSystem:y.a.CARTESIAN,channelData:{type:"array",value:[],async:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},colorValues:{type:"array",value:[],compare:!0},sliderValues:{type:"array",value:[],compare:!0},tileSize:{type:"number",value:0,compare:!0},opacity:{type:"number",value:1,compare:!0},dtype:{type:"string",value:"<u2",compare:!0},colormap:{type:"string",value:"",compare:!0}},$=function(e){function t(){return L(this,t),H(this,V(t).apply(this,arguments))}return z(t,e),N(t,[{key:"getShaders",value:function(){var e=this.props,r=e.colormap,n=e.dtype,i=r?"#version 300 es\n#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;precision highp int;precision highp usampler2D;\n#define GLSLIFY 1\nvec4 jet(float x_17){const float e0=0.0;const vec4 v0=vec4(0,0,0.5137254901960784,1);const float e1=0.125;const vec4 v1=vec4(0,0.23529411764705882,0.6666666666666666,1);const float e2=0.375;const vec4 v2=vec4(0.0196078431372549,1,1,1);const float e3=0.625;const vec4 v3=vec4(1,1,0,1);const float e4=0.875;const vec4 v4=vec4(0.9803921568627451,0,0,1);const float e5=1.0;const vec4 v5=vec4(0.5019607843137255,0,0,1);float a0=smoothstep(e0,e1,x_17);float a1=smoothstep(e1,e2,x_17);float a2=smoothstep(e2,e3,x_17);float a3=smoothstep(e3,e4,x_17);float a4=smoothstep(e4,e5,x_17);return max(mix(v0,v1,a0)*step(e0,x_17)*step(x_17,e1),max(mix(v1,v2,a1)*step(e1,x_17)*step(x_17,e2),max(mix(v2,v3,a2)*step(e2,x_17)*step(x_17,e3),max(mix(v3,v4,a3)*step(e3,x_17)*step(x_17,e4),mix(v4,v5,a4)*step(e4,x_17)*step(x_17,e5)))));}vec4 hsv(float x_18){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=0.169;const vec4 v1=vec4(0.9921568627450981,1,0.00784313725490196,1);const float e2=0.173;const vec4 v2=vec4(0.9686274509803922,1,0.00784313725490196,1);const float e3=0.337;const vec4 v3=vec4(0,0.9882352941176471,0.01568627450980392,1);const float e4=0.341;const vec4 v4=vec4(0,0.9882352941176471,0.0392156862745098,1);const float e5=0.506;const vec4 v5=vec4(0.00392156862745098,0.9764705882352941,1,1);const float e6=0.671;const vec4 v6=vec4(0.00784313725490196,0,0.9921568627450981,1);const float e7=0.675;const vec4 v7=vec4(0.03137254901960784,0,0.9921568627450981,1);const float e8=0.839;const vec4 v8=vec4(1,0,0.984313725490196,1);const float e9=0.843;const vec4 v9=vec4(1,0,0.9607843137254902,1);const float e10=1.0;const vec4 v10=vec4(1,0,0.023529411764705882,1);float a0=smoothstep(e0,e1,x_18);float a1=smoothstep(e1,e2,x_18);float a2=smoothstep(e2,e3,x_18);float a3=smoothstep(e3,e4,x_18);float a4=smoothstep(e4,e5,x_18);float a5=smoothstep(e5,e6,x_18);float a6=smoothstep(e6,e7,x_18);float a7=smoothstep(e7,e8,x_18);float a8=smoothstep(e8,e9,x_18);float a9=smoothstep(e9,e10,x_18);return max(mix(v0,v1,a0)*step(e0,x_18)*step(x_18,e1),max(mix(v1,v2,a1)*step(e1,x_18)*step(x_18,e2),max(mix(v2,v3,a2)*step(e2,x_18)*step(x_18,e3),max(mix(v3,v4,a3)*step(e3,x_18)*step(x_18,e4),max(mix(v4,v5,a4)*step(e4,x_18)*step(x_18,e5),max(mix(v5,v6,a5)*step(e5,x_18)*step(x_18,e6),max(mix(v6,v7,a6)*step(e6,x_18)*step(x_18,e7),max(mix(v7,v8,a7)*step(e7,x_18)*step(x_18,e8),max(mix(v8,v9,a8)*step(e8,x_18)*step(x_18,e9),mix(v9,v10,a9)*step(e9,x_18)*step(x_18,e10))))))))));}vec4 hot(float x_13){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.3;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.6;const vec4 v2=vec4(1,0.8235294117647058,0,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_13);float a1=smoothstep(e1,e2,x_13);float a2=smoothstep(e2,e3,x_13);return max(mix(v0,v1,a0)*step(e0,x_13)*step(x_13,e1),max(mix(v1,v2,a1)*step(e1,x_13)*step(x_13,e2),mix(v2,v3,a2)*step(e2,x_13)*step(x_13,e3)));}vec4 cool(float x_24){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.4549019607843137,0,0.8549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);const float e3=0.38;const vec4 v3=vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);const float e4=0.5;const vec4 v4=vec4(0,0.8,0.7725490196078432,1);const float e5=0.63;const vec4 v5=vec4(0,0.9686274509803922,0.5725490196078431,1);const float e6=0.75;const vec4 v6=vec4(0,1,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.1568627450980392,1,0.03137254901960784,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_24);float a1=smoothstep(e1,e2,x_24);float a2=smoothstep(e2,e3,x_24);float a3=smoothstep(e3,e4,x_24);float a4=smoothstep(e4,e5,x_24);float a5=smoothstep(e5,e6,x_24);float a6=smoothstep(e6,e7,x_24);float a7=smoothstep(e7,e8,x_24);return max(mix(v0,v1,a0)*step(e0,x_24)*step(x_24,e1),max(mix(v1,v2,a1)*step(e1,x_24)*step(x_24,e2),max(mix(v2,v3,a2)*step(e2,x_24)*step(x_24,e3),max(mix(v3,v4,a3)*step(e3,x_24)*step(x_24,e4),max(mix(v4,v5,a4)*step(e4,x_24)*step(x_24,e5),max(mix(v5,v6,a5)*step(e5,x_24)*step(x_24,e6),max(mix(v6,v7,a6)*step(e6,x_24)*step(x_24,e7),mix(v7,v8,a7)*step(e7,x_24)*step(x_24,e8))))))));}vec4 spring(float x_5){const float e0=0.0;const vec4 v0=vec4(1,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_5);return mix(v0,v1,a0)*step(e0,x_5)*step(x_5,e1);}vec4 summer(float x_12){const float e0=0.0;const vec4 v0=vec4(0,0.5019607843137255,0.4,1);const float e1=1.0;const vec4 v1=vec4(1,1,0.4,1);float a0=smoothstep(e0,e1,x_12);return mix(v0,v1,a0)*step(e0,x_12)*step(x_12,e1);}vec4 autumn(float x_25){const float e0=0.0;const vec4 v0=vec4(1,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,0,1);float a0=smoothstep(e0,e1,x_25);return mix(v0,v1,a0)*step(e0,x_25)*step(x_25,e1);}vec4 winter(float x_16){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(0,1,0.5019607843137255,1);float a0=smoothstep(e0,e1,x_16);return mix(v0,v1,a0)*step(e0,x_16)*step(x_16,e1);}vec4 bone(float x_15){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.376;const vec4 v1=vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);const float e2=0.753;const vec4 v2=vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);const float e3=1.0;const vec4 v3=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_15);float a1=smoothstep(e1,e2,x_15);float a2=smoothstep(e2,e3,x_15);return max(mix(v0,v1,a0)*step(e0,x_15)*step(x_15,e1),max(mix(v1,v2,a1)*step(e1,x_15)*step(x_15,e2),mix(v2,v3,a2)*step(e2,x_15)*step(x_15,e3)));}vec4 copper(float x_10){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.804;const vec4 v1=vec4(1,0.6274509803921569,0.4,1);const float e2=1.0;const vec4 v2=vec4(1,0.7803921568627451,0.4980392156862745,1);float a0=smoothstep(e0,e1,x_10);float a1=smoothstep(e1,e2,x_10);return max(mix(v0,v1,a0)*step(e0,x_10)*step(x_10,e1),mix(v1,v2,a1)*step(e1,x_10)*step(x_10,e2));}vec4 greys(float x_4){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_4);return mix(v0,v1,a0)*step(e0,x_4)*step(x_4,e1);}vec4 yignbu(float x_32){const float e0=0.0;const vec4 v0=vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);const float e1=0.125;const vec4 v1=vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);const float e2=0.25;const vec4 v2=vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);const float e3=0.375;const vec4 v3=vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);const float e4=0.5;const vec4 v4=vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);const float e5=0.625;const vec4 v5=vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);const float e7=0.875;const vec4 v7=vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8509803921568627,1);float a0=smoothstep(e0,e1,x_32);float a1=smoothstep(e1,e2,x_32);float a2=smoothstep(e2,e3,x_32);float a3=smoothstep(e3,e4,x_32);float a4=smoothstep(e4,e5,x_32);float a5=smoothstep(e5,e6,x_32);float a6=smoothstep(e6,e7,x_32);float a7=smoothstep(e7,e8,x_32);return max(mix(v0,v1,a0)*step(e0,x_32)*step(x_32,e1),max(mix(v1,v2,a1)*step(e1,x_32)*step(x_32,e2),max(mix(v2,v3,a2)*step(e2,x_32)*step(x_32,e3),max(mix(v3,v4,a3)*step(e3,x_32)*step(x_32,e4),max(mix(v4,v5,a4)*step(e4,x_32)*step(x_32,e5),max(mix(v5,v6,a5)*step(e5,x_32)*step(x_32,e6),max(mix(v6,v7,a6)*step(e6,x_32)*step(x_32,e7),mix(v7,v8,a7)*step(e7,x_32)*step(x_32,e8))))))));}vec4 greens(float x_34){const float e0=0.0;const vec4 v0=vec4(0,0.26666666666666666,0.10588235294117647,1);const float e1=0.125;const vec4 v1=vec4(0,0.42745098039215684,0.17254901960784313,1);const float e2=0.25;const vec4 v2=vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);const float e3=0.375;const vec4 v3=vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);const float e4=0.5;const vec4 v4=vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);const float e5=0.625;const vec4 v5=vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);const float e6=0.75;const vec4 v6=vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);const float e7=0.875;const vec4 v7=vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);const float e8=1.0;const vec4 v8=vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);float a0=smoothstep(e0,e1,x_34);float a1=smoothstep(e1,e2,x_34);float a2=smoothstep(e2,e3,x_34);float a3=smoothstep(e3,e4,x_34);float a4=smoothstep(e4,e5,x_34);float a5=smoothstep(e5,e6,x_34);float a6=smoothstep(e6,e7,x_34);float a7=smoothstep(e7,e8,x_34);return max(mix(v0,v1,a0)*step(e0,x_34)*step(x_34,e1),max(mix(v1,v2,a1)*step(e1,x_34)*step(x_34,e2),max(mix(v2,v3,a2)*step(e2,x_34)*step(x_34,e3),max(mix(v3,v4,a3)*step(e3,x_34)*step(x_34,e4),max(mix(v4,v5,a4)*step(e4,x_34)*step(x_34,e5),max(mix(v5,v6,a5)*step(e5,x_34)*step(x_34,e6),max(mix(v6,v7,a6)*step(e6,x_34)*step(x_34,e7),mix(v7,v8,a7)*step(e7,x_34)*step(x_34,e8))))))));}vec4 yiorrd(float x_41){const float e0=0.0;const vec4 v0=vec4(0.5019607843137255,0,0.14901960784313725,1);const float e1=0.125;const vec4 v1=vec4(0.7411764705882353,0,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);const float e3=0.375;const vec4 v3=vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);const float e4=0.5;const vec4 v4=vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);const float e5=0.625;const vec4 v5=vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);const float e6=0.75;const vec4 v6=vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);const float e7=0.875;const vec4 v7=vec4(1,0.9294117647058824,0.6274509803921569,1);const float e8=1.0;const vec4 v8=vec4(1,1,0.8,1);float a0=smoothstep(e0,e1,x_41);float a1=smoothstep(e1,e2,x_41);float a2=smoothstep(e2,e3,x_41);float a3=smoothstep(e3,e4,x_41);float a4=smoothstep(e4,e5,x_41);float a5=smoothstep(e5,e6,x_41);float a6=smoothstep(e6,e7,x_41);float a7=smoothstep(e7,e8,x_41);return max(mix(v0,v1,a0)*step(e0,x_41)*step(x_41,e1),max(mix(v1,v2,a1)*step(e1,x_41)*step(x_41,e2),max(mix(v2,v3,a2)*step(e2,x_41)*step(x_41,e3),max(mix(v3,v4,a3)*step(e3,x_41)*step(x_41,e4),max(mix(v4,v5,a4)*step(e4,x_41)*step(x_41,e5),max(mix(v5,v6,a5)*step(e5,x_41)*step(x_41,e6),max(mix(v6,v7,a6)*step(e6,x_41)*step(x_41,e7),mix(v7,v8,a7)*step(e7,x_41)*step(x_41,e8))))))));}vec4 bluered(float x_23){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=1.0;const vec4 v1=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_23);return mix(v0,v1,a0)*step(e0,x_23)*step(x_23,e1);}vec4 rdbu(float x_1){const float e0=0.0;const vec4 v0=vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);const float e1=0.35;const vec4 v1=vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);const float e2=0.5;const vec4 v2=vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);const float e3=0.6;const vec4 v3=vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);const float e4=0.7;const vec4 v4=vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);const float e5=1.0;const vec4 v5=vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);float a0=smoothstep(e0,e1,x_1);float a1=smoothstep(e1,e2,x_1);float a2=smoothstep(e2,e3,x_1);float a3=smoothstep(e3,e4,x_1);float a4=smoothstep(e4,e5,x_1);return max(mix(v0,v1,a0)*step(e0,x_1)*step(x_1,e1),max(mix(v1,v2,a1)*step(e1,x_1)*step(x_1,e2),max(mix(v2,v3,a2)*step(e2,x_1)*step(x_1,e3),max(mix(v3,v4,a3)*step(e3,x_1)*step(x_1,e4),mix(v4,v5,a4)*step(e4,x_1)*step(x_1,e5)))));}vec4 picnic(float x_42){const float e0=0.0;const vec4 v0=vec4(0,0,1,1);const float e1=0.1;const vec4 v1=vec4(0.2,0.6,1,1);const float e2=0.2;const vec4 v2=vec4(0.4,0.8,1,1);const float e3=0.3;const vec4 v3=vec4(0.6,0.8,1,1);const float e4=0.4;const vec4 v4=vec4(0.8,0.8,1,1);const float e5=0.5;const vec4 v5=vec4(1,1,1,1);const float e6=0.6;const vec4 v6=vec4(1,0.8,1,1);const float e7=0.7;const vec4 v7=vec4(1,0.6,1,1);const float e8=0.8;const vec4 v8=vec4(1,0.4,0.8,1);const float e9=0.9;const vec4 v9=vec4(1,0.4,0.4,1);const float e10=1.0;const vec4 v10=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_42);float a1=smoothstep(e1,e2,x_42);float a2=smoothstep(e2,e3,x_42);float a3=smoothstep(e3,e4,x_42);float a4=smoothstep(e4,e5,x_42);float a5=smoothstep(e5,e6,x_42);float a6=smoothstep(e6,e7,x_42);float a7=smoothstep(e7,e8,x_42);float a8=smoothstep(e8,e9,x_42);float a9=smoothstep(e9,e10,x_42);return max(mix(v0,v1,a0)*step(e0,x_42)*step(x_42,e1),max(mix(v1,v2,a1)*step(e1,x_42)*step(x_42,e2),max(mix(v2,v3,a2)*step(e2,x_42)*step(x_42,e3),max(mix(v3,v4,a3)*step(e3,x_42)*step(x_42,e4),max(mix(v4,v5,a4)*step(e4,x_42)*step(x_42,e5),max(mix(v5,v6,a5)*step(e5,x_42)*step(x_42,e6),max(mix(v6,v7,a6)*step(e6,x_42)*step(x_42,e7),max(mix(v7,v8,a7)*step(e7,x_42)*step(x_42,e8),max(mix(v8,v9,a8)*step(e8,x_42)*step(x_42,e9),mix(v9,v10,a9)*step(e9,x_42)*step(x_42,e10))))))))));}vec4 rainbow(float x_31){const float e0=0.0;const vec4 v0=vec4(0.5882352941176471,0,0.35294117647058826,1);const float e1=0.125;const vec4 v1=vec4(0,0,0.7843137254901961,1);const float e2=0.25;const vec4 v2=vec4(0,0.09803921568627451,1,1);const float e3=0.375;const vec4 v3=vec4(0,0.596078431372549,1,1);const float e4=0.5;const vec4 v4=vec4(0.17254901960784313,1,0.5882352941176471,1);const float e5=0.625;const vec4 v5=vec4(0.592156862745098,1,0,1);const float e6=0.75;const vec4 v6=vec4(1,0.9176470588235294,0,1);const float e7=0.875;const vec4 v7=vec4(1,0.43529411764705883,0,1);const float e8=1.0;const vec4 v8=vec4(1,0,0,1);float a0=smoothstep(e0,e1,x_31);float a1=smoothstep(e1,e2,x_31);float a2=smoothstep(e2,e3,x_31);float a3=smoothstep(e3,e4,x_31);float a4=smoothstep(e4,e5,x_31);float a5=smoothstep(e5,e6,x_31);float a6=smoothstep(e6,e7,x_31);float a7=smoothstep(e7,e8,x_31);return max(mix(v0,v1,a0)*step(e0,x_31)*step(x_31,e1),max(mix(v1,v2,a1)*step(e1,x_31)*step(x_31,e2),max(mix(v2,v3,a2)*step(e2,x_31)*step(x_31,e3),max(mix(v3,v4,a3)*step(e3,x_31)*step(x_31,e4),max(mix(v4,v5,a4)*step(e4,x_31)*step(x_31,e5),max(mix(v5,v6,a5)*step(e5,x_31)*step(x_31,e6),max(mix(v6,v7,a6)*step(e6,x_31)*step(x_31,e7),mix(v7,v8,a7)*step(e7,x_31)*step(x_31,e8))))))));}vec4 portland(float x_21){const float e0=0.0;const vec4 v0=vec4(0.047058823529411764,0.2,0.5137254901960784,1);const float e1=0.25;const vec4 v1=vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);const float e2=0.5;const vec4 v2=vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);const float e3=0.75;const vec4 v3=vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);const float e4=1.0;const vec4 v4=vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);float a0=smoothstep(e0,e1,x_21);float a1=smoothstep(e1,e2,x_21);float a2=smoothstep(e2,e3,x_21);float a3=smoothstep(e3,e4,x_21);return max(mix(v0,v1,a0)*step(e0,x_21)*step(x_21,e1),max(mix(v1,v2,a1)*step(e1,x_21)*step(x_21,e2),max(mix(v2,v3,a2)*step(e2,x_21)*step(x_21,e3),mix(v3,v4,a3)*step(e3,x_21)*step(x_21,e4))));}vec4 blackbody(float x_38){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.2;const vec4 v1=vec4(0.9019607843137255,0,0,1);const float e2=0.4;const vec4 v2=vec4(0.9019607843137255,0.8235294117647058,0,1);const float e3=0.7;const vec4 v3=vec4(1,1,1,1);const float e4=1.0;const vec4 v4=vec4(0.6274509803921569,0.7843137254901961,1,1);float a0=smoothstep(e0,e1,x_38);float a1=smoothstep(e1,e2,x_38);float a2=smoothstep(e2,e3,x_38);float a3=smoothstep(e3,e4,x_38);return max(mix(v0,v1,a0)*step(e0,x_38)*step(x_38,e1),max(mix(v1,v2,a1)*step(e1,x_38)*step(x_38,e2),max(mix(v2,v3,a2)*step(e2,x_38)*step(x_38,e3),mix(v3,v4,a3)*step(e3,x_38)*step(x_38,e4))));}vec4 earth(float x_29){const float e0=0.0;const vec4 v0=vec4(0,0,0.5098039215686274,1);const float e1=0.1;const vec4 v1=vec4(0,0.7058823529411765,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);const float e3=0.4;const vec4 v3=vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);const float e4=0.6;const vec4 v4=vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);const float e5=1.0;const vec4 v5=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_29);float a1=smoothstep(e1,e2,x_29);float a2=smoothstep(e2,e3,x_29);float a3=smoothstep(e3,e4,x_29);float a4=smoothstep(e4,e5,x_29);return max(mix(v0,v1,a0)*step(e0,x_29)*step(x_29,e1),max(mix(v1,v2,a1)*step(e1,x_29)*step(x_29,e2),max(mix(v2,v3,a2)*step(e2,x_29)*step(x_29,e3),max(mix(v3,v4,a3)*step(e3,x_29)*step(x_29,e4),mix(v4,v5,a4)*step(e4,x_29)*step(x_29,e5)))));}vec4 electric(float x_9){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.15;const vec4 v1=vec4(0.11764705882352941,0,0.39215686274509803,1);const float e2=0.4;const vec4 v2=vec4(0.47058823529411764,0,0.39215686274509803,1);const float e3=0.6;const vec4 v3=vec4(0.6274509803921569,0.35294117647058826,0,1);const float e4=0.8;const vec4 v4=vec4(0.9019607843137255,0.7843137254901961,0,1);const float e5=1.0;const vec4 v5=vec4(1,0.9803921568627451,0.8627450980392157,1);float a0=smoothstep(e0,e1,x_9);float a1=smoothstep(e1,e2,x_9);float a2=smoothstep(e2,e3,x_9);float a3=smoothstep(e3,e4,x_9);float a4=smoothstep(e4,e5,x_9);return max(mix(v0,v1,a0)*step(e0,x_9)*step(x_9,e1),max(mix(v1,v2,a1)*step(e1,x_9)*step(x_9,e2),max(mix(v2,v3,a2)*step(e2,x_9)*step(x_9,e3),max(mix(v3,v4,a3)*step(e3,x_9)*step(x_9,e4),mix(v4,v5,a4)*step(e4,x_9)*step(x_9,e5)))));}vec4 alpha(float x_0){const float e0=0.0;const vec4 v0=vec4(1,1,1,0);const float e1=1.0;const vec4 v1=vec4(1,1,1,1);float a0=smoothstep(e0,e1,x_0);return mix(v0,v1,a0)*step(e0,x_0)*step(x_0,e1);}vec4 viridis(float x_22){const float e0=0.0;const vec4 v0=vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);const float e1=0.13;const vec4 v1=vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);const float e4=0.5;const vec4 v4=vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);const float e5=0.63;const vec4 v5=vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);const float e6=0.75;const vec4 v6=vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);const float e7=0.88;const vec4 v7=vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);float a0=smoothstep(e0,e1,x_22);float a1=smoothstep(e1,e2,x_22);float a2=smoothstep(e2,e3,x_22);float a3=smoothstep(e3,e4,x_22);float a4=smoothstep(e4,e5,x_22);float a5=smoothstep(e5,e6,x_22);float a6=smoothstep(e6,e7,x_22);float a7=smoothstep(e7,e8,x_22);return max(mix(v0,v1,a0)*step(e0,x_22)*step(x_22,e1),max(mix(v1,v2,a1)*step(e1,x_22)*step(x_22,e2),max(mix(v2,v3,a2)*step(e2,x_22)*step(x_22,e3),max(mix(v3,v4,a3)*step(e3,x_22)*step(x_22,e4),max(mix(v4,v5,a4)*step(e4,x_22)*step(x_22,e5),max(mix(v5,v6,a5)*step(e5,x_22)*step(x_22,e6),max(mix(v6,v7,a6)*step(e6,x_22)*step(x_22,e7),mix(v7,v8,a7)*step(e7,x_22)*step(x_22,e8))))))));}vec4 inferno(float x_30){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);const float e3=0.38;const vec4 v3=vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);const float e4=0.5;const vec4 v4=vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);const float e5=0.63;const vec4 v5=vec4(0.8901960784313725,0.34901960784313724,0.2,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,1,0.6431372549019608,1);float a0=smoothstep(e0,e1,x_30);float a1=smoothstep(e1,e2,x_30);float a2=smoothstep(e2,e3,x_30);float a3=smoothstep(e3,e4,x_30);float a4=smoothstep(e4,e5,x_30);float a5=smoothstep(e5,e6,x_30);float a6=smoothstep(e6,e7,x_30);float a7=smoothstep(e7,e8,x_30);return max(mix(v0,v1,a0)*step(e0,x_30)*step(x_30,e1),max(mix(v1,v2,a1)*step(e1,x_30)*step(x_30,e2),max(mix(v2,v3,a2)*step(e2,x_30)*step(x_30,e3),max(mix(v3,v4,a3)*step(e3,x_30)*step(x_30,e4),max(mix(v4,v5,a4)*step(e4,x_30)*step(x_30,e5),max(mix(v5,v6,a5)*step(e5,x_30)*step(x_30,e6),max(mix(v6,v7,a6)*step(e6,x_30)*step(x_30,e7),mix(v7,v8,a7)*step(e7,x_30)*step(x_30,e8))))))));}vec4 magma(float x_33){const float e0=0.0;const vec4 v0=vec4(0,0,0.01568627450980392,1);const float e1=0.13;const vec4 v1=vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);const float e2=0.25;const vec4 v2=vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);const float e4=0.5;const vec4 v4=vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);const float e6=0.75;const vec4 v6=vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);float a0=smoothstep(e0,e1,x_33);float a1=smoothstep(e1,e2,x_33);float a2=smoothstep(e2,e3,x_33);float a3=smoothstep(e3,e4,x_33);float a4=smoothstep(e4,e5,x_33);float a5=smoothstep(e5,e6,x_33);float a6=smoothstep(e6,e7,x_33);float a7=smoothstep(e7,e8,x_33);return max(mix(v0,v1,a0)*step(e0,x_33)*step(x_33,e1),max(mix(v1,v2,a1)*step(e1,x_33)*step(x_33,e2),max(mix(v2,v3,a2)*step(e2,x_33)*step(x_33,e3),max(mix(v3,v4,a3)*step(e3,x_33)*step(x_33,e4),max(mix(v4,v5,a4)*step(e4,x_33)*step(x_33,e5),max(mix(v5,v6,a5)*step(e5,x_33)*step(x_33,e6),max(mix(v6,v7,a6)*step(e6,x_33)*step(x_33,e7),mix(v7,v8,a7)*step(e7,x_33)*step(x_33,e8))))))));}vec4 plasma(float x_3){const float e0=0.0;const vec4 v0=vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);const float e1=0.13;const vec4 v1=vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);const float e2=0.25;const vec4 v2=vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);const float e4=0.5;const vec4 v4=vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);const float e5=0.63;const vec4 v5=vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);const float e6=0.75;const vec4 v6=vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);const float e7=0.88;const vec4 v7=vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);float a0=smoothstep(e0,e1,x_3);float a1=smoothstep(e1,e2,x_3);float a2=smoothstep(e2,e3,x_3);float a3=smoothstep(e3,e4,x_3);float a4=smoothstep(e4,e5,x_3);float a5=smoothstep(e5,e6,x_3);float a6=smoothstep(e6,e7,x_3);float a7=smoothstep(e7,e8,x_3);return max(mix(v0,v1,a0)*step(e0,x_3)*step(x_3,e1),max(mix(v1,v2,a1)*step(e1,x_3)*step(x_3,e2),max(mix(v2,v3,a2)*step(e2,x_3)*step(x_3,e3),max(mix(v3,v4,a3)*step(e3,x_3)*step(x_3,e4),max(mix(v4,v5,a4)*step(e4,x_3)*step(x_3,e5),max(mix(v5,v6,a5)*step(e5,x_3)*step(x_3,e6),max(mix(v6,v7,a6)*step(e6,x_3)*step(x_3,e7),mix(v7,v8,a7)*step(e7,x_3)*step(x_3,e8))))))));}vec4 warm(float x_43){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.13;const vec4 v1=vec4(0.6745098039215687,0,0.7333333333333333,1);const float e2=0.25;const vec4 v2=vec4(0.8588235294117647,0,0.6666666666666666,1);const float e3=0.38;const vec4 v3=vec4(1,0,0.5098039215686274,1);const float e4=0.5;const vec4 v4=vec4(1,0.24705882352941178,0.2901960784313726,1);const float e5=0.63;const vec4 v5=vec4(1,0.4823529411764706,0,1);const float e6=0.75;const vec4 v6=vec4(0.9176470588235294,0.6901960784313725,0,1);const float e7=0.88;const vec4 v7=vec4(0.7450980392156863,0.8941176470588236,0,1);const float e8=1.0;const vec4 v8=vec4(0.5764705882352941,1,0,1);float a0=smoothstep(e0,e1,x_43);float a1=smoothstep(e1,e2,x_43);float a2=smoothstep(e2,e3,x_43);float a3=smoothstep(e3,e4,x_43);float a4=smoothstep(e4,e5,x_43);float a5=smoothstep(e5,e6,x_43);float a6=smoothstep(e6,e7,x_43);float a7=smoothstep(e7,e8,x_43);return max(mix(v0,v1,a0)*step(e0,x_43)*step(x_43,e1),max(mix(v1,v2,a1)*step(e1,x_43)*step(x_43,e2),max(mix(v2,v3,a2)*step(e2,x_43)*step(x_43,e3),max(mix(v3,v4,a3)*step(e3,x_43)*step(x_43,e4),max(mix(v4,v5,a4)*step(e4,x_43)*step(x_43,e5),max(mix(v5,v6,a5)*step(e5,x_43)*step(x_43,e6),max(mix(v6,v7,a6)*step(e6,x_43)*step(x_43,e7),mix(v7,v8,a7)*step(e7,x_43)*step(x_43,e8))))))));}vec4 rainbow_soft_1310269270(float x_14){const float e0=0.0;const vec4 v0=vec4(0.49019607843137253,0,0.7019607843137254,1);const float e1=0.1;const vec4 v1=vec4(0.7803921568627451,0,0.7058823529411765,1);const float e2=0.2;const vec4 v2=vec4(1,0,0.4745098039215686,1);const float e3=0.3;const vec4 v3=vec4(1,0.4235294117647059,0,1);const float e4=0.4;const vec4 v4=vec4(0.8705882352941177,0.7607843137254902,0,1);const float e5=0.5;const vec4 v5=vec4(0.5882352941176471,1,0,1);const float e6=0.6;const vec4 v6=vec4(0,1,0.21568627450980393,1);const float e7=0.7;const vec4 v7=vec4(0,0.9647058823529412,0.5882352941176471,1);const float e8=0.8;const vec4 v8=vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);const float e9=0.9;const vec4 v9=vec4(0.403921568627451,0.2,0.9215686274509803,1);const float e10=1.0;const vec4 v10=vec4(0.48627450980392156,0,0.7294117647058823,1);float a0=smoothstep(e0,e1,x_14);float a1=smoothstep(e1,e2,x_14);float a2=smoothstep(e2,e3,x_14);float a3=smoothstep(e3,e4,x_14);float a4=smoothstep(e4,e5,x_14);float a5=smoothstep(e5,e6,x_14);float a6=smoothstep(e6,e7,x_14);float a7=smoothstep(e7,e8,x_14);float a8=smoothstep(e8,e9,x_14);float a9=smoothstep(e9,e10,x_14);return max(mix(v0,v1,a0)*step(e0,x_14)*step(x_14,e1),max(mix(v1,v2,a1)*step(e1,x_14)*step(x_14,e2),max(mix(v2,v3,a2)*step(e2,x_14)*step(x_14,e3),max(mix(v3,v4,a3)*step(e3,x_14)*step(x_14,e4),max(mix(v4,v5,a4)*step(e4,x_14)*step(x_14,e5),max(mix(v5,v6,a5)*step(e5,x_14)*step(x_14,e6),max(mix(v6,v7,a6)*step(e6,x_14)*step(x_14,e7),max(mix(v7,v8,a7)*step(e7,x_14)*step(x_14,e8),max(mix(v8,v9,a8)*step(e8,x_14)*step(x_14,e9),mix(v9,v10,a9)*step(e9,x_14)*step(x_14,e10))))))))));}vec4 bathymetry(float x_36){const float e0=0.0;const vec4 v0=vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);const float e1=0.13;const vec4 v1=vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);const float e2=0.25;const vec4 v2=vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);const float e4=0.5;const vec4 v4=vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);const float e5=0.63;const vec4 v5=vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);const float e7=0.88;const vec4 v7=vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.996078431372549,0.8,1);float a0=smoothstep(e0,e1,x_36);float a1=smoothstep(e1,e2,x_36);float a2=smoothstep(e2,e3,x_36);float a3=smoothstep(e3,e4,x_36);float a4=smoothstep(e4,e5,x_36);float a5=smoothstep(e5,e6,x_36);float a6=smoothstep(e6,e7,x_36);float a7=smoothstep(e7,e8,x_36);return max(mix(v0,v1,a0)*step(e0,x_36)*step(x_36,e1),max(mix(v1,v2,a1)*step(e1,x_36)*step(x_36,e2),max(mix(v2,v3,a2)*step(e2,x_36)*step(x_36,e3),max(mix(v3,v4,a3)*step(e3,x_36)*step(x_36,e4),max(mix(v4,v5,a4)*step(e4,x_36)*step(x_36,e5),max(mix(v5,v6,a5)*step(e5,x_36)*step(x_36,e6),max(mix(v6,v7,a6)*step(e6,x_36)*step(x_36,e7),mix(v7,v8,a7)*step(e7,x_36)*step(x_36,e8))))))));}vec4 cdom(float x_7){const float e0=0.0;const vec4 v0=vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);const float e1=0.13;const vec4 v1=vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);const float e2=0.25;const vec4 v2=vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);const float e3=0.38;const vec4 v3=vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);const float e5=0.63;const vec4 v5=vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);const float e6=0.75;const vec4 v6=vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);float a0=smoothstep(e0,e1,x_7);float a1=smoothstep(e1,e2,x_7);float a2=smoothstep(e2,e3,x_7);float a3=smoothstep(e3,e4,x_7);float a4=smoothstep(e4,e5,x_7);float a5=smoothstep(e5,e6,x_7);float a6=smoothstep(e6,e7,x_7);float a7=smoothstep(e7,e8,x_7);return max(mix(v0,v1,a0)*step(e0,x_7)*step(x_7,e1),max(mix(v1,v2,a1)*step(e1,x_7)*step(x_7,e2),max(mix(v2,v3,a2)*step(e2,x_7)*step(x_7,e3),max(mix(v3,v4,a3)*step(e3,x_7)*step(x_7,e4),max(mix(v4,v5,a4)*step(e4,x_7)*step(x_7,e5),max(mix(v5,v6,a5)*step(e5,x_7)*step(x_7,e6),max(mix(v6,v7,a6)*step(e6,x_7)*step(x_7,e7),mix(v7,v8,a7)*step(e7,x_7)*step(x_7,e8))))))));}vec4 chlorophyll(float x_6){const float e0=0.0;const vec4 v0=vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);const float e1=0.13;const vec4 v1=vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);const float e3=0.38;const vec4 v3=vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);const float e4=0.5;const vec4 v4=vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);const float e5=0.63;const vec4 v5=vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);const float e6=0.75;const vec4 v6=vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);const float e7=0.88;const vec4 v7=vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);const float e8=1.0;const vec4 v8=vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);float a0=smoothstep(e0,e1,x_6);float a1=smoothstep(e1,e2,x_6);float a2=smoothstep(e2,e3,x_6);float a3=smoothstep(e3,e4,x_6);float a4=smoothstep(e4,e5,x_6);float a5=smoothstep(e5,e6,x_6);float a6=smoothstep(e6,e7,x_6);float a7=smoothstep(e7,e8,x_6);return max(mix(v0,v1,a0)*step(e0,x_6)*step(x_6,e1),max(mix(v1,v2,a1)*step(e1,x_6)*step(x_6,e2),max(mix(v2,v3,a2)*step(e2,x_6)*step(x_6,e3),max(mix(v3,v4,a3)*step(e3,x_6)*step(x_6,e4),max(mix(v4,v5,a4)*step(e4,x_6)*step(x_6,e5),max(mix(v5,v6,a5)*step(e5,x_6)*step(x_6,e6),max(mix(v6,v7,a6)*step(e6,x_6)*step(x_6,e7),mix(v7,v8,a7)*step(e7,x_6)*step(x_6,e8))))))));}vec4 density(float x_19){const float e0=0.0;const vec4 v0=vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);const float e2=0.25;const vec4 v2=vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);const float e3=0.38;const vec4 v3=vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);const float e4=0.5;const vec4 v4=vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);const float e5=0.63;const vec4 v5=vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);const float e6=0.75;const vec4 v6=vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);const float e7=0.88;const vec4 v7=vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);const float e8=1.0;const vec4 v8=vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);float a0=smoothstep(e0,e1,x_19);float a1=smoothstep(e1,e2,x_19);float a2=smoothstep(e2,e3,x_19);float a3=smoothstep(e3,e4,x_19);float a4=smoothstep(e4,e5,x_19);float a5=smoothstep(e5,e6,x_19);float a6=smoothstep(e6,e7,x_19);float a7=smoothstep(e7,e8,x_19);return max(mix(v0,v1,a0)*step(e0,x_19)*step(x_19,e1),max(mix(v1,v2,a1)*step(e1,x_19)*step(x_19,e2),max(mix(v2,v3,a2)*step(e2,x_19)*step(x_19,e3),max(mix(v3,v4,a3)*step(e3,x_19)*step(x_19,e4),max(mix(v4,v5,a4)*step(e4,x_19)*step(x_19,e5),max(mix(v5,v6,a5)*step(e5,x_19)*step(x_19,e6),max(mix(v6,v7,a6)*step(e6,x_19)*step(x_19,e7),mix(v7,v8,a7)*step(e7,x_19)*step(x_19,e8))))))));}vec4 freesurface_blue_3154355989(float x_35){const float e0=0.0;const vec4 v0=vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);const float e1=0.13;const vec4 v1=vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);const float e3=0.38;const vec4 v3=vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);const float e4=0.5;const vec4 v4=vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);const float e5=0.63;const vec4 v5=vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);const float e6=0.75;const vec4 v6=vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);const float e7=0.88;const vec4 v7=vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_35);float a1=smoothstep(e1,e2,x_35);float a2=smoothstep(e2,e3,x_35);float a3=smoothstep(e3,e4,x_35);float a4=smoothstep(e4,e5,x_35);float a5=smoothstep(e5,e6,x_35);float a6=smoothstep(e6,e7,x_35);float a7=smoothstep(e7,e8,x_35);return max(mix(v0,v1,a0)*step(e0,x_35)*step(x_35,e1),max(mix(v1,v2,a1)*step(e1,x_35)*step(x_35,e2),max(mix(v2,v3,a2)*step(e2,x_35)*step(x_35,e3),max(mix(v3,v4,a3)*step(e3,x_35)*step(x_35,e4),max(mix(v4,v5,a4)*step(e4,x_35)*step(x_35,e5),max(mix(v5,v6,a5)*step(e5,x_35)*step(x_35,e6),max(mix(v6,v7,a6)*step(e6,x_35)*step(x_35,e7),mix(v7,v8,a7)*step(e7,x_35)*step(x_35,e8))))))));}vec4 freesurface_red_1679163293(float x_20){const float e0=0.0;const vec4 v0=vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);const float e2=0.25;const vec4 v2=vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);const float e3=0.38;const vec4 v3=vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);const float e4=0.5;const vec4 v4=vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);const float e5=0.63;const vec4 v5=vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);const float e6=0.75;const vec4 v6=vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);const float e8=1.0;const vec4 v8=vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);float a0=smoothstep(e0,e1,x_20);float a1=smoothstep(e1,e2,x_20);float a2=smoothstep(e2,e3,x_20);float a3=smoothstep(e3,e4,x_20);float a4=smoothstep(e4,e5,x_20);float a5=smoothstep(e5,e6,x_20);float a6=smoothstep(e6,e7,x_20);float a7=smoothstep(e7,e8,x_20);return max(mix(v0,v1,a0)*step(e0,x_20)*step(x_20,e1),max(mix(v1,v2,a1)*step(e1,x_20)*step(x_20,e2),max(mix(v2,v3,a2)*step(e2,x_20)*step(x_20,e3),max(mix(v3,v4,a3)*step(e3,x_20)*step(x_20,e4),max(mix(v4,v5,a4)*step(e4,x_20)*step(x_20,e5),max(mix(v5,v6,a5)*step(e5,x_20)*step(x_20,e6),max(mix(v6,v7,a6)*step(e6,x_20)*step(x_20,e7),mix(v7,v8,a7)*step(e7,x_20)*step(x_20,e8))))))));}vec4 oxygen(float x_11){const float e0=0.0;const vec4 v0=vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);const float e1=0.13;const vec4 v1=vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);const float e2=0.25;const vec4 v2=vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);const float e3=0.38;const vec4 v3=vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);const float e4=0.5;const vec4 v4=vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);const float e5=0.63;const vec4 v5=vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);const float e6=0.75;const vec4 v6=vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);const float e7=0.88;const vec4 v7=vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);const float e8=1.0;const vec4 v8=vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);float a0=smoothstep(e0,e1,x_11);float a1=smoothstep(e1,e2,x_11);float a2=smoothstep(e2,e3,x_11);float a3=smoothstep(e3,e4,x_11);float a4=smoothstep(e4,e5,x_11);float a5=smoothstep(e5,e6,x_11);float a6=smoothstep(e6,e7,x_11);float a7=smoothstep(e7,e8,x_11);return max(mix(v0,v1,a0)*step(e0,x_11)*step(x_11,e1),max(mix(v1,v2,a1)*step(e1,x_11)*step(x_11,e2),max(mix(v2,v3,a2)*step(e2,x_11)*step(x_11,e3),max(mix(v3,v4,a3)*step(e3,x_11)*step(x_11,e4),max(mix(v4,v5,a4)*step(e4,x_11)*step(x_11,e5),max(mix(v5,v6,a5)*step(e5,x_11)*step(x_11,e6),max(mix(v6,v7,a6)*step(e6,x_11)*step(x_11,e7),mix(v7,v8,a7)*step(e7,x_11)*step(x_11,e8))))))));}vec4 par(float x_28){const float e0=0.0;const vec4 v0=vec4(0.2,0.0784313725490196,0.09411764705882353,1);const float e1=0.13;const vec4 v1=vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);const float e2=0.25;const vec4 v2=vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);const float e3=0.38;const vec4 v3=vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);const float e4=0.5;const vec4 v4=vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);const float e5=0.63;const vec4 v5=vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);const float e6=0.75;const vec4 v6=vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);const float e7=0.88;const vec4 v7=vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);const float e8=1.0;const vec4 v8=vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);float a0=smoothstep(e0,e1,x_28);float a1=smoothstep(e1,e2,x_28);float a2=smoothstep(e2,e3,x_28);float a3=smoothstep(e3,e4,x_28);float a4=smoothstep(e4,e5,x_28);float a5=smoothstep(e5,e6,x_28);float a6=smoothstep(e6,e7,x_28);float a7=smoothstep(e7,e8,x_28);return max(mix(v0,v1,a0)*step(e0,x_28)*step(x_28,e1),max(mix(v1,v2,a1)*step(e1,x_28)*step(x_28,e2),max(mix(v2,v3,a2)*step(e2,x_28)*step(x_28,e3),max(mix(v3,v4,a3)*step(e3,x_28)*step(x_28,e4),max(mix(v4,v5,a4)*step(e4,x_28)*step(x_28,e5),max(mix(v5,v6,a5)*step(e5,x_28)*step(x_28,e6),max(mix(v6,v7,a6)*step(e6,x_28)*step(x_28,e7),mix(v7,v8,a7)*step(e7,x_28)*step(x_28,e8))))))));}vec4 phase(float x_39){const float e0=0.0;const vec4 v0=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);const float e1=0.13;const vec4 v1=vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);const float e3=0.38;const vec4 v3=vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);const float e4=0.5;const vec4 v4=vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);const float e5=0.63;const vec4 v5=vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);const float e6=0.75;const vec4 v6=vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);const float e7=0.88;const vec4 v7=vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);const float e8=1.0;const vec4 v8=vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);float a0=smoothstep(e0,e1,x_39);float a1=smoothstep(e1,e2,x_39);float a2=smoothstep(e2,e3,x_39);float a3=smoothstep(e3,e4,x_39);float a4=smoothstep(e4,e5,x_39);float a5=smoothstep(e5,e6,x_39);float a6=smoothstep(e6,e7,x_39);float a7=smoothstep(e7,e8,x_39);return max(mix(v0,v1,a0)*step(e0,x_39)*step(x_39,e1),max(mix(v1,v2,a1)*step(e1,x_39)*step(x_39,e2),max(mix(v2,v3,a2)*step(e2,x_39)*step(x_39,e3),max(mix(v3,v4,a3)*step(e3,x_39)*step(x_39,e4),max(mix(v4,v5,a4)*step(e4,x_39)*step(x_39,e5),max(mix(v5,v6,a5)*step(e5,x_39)*step(x_39,e6),max(mix(v6,v7,a6)*step(e6,x_39)*step(x_39,e7),mix(v7,v8,a7)*step(e7,x_39)*step(x_39,e8))))))));}vec4 salinity(float x_26){const float e0=0.0;const vec4 v0=vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);const float e1=0.13;const vec4 v1=vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);const float e2=0.25;const vec4 v2=vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);const float e3=0.38;const vec4 v3=vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);const float e4=0.5;const vec4 v4=vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);const float e5=0.63;const vec4 v5=vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);const float e6=0.75;const vec4 v6=vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);const float e7=0.88;const vec4 v7=vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);const float e8=1.0;const vec4 v8=vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);float a0=smoothstep(e0,e1,x_26);float a1=smoothstep(e1,e2,x_26);float a2=smoothstep(e2,e3,x_26);float a3=smoothstep(e3,e4,x_26);float a4=smoothstep(e4,e5,x_26);float a5=smoothstep(e5,e6,x_26);float a6=smoothstep(e6,e7,x_26);float a7=smoothstep(e7,e8,x_26);return max(mix(v0,v1,a0)*step(e0,x_26)*step(x_26,e1),max(mix(v1,v2,a1)*step(e1,x_26)*step(x_26,e2),max(mix(v2,v3,a2)*step(e2,x_26)*step(x_26,e3),max(mix(v3,v4,a3)*step(e3,x_26)*step(x_26,e4),max(mix(v4,v5,a4)*step(e4,x_26)*step(x_26,e5),max(mix(v5,v6,a5)*step(e5,x_26)*step(x_26,e6),max(mix(v6,v7,a6)*step(e6,x_26)*step(x_26,e7),mix(v7,v8,a7)*step(e7,x_26)*step(x_26,e8))))))));}vec4 temperature(float x_8){const float e0=0.0;const vec4 v0=vec4(0.01568627450980392,0.13725490196078433,0.2,1);const float e1=0.13;const vec4 v1=vec4(0.09019607843137255,0.2,0.47843137254901963,1);const float e2=0.25;const vec4 v2=vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);const float e3=0.38;const vec4 v3=vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);const float e4=0.5;const vec4 v4=vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);const float e5=0.63;const vec4 v5=vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);const float e6=0.75;const vec4 v6=vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);const float e7=0.88;const vec4 v7=vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);const float e8=1.0;const vec4 v8=vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);float a0=smoothstep(e0,e1,x_8);float a1=smoothstep(e1,e2,x_8);float a2=smoothstep(e2,e3,x_8);float a3=smoothstep(e3,e4,x_8);float a4=smoothstep(e4,e5,x_8);float a5=smoothstep(e5,e6,x_8);float a6=smoothstep(e6,e7,x_8);float a7=smoothstep(e7,e8,x_8);return max(mix(v0,v1,a0)*step(e0,x_8)*step(x_8,e1),max(mix(v1,v2,a1)*step(e1,x_8)*step(x_8,e2),max(mix(v2,v3,a2)*step(e2,x_8)*step(x_8,e3),max(mix(v3,v4,a3)*step(e3,x_8)*step(x_8,e4),max(mix(v4,v5,a4)*step(e4,x_8)*step(x_8,e5),max(mix(v5,v6,a5)*step(e5,x_8)*step(x_8,e6),max(mix(v6,v7,a6)*step(e6,x_8)*step(x_8,e7),mix(v7,v8,a7)*step(e7,x_8)*step(x_8,e8))))))));}vec4 turbidity(float x_40){const float e0=0.0;const vec4 v0=vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);const float e1=0.13;const vec4 v1=vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);const float e2=0.25;const vec4 v2=vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);const float e3=0.38;const vec4 v3=vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);const float e4=0.5;const vec4 v4=vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);const float e5=0.63;const vec4 v5=vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);const float e6=0.75;const vec4 v6=vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);const float e7=0.88;const vec4 v7=vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);const float e8=1.0;const vec4 v8=vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);float a0=smoothstep(e0,e1,x_40);float a1=smoothstep(e1,e2,x_40);float a2=smoothstep(e2,e3,x_40);float a3=smoothstep(e3,e4,x_40);float a4=smoothstep(e4,e5,x_40);float a5=smoothstep(e5,e6,x_40);float a6=smoothstep(e6,e7,x_40);float a7=smoothstep(e7,e8,x_40);return max(mix(v0,v1,a0)*step(e0,x_40)*step(x_40,e1),max(mix(v1,v2,a1)*step(e1,x_40)*step(x_40,e2),max(mix(v2,v3,a2)*step(e2,x_40)*step(x_40,e3),max(mix(v3,v4,a3)*step(e3,x_40)*step(x_40,e4),max(mix(v4,v5,a4)*step(e4,x_40)*step(x_40,e5),max(mix(v5,v6,a5)*step(e5,x_40)*step(x_40,e6),max(mix(v6,v7,a6)*step(e6,x_40)*step(x_40,e7),mix(v7,v8,a7)*step(e7,x_40)*step(x_40,e8))))))));}vec4 velocity_blue_297387650(float x_2){const float e0=0.0;const vec4 v0=vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);const float e1=0.13;const vec4 v1=vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);const float e2=0.25;const vec4 v2=vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);const float e3=0.38;const vec4 v3=vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);const float e4=0.5;const vec4 v4=vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);const float e5=0.63;const vec4 v5=vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);const float e6=0.75;const vec4 v6=vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);const float e7=0.88;const vec4 v7=vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);const float e8=1.0;const vec4 v8=vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);float a0=smoothstep(e0,e1,x_2);float a1=smoothstep(e1,e2,x_2);float a2=smoothstep(e2,e3,x_2);float a3=smoothstep(e3,e4,x_2);float a4=smoothstep(e4,e5,x_2);float a5=smoothstep(e5,e6,x_2);float a6=smoothstep(e6,e7,x_2);float a7=smoothstep(e7,e8,x_2);return max(mix(v0,v1,a0)*step(e0,x_2)*step(x_2,e1),max(mix(v1,v2,a1)*step(e1,x_2)*step(x_2,e2),max(mix(v2,v3,a2)*step(e2,x_2)*step(x_2,e3),max(mix(v3,v4,a3)*step(e3,x_2)*step(x_2,e4),max(mix(v4,v5,a4)*step(e4,x_2)*step(x_2,e5),max(mix(v5,v6,a5)*step(e5,x_2)*step(x_2,e6),max(mix(v6,v7,a6)*step(e6,x_2)*step(x_2,e7),mix(v7,v8,a7)*step(e7,x_2)*step(x_2,e8))))))));}vec4 velocity_green_2558432129(float x_27){const float e0=0.0;const vec4 v0=vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);const float e1=0.13;const vec4 v1=vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);const float e2=0.25;const vec4 v2=vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);const float e3=0.38;const vec4 v3=vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);const float e4=0.5;const vec4 v4=vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);const float e5=0.63;const vec4 v5=vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);const float e6=0.75;const vec4 v6=vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);const float e7=0.88;const vec4 v7=vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);const float e8=1.0;const vec4 v8=vec4(1,0.9921568627450981,0.803921568627451,1);float a0=smoothstep(e0,e1,x_27);float a1=smoothstep(e1,e2,x_27);float a2=smoothstep(e2,e3,x_27);float a3=smoothstep(e3,e4,x_27);float a4=smoothstep(e4,e5,x_27);float a5=smoothstep(e5,e6,x_27);float a6=smoothstep(e6,e7,x_27);float a7=smoothstep(e7,e8,x_27);return max(mix(v0,v1,a0)*step(e0,x_27)*step(x_27,e1),max(mix(v1,v2,a1)*step(e1,x_27)*step(x_27,e2),max(mix(v2,v3,a2)*step(e2,x_27)*step(x_27,e3),max(mix(v3,v4,a3)*step(e3,x_27)*step(x_27,e4),max(mix(v4,v5,a4)*step(e4,x_27)*step(x_27,e5),max(mix(v5,v6,a5)*step(e5,x_27)*step(x_27,e6),max(mix(v6,v7,a6)*step(e6,x_27)*step(x_27,e7),mix(v7,v8,a7)*step(e7,x_27)*step(x_27,e8))))))));}vec4 cubehelix(float x_37){const float e0=0.0;const vec4 v0=vec4(0,0,0,1);const float e1=0.07;const vec4 v1=vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);const float e2=0.13;const vec4 v2=vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);const float e3=0.2;const vec4 v3=vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);const float e4=0.27;const vec4 v4=vec4(0.6313725490196078,0,0.5764705882352941,1);const float e5=0.33;const vec4 v5=vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);const float e6=0.4;const vec4 v6=vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);const float e7=0.47;const vec4 v7=vec4(1,0.11372549019607843,0.3803921568627451,1);const float e8=0.53;const vec4 v8=vec4(1,0.21176470588235294,0.27058823529411763,1);const float e9=0.6;const vec4 v9=vec4(1,0.3333333333333333,0.1803921568627451,1);const float e10=0.67;const vec4 v10=vec4(1,0.47058823529411764,0.13333333333333333,1);const float e11=0.73;const vec4 v11=vec4(1,0.615686274509804,0.1450980392156863,1);const float e12=0.8;const vec4 v12=vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);const float e13=0.87;const vec4 v13=vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);const float e14=0.93;const vec4 v14=vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);const float e15=1.0;const vec4 v15=vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);float a0=smoothstep(e0,e1,x_37);float a1=smoothstep(e1,e2,x_37);float a2=smoothstep(e2,e3,x_37);float a3=smoothstep(e3,e4,x_37);float a4=smoothstep(e4,e5,x_37);float a5=smoothstep(e5,e6,x_37);float a6=smoothstep(e6,e7,x_37);float a7=smoothstep(e7,e8,x_37);float a8=smoothstep(e8,e9,x_37);float a9=smoothstep(e9,e10,x_37);float a10=smoothstep(e10,e11,x_37);float a11=smoothstep(e11,e12,x_37);float a12=smoothstep(e12,e13,x_37);float a13=smoothstep(e13,e14,x_37);float a14=smoothstep(e14,e15,x_37);return max(mix(v0,v1,a0)*step(e0,x_37)*step(x_37,e1),max(mix(v1,v2,a1)*step(e1,x_37)*step(x_37,e2),max(mix(v2,v3,a2)*step(e2,x_37)*step(x_37,e3),max(mix(v3,v4,a3)*step(e3,x_37)*step(x_37,e4),max(mix(v4,v5,a4)*step(e4,x_37)*step(x_37,e5),max(mix(v5,v6,a5)*step(e5,x_37)*step(x_37,e6),max(mix(v6,v7,a6)*step(e6,x_37)*step(x_37,e7),max(mix(v7,v8,a7)*step(e7,x_37)*step(x_37,e8),max(mix(v8,v9,a8)*step(e8,x_37)*step(x_37,e9),max(mix(v9,v10,a9)*step(e9,x_37)*step(x_37,e10),max(mix(v10,v11,a10)*step(e10,x_37)*step(x_37,e11),max(mix(v11,v12,a11)*step(e11,x_37)*step(x_37,e12),max(mix(v12,v13,a12)*step(e12,x_37)*step(x_37,e13),max(mix(v13,v14,a13)*step(e13,x_37)*step(x_37,e14),mix(v14,v15,a14)*step(e14,x_37)*step(x_37,e15)))))))))))))));}uniform usampler2D channelColormap;uniform vec2 sliderValues;uniform float opacity;in vec2 vTexCoord;out vec4 color;void main(){float intensityValue=(float(texture(channelColormap,vTexCoord).r)-sliderValues[0])/sliderValues[1];color=vec4(colormap(min(1.0,intensityValue)).xyz,opacity);}".replace("colormap",r):"#version 300 es\n#define SHADER_NAME xr-layer-fragment-shader\nprecision highp float;precision highp int;precision highp usampler2D;\n#define GLSLIFY 1\nuniform usampler2D channel0;uniform usampler2D channel1;uniform usampler2D channel2;uniform usampler2D channel3;uniform usampler2D channel4;uniform usampler2D channel5;uniform vec2 sliderValues[6];uniform vec3 colorValues[6];uniform float opacity;in vec2 vTexCoord;out vec4 color;vec3 hsv2rgb(vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 rgb2hsv(vec3 rgb){float Cmax=max(rgb.r,max(rgb.g,rgb.b));float Cmin=min(rgb.r,min(rgb.g,rgb.b));float delta=Cmax-Cmin;vec3 hsv=vec3(0.,0.,Cmax);if(Cmax>Cmin){hsv.y=delta/Cmax;if(rgb.r==Cmax){hsv.x=(rgb.g-rgb.b)/delta;}else{if(rgb.g==Cmax){hsv.x=2.+(rgb.b-rgb.r)/delta;}else{hsv.x=4.+(rgb.r-rgb.g)/delta;}}hsv.x=fract(hsv.x/6.);}return hsv;}void main(){float intensityValue0=(float(texture(channel0,vTexCoord).r)-sliderValues[0][0])/sliderValues[0][1];float intensityValue1=(float(texture(channel1,vTexCoord).r)-sliderValues[1][0])/sliderValues[1][1];float intensityValue2=(float(texture(channel2,vTexCoord).r)-sliderValues[2][0])/sliderValues[2][1];float intensityValue3=(float(texture(channel3,vTexCoord).r)-sliderValues[3][0])/sliderValues[3][1];float intensityValue4=(float(texture(channel4,vTexCoord).r)-sliderValues[4][0])/sliderValues[4][1];float intensityValue5=(float(texture(channel5,vTexCoord).r)-sliderValues[5][0])/sliderValues[5][1];vec3 rgbCombo=vec3(0.0);vec3 hsvCombo=vec3(0.0);float intensityArray[6]=float[6](intensityValue0,intensityValue1,intensityValue2,intensityValue3,intensityValue4,intensityValue5);for(int i=0;i<6;i++){hsvCombo=rgb2hsv(vec3(colorValues[i]));hsvCombo=vec3(hsvCombo.xy,max(0.0,intensityArray[i]));rgbCombo+=hsv2rgb(hsvCombo);}color=vec4(rgbCombo,opacity);}",a="<f4"===n?i.replace(/usampler/g,"sampler"):i;return W(V(t.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define GLSLIFY 1\n#define SHADER_NAME xr-layer-vertex-shader\nin vec2 texCoords;in vec3 positions;in vec3 positions64Low;out vec2 vTexCoord;void main(){gl_Position=project_position_to_clipspace(positions,positions64Low,vec3(0.0));vTexCoord=texCoords;}",fs:a,modules:[b.a]})}},{key:"initializeState",value:function(){var e=this.getAttributeManager();e.add({positions:{size:3,type:k.a.DOUBLE,fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)}),e.remove("instancePickingColors")}},{key:"finalizeState",value:function(){W(V(t.prototype),"finalizeState",this).call(this),this.state.textures&&Object.values(this.state.textures).forEach((function(e){return e&&e.delete()}))}},{key:"updateState",value:function(e){var t=e.props,r=e.oldProps;if(e.changeFlags.extensionsChanged){var n=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(n)}),this.getAttributeManager().invalidateAll()}t.channelData&&t.channelData.length>0&&t.channelData!==r.channelData&&this.loadTexture(t.channelData);var i=this.getAttributeManager();t.bounds!==r.bounds&&i.invalidate("positions")}},{key:"_getModel",value:function(e){return e?new j.a(e,U({},this.getShaders(),{id:this.props.id,geometry:new S.a({drawMode:k.a.TRIANGLE_FAN,vertexCount:4,attributes:{texCoords:new Float32Array([0,1,0,0,1,0,1,1])}}),isInstanced:!1})):null}},{key:"calculatePositions",value:function(e){var t=this.state.positions,r=this.props.bounds;t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[0],t[4]=r[3],t[5]=0,t[6]=r[2],t[7]=r[3],t[8]=0,t[9]=r[2],t[10]=r[1],t[11]=0,e.value=t}},{key:"draw",value:function(e){var t=e.uniforms,r=this.state,n=r.textures,i=r.model;if(n&&i){var a=this.props,o=a.sliderValues,s=a.colorValues,u=a.opacity;i.setUniforms(U({},t,{colorValues:s,sliderValues:o,opacity:u},n)).draw()}}},{key:"loadTexture",value:function(e){var t=this,r={channel0:null,channel2:null,channel3:null,channel4:null,channel5:null,channelColormap:null};this.state.textures&&Object.values(this.state.textures).forEach((function(e){return e&&e.delete()})),e.length>0&&(this.props.colormap?(r.channelColormap=this.dataToTexture(e[0]),this.setState({textures:r})):(e.forEach((function(e,n){r["channel".concat(n)]=t.dataToTexture(e)}),this),this.setState({textures:r})))}},{key:"dataToTexture",value:function(e){var t,r=this.props.dtype,n=q[r],i=n.format,a=n.dataFormat,o=n.type;return new P.a(this.context.gl,{width:this.props.staticImageWidth||this.props.tileSize,height:this.props.staticImageHeight||this.props.tileSize,data:e,mipmaps:!1,parameters:(t={},D(t,k.a.TEXTURE_MIN_FILTER,k.a.NEAREST),D(t,k.a.TEXTURE_MAG_FILTER,k.a.NEAREST),D(t,k.a.TEXTURE_WRAP_S,k.a.CLAMP_TO_EDGE),D(t,k.a.TEXTURE_WRAP_T,k.a.CLAMP_TO_EDGE),t),format:i,dataFormat:a,type:o})}}]),t}(_.a);function Q(e){return Z(Array(e).keys())}function J(e){var t=e.x,r=e.y,n=e.z,i=e.imageWidth,a=e.imageHeight,o=e.tileSize,s=e.minZoom,u=t<Math.ceil(i/(o*Math.pow(2,n)))&&t>=0,c=r<Math.ceil(a/(o*Math.pow(2,n)))&&r>=0;return u&&c&&(n>=0&&n<-s)}$.layerName="XRLayer",$.defaultProps=K;var ee=U({},O.a.defaultProps,{pickable:!1,coordinateSystem:y.a.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},tileSize:{type:"number",value:512,compare:!0},imageHeight:{type:"number",value:1028,compare:!0},imageWidth:{type:"number",value:1028,compare:!0},minZoom:{type:"number",value:0,compare:!0},maxZoom:{type:"number",value:0,compare:!0},renderSubLayers:{type:"function",value:function(e){var t=e.tile,r=t.bbox,n=r.left,i=r.top,a=r.right,o=r.bottom,s=t.x,u=t.y,c=t.z,l=e.colorValues,f=e.sliderValues,h=e.imageWidth,d=e.imageHeight,p=e.tileSize,v=e.minZoom,g=e.visible,m=e.opacity,y=e.data,b=e.colormap,_=e.dtype;return J({x:s,y:u,z:-c,imageWidth:h,imageHeight:d,tileSize:p,minZoom:v})?h&&d&&new $({id:"XRLayer-left".concat(n,"-top").concat(i,"-right").concat(a,"-bottom").concat(o),data:null,channelData:y,sliderValues:b?f.slice(0,2):f,colorValues:b?[]:l,tileSize:p,bounds:[n,o,a,i],opacity:m,visible:g,dtype:_,colormap:b}):null},compare:!1},opacity:{type:"number",value:1,compare:!0},colormap:{type:"string",value:"",compare:!0},dtype:{type:"string",value:"<u2",compare:!0},domain:{type:"array",value:[],compare:!0}}),te=function(e){function t(){return L(this,t),H(this,V(t).apply(this,arguments))}return z(t,e),t}(O.a);function re(e,t,r){for(var n=0;n<r;n+=1)e.push(t);return e}function ne(e){var t=e.sliderValues,r=e.colorValues,n=e.channelIsOn,i=e.domain,a=e.dtype,o=[t.length,r.length];if(o.every((function(e){return e!==o[0]})))throw Error("Inconsistent number of slider values and colors provided");var s=r.map((function(e,t){return n[t]?e.map((function(e){return e/255})):Y})),u=i&&i[1]||q[a].max,c=t.map((function(e,t){return n[t]?e:[u,u]})),l=6-s.length;if(l<0)throw Error("".concat(o," channels passed in, but only 6 are allowed."));var f=re(s,Y,l);return{paddedSliderValues:re(c,[u,u],l).reduce((function(e,t){return e.concat(t)}),[]),paddedColorValues:f.reduce((function(e,t){return e.concat(t)}),[])}}te.layerName="VivViewerLayerBase",te.defaultProps=ee;var ie=function(e){function t(){return L(this,t),H(this,V(t).apply(this,arguments))}return z(t,e),N(t,[{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"renderLayers",value:function(){var e=this.props,t=e.loader,r=e.sliderValues,n=e.colorValues,i=e.channelIsOn,a=e.domain,o=t.vivMetadata,s=o.imageWidth,u=o.imageHeight,c=o.tileSize,l=o.minZoom,f=o.dtype,h=ne({sliderValues:r,colorValues:n,channelIsOn:i,domain:a,dtype:f}),d=h.paddedSliderValues,p=h.paddedColorValues;return new te(this.props,{id:"VivViewerLayerBase--".concat(t.type),imageWidth:s,imageHeight:u,tileSize:c,minZoom:l,getTileData:function(e){var r=e.x,n=e.y,i=e.z;return J({x:r,y:n,z:-i,imageWidth:s,imageHeight:u,minZoom:l,tileSize:c})?t.getTile({x:r,y:n,z:-i}):null},dtype:f,colorValues:p,sliderValues:d})}}]),t}(w.a);ie.layerName="VivViewerLayer";var ae={pickable:!1,coordinateSystem:y.a.CARTESIAN,sliderValues:{type:"array",value:[],compare:!0},channelIsOn:{type:"array",value:[],compare:!0},colorValues:{type:"array",value:[],compare:!0},colormap:{type:"string",value:"",compare:!0},domain:{type:"array",value:[],compare:!0},translate:{type:"array",value:[0,0],compare:!0},scale:{type:"number",value:1,compare:!0},loader:{type:"object",value:{getRaster:function(){return[]},vivMetadata:{imageHeight:0,imageWidth:0,dtype:"<u2"}},compare:!0}};var oe=function(e){function t(){return L(this,t),H(this,V(t).apply(this,arguments))}return z(t,e),N(t,[{key:"initializeState",value:function(){var e=this.props.loader;this.setState({data:e.getRaster({z:0})})}},{key:"renderLayers",value:function(){var e=this.props,t=e.loader,r=e.visible,n=e.opacity,i=e.colormap,a=e.sliderValues,o=e.colorValues,s=e.channelIsOn,u=e.translate,c=e.scale,l=e.domain,f=t.vivMetadata,h=f.imageWidth,d=f.imageHeight,p=f.dtype,v=ne({sliderValues:a,colorValues:o,channelIsOn:s,domain:l,dtype:p}),g=v.paddedSliderValues,m=v.paddedColorValues,b=function(e){var t=e.imageWidth,r=e.imageHeight,n=e.translate,i=e.scale,a=X(n,2),o=a[0],s=a[1];return[o,r*i+s,t*i+o,s]}({imageWidth:h,imageHeight:d,translate:u,scale:c}),_=this.state.data;return new $({channelData:_,data:null,bounds:b,sliderValues:i?g.slice(0,2):g,colorValues:i?[]:m,staticImageHeight:d,staticImageWidth:h,id:"XR-Static-Layer-".concat(0,"-",d,"-").concat(h,"-",0),pickable:!1,coordinateSystem:y.a.CARTESIAN,opacity:n,visible:r,dtype:p,colormap:i})}}]),t}(w.a);oe.layerName="StaticImageLayer",oe.defaultProps=ae;A.PureComponent;function se(e){return new Proxy(e,{set:function(e,t,r,n){return e.setItem(t,r)},get:function(e,t,r){return e.getItem(t)},deleteProperty:function(e,t){return e.deleteItem(t)},has:function(e,t){return e.containsItem(t)}})}function ue(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(t){a(t)}}function s(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,s)}u((n=n.apply(e,t||[])).next())}))}var ce="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fe(e,t){return e(t={exports:{}},t.exports),t.exports}var he=fe((function(e,t){var r=ce&&ce.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,r){var n=e.call(this,r)||this;return n.path=t,n}return r(t,e),t}(Error);t.VError=n;var i=function(){function e(){}return e.prototype.fail=function(e,t,r){return!1},e.prototype.unionResolver=function(){return this},e.prototype.createContext=function(){return this},e.prototype.resolveUnion=function(e){},e}();t.NoopContext=i;var a=function(){function e(){this._propNames=[""],this._messages=[null],this._score=0}return e.prototype.fail=function(e,t,r){return this._propNames.push(e),this._messages.push(t),this._score+=r,!1},e.prototype.unionResolver=function(){return new o},e.prototype.resolveUnion=function(e){for(var t,r,n=null,i=0,a=e.contexts;i<a.length;i++){var o=a[i];(!n||o._score>=n._score)&&(n=o)}n&&n._score>0&&((t=this._propNames).push.apply(t,n._propNames),(r=this._messages).push.apply(r,n._messages))},e.prototype.getError=function(e){for(var t=[],r=this._propNames.length-1;r>=0;r--){var i=this._propNames[r];e+="number"===typeof i?"["+i+"]":i?"."+i:"";var a=this._messages[r];a&&t.push(e+" "+a)}return new n(e,t.join("; "))},e.prototype.getErrorDetail=function(e){for(var t=[],r=this._propNames.length-1;r>=0;r--){var n=this._propNames[r];e+="number"===typeof n?"["+n+"]":n?"."+n:"";var i=this._messages[r];i&&t.push({path:e,message:i})}var a=null;for(r=t.length-1;r>=0;r--)a&&(t[r].nested=[a]),a=t[r];return a},e}();t.DetailContext=a;var o=function(){function e(){this.contexts=[]}return e.prototype.createContext=function(){var e=new a;return this.contexts.push(e),e},e}()}));le(he);he.VError,he.NoopContext,he.DetailContext;var de=fe((function(e,t){var r=ce&&ce.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){};function a(e){return"string"===typeof e?s(e):e}function o(e,t){var r=e[t];if(!r)throw new Error("Unknown type "+t);return r}function s(e){return new u(e)}t.TType=i,t.name=s;var u=function(e){function t(t){var r=e.call(this)||this;return r.name=t,r._failMsg="is not a "+t,r}return r(t,e),t.prototype.getChecker=function(e,r){var n=this,i=o(e,this.name),a=i.getChecker(e,r);return i instanceof x||i instanceof t?a:function(e,t){return!!a(e,t)||t.fail(null,n._failMsg,0)}},t}(i);t.TName=u,t.lit=function(e){return new c(e)};var c=function(e){function t(t){var r=e.call(this)||this;return r.value=t,r.name=JSON.stringify(t),r._failMsg="is not "+r.name,r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this;return function(e,t){return e===r.value||t.fail(null,r._failMsg,-1)}},t}(i);t.TLiteral=c,t.array=function(e){return new l(a(e))};var l=function(e){function t(t){var r=e.call(this)||this;return r.ttype=t,r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this.ttype.getChecker(e,t);return function(e,t){if(!Array.isArray(e))return t.fail(null,"is not an array",0);for(var n=0;n<e.length;n++){if(!r(e[n],t))return t.fail(n,null,1)}return!0}},t}(i);t.TArray=l,t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new f(e.map((function(e){return a(e)})))};var f=function(e){function t(t){var r=e.call(this)||this;return r.ttypes=t,r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this.ttypes.map((function(r){return r.getChecker(e,t)})),n=function(e,t){if(!Array.isArray(e))return t.fail(null,"is not an array",0);for(var n=0;n<r.length;n++){if(!r[n](e[n],t))return t.fail(n,null,1)}return!0};return t?function(e,t){return!!n(e,t)&&(e.length<=r.length||t.fail(r.length,"is extraneous",2))}:n},t}(i);t.TTuple=f,t.union=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new h(e.map((function(e){return a(e)})))};var h=function(e){function t(t){var r=e.call(this)||this;r.ttypes=t;var n=t.map((function(e){return e instanceof u||e instanceof c?e.name:null})).filter((function(e){return e})),i=t.length-n.length;return n.length?(i>0&&n.push(i+" more"),r._failMsg="is none of "+n.join(", ")):r._failMsg="is none of "+i+" types",r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this,n=this.ttypes.map((function(r){return r.getChecker(e,t)}));return function(e,t){for(var i=t.unionResolver(),a=0;a<n.length;a++){if(n[a](e,i.createContext()))return!0}return t.resolveUnion(i),t.fail(null,r._failMsg,0)}},t}(i);t.TUnion=h,t.enumtype=function(e){return new d(e)};var d=function(e){function t(t){var r=e.call(this)||this;return r.members=t,r.validValues=new Set,r._failMsg="is not a valid enum value",r.validValues=new Set(Object.keys(t).map((function(e){return t[e]}))),r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this;return function(e,t){return!!r.validValues.has(e)||t.fail(null,r._failMsg,0)}},t}(i);t.TEnumType=d,t.enumlit=function(e,t){return new p(e,t)};var p=function(e){function t(t,r){var n=e.call(this)||this;return n.enumName=t,n.prop=r,n._failMsg="is not "+t+"."+r,n}return r(t,e),t.prototype.getChecker=function(e,t){var r=this,n=o(e,this.enumName);if(!(n instanceof d))throw new Error("Type "+this.enumName+" used in enumlit is not an enum type");var i=n.members[this.prop];if(!n.members.hasOwnProperty(this.prop))throw new Error("Unknown value "+this.enumName+"."+this.prop+" used in enumlit");return function(e,t){return e===i||t.fail(null,r._failMsg,-1)}},t}(i);function v(e){return Object.keys(e).map((function(t){return function(e,t){return t instanceof m?new y(e,t.ttype,!0):new y(e,a(t),!1)}(t,e[t])}))}t.TEnumLiteral=p,t.iface=function(e,t){return new g(e,v(t))};var g=function(e){function t(t,r){var n=e.call(this)||this;return n.bases=t,n.props=r,n.propSet=new Set(r.map((function(e){return e.name}))),n}return r(t,e),t.prototype.getChecker=function(e,t){var r=this,n=this.bases.map((function(r){return o(e,r).getChecker(e,t)})),i=this.props.map((function(r){return r.ttype.getChecker(e,t)})),a=new he.NoopContext,s=this.props.map((function(e,t){return!e.isOpt&&!i[t](void 0,a)})),u=function(e,t){if("object"!==typeof e||null===e)return t.fail(null,"is not an object",0);for(var a=0;a<n.length;a++)if(!n[a](e,t))return!1;for(a=0;a<i.length;a++){var o=r.props[a].name,u=e[o];if(void 0===u){if(s[a])return t.fail(o,"is missing",1)}else if(!i[a](u,t))return t.fail(o,null,1)}return!0};return t?function(e,t){if(!u(e,t))return!1;for(var n in e)if(!r.propSet.has(n))return t.fail(n,"is extraneous",2);return!0}:u},t}(i);t.TIface=g,t.opt=function(e){return new m(a(e))};var m=function(e){function t(t){var r=e.call(this)||this;return r.ttype=t,r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this.ttype.getChecker(e,t);return function(e,t){return void 0===e||r(e,t)}},t}(i);t.TOptional=m;var y=function(e,t,r){this.name=e,this.ttype=t,this.isOpt=r};t.TProp=y,t.func=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new b(new w(t),a(e))};var b=function(e){function t(t,r){var n=e.call(this)||this;return n.paramList=t,n.result=r,n}return r(t,e),t.prototype.getChecker=function(e,t){return function(e,t){return"function"===typeof e||t.fail(null,"is not a function",0)}},t}(i);t.TFunc=b,t.param=function(e,t,r){return new _(e,a(t),Boolean(r))};var _=function(e,t,r){this.name=e,this.ttype=t,this.isOpt=r};t.TParam=_;var w=function(e){function t(t){var r=e.call(this)||this;return r.params=t,r}return r(t,e),t.prototype.getChecker=function(e,t){var r=this,n=this.params.map((function(r){return r.ttype.getChecker(e,t)})),i=new he.NoopContext,a=this.params.map((function(e,t){return!e.isOpt&&!n[t](void 0,i)})),o=function(e,t){if(!Array.isArray(e))return t.fail(null,"is not an array",0);for(var i=0;i<n.length;i++){var o=r.params[i];if(void 0===e[i]){if(a[i])return t.fail(o.name,"is missing",1)}else if(!n[i](e[i],t))return t.fail(o.name,null,1)}return!0};return t?function(e,t){return!!o(e,t)&&(e.length<=n.length||t.fail(n.length,"is extraneous",2))}:o},t}(i);t.TParamList=w;var x=function(e){function t(t,r){var n=e.call(this)||this;return n.validator=t,n.message=r,n}return r(t,e),t.prototype.getChecker=function(e,t){var r=this;return function(e,t){return!!r.validator(e)||t.fail(null,r.message,0)}},t}(i);t.BasicType=x,t.basicTypes={any:new x((function(e){return!0}),"is invalid"),number:new x((function(e){return"number"===typeof e}),"is not a number"),object:new x((function(e){return"object"===typeof e&&e}),"is not an object"),boolean:new x((function(e){return"boolean"===typeof e}),"is not a boolean"),string:new x((function(e){return"string"===typeof e}),"is not a string"),symbol:new x((function(e){return"symbol"===typeof e}),"is not a symbol"),void:new x((function(e){return null==e}),"is not void"),undefined:new x((function(e){return void 0===e}),"is not undefined"),null:new x((function(e){return null===e}),"is not null"),never:new x((function(e){return!1}),"is unexpected"),Date:new x(E("[object Date]"),"is not a Date"),RegExp:new x(E("[object RegExp]"),"is not a RegExp")};var O=Object.prototype.toString;function E(e){return function(t){return"object"===typeof t&&t&&O.call(t)===e}}"undefined"!==typeof n&&(t.basicTypes.Buffer=new x((function(e){return n.isBuffer(e)}),"is not a Buffer"));for(var k=function(e){t.basicTypes[e.name]=new x((function(t){return t instanceof e}),"is not a "+e.name)},j=0,S=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,ArrayBuffer];j<S.length;j++){k(S[j])}}));le(de);de.TType,de.name,de.TName,de.lit,de.TLiteral,de.array,de.TArray,de.tuple,de.TTuple,de.union,de.TUnion,de.enumtype,de.TEnumType,de.enumlit,de.TEnumLiteral,de.iface,de.TIface,de.opt,de.TOptional,de.TProp,de.func,de.TFunc,de.param,de.TParam,de.TParamList,de.BasicType,de.basicTypes;var pe=fe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=de;t.TArray=r.TArray,t.TEnumType=r.TEnumType,t.TEnumLiteral=r.TEnumLiteral,t.TFunc=r.TFunc,t.TIface=r.TIface,t.TLiteral=r.TLiteral,t.TName=r.TName,t.TOptional=r.TOptional,t.TParam=r.TParam,t.TParamList=r.TParamList,t.TProp=r.TProp,t.TTuple=r.TTuple,t.TType=r.TType,t.TUnion=r.TUnion,t.array=r.array,t.enumlit=r.enumlit,t.enumtype=r.enumtype,t.func=r.func,t.iface=r.iface,t.lit=r.lit,t.name=r.name,t.opt=r.opt,t.param=r.param,t.tuple=r.tuple,t.union=r.union,t.BasicType=r.BasicType,t.createCheckers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=Object.assign.apply(Object,[{},de.basicTypes].concat(e)),i={},a=0,o=e;a<o.length;a++)for(var s=o[a],u=0,c=Object.keys(s);u<c.length;u++){var l=c[u];i[l]=new n(r,s[l])}return i};var n=function(){function e(e,t,r){if(void 0===r&&(r="value"),this.suite=e,this.ttype=t,this._path=r,this.props=new Map,t instanceof de.TIface)for(var n=0,i=t.props;n<i.length;n++){var a=i[n];this.props.set(a.name,a.ttype)}this.checkerPlain=this.ttype.getChecker(e,!1),this.checkerStrict=this.ttype.getChecker(e,!0)}return e.prototype.setReportedPath=function(e){this._path=e},e.prototype.check=function(e){return this._doCheck(this.checkerPlain,e)},e.prototype.test=function(e){return this.checkerPlain(e,new he.NoopContext)},e.prototype.validate=function(e){return this._doValidate(this.checkerPlain,e)},e.prototype.strictCheck=function(e){return this._doCheck(this.checkerStrict,e)},e.prototype.strictTest=function(e){return this.checkerStrict(e,new he.NoopContext)},e.prototype.strictValidate=function(e){return this._doValidate(this.checkerStrict,e)},e.prototype.getProp=function(t){var r=this.props.get(t);if(!r)throw new Error("Type has no property "+t);return new e(this.suite,r,this._path+"."+t)},e.prototype.methodArgs=function(t){var r=this._getMethod(t);return new e(this.suite,r.paramList)},e.prototype.methodResult=function(t){var r=this._getMethod(t);return new e(this.suite,r.result)},e.prototype.getArgs=function(){if(!(this.ttype instanceof de.TFunc))throw new Error("getArgs() applied to non-function");return new e(this.suite,this.ttype.paramList)},e.prototype.getResult=function(){if(!(this.ttype instanceof de.TFunc))throw new Error("getResult() applied to non-function");return new e(this.suite,this.ttype.result)},e.prototype.getType=function(){return this.ttype},e.prototype._doCheck=function(e,t){if(!e(t,new he.NoopContext)){var r=new he.DetailContext;throw e(t,r),r.getError(this._path)}},e.prototype._doValidate=function(e,t){if(e(t,new he.NoopContext))return null;var r=new he.DetailContext;return e(t,r),r.getErrorDetail(this._path)},e.prototype._getMethod=function(e){var t=this.props.get(e);if(!t)throw new Error("Type has no property "+e);if(!(t instanceof de.TFunc))throw new Error("Property "+e+" is not a method");return t},e}();t.Checker=n}));le(pe);pe.TArray,pe.TEnumType,pe.TEnumLiteral,pe.TFunc,pe.TIface,pe.TLiteral,pe.TName,pe.TOptional,pe.TParam,pe.TParamList,pe.TProp,pe.TTuple,pe.TType,pe.TUnion;var ve=pe.array,ge=(pe.enumlit,pe.enumtype,pe.func,pe.iface),me=pe.lit,ye=pe.name,be=(pe.opt,pe.param,pe.tuple,pe.union),_e=(pe.BasicType,pe.createCheckers),we=(pe.Checker,{ZarrMetadataType:be("ZarrArrayMetadata","ZarrGroupMetadata"),UserAttributes:ye("object"),FillType:be("number",me("NaN"),me("Infinity"),me("-Infinity"),"null"),Order:be(me("C"),me("F")),DtypeString:be(me("<u1"),me("<i1"),me("<i4"),me("<f4"),me("<f8"),me("<b"),me("<B")),ChunksArgument:be("number",ve(be("number","null")),"boolean","null"),Compressor:ge([],{id:"string"}),Filter:ge([],{id:"string"}),ZarrArrayMetadata:ge([],{zarr_format:be(me(1),me(2)),shape:ve("number"),chunks:ve("number"),dtype:"DtypeString",compressor:be("null",ge([],{id:"string"})),fill_value:"FillType",order:"Order",filters:be("null",ve("Filter"))}),ZarrGroupMetadata:ge([],{zarr_format:be(me(1),me(2))})}),xe=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,"path ".concat(e," contains an array"))),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),Oe=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,"path ".concat(e," contains a group"))),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),Ee=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,"array not found at path ".concat(e))),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),ke=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,e)),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),je=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,"key ".concat(e," not present"))),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),Se=function(e){function t(e,r){var n;return Object(h.a)(this,t),n=Object(d.a)(this,Object(p.a)(t).call(this,"too many indices for array; expected ".concat(r.length,", got ").concat(e.length))),Object.setPrototypeOf(Object(v.a)(n),t.prototype),n}return Object(g.a)(t,e),t}(Object(m.a)(RangeError)),Pe=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,"index out of bounds for dimension with length ".concat(e))),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(RangeError)),Ae=function(e){function t(e,r,n,i){var a;return Object(h.a)(this,t),a=Object(d.a)(this,Object(p.a)(t).call(this,"slice arguments slice(".concat(e,", ").concat(r,", ").concat(n,") invalid: ").concat(i))),Object.setPrototypeOf(Object(v.a)(a),t.prototype),a}return Object(g.a)(t,e),t}(Object(m.a)(RangeError)),Te=function(e){function t(){var e;return Object(h.a)(this,t),e=Object(d.a)(this,Object(p.a)(t).call(this,"Negative step size is not supported when indexing.")),Object.setPrototypeOf(Object(v.a)(e),t.prototype),e}return Object(g.a)(t,e),t}(Object(m.a)(Error)),Re=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,e)),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),Ce=function(e){function t(e){var r;return Object(h.a)(this,t),r=Object(d.a)(this,Object(p.a)(t).call(this,e)),Object.setPrototypeOf(Object(v.a)(r),t.prototype),r}return Object(g.a)(t,e),t}(Object(m.a)(Error));function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0===e)throw new Ae(e,t,r,"The first argument must not be undefined");if("string"===typeof e&&":"!==e||"string"===typeof t&&":"!==t)throw new Ae(e,t,r,'Arguments can only be integers, ":" or null');return void 0===t&&(t=e,e=null),{start:":"===e?null:e,stop:":"===t?null:t,step:r,_slice:!0}}function Ie(e,t){var r,n,i;i=null===e.step?1:e.step,null===e.start?r=i<0?Number.MAX_SAFE_INTEGER:0:(r=e.start)<0&&(r+=t),null===e.stop?n=i<0?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:(n=e.stop)<0&&(n+=t);var a=function(e,t,r,n){if(e<0?(e+=n)<0&&(e=r<0?-1:0):e>=n&&(e=r<0?n-1:n),t<0?(t+=n)<0&&(t=r<0?-1:0):t>=n&&(t=r<0?n-1:n),r<0){if(t<e)return[e,t,r,Math.floor((e-t-1)/-r+1)]}else if(e<t)return[e,t,r,Math.floor((t-e-1)/r+1)];return[e,t,r,0]}(r,n,i,t);if(r=a[0],n=a[1],i=a[2],t=a[3],0===i)throw new Error("Step size 0 is invalid");return[r,n,i,t]}function Le(e){return Array.isArray(e)?e:[e]}function Fe(e,t){for(var r=[],n=[],i=0;i<e.length;i++){var a=e[i];if("number"===typeof a)r.push(a);else{var o=Ie(a,t[i]),s=o[3];n.push(s),r.push(o)}}return[r,n]}function Ne(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=De(e,t);for(var n=0;n<e.length;n++){var i=e[n];if("number"===typeof i)e[n]=r?Me(i,i+1,1):Be(i,t[n]);else{if(Ue(i))throw new TypeError("Integer array selections are not supported (yet)");":"!==i&&null!==i||(e[n]=Me(null,null,1))}}return e}function De(e,t){e=Le(e);for(var r=-1,n=0,i=0;i<e.length;i++)"..."===e[i]&&(r=i,n+=1);if(n>1)throw new RangeError("an index can only have a single ellipsis ('...')");if(1===n){var a=r,o=e.length-(a+1),s=e.length-1;if(s>=t.length)e=e.filter((function(e){return"..."!==e}));else{var u=t.length-s,c=e.slice(0,a).concat(new Array(u).fill(null));o>0&&(c=c.concat(e.slice(e.length-o))),e=c}}if(e.length<t.length){var l=t.length-e.length;e=e.concat(new Array(l).fill(null))}return function(e,t){if(e.length>t.length)throw new Se(e,t)}(e,t),e}function Be(e,t){if(e<0&&(e=t+e),e>=t||e<0)throw new Pe(t);return e}function Ue(e){if(!Array.isArray(e))return!1;var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if("number"!==typeof i.value)return!1}}catch(dr){r=!0,n=dr}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return!0}function ze(e){return null!==e&&!0===e._slice}function Ve(e){return ze(e)&&(null===e.step||1===e.step)}function Ge(e){e=Le(e);for(var t=0;t<e.length;t++){var r=e[t];if(!Ue(r)&&!Ve(r)&&"..."!==r)return!1}return!0}function He(){var e,t,r,n,i,a,o=arguments;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(e=o.length,t=new Array(e),r=0;r<e;r++)t[r]=o[r];if(0!==t.length){s.next=3;break}return s.abrupt("return");case 3:n=t.map((function(e){return e()})),i=n.map((function(e){return e.next()})),a=0;case 6:if(!i[a].done){s.next=13;break}if(n[a]=t[a](),i[a]=n[a].next(),!(++a>=n.length)){s.next=11;break}return s.abrupt("return");case 11:s.next=16;break;case 13:return s.next=15,i.map((function(e){return e.value}));case 15:a=0;case 16:i[a]=n[a].next();case 17:s.next=6;break;case 19:case"end":return s.stop()}}),C)}var We=function(){function e(t,r){Object(h.a)(this,e),t=Ne(t,r.shape),this.dimIndexers=[];for(var n=r.shape,i=0;i<n.length;i++){var a=t[i],o=n[i],s=r.chunks[i];if(null===a&&(a=Me(null)),"number"===typeof a)this.dimIndexers.push(new Xe(a,o,s));else{if(!ze(a))throw new RangeError("Unspported selection item for basic indexing; expected integer or slice, got ".concat(a));this.dimIndexers.push(new Ze(a,o,s))}}this.shape=[];var u=!0,c=!1,l=void 0;try{for(var f,d=this.dimIndexers[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value;p instanceof Ze&&this.shape.push(p.numItems)}}catch(dr){c=!0,l=dr}finally{try{u||null==d.return||d.return()}finally{if(c)throw l}}this.dropAxes=null}return Object(c.a)(e,[{key:"iter",value:f.a.mark((function e(){var t,r,n,i,a,o,s,c,l,h,d,p,v,g,m,y,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.dimIndexers.map((function(e){return function(){return e.iter()}})),r=He.apply(void 0,Object(u.a)(t)),n=!0,i=!1,a=void 0,e.prev=5,o=r[Symbol.iterator]();case 7:if(n=(s=o.next()).done){e.next=36;break}for(c=s.value,l=[],h=[],d=[],p=!0,v=!1,g=void 0,e.prev=15,m=c[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)b=y.value,l.push(b.dimChunkIndex),h.push(b.dimChunkSelection),null!==b.dimOutSelection&&d.push(b.dimOutSelection);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),v=!0,g=e.t0;case 23:e.prev=23,e.prev=24,p||null==m.return||m.return();case 26:if(e.prev=26,!v){e.next=29;break}throw g;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.next=33,{chunkCoords:l,chunkSelection:h,outSelection:d};case 33:n=!0,e.next=7;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(5),i=!0,a=e.t1;case 42:e.prev=42,e.prev=43,n||null==o.return||o.return();case 45:if(e.prev=45,!i){e.next=48;break}throw a;case 48:return e.finish(45);case 49:return e.finish(42);case 50:case"end":return e.stop()}}),e,this,[[5,38,42,50],[15,19,23,31],[24,,26,30],[43,,45,49]])}))}]),e}(),Xe=function(){function e(t,r,n){Object(h.a)(this,e),t=Be(t,r),this.dimSelection=t,this.dimLength=r,this.dimChunkLength=n,this.numItems=1}return Object(c.a)(e,[{key:"iter",value:f.a.mark((function e(){var t,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(this.dimSelection/this.dimChunkLength),r=t*this.dimChunkLength,n=this.dimSelection-r,null,e.next=6,{dimChunkIndex:t,dimChunkSelection:n,dimOutSelection:null};case 6:case"end":return e.stop()}}),e,this)}))}]),e}(),Ze=function(){function e(t,r,n){Object(h.a)(this,e);var i=Ie(t,r),a=Object(s.a)(i,3),o=a[0],u=a[1],c=a[2];if(this.start=o,this.stop=u,this.step=c,this.step<1)throw new Te;this.dimLength=r,this.dimChunkLength=n,this.numItems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.numChunks=Math.ceil(this.dimLength/this.dimChunkLength)}return Object(c.a)(e,[{key:"iter",value:f.a.mark((function e(){var t,r,n,i,a,o,s,u,c,l,h,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Math.floor(this.start/this.dimChunkLength),r=Math.ceil(this.stop/this.dimChunkLength),n=t;case 3:if(!(n<r)){e.next=20;break}return i=n*this.dimChunkLength,a=Math.min(this.dimLength,(n+1)*this.dimChunkLength),o=a-i,s=void 0,u=void 0,c=void 0,this.start<i?(s=0,(l=(i-this.start)%this.step)>0&&(s+=this.step-l),c=Math.ceil((i-this.start)/this.step)):(s=this.start-i,c=0),u=this.stop>a?o:this.stop-i,h=Me(s,u,this.step),d=Math.ceil((u-s)/this.step),p=Me(c,c+d),e.next=17,{dimChunkIndex:n,dimChunkSelection:h,dimOutSelection:p};case 17:n++,e.next=3;break;case 20:case"end":return e.stop()}}),e,this)}))}]),e}(),Ye=_e(we),qe="undefined"!==typeof i&&i.versions&&i.versions.node;function Ke(e){if(null===e)return"";for(e instanceof String&&(e=e.valueOf()),e=e.replace(/\\/g,"/");e.length>0&&"/"===e[0];)e=e.slice(1);for(;e.length>0&&"/"===e[e.length-1];)e=e.slice(0,e.length-1);var t=(e=e.replace(/\/\/+/g,"/")).split("/"),r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if("."===s||".."===s)throw Error("path containing '.' or '..' segment not allowed")}}catch(dr){n=!0,i=dr}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return e}function $e(e){return"number"===typeof e&&(e=[e]),e.map((function(e){return Math.floor(e)}))}function Qe(e,t){if(Ye.ChunksArgument.check(e),null===e||!0===e)throw new Error("Chunk guessing is not supported yet");return!1===e?t:("number"===typeof e&&(e=[e]),e.length<t.length&&(e=e.concat(t.slice(e.length))),e.map((function(e,r){return-1===e||null===e?t[r]:Math.floor(e)})))}function Je(e){return e=e.toUpperCase(),Ye.Order.check(e),e}function et(e){return Ye.DtypeString.check(e),e}function tt(e){return Ye.FillType.check(e),e}function rt(e,t){if(null===e)return!0;Array.isArray(e)||(e=[e]);for(var r=0;r<Math.min(e.length,t.length);r++){var n=e[r];if(null!==n){if(ze(n)){var i=n,a=1===i.step||null===i.step;if(null===i.start&&null===i.stop&&a)continue;if(i.stop-i.start===t[r]&&a)continue;return!1}return!1}}return!0}function nt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function it(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map((function(e,t){return 0===t?e.trim().replace(/[\/]*$/g,""):e.trim().replace(/(^[\/]*|[\/]*$)/g,"")})).filter((function(e){return e.length})).join("/")}function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ue(this,void 0,void 0,f.a.mark((function r(){var n,i;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Ke(t),n=st(t),i=n+".zarray",r.abrupt("return",e.containsItem(i));case 4:case"end":return r.stop()}}),r)})))}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ue(this,void 0,void 0,f.a.mark((function r(){var n,i;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Ke(t),n=st(t),i=n+".zgroup",r.abrupt("return",e.containsItem(i));case 4:case"end":return r.stop()}}),r)})))}function st(e){return e.length>0?e+"/":""}function ut(e,t,r,n){return ue(this,void 0,void 0,f.a.mark((function r(){var i,a,o,s,u,c,l,h;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==t.length){r.next=2;break}return r.abrupt("return");case 2:i=t.split("/"),a="",o=!0,s=!1,u=void 0,r.prev=7,c=i.slice(0,i.length-1)[Symbol.iterator]();case 9:if(o=(l=c.next()).done){r.next=28;break}return h=l.value,a+=h,r.next=14,at(e,a);case 14:if(!r.sent){r.next=19;break}return r.next=17,ct(e,a,n);case 17:r.next=24;break;case 19:return r.next=21,ot(e,a);case 21:if(r.sent){r.next=24;break}return r.next=24,ct(e,a);case 24:a+="/";case 25:o=!0,r.next=9;break;case 28:r.next=34;break;case 30:r.prev=30,r.t0=r.catch(7),s=!0,u=r.t0;case 34:r.prev=34,r.prev=35,o||null==c.return||c.return();case 37:if(r.prev=37,!s){r.next=40;break}throw u;case 40:return r.finish(37);case 41:return r.finish(34);case 42:case"end":return r.stop()}}),r,null,[[7,30,34,42],[35,,37,41]])})))}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ue(this,void 0,void 0,f.a.mark((function n(){var i,a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=Ke(t),!r){n.next=5;break}throw Error("Group overwriting not implemented yet :(");case 5:return n.next=7,at(e,t);case 7:if(!n.sent){n.next=11;break}throw new xe(t);case 11:return n.next=13,ot(e,t);case 13:if(!n.sent){n.next=15;break}throw new Oe(t);case 15:return i={zarr_format:2},a=st(t)+".zgroup",n.next=19,e.setItem(a,JSON.stringify(i));case 19:case"end":return n.stop()}}),n)})))}function lt(e,t,r,n,i,a,o,s,u,c,l){return ue(this,void 0,void 0,f.a.mark((function c(){var h,d,p;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!u){c.next=4;break}throw Error("Array overwriting not implemented yet :(");case 4:return c.next=6,at(e,i);case 6:if(!c.sent){c.next=10;break}throw new xe(i);case 10:return c.next=12,ot(e,i);case 12:if(!c.sent){c.next=14;break}throw new Oe(i);case 14:if(n=et(n),t=$e(t),r=Qe(r,t),s=Je(s),o=tt(o),!(null!==l&&l.length>0)){c.next=21;break}throw Error("Filters are not supported yet");case 21:return h=o,"number"===typeof o&&(Number.isNaN(o)&&(h="NaN"),Number.POSITIVE_INFINITY===o&&(h="Infinity"),Number.NEGATIVE_INFINITY===o&&(h="-Infinity")),d={zarr_format:2,shape:t,chunks:r,dtype:n,fill_value:h,order:s,compressor:a,filters:l=null},p=st(i)+".zarray",c.next=28,e.setItem(p,JSON.stringify(d));case 28:case"end":return c.stop()}}),c)})))}function ft(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"C",u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=(arguments.length>9&&void 0!==arguments[9]&&arguments[9],arguments.length>10&&void 0!==arguments[10]?arguments[10]:null);return ue(this,void 0,void 0,f.a.mark((function l(){return f.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return i=Ke(i),l.next=3,ut(e,i,0,u);case 3:return l.next=5,lt(e,t,r,n,i,a,o,s,u,0,c);case 5:case"end":return l.stop()}}),l)})))}function ht(e){return"string"!==typeof e?qe&&n.isBuffer(e)?JSON.parse(e.toString()):e instanceof ArrayBuffer?JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))):e:JSON.parse(e)}var dt=function(){function e(t,r,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(h.a)(this,e),this.store=t,this.key=r,this.readOnly=n,this.cache=i,this.cachedValue=null}return Object(c.a)(e,[{key:"asObject",value:function(){return ue(this,void 0,void 0,f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache||null===this.cachedValue){e.next=2;break}return e.abrupt("return",this.cachedValue);case 2:return e.next=4,this.getNoSync();case 4:return t=e.sent,this.cache&&(this.cachedValue=t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getNoSync",value:function(){return ue(this,void 0,void 0,f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.store.getItem(this.key);case 3:return t=e.sent,e.abrupt("return",ht(t));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"setNoSync",value:function(e,t){return ue(this,void 0,void 0,f.a.mark((function r(){var n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNoSync();case 2:return(n=r.sent)[e]=t,r.next=6,this.putNoSync(n);case 6:return r.abrupt("return",!0);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"putNoSync",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.setItem(this.key,JSON.stringify(e));case 2:this.cache&&(this.cachedValue=e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"delNoSync",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNoSync();case 2:return delete(r=t.sent)[e],t.next=6,this.putNoSync(r);case 6:return t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"put",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.readOnly){t.next=2;break}throw new ke("attributes are read-only");case 2:return t.abrupt("return",this.putNoSync(e));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setItem",value:function(e,t){return ue(this,void 0,void 0,f.a.mark((function r(){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.readOnly){r.next=2;break}throw new ke("attributes are read-only");case 2:return r.abrupt("return",this.setNoSync(e,t));case 3:case"end":return r.stop()}}),r,this)})))}},{key:"getItem",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.asObject();case 2:return t.t0=e,t.abrupt("return",t.sent[t.t0]);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"deleteItem",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.readOnly){t.next=2;break}throw new ke("attributes are read-only");case 2:return t.abrupt("return",this.delNoSync(e));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"containsItem",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.asObject();case 2:return t.t0=e,t.t1=t.sent[t.t0],t.t2=void 0,t.abrupt("return",t.t1!==t.t2);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"proxy",value:function(){return se(this)}}]),e}(),pt={"<b":Int8Array,"<B":Uint8Array,"<u1":Uint8Array,"<i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f8":Float64Array};function vt(e){if(e instanceof Uint8Array)return"<u1";if(e instanceof Int8Array)return"<i1";if(e instanceof Uint16Array)return"<u2";if(e instanceof Int16Array)return"<i2";if(e instanceof Uint32Array)return"<u4";if(e instanceof Int32Array)return"<i4";if(e instanceof Float32Array)return"<f4";if(e instanceof Float64Array)return"<f8";throw new Re("Mapping for TypedArray to Dtypestring not known")}function gt(e){return void 0!==e.byteLength?e.constructor:gt(e[0])}function mt(e,t,r){var n=Fe(Ne(r,t),t),i=Object(s.a)(n,2),a=i[0],o=i[1];return[function e(t,r,n){var i=n[0];if("number"===typeof i)return 1===r.length?t[i]:e(t[i],r.slice(1),n.slice(1));var a=Object(s.a)(i,4),o=a[0],u=a[1],c=a[2],l=a[3];if(0===l)return new(gt(t))(0);if(1===r.length){if(1===c)return t.slice(o,u);for(var f=new t.constructor(l),h=0;h<l;h++)f[h]=t[o+h*c];return f}for(var d=new Array(l),p=0;p<l;p++)d[p]=e(t[o+p*c],r.slice(1),n.slice(1));if(l>0&&"number"===typeof d[0]){var v=t[0].constructor;d=v.from(d)}return d}(e,t,a),o]}function yt(e,t,r,n){var i=Fe(Ne(n,r,!0),r),a=Object(s.a)(i,2),o=a[0];a[1];_t(e,t,r,o)}function bt(e,t,r,n,i){var a=Fe(Ne(i,r,!1),r),o=Object(s.a)(a,2),u=o[0],c=o[1];if(JSON.stringify(c)!==JSON.stringify(n))throw new Re("Shape mismatch in target and source NestedArray: ".concat(c," and ").concat(n));!function e(t,r,n,i){var a=i[0];if("number"===typeof r)return void _t(t,r,n,i.map((function(e){return"number"===typeof e?[e,e+1,1,1]:e})));if("number"===typeof a)return void e(t[a],r,n.slice(1),i.slice(1));var o=Object(s.a)(a,4),u=o[0],c=(o[1],o[2]),l=o[3];if(1===n.length){if(1===c)t.set(r,u);else for(var f=0;f<l;f++)t[u+f*c]=r[f];return}for(var h=0;h<l;h++)e(t[u+h*c],r[h],n.slice(1),i.slice(1))}(e,t,r,u)}function _t(e,t,r,n){var i=n[0],a=Object(s.a)(i,4),o=a[0],u=a[1],c=a[2],l=a[3];if(1!==r.length)for(var f=0;f<l;f++)_t(e[o+f*c],t,r.slice(1),n.slice(1));else if(1===c)e.fill(t,o,u);else for(var h=0;h<l;h++)e[o+h*c]=t}function wt(e,t,r){void 0===r&&(r=gt(e));var n=new r(t.reduce((function(e,t){return e*t}),1));return function e(t,r,n,i){if(1===r.length)return void n.set(t,i);if(2===r.length){for(var a=0;a<r[0];a++)n.set(t[a],i+r[1]*a);return t}for(var o=r.slice(1),s=o.reduce((function(e,t){return e*t}),1),u=0;u<r[0];u++)e(t[u],o,n,i+s*u);return t}(e,t,n,0),n}var xt=function(){function e(t,r,i){Object(h.a)(this,e);var a=null!==t&&!!t.BYTES_PER_ELEMENT;if(void 0===r){if(!a)throw new Re("Shape argument is required unless you pass in a TypedArray");r=[t.length]}if(void 0===i){if(!a)throw new Re("Dtype argument is required unless you pass in a TypedArray");i=vt(t)}if(r=$e(r),this.shape=r,this.dtype=i,a&&1!==r.length&&(t=t.buffer),0===this.shape.length)this.data=new pt[i](1);else if(qe&&n.isBuffer(t)||t instanceof ArrayBuffer||null===t||t.toString().startsWith("[object ArrayBuffer]")){var o=r.reduce((function(e,t){return e*t}),1);null===t&&(t=new ArrayBuffer(o*parseInt(i[i.length-1],10)));var s=t.byteLength/parseInt(i[i.length-1],10);if(o!==s)throw new Error("Buffer has ".concat(s," of dtype ").concat(i,", shape is too large or small ").concat(r," (flat=").concat(o,")"));var u=pt[i];this.data=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(1===n.length)return new r(t.slice(i,i+n[0]*r.BYTES_PER_ELEMENT));var a=new Array(n[0]);if(2===n.length){for(var o=0;o<n[0];o++)a[o]=new r(t.slice(i+n[1]*o*r.BYTES_PER_ELEMENT,i+n[1]*(o+1)*r.BYTES_PER_ELEMENT));return a}for(var s=n.slice(1),u=s.reduce((function(e,t){return e*t}),1),c=0;c<n[0];c++)a[c]=e(t,r,s,i+u*c*r.BYTES_PER_ELEMENT);return a}(t,u,r)}else this.data=t}return Object(c.a)(e,[{key:"get",value:function(t){var r=mt(this.data,this.shape,t),n=Object(s.a)(r,2),i=n[0],a=n[1];return 0===a.length?i:new e(i,a,this.dtype)}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;null===e&&(e=[Me(null)]),"number"===typeof t?0===this.shape.length?this.data[0]=t:yt(this.data,t,this.shape,e):bt(this.data,t.data,this.shape,t.shape,e)}},{key:"flatten",value:function(){return 1===this.shape.length?this.data:wt(this.data,this.shape,pt[this.dtype])}}],[{key:"arange",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"<i4",n=pt[r],i=Ot([t],n);return new e(i,[t],r)}}]),e}();function Ot(e,t){var r=e.reduce((function(e,t){return e*t}),1),n=new t(r);return n.set(Object(u.a)(Array(r).keys())),n}function Et(e,t,r,n,i){var a=Fe(Ne(n,r,!0),r);!function e(t,r,n,i){var a=Object(o.a)(i),u=a[0],c=a.slice(1),l=Object(o.a)(n),f=l[0],h=l.slice(1),d=Object(s.a)(u,4),p=d[0],v=(d[1],d[2]),g=d[3];if(1===n.length){if(1===v&&1===f)r.fill(t,p,p+g);else for(var m=0;m<g;m++)r[f*(p+v*m)]=t;return}for(var y=0;y<g;y++)e(t,r.subarray(f*(p+v*y)),h,c)}(i,e,t,Object(s.a)(a,1)[0])}function kt(e,t,r,n,i,a,u){var c=Fe(Ne(n,r,!1),r),l=Object(s.a)(c,2),f=l[0],h=l[1];if(JSON.stringify(h)!==JSON.stringify(u))throw new Re("Shape mismatch in target and source RawArray: ".concat(h," and ").concat(u));!function e(t,r,n,i,a){if(0===n.length)return void t.set(i);var u=Object(o.a)(n),c=u[0],l=u.slice(1),f=Object(o.a)(r),h=f[0],d=f.slice(1);if("number"===typeof c)return void e(t.subarray(c*h),d,l,i,a);var p=Object(o.a)(a),v=p[0],g=p.slice(1),m=Object(s.a)(c,4),y=m[0],b=(m[1],m[2]),_=m[3];if(1===r.length){if(1===b&&1===h&&1===v)t.set(i.subarray(0,_),y);else for(var w=0;w<_;w++)t[h*(y+b*w)]=i[v*w];return}for(var x=0;x<_;x++)e(t.subarray(h*(y+x*b)),d,l,i.subarray(v*x),g)}(e,t,f,i,a)}function jt(e,t,r,n,i,a,u,c){var l=Fe(Ne(n,r,!0),r),f=Object(s.a)(l,1)[0],h=Fe(Ne(c,u,!1),u);!function e(t,r,n,i,a,u){if(0===u.length)return void t.set(i.subarray(0,t.length));var c=Object(o.a)(n),l=c[0],f=c.slice(1),h=Object(o.a)(u),d=h[0],p=h.slice(1),v=Object(o.a)(r),g=v[0],m=v.slice(1),y=Object(o.a)(a),b=y[0],_=y.slice(1);if("number"===typeof d)return void e(t,r,n,i.subarray(b*d),_,p);var w=Object(s.a)(l,4),x=w[0],O=(w[1],w[2]),E=w[3],k=Object(s.a)(d,4),j=k[0],S=(k[1],k[2]);k[3];if(1===r.length&&1===a.length){if(1===O&&1===g&&1===S&&1===b)t.set(i.subarray(j,j+E),x);else for(var P=0;P<E;P++)t[g*(x+O*P)]=i[b*(j+S*P)];return}for(var A=0;A<E;A++)e(t.subarray(g*(x+A*O)),m,f,i.subarray(b*(j+A*S)),_,p)}(e,t,f,i,a,Object(s.a)(h,1)[0])}var St=function(){function e(t,r,i,a){Object(h.a)(this,e);var o=null!==t&&!!t.BYTES_PER_ELEMENT;if(void 0===r){if(!o)throw new Re("Shape argument is required unless you pass in a TypedArray");r=[t.length]}if(r=$e(r),void 0===i){if(!o)throw new Re("Dtype argument is required unless you pass in a TypedArray");i=vt(t)}if(void 0===a&&(a=function(e){for(var t=e.length,r=Array(t),n=1,i=t-1;i>=0;i--)r[i]=n,n*=e[i];return r}(r)),this.shape=r,this.dtype=i,this.strides=a,o&&1!==r.length&&(t=t.buffer),0===this.shape.length)this.data=new pt[i](1);else if(qe&&n.isBuffer(t)||t instanceof ArrayBuffer||null===t||t.toString().startsWith("[object ArrayBuffer]")){var s=r.reduce((function(e,t){return e*t}),1);null===t&&(t=new ArrayBuffer(s*parseInt(i[i.length-1],10)));var u=t.byteLength/parseInt(i[i.length-1],10);if(s!==u)throw new Error("Buffer has ".concat(u," of dtype ").concat(i,", shape is too large or small ").concat(r," (flat=").concat(s,")"));var c=pt[i];this.data=new c(t)}else this.data=t}return Object(c.a)(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;null===t&&(t=[Me(null)]),"number"===typeof r?0===this.shape.length?this.data[0]=r:Et(this.data,this.strides,this.shape,t,r):r instanceof e&&n?jt(this.data,this.strides,this.shape,t,r.data,r.strides,r.shape,n):kt(this.data,this.strides,this.shape,t,r.data,r.strides,r.shape)}}]),e}(),Pt=fe((function(e,t){var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,o;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)}));Pt.assign,Pt.shrinkBuf,Pt.setTyped,Pt.Buf8,Pt.Buf16,Pt.Buf32;function At(e){for(var t=e.length;--t>=0;)e[t]=0}var Tt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Rt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],It=new Array(576);At(It);var Lt=new Array(60);At(Lt);var Ft=new Array(512);At(Ft);var Nt=new Array(256);At(Nt);var Dt=new Array(29);At(Dt);var Bt,Ut,zt,Vt=new Array(30);function Gt(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function Ht(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Wt(e){return e<256?Ft[e]:Ft[256+(e>>>7)]}function Xt(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Zt(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Xt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Yt(e,t,r){Zt(e,r[2*t],r[2*t+1])}function qt(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function Kt(e,t,r){var n,i,a=new Array(16),o=0;for(n=1;n<=15;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=qt(a[s]++,s))}}function $t(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Qt(e){e.bi_valid>8?Xt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Jt(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function er(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Jt(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Jt(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function tr(e,t,r){var n,i,a,o,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===n?Yt(e,i,t):(Yt(e,(a=Nt[i])+256+1,t),0!==(o=Tt[a])&&Zt(e,i-=Dt[a],o),Yt(e,a=Wt(--n),r),0!==(o=Rt[a])&&Zt(e,n-=Vt[a],o))}while(s<e.last_lit);Yt(e,256,t)}function rr(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)er(e,a,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],er(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,er(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,v=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)>p&&(a=p,v++),u[2*n+1]=a,n>c||(e.bl_count[a]++,o=0,n>=d&&(o=h[n-d]),s=u[2*n],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==v){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,v-=2}while(v>0);for(a=p;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>c||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(e,t),Kt(a,c,e.bl_count)}function nr(e,t,r){var n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<u&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))}function ir(e,t,r){var n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<u&&i===o)){if(s<c)do{Yt(e,i,e.bl_tree)}while(0!==--s);else 0!==i?(i!==a&&(Yt(e,i,e.bl_tree),s--),Yt(e,16,e.bl_tree),Zt(e,s-3,2)):s<=10?(Yt(e,17,e.bl_tree),Zt(e,s-3,3)):(Yt(e,18,e.bl_tree),Zt(e,s-11,7));s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}}At(Vt);var ar=!1;function or(e,t,r,n){Zt(e,0+(n?1:0),3),function(e,t,r,n){Qt(e),n&&(Xt(e,r),Xt(e,~r)),Pt.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}var sr={_tr_init:function(e){ar||(!function(){var e,t,r,n,i,a=new Array(16);for(r=0,n=0;n<28;n++)for(Dt[n]=r,e=0;e<1<<Tt[n];e++)Nt[r++]=n;for(Nt[r-1]=n,i=0,n=0;n<16;n++)for(Vt[n]=i,e=0;e<1<<Rt[n];e++)Ft[i++]=n;for(i>>=7;n<30;n++)for(Vt[n]=i<<7,e=0;e<1<<Rt[n]-7;e++)Ft[256+i++]=n;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)It[2*e+1]=8,e++,a[8]++;for(;e<=255;)It[2*e+1]=9,e++,a[9]++;for(;e<=279;)It[2*e+1]=7,e++,a[7]++;for(;e<=287;)It[2*e+1]=8,e++,a[8]++;for(Kt(It,287,a),e=0;e<30;e++)Lt[2*e+1]=5,Lt[2*e]=qt(e,5);Bt=new Gt(It,Tt,257,286,15),Ut=new Gt(Lt,Rt,0,30,15),zt=new Gt(new Array(0),Ct,0,19,7)}(),ar=!0),e.l_desc=new Ht(e.dyn_ltree,Bt),e.d_desc=new Ht(e.dyn_dtree,Ut),e.bl_desc=new Ht(e.bl_tree,zt),e.bi_buf=0,e.bi_valid=0,$t(e)},_tr_stored_block:or,_tr_flush_block:function(e,t,r,n){var i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),rr(e,e.l_desc),rr(e,e.d_desc),o=function(e){var t;for(nr(e,e.dyn_ltree,e.l_desc.max_code),nr(e,e.dyn_dtree,e.d_desc.max_code),rr(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Mt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?or(e,t,r,n):4===e.strategy||a===i?(Zt(e,2+(n?1:0),3),tr(e,It,Lt)):(Zt(e,4+(n?1:0),3),function(e,t,r,n){var i;for(Zt(e,t-257,5),Zt(e,r-1,5),Zt(e,n-4,4),i=0;i<n;i++)Zt(e,e.bl_tree[2*Mt[i]+1],3);ir(e,e.dyn_ltree,t-1),ir(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),tr(e,e.dyn_ltree,e.dyn_dtree)),$t(e),n&&Qt(e)},_tr_tally:function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(Nt[r]+256+1)]++,e.dyn_dtree[2*Wt(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){Zt(e,2,3),Yt(e,256,It),function(e){16===e.bi_valid?(Xt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}};var ur=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};var cr=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();var lr,fr=function(e,t,r,n){var i=cr,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},hr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function dr(e,t){return e.msg=hr[t],t}function pr(e){return(e<<1)-(e>4?9:0)}function vr(e){for(var t=e.length;--t>=0;)e[t]=0}function gr(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(Pt.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function mr(e,t){sr._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,gr(e.strm)}function yr(e,t){e.pending_buf[e.pending++]=t}function br(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function _r(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,Pt.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=ur(e.adler,t,i,r):2===e.state.wrap&&(e.adler=fr(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function wr(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+258,d=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(r=t)+o]===p&&c[r+o-1]===d&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<h);if(n=258-(h-a),a=h-258,n>o){if(e.match_start=t,o=n,n>=s)break;d=c[a+o-1],p=c[a+o]}}}while((t=f[t&l])>u&&0!==--i);return o<=e.lookahead?o:e.lookahead}function xr(e){var t,r,n,i,a,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-262)){Pt.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=o?n-o:0}while(--r);t=r=o;do{n=e.prev[--t],e.prev[t]=n>=o?n-o:0}while(--r);i+=o}if(0===e.strm.avail_in)break;if(r=_r(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+3-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function Or(e,t){for(var r,n;;){if(e.lookahead<262){if(xr(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=wr(e,r)),e.match_length>=3)if(n=sr._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=sr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(mr(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(mr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(mr(e,!1),0===e.strm.avail_out)?1:2}function Er(e,t){for(var r,n,i;;){if(e.lookahead<262){if(xr(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=wr(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=sr._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(mr(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=sr._tr_tally(e,0,e.window[e.strstart-1]))&&mr(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=sr._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(mr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(mr(e,!1),0===e.strm.avail_out)?1:2}function kr(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function jr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Pt.Buf16(1146),this.dyn_dtree=new Pt.Buf16(122),this.bl_tree=new Pt.Buf16(78),vr(this.dyn_ltree),vr(this.dyn_dtree),vr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Pt.Buf16(16),this.heap=new Pt.Buf16(573),vr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Pt.Buf16(573),vr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Sr(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,sr._tr_init(t),0):dr(e,-2)}function Pr(e){var t,r=Sr(e);return 0===r&&((t=e.state).window_size=2*t.w_size,vr(t.head),t.max_lazy_match=lr[t.level].max_lazy,t.good_match=lr[t.level].good_length,t.nice_match=lr[t.level].nice_length,t.max_chain_length=lr[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function Ar(e,t,r,n,i,a){if(!e)return-2;var o=1;if(-1===t&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||8!==r||n<8||n>15||t<0||t>9||a<0||a>4)return dr(e,-2);8===n&&(n=9);var s=new jr;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Pt.Buf8(2*s.w_size),s.head=new Pt.Buf16(s.hash_size),s.prev=new Pt.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Pt.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=r,Pr(e)}lr=[new kr(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(xr(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,mr(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(mr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(mr(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(mr(e,!1),e.strm.avail_out),1)})),new kr(4,4,8,4,Or),new kr(4,5,16,8,Or),new kr(4,6,32,32,Or),new kr(4,4,16,16,Er),new kr(8,16,32,32,Er),new kr(8,16,128,128,Er),new kr(8,32,128,256,Er),new kr(32,128,258,1024,Er),new kr(32,258,258,4096,Er)];var Tr={deflateInit:function(e,t){return Ar(e,t,8,15,8,0)},deflateInit2:Ar,deflateReset:Pr,deflateResetKeep:Sr,deflateSetHeader:function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},deflate:function(e,t){var r,n,i,a;if(!e||!e.state||t>5||t<0)return e?dr(e,-2):-2;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return dr(e,0===e.avail_out?-5:-2);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,yr(n,31),yr(n,139),yr(n,8),n.gzhead?(yr(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),yr(n,255&n.gzhead.time),yr(n,n.gzhead.time>>8&255),yr(n,n.gzhead.time>>16&255),yr(n,n.gzhead.time>>24&255),yr(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),yr(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(yr(n,255&n.gzhead.extra.length),yr(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=fr(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(yr(n,0),yr(n,0),yr(n,0),yr(n,0),yr(n,0),yr(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),yr(n,3),n.status=113);else{var o=8+(n.w_bits-8<<4)<<8;o|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(o|=32),o+=31-o%31,n.status=113,br(n,o),0!==n.strstart&&(br(n,e.adler>>>16),br(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=fr(e.adler,n.pending_buf,n.pending-i,i)),gr(e),i=n.pending,n.pending!==n.pending_buf_size));)yr(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=fr(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=fr(e.adler,n.pending_buf,n.pending-i,i)),gr(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,yr(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=fr(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=fr(e.adler,n.pending_buf,n.pending-i,i)),gr(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,yr(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=fr(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&gr(e),n.pending+2<=n.pending_buf_size&&(yr(n,255&e.adler),yr(n,e.adler>>8&255),e.adler=0,n.status=113)):n.status=113),0!==n.pending){if(gr(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&pr(t)<=pr(r)&&4!==t)return dr(e,-5);if(666===n.status&&0!==e.avail_in)return dr(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var s=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(xr(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=sr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(mr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(mr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(mr(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=258){if(xr(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=e.strstart+258;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=258-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=sr._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=sr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(mr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(mr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(mr(e,!1),0===e.strm.avail_out)?1:2}(n,t):lr[n.level].func(n,t);if(3!==s&&4!==s||(n.status=666),1===s||3===s)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===s&&(1===t?sr._tr_align(n):5!==t&&(sr._tr_stored_block(n,0,0,!1),3===t&&(vr(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),gr(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(yr(n,255&e.adler),yr(n,e.adler>>8&255),yr(n,e.adler>>16&255),yr(n,e.adler>>24&255),yr(n,255&e.total_in),yr(n,e.total_in>>8&255),yr(n,e.total_in>>16&255),yr(n,e.total_in>>24&255)):(br(n,e.adler>>>16),br(n,65535&e.adler)),gr(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},deflateEnd:function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?dr(e,-2):(e.state=null,113===t?dr(e,-3):0):-2},deflateSetDictionary:function(e,t){var r,n,i,a,o,s,u,c,l=t.length;if(!e||!e.state)return-2;if(2===(a=(r=e.state).wrap)||1===a&&42!==r.status||r.lookahead)return-2;for(1===a&&(e.adler=ur(e.adler,t,l,0)),r.wrap=0,l>=r.w_size&&(0===a&&(vr(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new Pt.Buf8(r.w_size),Pt.arraySet(c,t,l-r.w_size,r.w_size,0),t=c,l=r.w_size),o=e.avail_in,s=e.next_in,u=e.input,e.avail_in=l,e.next_in=0,e.input=t,xr(r);r.lookahead>=3;){n=r.strstart,i=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=2,xr(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=u,e.avail_in=o,r.wrap=a,0},deflateInfo:"pako deflate (from Nodeca project)"},Rr=!0,Cr=!0;try{String.fromCharCode.apply(null,[0])}catch(Xn){Rr=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Xn){Cr=!1}for(var Mr=new Pt.Buf8(256),Ir=0;Ir<256;Ir++)Mr[Ir]=Ir>=252?6:Ir>=248?5:Ir>=240?4:Ir>=224?3:Ir>=192?2:1;Mr[254]=Mr[254]=1;function Lr(e,t){if(t<65534&&(e.subarray&&Cr||!e.subarray&&Rr))return String.fromCharCode.apply(null,Pt.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}var Fr=function(e){var t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)55296===(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320===(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Pt.Buf8(s),a=0,i=0;a<s;i++)55296===(64512&(r=e.charCodeAt(i)))&&i+1<o&&56320===(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},Nr=function(e){return Lr(e,e.length)},Dr=function(e){for(var t=new Pt.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},Br=function(e,t){var r,n,i,a,o=t||e.length,s=new Array(2*o);for(n=0,r=0;r<o;)if((i=e[r++])<128)s[n++]=i;else if((a=Mr[i])>4)s[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&r<o;)i=i<<6|63&e[r++],a--;a>1?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return Lr(s,n)},Ur=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+Mr[e[r]]>t?r:t};var zr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Vr=Object.prototype.toString;function Gr(e){if(!(this instanceof Gr))return new Gr(e);this.options=Pt.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zr,this.strm.avail_out=0;var r=Tr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(hr[r]);if(t.header&&Tr.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"===typeof t.dictionary?Fr(t.dictionary):"[object ArrayBuffer]"===Vr.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=Tr.deflateSetDictionary(this.strm,n)))throw new Error(hr[r]);this._dict_set=!0}}function Hr(e,t){var r=new Gr(t);if(r.push(e,!0),r.err)throw r.msg||hr[r.err];return r.result}Gr.prototype.push=function(e,t){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"===typeof e?i.input=Fr(e):"[object ArrayBuffer]"===Vr.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Pt.Buf8(a),i.next_out=0,i.avail_out=a),1!==(r=Tr.deflate(i,n))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(Nr(Pt.shrinkBuf(i.output,i.next_out))):this.onData(Pt.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=Tr.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==n||(this.onEnd(0),i.avail_out=0,!0)},Gr.prototype.onData=function(e){this.chunks.push(e)},Gr.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Pt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Wr={Deflate:Gr,deflate:Hr,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Hr(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Hr(e,t)}},Xr=function(e,t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,g,m,y,b,_,w,x,O,E,k,j;r=e.state,n=e.next_in,k=e.input,i=n+(e.avail_in-5),a=e.next_out,j=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,v=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(d+=k[n++]<<p,p+=8,d+=k[n++]<<p,p+=8),b=v[d&m];t:for(;;){if(d>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))j[a++]=65535&b;else{if(!(16&_)){if(0===(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&b,(_&=15)&&(p<_&&(d+=k[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=k[n++]<<p,p+=8,d+=k[n++]<<p,p+=8),b=g[d&y];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0===(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(x=65535&b,p<(_&=15)&&(d+=k[n++]<<p,(p+=8)<_&&(d+=k[n++]<<p,p+=8)),(x+=d&(1<<_)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=_,p-=_,x>(_=a-o)){if((_=x-_)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(O=0,E=h,0===f){if(O+=c-_,_<w){w-=_;do{j[a++]=h[O++]}while(--_);O=a-x,E=j}}else if(f<_){if(O+=c+f-_,(_-=f)<w){w-=_;do{j[a++]=h[O++]}while(--_);if(O=0,f<w){w-=_=f;do{j[a++]=h[O++]}while(--_);O=a-x,E=j}}}else if(O+=f-_,_<w){w-=_;do{j[a++]=h[O++]}while(--_);O=a-x,E=j}for(;w>2;)j[a++]=E[O++],j[a++]=E[O++],j[a++]=E[O++],w-=3;w&&(j[a++]=E[O++],w>1&&(j[a++]=E[O++]))}else{O=a-x;do{j[a++]=j[O++],j[a++]=j[O++],j[a++]=j[O++],w-=3}while(w>2);w&&(j[a++]=j[O++],w>1&&(j[a++]=j[O++]))}break}}break}}while(n<i&&a<s);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=d,r.bits=p},Zr=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Yr=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],qr=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Kr=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],$r=function(e,t,r,n,i,a,o,s){var u,c,l,f,h,d,p,v,g,m=s.bits,y=0,b=0,_=0,w=0,x=0,O=0,E=0,k=0,j=0,S=0,P=null,A=0,T=new Pt.Buf16(16),R=new Pt.Buf16(16),C=null,M=0;for(y=0;y<=15;y++)T[y]=0;for(b=0;b<n;b++)T[t[r+b]]++;for(x=m,w=15;w>=1&&0===T[w];w--);if(x>w&&(x=w),0===w)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(_=1;_<w&&0===T[_];_++);for(x<_&&(x=_),k=1,y=1;y<=15;y++)if(k<<=1,(k-=T[y])<0)return-1;if(k>0&&(0===e||1!==w))return-1;for(R[1]=0,y=1;y<15;y++)R[y+1]=R[y]+T[y];for(b=0;b<n;b++)0!==t[r+b]&&(o[R[t[r+b]]++]=b);if(0===e?(P=C=o,d=19):1===e?(P=Zr,A-=257,C=Yr,M-=257,d=256):(P=qr,C=Kr,d=-1),S=0,b=0,y=_,h=a,O=x,E=0,l=-1,f=(j=1<<x)-1,1===e&&j>852||2===e&&j>592)return 1;for(;;){p=y-E,o[b]<d?(v=0,g=o[b]):o[b]>d?(v=C[M+o[b]],g=P[A+o[b]]):(v=96,g=0),u=1<<y-E,_=c=1<<O;do{i[h+(S>>E)+(c-=u)]=p<<24|v<<16|g|0}while(0!==c);for(u=1<<y-1;S&u;)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,b++,0===--T[y]){if(y===w)break;y=t[r+o[b]]}if(y>x&&(S&f)!==l){for(0===E&&(E=x),h+=_,k=1<<(O=y-E);O+E<w&&!((k-=T[O+E])<=0);)O++,k<<=1;if(j+=1<<O,1===e&&j>852||2===e&&j>592)return 1;i[l=S&f]=x<<24|O<<16|h-a|0}}return 0!==S&&(i[h+S]=y-E<<24|64<<16|0),s.bits=x,0};function Qr(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Jr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Pt.Buf16(320),this.work=new Pt.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function en(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Pt.Buf32(852),t.distcode=t.distdyn=new Pt.Buf32(592),t.sane=1,t.back=-1,0):-2}function tn(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,en(e)):-2}function rn(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,tn(e))):-2}function nn(e,t){var r,n;return e?(n=new Jr,e.state=n,n.window=null,0!==(r=rn(e,t))&&(e.state=null),r):-2}var an,on,sn=!0;function un(e){if(sn){var t;for(an=new Pt.Buf32(512),on=new Pt.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($r(1,e.lens,0,288,an,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$r(2,e.lens,0,32,on,0,e.work,{bits:5}),sn=!1}e.lencode=an,e.lenbits=9,e.distcode=on,e.distbits=5}function cn(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Pt.Buf8(a.wsize)),n>=a.wsize?(Pt.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),Pt.arraySet(a.window,t,r-n,i,a.wnext),(n-=i)?(Pt.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}var ln={inflateReset:tn,inflateReset2:rn,inflateResetKeep:en,inflateInit:function(e){return nn(e,15)},inflateInit2:nn,inflate:function(e,t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,g,m,y,b,_,w,x,O,E,k,j=0,S=new Pt.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(r=e.state).mode&&(r.mode=13),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,f=s,h=u,O=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,S[0]=255&c,S[1]=c>>>8&255,r.check=fr(r.check,S,2,0),c=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!==(15&c)){e.msg="unknown compression method",r.mode=30;break}if(l-=4,x=8+(15&(c>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<x,e.adler=r.check=1,r.mode=512&c?10:12,c=0,l=0;break;case 2:for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(r.flags=c,8!==(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,r.check=fr(r.check,S,2,0)),c=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,r.check=fr(r.check,S,4,0)),c=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,r.check=fr(r.check,S,2,0)),c=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,r.check=fr(r.check,S,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Pt.arraySet(r.head.extra,n,a,d,x)),512&r.flags&&(r.check=fr(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=fr(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break e;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=fr(r.check,n,d,a)),s-=d,a+=d,x)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}e.adler=r.check=Qr(c),c=0,l=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=l,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(un(r),r.mode=20,6===t){c>>>=2,l-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&c,c=0,l=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(d=r.length){if(d>s&&(d=s),d>u&&(d=u),0===d)break e;Pt.arraySet(i,n,a,d,o),s-=d,a+=d,u-=d,o+=d,r.length-=d;break}r.mode=12;break;case 17:for(;l<14;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.lens[P[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},O=$r(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,O){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;m=(j=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&j,!((g=j>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(y<16)c>>>=g,l-=g,r.lens[r.have++]=y;else{if(16===y){for(k=g+2;l<k;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(c>>>=g,l-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}x=r.lens[r.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===y){for(k=g+3;l<k;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}l-=g,x=0,d=3+(7&(c>>>=g)),c>>>=3,l-=3}else{for(k=g+7;l<k;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}l-=g,x=0,d=11+(127&(c>>>=g)),c>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=x}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,E={bits:r.lenbits},O=$r(1,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,O){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},O=$r(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,O){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=l,Xr(e,h),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;m=(j=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&j,!((g=j>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(m&&0===(240&m)){for(b=g,_=m,w=y;m=(j=r.lencode[w+((c&(1<<b+_)-1)>>b)])>>>16&255,y=65535&j,!(b+(g=j>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}c>>>=b,l-=b,r.back+=b}if(c>>>=g,l-=g,r.back+=g,r.length=y,0===m){r.mode=26;break}if(32&m){r.back=-1,r.mode=12;break}if(64&m){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&m,r.mode=22;case 22:if(r.extra){for(k=r.extra;l<k;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;m=(j=r.distcode[c&(1<<r.distbits)-1])>>>16&255,y=65535&j,!((g=j>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(0===(240&m)){for(b=g,_=m,w=y;m=(j=r.distcode[w+((c&(1<<b+_)-1)>>b)])>>>16&255,y=65535&j,!(b+(g=j>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}c>>>=b,l-=b,r.back+=b}if(c>>>=g,l-=g,r.back+=g,64&m){e.msg="invalid distance code",r.mode=30;break}r.offset=y,r.extra=15&m,r.mode=24;case 24:if(r.extra){for(k=r.extra;l<k;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break e;if(d=h-u,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),v=r.window}else v=i,p=o-r.offset,d=r.length;d>u&&(d=u),u-=d,r.length-=d;do{i[o++]=v[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;i[o++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===s)break e;s--,c|=n[a++]<<l,l+=8}if(h-=u,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?fr(r.check,i,h,o-h):ur(r.check,i,h,o-h)),h=u,(r.flags?c:Qr(c))!==r.check){e.msg="incorrect data check",r.mode=30;break}c=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}c=0,l=0}r.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=l,(r.wsize||h!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&cn(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?fr(r.check,i,h,e.next_out-h):ur(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===h||4===t)&&0===O&&(O=-5),O},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var r;return e&&e.state?0===(2&(r=e.state).wrap)?-2:(r.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?-2:11===r.mode&&ur(1,t,n,0)!==r.check?-3:cn(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},fn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var hn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},dn=Object.prototype.toString;function pn(e){if(!(this instanceof pn))return new pn(e);this.options=Pt.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zr,this.strm.avail_out=0;var r=ln.inflateInit2(this.strm,t.windowBits);if(r!==fn.Z_OK)throw new Error(hr[r]);if(this.header=new hn,ln.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=Fr(t.dictionary):"[object ArrayBuffer]"===dn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=ln.inflateSetDictionary(this.strm,t.dictionary))!==fn.Z_OK))throw new Error(hr[r])}function vn(e,t){var r=new pn(t);if(r.push(e,!0),r.err)throw r.msg||hr[r.err];return r.result}pn.prototype.push=function(e,t){var r,n,i,a,o,s=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?fn.Z_FINISH:fn.Z_NO_FLUSH,"string"===typeof e?s.input=Dr(e):"[object ArrayBuffer]"===dn.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new Pt.Buf8(u),s.next_out=0,s.avail_out=u),(r=ln.inflate(s,fn.Z_NO_FLUSH))===fn.Z_NEED_DICT&&c&&(r=ln.inflateSetDictionary(this.strm,c)),r===fn.Z_BUF_ERROR&&!0===l&&(r=fn.Z_OK,l=!1),r!==fn.Z_STREAM_END&&r!==fn.Z_OK)return this.onEnd(r),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&r!==fn.Z_STREAM_END&&(0!==s.avail_in||n!==fn.Z_FINISH&&n!==fn.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Ur(s.output,s.next_out),a=s.next_out-i,o=Br(s.output,i),s.next_out=a,s.avail_out=u-a,a&&Pt.arraySet(s.output,s.output,i,a,0),this.onData(o)):this.onData(Pt.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(l=!0)}while((s.avail_in>0||0===s.avail_out)&&r!==fn.Z_STREAM_END);return r===fn.Z_STREAM_END&&(n=fn.Z_FINISH),n===fn.Z_FINISH?(r=ln.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===fn.Z_OK):n!==fn.Z_SYNC_FLUSH||(this.onEnd(fn.Z_OK),s.avail_out=0,!0)},pn.prototype.onData=function(e){this.chunks.push(e)},pn.prototype.onEnd=function(e){e===fn.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Pt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var gn={Inflate:pn,inflate:vn,inflateRaw:function(e,t){return(t=t||{}).raw=!0,vn(e,t)},ungzip:vn},mn={};(0,Pt.assign)(mn,Wr,gn,fn);var yn=mn,bn=function(){function e(t){if(Object(h.a)(this,e),t<0||t>9)throw new Re("Invalid gzip compression level, it should be between 0 and 9");this.level=t}return Object(c.a)(e,[{key:"encode",value:function(e){return yn.gzip(e,{level:this.level}).buffer}},{key:"decode",value:function(e,t){var r=yn.ungzip(e);return void 0!==t?(t.set(r),t):r.buffer}}]),e}();bn.codecId="gzip";var _n=function(){function e(t){if(Object(h.a)(this,e),t<-1||t>9)throw new Re("Invalid zlib compression level, it should be between -1 and 9");this.level=t}return Object(c.a)(e,[{key:"encode",value:function(e){return yn.deflate(e,{level:this.level}).buffer}},{key:"decode",value:function(e,t){var r=yn.inflate(e);return void 0!==t?(t.set(r),t):r.buffer}}]),e}();function wn(e){if(e.id===bn.codecId)return new bn(e.level);if(e.id===_n.codecId)return new _n(e.level);throw new Error("Compression codec ".concat(e.id," is not supported by Zarr.js yet."))}_n.codecId="zlib";var xn=fe((function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new i(n,a||e,o),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,a),!0;case 6:return l.fn.call(l.context,t,n,i,a,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||o(this,a);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})),On=function(e){function t(e){var r;return Object(h.a)(this,t),(r=Object(d.a)(this,Object(p.a)(t).call(this,e))).name="TimeoutError",r}return Object(g.a)(t,e),t}(Object(m.a)(Error)),En=function(e,t,r){return new Promise((function(n,i){if("number"!==typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t!==1/0){var a=setTimeout((function(){if("function"!==typeof r){var a="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),o=r instanceof Error?r:new On(a);"function"===typeof e.cancel&&e.cancel(),i(o)}else try{n(r())}catch(s){i(s)}}),t);!function(e,t){t=t||function(){},e.then((function(e){return new Promise((function(e){e(t())})).then((function(){return e}))}),(function(e){return new Promise((function(e){e(t())})).then((function(){throw e}))}))}(e.then(n,i),(function(){clearTimeout(a)}))}else n(e)}))},kn=En,jn=En,Sn=On;kn.default=jn,kn.TimeoutError=Sn;var Pn=fe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){for(var n=0,i=e.length;i>0;){var a=i/2|0,o=n+a;r(e[o],t)<=0?(n=++o,i-=a+1):i=a}return n}}));le(Pn);var An=fe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){Object(h.a)(this,e),this._queue=[]}return Object(c.a)(e,[{key:"enqueue",value:function(e,t){var r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)this._queue.push(r);else{var n=Pn.default(this._queue,r,(function(e,t){return t.priority-e.priority}));this._queue.splice(n,0,r)}}},{key:"dequeue",value:function(){var e=this._queue.shift();return e&&e.run}},{key:"size",get:function(){return this._queue.length}}]),e}();t.default=r}));le(An);var Tn=le(fe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){},n=new kn.default.TimeoutError,i=function(e){function t(e){var n;if(Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this)))._intervalCount=0,n._intervalEnd=0,n._pendingCount=0,n._resolveEmpty=r,n._resolveIdle=r,!("number"===typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:An.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(e.intervalCap,"` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(e.interval,"` (").concat(typeof e.interval,")"));return n._carryoverConcurrencyCount=e.carryoverConcurrencyCount,n._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,n._intervalCap=e.intervalCap,n._interval=e.interval,n._queue=new e.queueClass,n._queueClass=e.queueClass,n.concurrency=e.concurrency,n._timeout=e.timeout,n._throwOnTimeout=!0===e.throwOnTimeout,n._isPaused=!1===e.autoStart,n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"_next",value:function(){this._pendingCount--,this._tryToStartAnother()}},{key:"_resolvePromises",value:function(){this._resolveEmpty(),this._resolveEmpty=r,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=r)}},{key:"_onResumeInterval",value:function(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}},{key:"_isIntervalPaused",value:function(){var e=this,t=Date.now();if(void 0===this._intervalId){var r=this._intervalEnd-t;if(!(r<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((function(){e._onResumeInterval()}),r)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}},{key:"_tryToStartAnother",value:function(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){var e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}},{key:"_initializeIntervalIfNeeded",value:function(){var e=this;this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((function(){e._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}},{key:"_onInterval",value:function(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}},{key:"_processQueue",value:function(){for(;this._tryToStartAnother(););}},{key:"add",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r,i=this,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.abrupt("return",new Promise((function(e,o){var s=function(){var s=Object(a.a)(f.a.mark((function a(){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i._pendingCount++,i._intervalCount++,a.prev=2,s=void 0===i._timeout&&void 0===r.timeout?t():kn.default(Promise.resolve(t()),void 0===r.timeout?i._timeout:r.timeout,(function(){(void 0===r.throwOnTimeout?i._throwOnTimeout:r.throwOnTimeout)&&o(n)})),a.t0=e,a.next=7,s;case 7:a.t1=a.sent,(0,a.t0)(a.t1),a.next=14;break;case 11:a.prev=11,a.t2=a.catch(2),o(a.t2);case 14:i._next();case 15:case"end":return a.stop()}}),a,null,[[2,11]])})));return function(){return s.apply(this,arguments)}}();i._queue.enqueue(s,r),i._tryToStartAnother()})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAll",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=Object(a.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.add(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"start",value:function(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}},{key:"pause",value:function(){this._isPaused=!0}},{key:"clear",value:function(){this._queue=new this._queueClass}},{key:"onEmpty",value:function(){var e=Object(a.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._queue.size){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){var r=t._resolveEmpty;t._resolveEmpty=function(){r(),e()}})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onIdle",value:function(){var e=Object(a.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._pendingCount||0!==this._queue.size){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){var r=t._resolveIdle;t._resolveIdle=function(){r(),e()}})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_doesIntervalAllowAnother",get:function(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}},{key:"_doesConcurrentAllowAnother",get:function(){return this._pendingCount<this._concurrency}},{key:"concurrency",get:function(){return this._concurrency},set:function(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));this._concurrency=e,this._processQueue()}},{key:"size",get:function(){return this._queue.size}},{key:"pending",get:function(){return this._pendingCount}},{key:"isPaused",get:function(){return this._isPaused}},{key:"timeout",set:function(e){this._timeout=e},get:function(){return this._timeout}}]),t}(xn);t.default=i}))),Rn=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Object(h.a)(this,e),this.store=t,this._chunkStore=a,this.path=Ke(r),this.keyPrefix=st(this.path),this.readOnly=i,this.cacheMetadata=o,this.cacheAttrs=s,this.meta=n,null!==this.meta.compressor?this.compressor=wn(this.meta.compressor):this.compressor=null;var u=this.keyPrefix+".zattributes";this.attrs=new dt(this.store,u,this.readOnly,s)}return Object(c.a)(e,[{key:"reloadMetadata",value:function(){return ue(this,void 0,void 0,f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.keyPrefix+".zarray",r=this.store.getItem(t),e.t0=ht,e.next=5,r;case 5:return e.t1=e.sent,this.meta=(0,e.t0)(e.t1),e.abrupt("return",this.meta);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"refreshMetadata",value:function(){return ue(this,void 0,void 0,f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cacheMetadata){e.next=3;break}return e.next=3,this.reloadMetadata();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getBasicSelection(e,!1,t)}},{key:"getRaw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getBasicSelection(e,!0,t)}},{key:"getBasicSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.concurrencyLimit,i=void 0===n?10:n,a=r.progressCallback;return ue(this,void 0,void 0,f.a.mark((function r(){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.cacheMetadata){r.next=3;break}return r.next=3,this.reloadMetadata();case 3:if(this.shape!==[]){r.next=7;break}throw new Error("Shape [] indexing is not supported yet");case 7:return r.abrupt("return",this.getBasicSelectionND(e,t,i,a));case 8:case"end":return r.stop()}}),r,this)})))}},{key:"getBasicSelectionND",value:function(e,t,r,n){var i=new We(e,this);return this.getSelection(i,t,r,n)}},{key:"getSelection",value:function(e,t,r,n){return ue(this,void 0,void 0,f.a.mark((function i(){var a,o,s,u,c,l,h,d,p,v,g,m,y,b,_,w=this;return f.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=this.dtype,o=e.shape,s=e.shape.reduce((function(e,t){return e*t}),1),!t||s!==this.chunkSize){i.next=12;break}if(u=e.iter(),!1!==(c=u.next()).done||!0!==u.next().done){i.next=12;break}return l=c.value,i.next=10,this.decodeDirectToRawArray(l,o,s);case 10:return h=i.sent,i.abrupt("return",h);case 12:if(d=t?new St(null,o,a):new xt(null,o,a),0!==s){i.next=15;break}return i.abrupt("return",d);case 15:if(p=new Tn({concurrency:r}),!n){i.next=20;break}!function(){var t=0,r=0,i=!0,a=!1,o=void 0;try{for(var s,u=e.iter()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value;r+=1}}catch(dr){a=!0,o=dr}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}n({progress:0,queueSize:r});var c=!0,l=!1,h=void 0;try{for(var v,g=function(){var i=v.value;ue(w,void 0,void 0,f.a.mark((function a(){var o=this;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.add((function(){return o.chunkGetItem(i.chunkCoords,i.chunkSelection,d,i.outSelection,e.dropAxes)}));case 2:n({progress:t+=1,queueSize:r});case 4:case"end":return a.stop()}}),a)})))},m=e.iter()[Symbol.iterator]();!(c=(v=m.next()).done);c=!0)g()}catch(dr){l=!0,h=dr}finally{try{c||null==m.return||m.return()}finally{if(l)throw h}}}(),i.next=40;break;case 20:for(v=!0,g=!1,m=void 0,i.prev=23,y=function(){var t=_.value;p.add((function(){return w.chunkGetItem(t.chunkCoords,t.chunkSelection,d,t.outSelection,e.dropAxes)}))},b=e.iter()[Symbol.iterator]();!(v=(_=b.next()).done);v=!0)y();i.next=32;break;case 28:i.prev=28,i.t0=i.catch(23),g=!0,m=i.t0;case 32:i.prev=32,i.prev=33,v||null==b.return||b.return();case 35:if(i.prev=35,!g){i.next=38;break}throw m;case 38:return i.finish(35);case 39:return i.finish(32);case 40:return i.next=42,p.onIdle();case 42:if(0!==d.shape.length){i.next=44;break}return i.abrupt("return",d.data[0]);case 44:return i.abrupt("return",d);case 45:case"end":return i.stop()}}),i,this,[[23,28,32,40],[33,,35,39]])})))}},{key:"chunkGetItem",value:function(e,t,r,n,i){return ue(this,void 0,void 0,f.a.mark((function a(){var o,s,u,c,l;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.length===this._chunkDataShape.length){a.next=2;break}throw new Re("Inconsistent shapes: chunkCoordsLength: ".concat(e.length,", cDataShapeLength: ").concat(this.chunkDataShape.length));case 2:return o=this.chunkKey(e),a.prev=3,a.next=6,this.chunkStore.getItem(o);case 6:if(s=a.sent,u=this.decodeChunk(s),!(r instanceof xt)){a.next=19;break}if(!Ge(n)||!rt(t,this.chunks)||this.meta.filters){a.next=12;break}return r.set(n,this.toNestedArray(u)),a.abrupt("return");case 12:if(c=this.toNestedArray(u),l=c.get(t),null===i){a.next=16;break}throw new Error("Drop axes is not supported yet");case 16:r.set(n,l),a.next=20;break;case 19:r.set(n,this.chunkBufferToRawArray(u),t);case 20:a.next=29;break;case 22:if(a.prev=22,a.t0=a.catch(3),!(a.t0 instanceof je)){a.next=28;break}null!==this.fillValue&&r.set(n,this.fillValue),a.next=29;break;case 28:throw new a.t0;case 29:case"end":return a.stop()}}),a,this,[[3,22]])})))}},{key:"getRawChunk",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){var r,n,i,a,o,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length===this.shape.length){t.next=2;break}throw new Error("Chunk coordinates ".concat(e.join(".")," do not correspond to shape ").concat(this.shape,"."));case 2:for(t.prev=2,r=0;r<e.length;r++)n=Math.ceil(this.shape[r]/this.chunks[r]),e[r]=Be(e[r],n);t.next=13;break;case 6:if(t.prev=6,t.t0=t.catch(2),!(t.t0 instanceof Pe)){t.next=12;break}throw new Error("".concat(t.t0.name," : index ").concat(e.join(".")," is out of bounds for shape: ").concat(this.shape," and chunks ").concat(this.chunks));case 12:throw new t.t0;case 13:return i=this.chunkKey(e),a=this.chunkStore.getItem(i),t.t1=this,t.next=18,a;case 18:return t.t2=t.sent,o=t.t1.decodeChunk.call(t.t1,t.t2),s=this.chunks.filter((function(e){return 1!==e})),t.abrupt("return",new St(o,s,this.dtype));case 22:case"end":return t.stop()}}),t,this,[[2,6]])})))}},{key:"chunkKey",value:function(e){return this.keyPrefix+e.join(".")}},{key:"ensureByteArray",value:function(e){return"string"===typeof e?new Uint8Array(n.from(e).buffer):new Uint8Array(e)}},{key:"toTypedArray",value:function(e){return new pt[this.dtype](e)}},{key:"toNestedArray",value:function(e){var t=this.ensureByteArray(e).buffer;return new xt(t,this.chunks,this.dtype)}},{key:"decodeChunk",value:function(e){var t=this.ensureByteArray(e);return null!==this.compressor?this.compressor.decode(t):t.buffer}},{key:"chunkBufferToRawArray",value:function(e){return new St(e,this.chunks,this.dtype)}},{key:"decodeDirectToRawArray",value:function(e,t,r){var n=e.chunkCoords;return ue(this,void 0,void 0,f.a.mark((function e(){var i,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.chunkKey(n),e.prev=1,a=this.chunkStore.getItem(i),e.t0=St,e.t1=this,e.next=7,a;case 7:return e.t2=e.sent,e.t3=e.t1.decodeChunk.call(e.t1,e.t2),e.t4=t,e.t5=this.dtype,e.abrupt("return",new e.t0(e.t3,e.t4,e.t5));case 14:if(e.prev=14,e.t6=e.catch(1),!(e.t6 instanceof je)){e.next=21;break}return o=new pt[this.dtype](r),e.abrupt("return",new St(o.fill(this.fillValue),t));case 21:throw new e.t6;case 22:case"end":return e.stop()}}),e,this,[[1,14]])})))}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ue(this,void 0,void 0,f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.setBasicSelection(e,t,r);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"setBasicSelection",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.concurrencyLimit,i=void 0===n?10:n,a=r.progressCallback;return ue(this,void 0,void 0,f.a.mark((function r(){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.readOnly){r.next=2;break}throw new ke("Object is read only");case 2:if(this.cacheMetadata){r.next=5;break}return r.next=5,this.reloadMetadata();case 5:if(this.shape!==[]){r.next=9;break}throw new Error("Shape [] indexing is not supported yet");case 9:return r.next=11,this.setBasicSelectionND(e,t,i,a);case 11:case"end":return r.stop()}}),r,this)})))}},{key:"setBasicSelectionND",value:function(e,t,r,n){return ue(this,void 0,void 0,f.a.mark((function i(){var a;return f.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new We(e,this),i.next=3,this.setSelection(a,t,r,n);case 3:case"end":return i.stop()}}),i,this)})))}},{key:"getChunkValue",value:function(e,t,r,n){var i;if(n===[])i=r;else if("number"===typeof r)i=r;else if(i=r.get(e.outSelection),null!==t.dropAxes)throw new Error("Handling drop axes not supported yet");return i}},{key:"setSelection",value:function(e,t,r,n){return ue(this,void 0,void 0,f.a.mark((function i(){var a,o,s,u,c,l,h,d,p=this;return f.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((a=e.shape)!==[]){i.next=5;break}i.next=15;break;case 5:if("number"!==typeof t){i.next=9;break}i.next=15;break;case 9:if(!(t instanceof xt)){i.next=14;break}if(nt(t.shape,a)){i.next=12;break}throw new Re("Shape mismatch in source NestedArray and set selection: ".concat(t.shape," and ").concat(a));case 12:i.next=15;break;case 14:throw new Error("Unknown data type for setting :(");case 15:if(o=new Tn({concurrency:r}),!n){i.next=20;break}!function(){var r=0,i=!0,s=!1,u=void 0;try{for(var c,l=e.iter()[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){c.value;r+=1}}catch(dr){s=!0,u=dr}finally{try{i||null==l.return||l.return()}finally{if(s)throw u}}var h=0;n({progress:0,queueSize:r});var d=!0,v=!1,g=void 0;try{for(var m,y=function(){var i=m.value,s=p.getChunkValue(i,e,t,a);ue(p,void 0,void 0,f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.add((function(){return t.chunkSetItem(i.chunkCoords,i.chunkSelection,s)}));case 2:n({progress:h+=1,queueSize:r});case 4:case"end":return e.stop()}}),e)})))},b=e.iter()[Symbol.iterator]();!(d=(m=b.next()).done);d=!0)y()}catch(dr){v=!0,g=dr}finally{try{d||null==b.return||b.return()}finally{if(v)throw g}}}(),i.next=40;break;case 20:for(s=!0,u=!1,c=void 0,i.prev=23,l=function(){var r=d.value,n=p.getChunkValue(r,e,t,a);o.add((function(){return p.chunkSetItem(r.chunkCoords,r.chunkSelection,n)}))},h=e.iter()[Symbol.iterator]();!(s=(d=h.next()).done);s=!0)l();i.next=32;break;case 28:i.prev=28,i.t0=i.catch(23),u=!0,c=i.t0;case 32:i.prev=32,i.prev=33,s||null==h.return||h.return();case 35:if(i.prev=35,!u){i.next=38;break}throw c;case 38:return i.finish(35);case 39:return i.finish(32);case 40:return i.next=42,o.onIdle();case 42:case"end":return i.stop()}}),i,null,[[23,28,32,40],[33,,35,39]])})))}},{key:"chunkSetItem",value:function(e,t,r){return ue(this,void 0,void 0,f.a.mark((function n(){var i,a,o,s,u,c,l,h;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.chunkKey(e),a=null,o=pt[this.dtype],s=this.chunkSize,!rt(t,this.chunks)){n.next=8;break}"number"===typeof r?(a=new o(s)).fill(r):a=r.flatten(),n.next=30;break;case 8:return n.prev=8,c=this.chunkStore.getItem(i),n.t0=this,n.t1=this,n.next=14,c;case 14:n.t2=n.sent,n.t3=n.t1.decodeChunk.call(n.t1,n.t2),u=n.t0.toTypedArray.call(n.t0,n.t3),n.next=27;break;case 19:if(n.prev=19,n.t4=n.catch(8),!(n.t4 instanceof je)){n.next=26;break}u=new o(s),null!==this.fillValue&&u.fill(this.fillValue),n.next=27;break;case 26:throw n.t4;case 27:(l=new xt(u,this.chunks,this.dtype)).set(t,r),a=l.flatten();case 30:h=this.encodeChunk(a),this.chunkStore.setItem(i,h);case 32:case"end":return n.stop()}}),n,this,[[8,19]])})))}},{key:"encodeChunk",value:function(e){return null!==this.compressor?this.compressor.encode(new Uint8Array(e.buffer)):e.buffer}},{key:"chunkStore",get:function(){return this._chunkStore?this._chunkStore:this.store}},{key:"name",get:function(){return this.path.length>0?"/"!==this.path[0]?"/"+this.path:this.path:null}},{key:"basename",get:function(){var e=this.name;if(null===e)return null;var t=e.split("/");return t[t.length-1]}},{key:"shape",get:function(){return this.meta.shape}},{key:"chunks",get:function(){return this.meta.chunks}},{key:"chunkSize",get:function(){return this.chunks.reduce((function(e,t){return e*t}),1)}},{key:"dtype",get:function(){return this.meta.dtype}},{key:"fillValue",get:function(){var e=this.meta.fill_value;return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:this.meta.fill_value}},{key:"nDims",get:function(){return this.meta.shape.length}},{key:"size",get:function(){return this.meta.shape.reduce((function(e,t){return e*t}),1)}},{key:"length",get:function(){return this.shape[0]}},{key:"_chunkDataShape",get:function(){if(this.shape===[])return[1];for(var e=[],t=0;t<this.shape.length;t++)e[t]=Math.ceil(this.shape[t]/this.chunks[t]);return e}},{key:"chunkDataShape",get:function(){return this._chunkDataShape}},{key:"numChunks",get:function(){return this.chunkDataShape.reduce((function(e,t){return e*t}),1)}}],[{key:"create",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return ue(this,void 0,void 0,f.a.mark((function s(){var u;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.loadMetadataForConstructor(t,r);case 2:return u=s.sent,s.abrupt("return",new e(t,r,u,n,i,a,o));case 4:case"end":return s.stop()}}),s,this)})))}},{key:"loadMetadataForConstructor",value:function(e,t){return ue(this,void 0,void 0,f.a.mark((function r(){var n,i;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=Ke(t),n=st(t),r.next=5,e.getItem(n+".zarray");case 5:return i=r.sent,r.abrupt("return",ht(i));case 9:throw r.prev=9,r.t0=r.catch(0),new Error("Failed to load metadata for ZarrArray:"+r.t0.toString());case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))}}]),e}(),Cn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.a)(this,e),this.root=t}return Object(c.a)(e,[{key:"proxy",value:function(){return se(this)}},{key:"getParent",value:function(e){var t=this.root,r=e.split("/"),n=!0,i=!1,a=void 0;try{for(var o,s=r.slice(0,r.length-1)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(!(t=t[o.value]))throw Error(e)}}catch(dr){i=!0,a=dr}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return[t,r[r.length-1]]}},{key:"requireParent",value:function(e){var t=this.root,r=e.split("/"),n=!0,i=!1,a=void 0;try{for(var o,s=r.slice(0,r.length-1)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;void 0===t[u]&&(t[u]={}),t=t[u]}}catch(dr){i=!0,a=dr}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return[t,r[r.length-1]]}},{key:"getItem",value:function(e){var t=this.getParent(e),r=Object(s.a)(t,2),n=r[0][r[1]];if(void 0===n)throw new je(e);return n}},{key:"setItem",value:function(e,t){var r=this.requireParent(e),n=Object(s.a)(r,2);return n[0][n[1]]=t,!0}},{key:"deleteItem",value:function(e){var t=this.getParent(e),r=Object(s.a)(t,2);return delete r[0][r[1]]}},{key:"containsItem",value:function(e){try{return void 0!==this.getItem(e)}catch(t){return!1}}},{key:"keys",value:function(){throw new Error("Method not implemented.")}}]),e}(),Mn=function(){function e(t){Object(h.a)(this,e),this.url=t}return Object(c.a)(e,[{key:"keys",value:function(){throw new Error("Method not implemented.")}},{key:"getItem",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){var r,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=it(this.url,e),t.next=3,fetch(r);case 3:if(404!==(i=t.sent).status){t.next=8;break}throw new je(e);case 8:if(200===i.status){t.next=10;break}throw new Ce(String(i.status));case 10:if(!qe){t.next=18;break}return t.t0=n,t.next=14,i.arrayBuffer();case 14:return t.t1=t.sent,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 18:return t.abrupt("return",i.arrayBuffer());case 19:case"end":return t.stop()}}),t,this)})))}},{key:"setItem",value:function(e,t){return ue(this,void 0,void 0,f.a.mark((function r(){var n,i;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=it(this.url,e),"string"===typeof t&&(t=(new TextEncoder).encode(t).buffer),r.next=4,fetch(n,{method:"PUT",body:t});case 4:return i=r.sent,r.abrupt("return","2"===i.status.toString()[0]);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"deleteItem",value:function(e){throw new Error("Method not implemented.")}},{key:"containsItem",value:function(e){return ue(this,void 0,void 0,f.a.mark((function t(){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=it(this.url,e),t.next=3,fetch(r);case 3:return n=t.sent,t.abrupt("return",200===n.status);case 5:case"end":return t.stop()}}),t,this)})))}}]),e}();function In(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shape,r=e.mode,n=void 0===r?"a":r,i=e.chunks,a=void 0===i||i,o=e.dtype,s=void 0===o?"<i4":o,u=e.compressor,c=void 0===u?null:u,l=e.fillValue,h=void 0===l?null:l,d=e.order,p=void 0===d?"C":d,v=e.store,g=e.overwrite,m=void 0!==g&&g,y=e.path,b=void 0===y?null:y,_=e.chunkStore,w=e.filters,x=e.cacheMetadata,O=void 0===x||x,E=e.cacheAttrs,k=void 0===E||E;return ue(this,void 0,void 0,f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=Ln(v),void 0===_&&(_=Ln(v)),b=Ke(b),"r"!==n&&"r+"!==n){e.next=16;break}return e.next=6,ot(v,b);case 6:if(!e.sent){e.next=10;break}throw new Oe(b);case 10:return e.next=12,at(v,b);case 12:if(e.sent){e.next=14;break}throw new Ee(b);case 14:e.next=59;break;case 16:if("w"!==n){e.next=23;break}if(void 0!==t){e.next=19;break}throw new Re("Shape can not be undefined when creating a new array");case 19:return e.next=21,ft(v,t,a,s,b,c,h,p,m,_,w);case 21:e.next=59;break;case 23:if("a"!==n){e.next=39;break}return e.next=26,ot(v,b);case 26:if(!e.sent){e.next=30;break}throw new Oe(b);case 30:return e.next=32,at(v,b);case 32:if(e.sent){e.next=37;break}if(void 0!==t){e.next=35;break}throw new Re("Shape can not be undefined when creating a new array");case 35:return e.next=37,ft(v,t,a,s,b,c,h,p,m,_,w);case 37:e.next=59;break;case 39:if("w-"!==n&&"x"!==n){e.next=58;break}return e.next=42,at(v,b);case 42:if(!e.sent){e.next=46;break}throw new xe(b);case 46:return e.next=48,ot(v,b);case 48:if(!e.sent){e.next=52;break}throw new Oe(b);case 52:if(void 0!==t){e.next=54;break}throw new Re("Shape can not be undefined when creating a new array");case 54:return e.next=56,ft(v,t,a,s,b,c,h,p,m,_,w);case 56:e.next=59;break;case 58:throw new Re("Invalid mode argument: ".concat(n));case 59:return r="r"===n,e.abrupt("return",Rn.create(v,b,r,_,O,k));case 61:case"end":return e.stop()}}),e)})))}function Ln(e){return void 0===e?new Cn:"string"===typeof e?new Mn(e):e}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e||"undefined"!==typeof self&&self;var Fn,Nn=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var r;"undefined"!==typeof self&&self,r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=80)}([function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(46)("wks"),i=r(30),a=r(0).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){t.__esModule=!0;var n,i=r(134),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){var n=r(8);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(0),i=r(1),a=r(22),o=r(11),s=r(12),u=function e(t,r,u){var c,l,f,h=t&e.F,d=t&e.G,p=t&e.S,v=t&e.P,g=t&e.B,m=t&e.W,y=d?i:i[r]||(i[r]={}),b=y.prototype,_=d?n:p?n[r]:(n[r]||{}).prototype;for(c in d&&(u=r),u)(l=!h&&_&&void 0!==_[c])&&s(y,c)||(f=l?_[c]:u[c],y[c]=d&&"function"!=typeof _[c]?u[c]:g&&l?a(f,n):m&&_[c]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):v&&"function"==typeof f?a(Function.call,f):f,v&&((y.virtual||(y.virtual={}))[c]=f,t&e.R&&b&&!b[c]&&o(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(5),i=r(56),a=r(42),o=Object.defineProperty;t.f=r(9)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,r){e.exports=!r(28)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(n){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(7),i=r(29);e.exports=r(9)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){t.__esModule=!0;var n,i=r(38),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,a.default)(t))&&"function"!==typeof t?e:t}},function(e,t){e.exports={}},function(e,t,r){var n=r(87),i=r(40);e.exports=function(e){return n(i(e))}},function(e,t,r){t.__esModule=!0;var n=o(r(104)),i=o(r(108)),a=o(r(38));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,a.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},function(e,t){},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(35),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var a=r(24);a.inherits=r(19);var o=r(70),s=r(75);a.inherits(f,o);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t){e.exports=!0},function(e,t,r){var n=r(27);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=e.isBuffer}).call(t,r(141).Buffer)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(3)),i=o(r(4)),a=r(155);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,n.default)(this,e)}return(0,i.default)(e,[{key:"decode",value:function(e,t){var r=this.decodeBlock(t),n=e.Predictor||1;if(1!==n){var i=!e.StripOffsets,o=i?e.TileWidth:e.ImageWidth,s=i?e.TileLength:e.RowsPerStrip||e.ImageLength;return(0,a.applyPredictor)(r,n,o,s,e.BitsPerSample,e.PlanarConfiguration)}return r}}]),e}();t.default=s},function(e,t,r){var n=r(84)(!0);r(55)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(7).f,i=r(12),a=r(2)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){r(92);for(var n=r(0),i=r(11),a=r(14),o=r(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=n[c],f=l&&l.prototype;f&&!f[o]&&i(f,o,c),a[c]=a.Array}},function(e,t,r){e.exports=r(111)},function(e,t,r){t.__esModule=!0;var n,i=r(119),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var t=e.apply(this,arguments);return new a.default((function(e,r){return function n(i,o){try{var s=t[i](o),u=s.value}catch(c){return void r(c)}if(!s.done)return a.default.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}},function(e,t,r){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(t,r(18))},function(e,t,r){var n=r(17),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),a(i,o),o.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){var n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,o;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],o.set(a,i),i+=a.length;return o}},o={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(n)},function(e,t,r){t.__esModule=!0;var n=o(r(82)),i=o(r(95)),a="function"===typeof i.default&&"symbol"===typeof n.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===a(n.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(8),i=r(0).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(5),i=r(86),a=r(47),o=r(45)("IE_PROTO"),s=function(){},u=function(){var e,t=r(41)("iframe"),n=a.length;for(t.style.display="none",r(60).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(58),i=r(47);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(46)("keys"),i=r(30);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(1),i=r(0),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(21)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){t.f=r(2)},function(e,t,r){var n=r(0),i=r(1),a=r(21),o=r(48),s=r(7).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){t.__esModule=!0;var n=a(r(113)),i=a(r(116));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var s,u=(0,i.default)(e);!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(dr){a=!0,o=dr}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,r){var n=r(23),i=r(2)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),i))?r:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,r){var n=r(27);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=t.fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},i=t.fieldTags={};for(var a in n)n.hasOwnProperty(a)&&(i[n[a]]=parseInt(a,10));t.fieldTagTypes={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"},t.arrayFields=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets];var o=t.fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},s=t.fieldTypes={};for(var u in o)o.hasOwnProperty(u)&&(s[o[u]]=parseInt(u,10));t.photometricInterpretations={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},t.ExtraSamplesValues={Unspecified:0,Assocalpha:1,Unassalpha:2};var c=t.geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},l=t.geoKeys={};for(var f in c)c.hasOwnProperty(f)&&(l[c[f]]=parseInt(f,10))},function(e,t,r){var n=r(21),i=r(6),a=r(57),o=r(11),s=r(14),u=r(85),c=r(31),l=r(90),f=r(2)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,p,v,g,m){u(r,t,p);var y,b,_,w=function(e){if(!h&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",O="values"==v,E=!1,k=e.prototype,j=k[f]||k["@@iterator"]||v&&k[v],S=j||w(v),P=v?O?w("entries"):S:void 0,A="Array"==t&&k.entries||j;if(A&&(_=l(A.call(new e)))!==Object.prototype&&_.next&&(c(_,x,!0),n||"function"==typeof _[f]||o(_,f,d)),O&&j&&"values"!==j.name&&(E=!0,S=function(){return j.call(this)}),n&&!m||!h&&!E&&k[f]||o(k,f,S),s[t]=S,s[x]=d,v)if(y={values:O?S:w("values"),keys:g?S:w("keys"),entries:P},m)for(b in y)b in k||a(k,b,y[b]);else i(i.P+i.F*(h||E),t,y);return y}},function(e,t,r){e.exports=!r(9)&&!r(28)((function(){return 7!=Object.defineProperty(r(41)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){e.exports=r(11)},function(e,t,r){var n=r(12),i=r(15),a=r(88)(!1),o=r(45)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,c=[];for(r in s)r!=o&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(c,r)||c.push(r));return c}},function(e,t,r){var n=r(39),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(0).document;e.exports=n&&n.documentElement},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(58),i=r(47).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(50),i=r(29),a=r(15),o=r(42),s=r(12),u=r(56),c=Object.getOwnPropertyDescriptor;t.f=r(9)?c:function(e,t){if(e=a(e),t=o(t,!0),u)try{return c(e,t)}catch(r){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,r){var n=r(52),i=r(2)("iterator"),a=r(14);e.exports=r(1).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(5),i=r(27),a=r(2)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){var n,i,a,o=r(22),s=r(126),u=r(60),c=r(41),l=r(0),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,g=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},d=function(e){delete m[e]},"process"==r(23)(f)?n=function(e){f.nextTick(o(y,e,1))}:v&&v.now?n=function(e){v.now(o(y,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=b,n=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:h,clear:d}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,r){var n=r(5),i=r(8),a=r(53);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){(function(t,n){var i=r(35);e.exports=b;var a,o=r(71);b.ReadableState=y,r(72).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=r(73),c=r(36).Buffer,l=t.Uint8Array||function(){},f=r(24);f.inherits=r(19);var h=r(144),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,v=r(145),g=r(74);f.inherits(b,u);var m=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var n=t instanceof(a=a||r(20));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(76).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(a=a||r(20),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function _(e,t,r,n,i){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,O(e)}}(e,o)):(i||(a=function(e,t){var r,n;return n=t,c.isBuffer(n)||n instanceof l||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"===typeof t||o.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):k(e,o)):w(e,o,t,!1))):n||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),k(e,t)}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e))}function E(e){d("emit readable"),e.emit("readable"),A(e)}function k(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(j,e,t))}function j(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function S(e){d("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0===(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(76).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this},b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&R(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),null===(n=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,d("pipe count=%d opts=%j",a.pipesCount,t);var u=t&&!1===t.end||e===n.stdout||e===n.stderr?b:l;function c(t,n){d("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),e.removeListener("close",m),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",g),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",b),r.removeListener("data",v),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function l(){d("onend"),e.end()}a.endEmitted?i.nextTick(u):r.once("end",u),e.on("unpipe",c);var f=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,A(e))}}(r);e.on("drain",f);var h=!1,p=!1;function v(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==M(a.pipes,e))&&!h&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function g(t){d("onerror",t),b(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",y),b()}function y(){d("onfinish"),e.removeListener("close",m),b()}function b(){d("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",m),e.once("finish",y),e.emit("pipe",r),a.flowing||(d("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,r);return this}var o=M(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&O(this):i.nextTick(S,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(P,e,t))}(this,e)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<m.length;a++)e.on(m[a],this.emit.bind(this,m[a]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=T}).call(t,r(10),r(18))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"===typeof e}function i(e){return"object"===typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(a(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),o=(c=r.slice()).length,u=0;u<o;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,a,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){e.exports=r(72).EventEmitter},function(e,t,r){var n=r(35);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){(function(t,n,i){var a=r(35);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:a.nextTick;y.WritableState=m;var c=r(24);c.inherits=r(19);var l,f={deprecate:r(149)},h=r(73),d=r(36).Buffer,p=i.Uint8Array||function(){},v=r(74);function g(){}function m(e,t){s=s||r(20),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(a.nextTick(i,n),a.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),E(e,t))}(e,r,n,t,i);else{var o=x(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?u(_,e,r,o,i):_(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||r(20),!l.call(y,this)&&!(this instanceof s))return new y(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function _(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),E(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,b(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function E(e,t){var r=x(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(O,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(y,h),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:f.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===y&&e&&e._writableState instanceof m}})):l=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,d.isBuffer(n)||n instanceof p);return s&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"===typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof r&&(r=g),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(n,o),i=!1),i}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,a){if(!r){var o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=d.from(t,r)),t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,n,i,a);return u}(this,i,s,e,t,r)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var n=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?a.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,r(18),r(147).setImmediate,r(10))},function(e,t,r){var n=r(36).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){e.exports=o;var n=r(20),i=r(24);function a(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){u(e,t,r)})):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(19),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.fromWhiteIsZero=function(e,t){for(var r=e.width,n=e.height,i=new Uint8Array(r*n*3),a=void 0,o=0,s=0;o<e.length;++o,s+=3)a=256-e[o]/t*256,i[s]=a,i[s+1]=a,i[s+2]=a;return i},t.fromBlackIsZero=function(e,t){for(var r=e.width,n=e.height,i=new Uint8Array(r*n*3),a=void 0,o=0,s=0;o<e.length;++o,s+=3)a=e[o]/t*256,i[s]=a,i[s+1]=a,i[s+2]=a;return i},t.fromPalette=function(e,t){for(var r=e.width,n=e.height,i=new Uint8Array(r*n*3),a=t.length/3,o=t.length/3*2,s=0,u=0;s<e.length;++s,u+=3){var c=e[s];i[u]=t[c]/65536*256,i[u+1]=t[c+a]/65536*256,i[u+2]=t[c+o]/65536*256}return i},t.fromCMYK=function(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,a=0;i<e.length;i+=4,a+=3){var o=e[i],s=e[i+1],u=e[i+2],c=e[i+3];n[a]=(255-o)/256*255*((255-c)/256),n[a+1]=(255-s)/256*255*((255-c)/256),n[a+2]=(255-u)/256*255*((255-c)/256)}return n},t.fromYCbCr=function(e){for(var t=e.width,r=e.height,n=new Uint8ClampedArray(t*r*3),i=0,a=0;i<e.length;i+=3,a+=3){var o=e[i],s=e[i+1],u=e[i+2];n[a]=o+1.402*(u-128),n[a+1]=o-.34414*(s-128)-.71414*(u-128),n[a+2]=o+1.772*(s-128)}return n},t.fromCIELab=function(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,a=0;i<e.length;i+=3,a+=3){var o=e[i+0],s=e[i+1]<<24>>24,u=e[i+2]<<24>>24,c=(o+16)/116,l=s/500+c,f=c-u/200,h=void 0,d=void 0,p=void 0;d=-.9689*(l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787))+1.8758*(c=1*(c*c*c>.008856?c*c*c:(c-16/116)/7.787))+.0415*(f=1.08883*(f*f*f>.008856?f*f*f:(f-16/116)/7.787)),p=.0557*l+-.204*c+1.057*f,h=(h=3.2406*l+-1.5372*c+-.4986*f)>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,p=p>.0031308?1.055*Math.pow(p,1/2.4)-.055:12.92*p,n[a]=255*Math.max(0,Math.min(1,h)),n[a+1]=255*Math.max(0,Math.min(1,d)),n[a+2]=255*Math.max(0,Math.min(1,p))}return n}},function(e,t,r){var n=r(176),i=r(178);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(179);function b(e,t,r){if(e&&i.isObject(e)&&e instanceof a)return e;var n=new a;return n.parse(e,t,r),n}a.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!r&&1===e.split("#").length){var _=u.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=o.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(r||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===b.substr(0,2);!O||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(O||w&&!m[w])){for(var E,k,j=-1,S=0;S<h.length;S++)-1!==(P=b.indexOf(h[S]))&&(-1===j||P<j)&&(j=P);for(-1!==(k=-1===j?b.lastIndexOf("@"):b.lastIndexOf("@",j))&&(E=b.slice(0,k),b=b.slice(k+1),this.auth=decodeURIComponent(E)),j=-1,S=0;S<f.length;S++){var P;-1!==(P=b.indexOf(f[S]))&&(-1===j||P<j)&&(j=P)}-1===j&&(j=b.length),this.host=b.slice(0,j),b=b.slice(j),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var T=this.hostname.split(/\./),R=(S=0,T.length);S<R;S++){var C=T[S];if(C&&!C.match(d)){for(var M="",I=0,L=C.length;I<L;I++)C.charCodeAt(I)>127?M+="x":M+=C[I];if(!M.match(d)){var F=T.slice(0,S),N=T.slice(S+1),D=C.match(p);D&&(F.push(D[1]),N.unshift(D[2])),N.length&&(b="/"+N.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[x])for(S=0,R=l.length;S<R;S++){var z=l[S];if(-1!==b.indexOf(z)){var V=encodeURIComponent(z);V===z&&(V=escape(z)),b=b.split(z).join(V)}}var G=b.indexOf("#");-1!==G&&(this.hash=b.substr(G),b=b.slice(0,G));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=e[l])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!m[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||b||r.host&&e.pathname,x=w,O=r.pathname&&r.pathname.split("/")||[],E=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===O[0]?O[0]=r.host:O.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===O[0])),_)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,O=p;else if(p.length)O||(O=[]),O.pop(),O=O.concat(p),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search))return E&&(r.hostname=r.host=O.shift(),(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift())),r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!O.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=O.slice(-1)[0],j=(r.host||e.host||O.length>1)&&("."===k||".."===k)||""===k,S=0,P=O.length;P>=0;P--)"."===(k=O[P])?O.splice(P,1):".."===k?(O.splice(P,1),S++):S&&(O.splice(P,1),S--);if(!w&&!x)for(;S--;S)O.unshift("..");!w||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),j&&"/"!==O.join("/").substr(-1)&&O.push("");var A,T=""===O[0]||O[0]&&"/"===O[0].charAt(0);return E&&(r.hostname=r.host=T?"":O.length?O.shift():"",(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift())),(w=w||r.host&&O.length)&&!T&&O.unshift(""),O.length?r.pathname=O.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(81);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.writeArrayBuffer=t.fromUrls=t.fromBlob=t.fromFile=t.fromArrayBuffer=t.fromUrl=t.MultiGeoTIFF=t.GeoTIFF=t.rgb=t.globals=void 0;var n=_(r(13)),i=_(r(16)),a=_(r(33)),o=_(r(51)),s=_(r(34)),u=_(r(3)),c=_(r(4)),l=(t.fromUrl=function(){var e=(0,s.default)(a.default.mark((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.fromSource((0,v.makeRemoteSource)(t,r)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.fromArrayBuffer=function(){var e=(0,s.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.fromSource((0,v.makeBufferSource)(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.fromFile=function(){var e=(0,s.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.fromSource((0,v.makeFileSource)(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.fromBlob=function(){var e=(0,s.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.fromSource((0,v.makeFileReaderSource)(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.fromUrls=function(){var e=(0,s.default)(a.default.mark((function e(t){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.fromSource((0,v.makeRemoteSource)(t,o));case 2:return r=e.sent,e.next=5,Promise.all(i.map((function(e){return k.fromSource((0,v.makeRemoteSource)(e,o))})));case 5:return n=e.sent,e.abrupt("return",new j(r,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.writeArrayBuffer=function(){var e=(0,s.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.writeGeotiff)(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r(54)),f=b(l),h=_(r(137)),d=_(r(172)),p=_(r(173)),v=r(174),g=_(r(182)),m=r(185),y=b(r(78));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function w(e){switch(e){case l.fieldTypes.BYTE:case l.fieldTypes.ASCII:case l.fieldTypes.SBYTE:case l.fieldTypes.UNDEFINED:return 1;case l.fieldTypes.SHORT:case l.fieldTypes.SSHORT:return 2;case l.fieldTypes.LONG:case l.fieldTypes.SLONG:case l.fieldTypes.FLOAT:case l.fieldTypes.IFD:return 4;case l.fieldTypes.RATIONAL:case l.fieldTypes.SRATIONAL:case l.fieldTypes.DOUBLE:case l.fieldTypes.LONG8:case l.fieldTypes.SLONG8:case l.fieldTypes.IFD8:return 8;default:throw new RangeError("Invalid field type: "+e)}}function x(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var i=l.geoKeyNames[t[n]],a=t[n+1]?l.fieldTagNames[t[n+1]]:null,o=t[n+2],s=t[n+3],u=null;if(a){if("undefined"===typeof(u=e[a])||null===u)throw new Error("Could not get value of geoKey '"+i+"'.");"string"===typeof u?u=u.substring(s,s+o-1):u.subarray&&(u=u.subarray(s,s+o-1))}else u=s;r[i]=u}return r}function O(e,t,r,n){var i=null,a=null,o=w(t);switch(t){case l.fieldTypes.BYTE:case l.fieldTypes.ASCII:case l.fieldTypes.UNDEFINED:i=new Uint8Array(r),a=e.readUint8;break;case l.fieldTypes.SBYTE:i=new Int8Array(r),a=e.readInt8;break;case l.fieldTypes.SHORT:i=new Uint16Array(r),a=e.readUint16;break;case l.fieldTypes.SSHORT:i=new Int16Array(r),a=e.readInt16;break;case l.fieldTypes.LONG:case l.fieldTypes.IFD:i=new Uint32Array(r),a=e.readUint32;break;case l.fieldTypes.SLONG:i=new Int32Array(r),a=e.readInt32;break;case l.fieldTypes.LONG8:case l.fieldTypes.IFD8:i=new Array(r),a=e.readUint64;break;case l.fieldTypes.SLONG8:i=new Array(r),a=e.readInt64;break;case l.fieldTypes.RATIONAL:i=new Uint32Array(2*r),a=e.readUint32;break;case l.fieldTypes.SRATIONAL:i=new Int32Array(2*r),a=e.readInt32;break;case l.fieldTypes.FLOAT:i=new Float32Array(r),a=e.readFloat32;break;case l.fieldTypes.DOUBLE:i=new Float64Array(r),a=e.readFloat64;break;default:throw new RangeError("Invalid field type: "+t)}if(t!==l.fieldTypes.RATIONAL&&t!==l.fieldTypes.SRATIONAL)for(var s=0;s<r;++s)i[s]=a.call(e,n+s*o);else for(var u=0;u<r;u+=2)i[u]=a.call(e,n+u*o),i[u+1]=a.call(e,n+(u*o+4));return t===l.fieldTypes.ASCII?String.fromCharCode.apply(null,i):i}t.globals=f,t.rgb=y;var E=function(){function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"readRasters",value:function(){var e=(0,s.default)(a.default.mark((function e(){var t,r,n,i,s,u,c,l,f,h,d,p,v,g,m,y,b,_,w,x,O,E,k,j,S,P,A,T,R,C,M,I,L,F,N,D,B,U,z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z.window,r=z.width,n=z.height,i=z.resX,s=z.resY,u=z.bbox,e.next=4,this.getImage();case 4:return c=e.sent,l=c,e.next=8,this.getImageCount();case 8:if(f=e.sent,h=c.getBoundingBox(),!t||!u){e.next=12;break}throw new Error('Both "bbox" and "window" passed.');case 12:if(!r&&!n){e.next=23;break}if(t&&(d=c.getOrigin(),p=(0,o.default)(d,2),v=p[0],g=p[1],m=c.getResolution(),y=(0,o.default)(m,2),b=y[0],_=y[1],u=[v+t[0]*b,g+t[1]*_,v+t[2]*b,g+t[3]*_]),w=u||h,!r){e.next=19;break}if(!i){e.next=18;break}throw new Error("Both width and resX passed");case 18:i=(w[2]-w[0])/r;case 19:if(!n){e.next=23;break}if(!s){e.next=22;break}throw new Error("Both width and resY passed");case 22:s=(w[3]-w[1])/n;case 23:if(!i&&!s){e.next=47;break}x=[],O=0;case 26:if(!(O<f)){e.next=35;break}return e.next=29,this.getImage(O);case 29:E=e.sent,k=E.fileDirectory,j=k.SubfileType,S=k.NewSubfileType,(0===O||2===j||1&S)&&x.push(E);case 32:++O,e.next=26;break;case 35:x.sort((function(e,t){return e.getWidth()-t.getWidth()})),P=0;case 37:if(!(P<x.length)){e.next=47;break}if(A=x[P],T=(h[2]-h[0])/A.getWidth(),R=(h[3]-h[1])/A.getHeight(),l=A,!(i&&i>T||s&&s>R)){e.next=44;break}return e.abrupt("break",47);case 44:++P,e.next=37;break;case 47:return C=t,u&&(M=c.getOrigin(),I=(0,o.default)(M,2),L=I[0],F=I[1],N=l.getResolution(c),D=(0,o.default)(N,2),B=D[0],U=D[1],C=[Math.round((u[0]-L)/B),Math.round((u[1]-F)/U),Math.round((u[2]-L)/B),Math.round((u[3]-F)/U)],C=[Math.min(C[0],C[2]),Math.min(C[1],C[3]),Math.max(C[0],C[2]),Math.max(C[1],C[3])]),e.abrupt("return",l.readRasters(Object.assign({},z,{window:C})));case 50:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),k=function(e){function t(e,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};(0,u.default)(this,t);var s=(0,n.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.source=e,s.littleEndian=r,s.bigTiff=i,s.firstIFDOffset=a,s.cache=o.cache||!1,s.fileDirectories=null,s.fileDirectoriesParsing=null,s}return(0,i.default)(t,e),(0,c.default)(t,[{key:"getSlice",value:function(){var e=(0,s.default)(a.default.mark((function e(t,r){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.bigTiff?4048:1024,e.t0=p.default,e.next=4,this.source.fetch(t,"undefined"!==typeof r?r:n);case 4:return e.t1=e.sent,e.t2=t,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"parseFileDirectories",value:function(){var e=(0,s.default)(a.default.mark((function e(){var t,r,n,i,o,s,u,c,f,h,d,p,v,g,m,y,b,_,E,k;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.firstIFDOffset,r=this.bigTiff?8:2,n=this.bigTiff?20:12,i=[];case 4:if(0===t){e.next=48;break}return e.next=7,this.getSlice(t);case 7:if(o=e.sent,s=this.bigTiff?o.readUint64(t):o.readUint16(t),u=s*n+(this.bigTiff?16:6),o.covers(t,u)){e.next=14;break}return e.next=13,this.getSlice(t,u);case 13:o=e.sent;case 14:c={},f=t+(this.bigTiff?8:2),h=0;case 17:if(!(h<s)){e.next=44;break}if(d=o.readUint16(f),p=o.readUint16(f+2),v=this.bigTiff?o.readUint64(f+4):o.readUint32(f+4),g=void 0,m=void 0,y=w(p),b=f+(this.bigTiff?12:8),!(y*v<=(this.bigTiff?8:4))){e.next=29;break}g=O(o,p,v,b),e.next=39;break;case 29:if(_=o.readOffset(b),E=w(p)*v,!o.covers(_,E)){e.next=35;break}g=O(o,p,v,_),e.next=39;break;case 35:return e.next=37,this.getSlice(_,E);case 37:k=e.sent,g=O(k,p,v,_);case 39:m=1===v&&-1===l.arrayFields.indexOf(d)&&p!==l.fieldTypes.RATIONAL&&p!==l.fieldTypes.SRATIONAL?g[0]:g,c[l.fieldTagNames[d]]=m;case 41:f+=n,++h,e.next=17;break;case 44:i.push([c,x(c)]),t=o.readOffset(t+r+n*s),e.next=4;break;case 48:return e.abrupt("return",i);case 49:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var e=(0,s.default)(a.default.mark((function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileDirectories){e.next=5;break}return this.fileDirectoriesParsing||(this.fileDirectoriesParsing=this.parseFileDirectories()),e.next=4,this.fileDirectoriesParsing;case 4:this.fileDirectories=e.sent;case 5:if(t=this.fileDirectories[r]){e.next=8;break}throw new RangeError("Invalid image index");case 8:return e.abrupt("return",new h.default(t[0],t[1],this.dataView,this.littleEndian,this.cache,this.source));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var e=(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileDirectories){e.next=5;break}return this.fileDirectoriesParsing||(this.fileDirectoriesParsing=this.parseFileDirectories()),e.next=4,this.fileDirectoriesParsing;case 4:this.fileDirectories=e.sent;case 5:return e.abrupt("return",this.fileDirectories.length);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromSource",value:function(){var e=(0,s.default)(a.default.mark((function e(r,n){var i,o,s,u,c,l,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetch(0,1024);case 2:if(i=e.sent,o=new d.default(i),s=o.getUint16(0,0),u=void 0,18761!==s){e.next=10;break}u=!0,e.next=15;break;case 10:if(19789!==s){e.next=14;break}u=!1,e.next=15;break;case 14:throw new TypeError("Invalid byte order value.");case 15:if(c=o.getUint16(2,u),l=void 0,42!==c){e.next=21;break}l=!1,e.next=29;break;case 21:if(43!==c){e.next=28;break}if(l=!0,8===o.getUint16(4,u)){e.next=26;break}throw new Error("Unsupported offset byte-size.");case 26:e.next=29;break;case 28:throw new TypeError("Invalid magic number.");case 29:return f=l?o.getUint64(8,u):o.getUint32(4,u),e.abrupt("return",new t(r,u,l,f,n));case 31:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),t}(E);t.GeoTIFF=k,t.default=k;var j=function(e){function t(e,r){(0,u.default)(this,t);var i=(0,n.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.mainFile=e,i.overviewFiles=r,i.imageFiles=[e].concat(r),i.fileDirectoriesPerFile=null,i.fileDirectoriesPerFileParsing=null,i.imageCount=null,i}return(0,i.default)(t,e),(0,c.default)(t,[{key:"parseFileDirectoriesPerFile",value:function(){var e=(0,s.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.mainFile.parseFileDirectories()].concat(this.overviewFiles.map((function(e){return e.parseFileDirectories()}))),e.next=3,Promise.all(t);case 3:return this.fileDirectoriesPerFile=e.sent,e.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var e=(0,s.default)(a.default.mark((function e(){var t,r,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileDirectoriesPerFile){e.next=5;break}return this.fileDirectoriesPerFileParsing||(this.fileDirectoriesPerFileParsing=this.parseFileDirectoriesPerFile()),e.next=4,this.fileDirectoriesPerFileParsing;case 4:this.fileDirectoriesPerFile=e.sent;case 5:t=o,r=0;case 7:if(!(r<this.fileDirectoriesPerFile.length)){e.next=16;break}if(n=this.fileDirectoriesPerFile[r],!(t<n.length)){e.next=12;break}return i=this.imageFiles[r],e.abrupt("return",new h.default(n[t][0],n[t][1],i.dataView,i.littleEndian,i.cache,i.source));case 12:t-=n.length;case 13:++r,e.next=7;break;case 16:throw new RangeError("Invalid image index");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var e=(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileDirectoriesPerFile){e.next=5;break}return this.fileDirectoriesPerFileParsing||(this.fileDirectoriesPerFileParsing=this.parseFileDirectoriesPerFile()),e.next=4,this.fileDirectoriesPerFileParsing;case 4:this.fileDirectoriesPerFile=e.sent;case 5:return e.abrupt("return",this.fileDirectoriesPerFile.reduce((function(e,t){return e+t.length}),0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(E);t.MultiGeoTIFF=j,t.Pool=g.default},function(e,t,r){e.exports={default:r(83),__esModule:!0}},function(e,t,r){r(26),r(32),e.exports=r(48).f("iterator")},function(e,t,r){var n=r(39),i=r(40);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(e,t,r){var n=r(43),i=r(29),a=r(31),o={};r(11)(o,r(2)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(7),i=r(5),a=r(44);e.exports=r(9)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,u=0;s>u;)n.f(e,r=o[u++],t[r]);return e}},function(e,t,r){var n=r(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(15),i=r(59),a=r(89);e.exports=function(e){return function(t,r,o){var s,u=n(t),c=i(u.length),l=a(o,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(39),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(12),i=r(91),a=r(45)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(40);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(93),i=r(94),a=r(14),o=r(15);e.exports=r(55)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(96),__esModule:!0}},function(e,t,r){r(97),r(64),r(102),r(103),e.exports=r(1).Symbol},function(e,t,r){var n=r(0),i=r(12),a=r(9),o=r(6),s=r(57),u=r(98).KEY,c=r(28),l=r(46),f=r(31),h=r(30),d=r(2),p=r(48),v=r(49),g=r(99),m=r(100),y=r(5),b=r(8),_=r(15),w=r(42),x=r(29),O=r(43),E=r(101),k=r(63),j=r(7),S=r(44),P=k.f,A=j.f,T=E.f,R=n.Symbol,C=n.JSON,M=C&&C.stringify,I=d("_hidden"),L=d("toPrimitive"),F={}.propertyIsEnumerable,N=l("symbol-registry"),D=l("symbols"),B=l("op-symbols"),U=Object.prototype,z="function"==typeof R,V=n.QObject,G=!V||!V.prototype||!V.prototype.findChild,H=a&&c((function(){return 7!=O(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=P(U,t);n&&delete U[t],A(e,t,r),n&&e!==U&&A(U,t,n)}:A,W=function(e){var t=D[e]=O(R.prototype);return t._k=e,t},X=z&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},Z=function(e,t,r){return e===U&&Z(B,t,r),y(e),t=w(t,!0),y(r),i(D,t)?(r.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),r=O(r,{enumerable:x(0,!1)})):(i(e,I)||A(e,I,x(1,{})),e[I][t]=!0),H(e,t,r)):A(e,t,r)},Y=function(e,t){y(e);for(var r,n=g(t=_(t)),i=0,a=n.length;a>i;)Z(e,r=n[i++],t[r]);return e},q=function(e){var t=F.call(this,e=w(e,!0));return!(this===U&&i(D,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(D,e)||i(this,I)&&this[I][e])||t)},K=function(e,t){if(e=_(e),t=w(t,!0),e!==U||!i(D,t)||i(B,t)){var r=P(e,t);return!r||!i(D,t)||i(e,I)&&e[I][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=T(_(e)),n=[],a=0;r.length>a;)i(D,t=r[a++])||t==I||t==u||n.push(t);return n},Q=function(e){for(var t,r=e===U,n=T(r?B:_(e)),a=[],o=0;n.length>o;)!i(D,t=n[o++])||r&&!i(U,t)||a.push(D[t]);return a};z||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function t(r){this===U&&t.call(B,r),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),H(this,e,x(1,r))};return a&&G&&H(U,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),k.f=K,j.f=Z,r(62).f=E.f=$,r(50).f=q,r(61).f=Q,a&&!r(21)&&s(U,"propertyIsEnumerable",q,!0),p.f=function(e){return W(d(e))}),o(o.G+o.W+o.F*!z,{Symbol:R});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;J.length>ee;)d(J[ee++]);for(var te=S(d.store),re=0;te.length>re;)v(te[re++]);o(o.S+o.F*!z,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=R(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!z,"Object",{create:function(e,t){return void 0===t?O(e):Y(O(e),t)},defineProperty:Z,defineProperties:Y,getOwnPropertyDescriptor:K,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),C&&o(o.S+o.F*(!z||c((function(){var e=R();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(b(t)||void 0!==e)&&!X(e))return m(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!X(t))return t}),n[1]=t,M.apply(C,n)}}),R.prototype[L]||r(11)(R.prototype,L,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){var n=r(30)("meta"),i=r(8),a=r(12),o=r(7).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(28)((function(){return u(Object.preventExtensions({}))})),l=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},onFreeze:function(e){return c&&f.NEED&&u(e)&&!a(e,n)&&l(e),e}}},function(e,t,r){var n=r(44),i=r(61),a=r(50);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),u=a.f,c=0;s.length>c;)u.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,r){var n=r(23);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(15),i=r(62).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(n(e))}},function(e,t,r){r(49)("asyncIterator")},function(e,t,r){r(49)("observable")},function(e,t,r){e.exports={default:r(105),__esModule:!0}},function(e,t,r){r(106),e.exports=r(1).Object.setPrototypeOf},function(e,t,r){var n=r(6);n(n.S,"Object",{setPrototypeOf:r(107).set})},function(e,t,r){var n=r(8),i=r(5),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(22)(Function.call,r(63).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){e.exports={default:r(109),__esModule:!0}},function(e,t,r){r(110);var n=r(1).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(6);n(n.S,"Object",{create:r(43)})},function(e,t,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(112),i)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(o){n.regeneratorRuntime=void 0}},function(e,t){!function(t){var r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",u="object"===typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=v;var l={},f={};f[a]=function(){return this};var h=Object.getPrototypeOf,d=h&&h(h(j([])));d&&d!==r&&n.call(d,a)&&(f=d);var p=b.prototype=m.prototype=Object.create(f);y.prototype=p.constructor=b,b.constructor=y,b[s]=y.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(p),e},c.awrap=function(e){return{__await:e}},_(w.prototype),w.prototype[o]=function(){return this},c.AsyncIterator=w,c.async=function(e,t,r,n){var i=new w(v(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(p),p[s]="Generator",p[a]=function(){return this},p.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}}}function v(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new k(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=g(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,o),a}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(dr){return{type:"throw",arg:dr}}}function m(){}function y(){}function b(){}function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(r,i){function a(){return new Promise((function(t,a){!function t(r,i,a,o){var s=g(e[r],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(c).then((function(e){u.value=e,a(u)}),o)}o(s.arg)}(r,i,t,a)}))}return t=t?t.then(a,a):a()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=g(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,r){e.exports={default:r(114),__esModule:!0}},function(e,t,r){r(32),r(26),e.exports=r(115)},function(e,t,r){var n=r(52),i=r(2)("iterator"),a=r(14);e.exports=r(1).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(n(t))}},function(e,t,r){e.exports={default:r(117),__esModule:!0}},function(e,t,r){r(32),r(26),e.exports=r(118)},function(e,t,r){var n=r(5),i=r(65);e.exports=r(1).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){e.exports={default:r(120),__esModule:!0}},function(e,t,r){r(64),r(26),r(32),r(121),r(132),r(133),e.exports=r(1).Promise},function(e,t,r){var n,i,a,o,s=r(21),u=r(0),c=r(22),l=r(52),f=r(6),h=r(8),d=r(27),p=r(122),v=r(123),g=r(66),m=r(67).set,y=r(127)(),b=r(53),_=r(68),w=r(128),x=r(69),O=u.TypeError,E=u.process,k=E&&E.versions,j=k&&k.v8||"",S=u.Promise,P="process"==l(E),A=function(){},T=i=b.f,R=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[r(2)("species")]=function(e){e(A,A)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==j.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(n){}}(),C=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&F(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),o=!0)),r===t.promise?c(O("Promise-chain cycle")):(a=C(r))?a.call(r,u,c):u(r)):c(n)}catch(f){l&&!o&&l.exit(),c(f)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){m.call(u,(function(){var t,r,n,i=e._v,a=L(e);if(a&&(t=_((function(){P?E.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=P||L(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){m.call(u,(function(){var t;P?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},D=function e(t){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw O("Promise can't be resolved itself");(r=C(t))?y((function(){var i={_w:n,_d:!1};try{r.call(t,c(e,i,1),c(N,i,1))}catch(a){N.call(i,a)}})):(n._v=t,n._s=1,M(n,!1))}catch(i){N.call({_w:n,_d:!1},i)}}};R||(S=function(e){p(this,S,"Promise","_h"),d(e),n.call(this);try{e(c(D,this,1),c(N,this,1))}catch(dr){N.call(this,dr)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(129)(S.prototype,{then:function(e,t){var r=T(g(this,S));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=P?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&M(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(D,e,1),this.reject=c(N,e,1)},b.f=T=function(e){return e===S||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!R,{Promise:S}),r(31)(S,"Promise"),r(130)("Promise"),o=r(1).Promise,f(f.S+f.F*!R,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!R),"Promise",{resolve:function(e){return x(s&&this===o?S:this,e)}}),f(f.S+f.F*!(R&&r(131)((function(e){S.all(e).catch(A)}))),"Promise",{all:function(e){var t=this,r=T(t),n=r.resolve,i=r.reject,a=_((function(){var r=[],a=0,o=1;v(e,!1,(function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then((function(e){u||(u=!0,r[s]=e,--o||n(r))}),i)})),--o||n(r)}));return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=T(t),n=r.reject,i=_((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(22),i=r(124),a=r(125),o=r(5),s=r(59),u=r(65),c={},l={};(t=e.exports=function(e,t,r,f,h){var d,p,v,g,m=h?function(){return e}:u(e),y=n(r,f,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(a(m)){for(d=s(e.length);d>b;b++)if((g=t?y(o(p=e[b])[0],p[1]):y(e[b]))===c||g===l)return g}else for(v=m.call(e);!(p=v.next()).done;)if((g=i(v,y,p.value,t))===c||g===l)return g}).BREAK=c,t.RETURN=l},function(e,t,r){var n=r(5);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(o){var a=e.return;throw void 0!==a&&n(a.call(e)),o}}},function(e,t,r){var n=r(14),i=r(2)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(0),i=r(67).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(23)(o);e.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(a){throw e?r():t=void 0,a}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(c)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);r=function(){l.then(c)}}else r=function(){i.call(n,c)};else{var f=!0,h=document.createTextNode("");new a(c).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(0).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){var n=r(0),i=r(1),a=r(7),o=r(9),s=r(2)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(2)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(o){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],s=a[n]();s.next=function(){return{done:r=!0}},a[n]=function(){return s},e(a)}catch(o){}return r}},function(e,t,r){var n=r(6),i=r(1),a=r(0),o=r(66),s=r(69);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then((function(){return r}))}:e,r?function(r){return s(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){var n=r(6),i=r(53),a=r(68);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){e.exports={default:r(135),__esModule:!0}},function(e,t,r){r(136);var n=r(1).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(6);n(n.S+n.F*!r(9),"Object",{defineProperty:r(7).f})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(51)),i=d(r(33)),a=d(r(34)),o=d(r(3)),s=d(r(4)),u=d(r(138)),c=r(54),l=r(78),f=r(153),h=r(171);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){for(var n=0,i=t;i<r;++i)n+=e[i];return n}function v(e,t,r){switch(e){case 1:switch(t){case 8:return new Uint8Array(r);case 16:return new Uint16Array(r);case 32:return new Uint32Array(r)}break;case 2:switch(t){case 8:return new Int8Array(r);case 16:return new Int16Array(r);case 32:return new Int32Array(r)}break;case 3:switch(t){case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}var g=function(){function e(t,r,n,i,a,s){(0,o.default)(this,e),this.fileDirectory=t,this.geoKeys=r,this.dataView=n,this.littleEndian=i,this.tiles=a?{}:null,this.isTiled=!t.StripOffsets;var u=t.PlanarConfiguration;if(this.planarConfiguration="undefined"===typeof u?1:u,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=s}return(0,s.default)(e,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return this.fileDirectory.SamplesPerPixel}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:"undefined"!==typeof this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBytesPerPixel",value:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t){var r=this.fileDirectory.BitsPerSample[t];if(r%8!==0)throw new Error("Sample bit-width of "+r+" is not supported.");if(r!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");e+=r}return e/8}},{key:"getSampleByteSize",value:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index "+e+" is out of range.");var t=this.fileDirectory.BitsPerSample[e];if(t%8!==0)throw new Error("Sample bit-width of "+t+" is not supported.");return t/8}},{key:"getReaderForSample",value:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:switch(r){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(r){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(r){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getArrayForSample",value:function(e,t){return v(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,this.fileDirectory.BitsPerSample[e],t)}},{key:"getTileOrStrip",value:function(){var e=(0,a.default)(i.default.mark((function e(t,r,n,a){var o,s,u,c,l,f,h,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),u=void 0,c=this.tiles,1===this.planarConfiguration?u=r*o+t:2===this.planarConfiguration&&(u=n*o*s+r*o+t),l=void 0,f=void 0,this.isTiled?(l=this.fileDirectory.TileOffsets[u],f=this.fileDirectory.TileByteCounts[u]):(l=this.fileDirectory.StripOffsets[u],f=this.fileDirectory.StripByteCounts[u]),e.next=10,this.source.fetch(l,f);case 10:return h=e.sent,d=void 0,null===c?d=a.decode(this.fileDirectory,h):c[u]||(d=a.decode(this.fileDirectory,h),c[u]=d),e.t0=t,e.t1=r,e.t2=n,e.next=18,d;case 18:return e.t3=e.sent,e.abrupt("return",{x:e.t0,y:e.t1,sample:e.t2,data:e.t3});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"_readRaster",value:function(){var e=(0,a.default)(i.default.mark((function e(t,r,n,a,o,s,u,c){var l,f,d,v,g,m,y,b,_,w,x,O,E,k,j,S,P,A,T=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=this.getTileWidth(),f=this.getTileHeight(),d=Math.max(Math.floor(t[0]/l),0),v=Math.min(Math.ceil(t[2]/l),Math.ceil(this.getWidth()/this.getTileWidth())),g=Math.max(Math.floor(t[1]/f),0),m=Math.min(Math.ceil(t[3]/f),Math.ceil(this.getHeight()/this.getTileHeight())),y=t[2]-t[0],b=this.getBytesPerPixel(),_=[],w=[],x=0;x<r.length;++x)1===this.planarConfiguration?_.push(p(this.fileDirectory.BitsPerSample,0,r[x])/8):_.push(0),w.push(this.getReaderForSample(r[x]));for(O=[],E=this.littleEndian,k=g;k<m;++k)for(j=d;j<v;++j)for(S=function(e){var i=e,s=r[e];2===T.planarConfiguration&&(b=T.getSampleByteSize(s));var u=T.getTileOrStrip(j,k,s,o);O.push(u),u.then((function(e){for(var o=e.data,s=new DataView(o),u=e.y*f,c=e.x*l,h=(e.y+1)*f,d=(e.x+1)*l,p=w[i],v=Math.min(f,f-(h-t[3])),g=Math.min(l,l-(d-t[2])),m=Math.max(0,t[1]-u);m<v;++m)for(var x=Math.max(0,t[0]-c);x<g;++x){var O=(m*l+x)*b,k=p.call(s,O+_[i],E),j=void 0;a?(j=(m+u-t[1])*y*r.length+(x+c-t[0])*r.length+i,n[j]=k):(j=(m+u-t[1])*y+x+c-t[0],n[i][j]=k)}}))},P=0;P<r.length;++P)S(P);return e.next=16,Promise.all(O);case 16:if(!(s&&t[2]-t[0]!==s||u&&t[3]-t[1]!==u)){e.next=22;break}return A=void 0,(A=a?(0,h.resampleInterleaved)(n,t[2]-t[0],t[3]-t[1],s,u,r.length,c):(0,h.resample)(n,t[2]-t[0],t[3]-t[1],s,u,c)).width=s,A.height=u,e.abrupt("return",A);case 22:return n.width=s||t[2]-t[0],n.height=u||t[3]-t[1],e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,a,o,s,u){return e.apply(this,arguments)}}()},{key:"readRasters",value:function(){var e=(0,a.default)(i.default.mark((function e(){var t,r,n,a,o,s,u,c,l,h,d,p,g,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=m.window,b=m.samples,_=void 0===b?[]:b,w=m.interleave,x=m.pool,O=void 0===x?null:x,E=m.width,k=m.height,j=m.resampleMethod,S=m.fillValue;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=y||[0,0,this.getWidth(),this.getHeight()])[0]>t[2]||t[1]>t[3])){e.next=3;break}throw new Error("Invalid subsets");case 3:if(r=t[2]-t[0],n=t[3]-t[1],a=r*n,_&&_.length){e.next=10;break}for(o=0;o<this.fileDirectory.SamplesPerPixel;++o)_.push(o);e.next=17;break;case 10:s=0;case 11:if(!(s<_.length)){e.next=17;break}if(!(_[s]>=this.fileDirectory.SamplesPerPixel)){e.next=14;break}return e.abrupt("return",Promise.reject(new RangeError("Invalid sample index '"+_[s]+"'.")));case 14:++s,e.next=11;break;case 17:if(u=void 0,w)c=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,l=Math.max.apply(null,this.fileDirectory.BitsPerSample),u=v(c,l,a*_.length),S&&u.fill(S);else for(u=[],h=0;h<_.length;++h)d=this.getArrayForSample(_[h],a),Array.isArray(S)&&h<S.length?d.fill(S[h]):S&&!Array.isArray(S)&&d.fill(S),u.push(d);return p=O||(0,f.getDecoder)(this.fileDirectory),e.next=22,this._readRaster(t,_,u,w,p,E,k,j);case 22:return g=e.sent,e.abrupt("return",g);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readRGB",value:function(){var e=(0,a.default)(i.default.mark((function e(){var t,r,n,a,o,s,u,f,h,d,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=p.window,g=p.pool,m=void 0===g?null:g,y=p.width,b=p.height,_=p.resampleMethod,w=p.enableAlpha,x=void 0!==w&&w;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=v||[0,0,this.getWidth(),this.getHeight()])[0]>t[2]||t[1]>t[3])){e.next=3;break}throw new Error("Invalid subsets");case 3:if((r=this.fileDirectory.PhotometricInterpretation)!==c.photometricInterpretations.RGB){e.next=8;break}if(n=[0,1,2],this.fileDirectory.ExtraSamples!==c.ExtraSamplesValues.Unspecified&&x)for(n=[],a=0;a<this.fileDirectory.BitsPerSample.length;a+=1)n.push(a);return e.abrupt("return",this.readRasters({window:v,interleave:!0,samples:n,pool:m}));case 8:o=void 0,e.t0=r,e.next=e.t0===c.photometricInterpretations.WhiteIsZero||e.t0===c.photometricInterpretations.BlackIsZero||e.t0===c.photometricInterpretations.Palette?12:e.t0===c.photometricInterpretations.CMYK?14:e.t0===c.photometricInterpretations.YCbCr||e.t0===c.photometricInterpretations.CIELab?16:18;break;case 12:return o=[0],e.abrupt("break",19);case 14:return o=[0,1,2,3],e.abrupt("break",19);case 16:return o=[0,1,2],e.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return s={window:t,interleave:!0,samples:o,pool:m,width:y,height:b,resampleMethod:_},u=this.fileDirectory,e.next=23,this.readRasters(s);case 23:f=e.sent,h=Math.pow(2,this.fileDirectory.BitsPerSample[0]),d=void 0,e.t1=r,e.next=e.t1===c.photometricInterpretations.WhiteIsZero?29:e.t1===c.photometricInterpretations.BlackIsZero?31:e.t1===c.photometricInterpretations.Palette?33:e.t1===c.photometricInterpretations.CMYK?35:e.t1===c.photometricInterpretations.YCbCr?37:e.t1===c.photometricInterpretations.CIELab?39:41;break;case 29:return d=(0,l.fromWhiteIsZero)(f,h),e.abrupt("break",42);case 31:return d=(0,l.fromBlackIsZero)(f,h),e.abrupt("break",42);case 33:return d=(0,l.fromPalette)(f,u.ColorMap),e.abrupt("break",42);case 35:return d=(0,l.fromCMYK)(f),e.abrupt("break",42);case 37:return d=(0,l.fromYCbCr)(f),e.abrupt("break",42);case 39:return d=(0,l.fromCIELab)(f),e.abrupt("break",42);case 41:throw new Error("Unsupported photometric interpretation.");case 42:return d.width=f.width,d.height=f.height,e.abrupt("return",d);case 45:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}},{key:"getGDALMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,n=(0,u.default)(r.substring(0,r.length-1));if(!n[0].tagName)throw new Error("Failed to parse GDAL metadata XML.");var i=n[0];if("GDALMetadata"!==i.tagName)throw new Error("Unexpected GDAL metadata XML tag.");var a=i.children.filter((function(e){return"Item"===e.tagName}));e&&(a=a.filter((function(t){return Number(t.attributes.sample)===e})));for(var o=0;o<a.length;++o){var s=a[o];t[s.attributes.name]=s.children[0]}return t}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}},{key:"getOrigin",value:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return[r[0],r[5],r[10]];if(e){var i=e.getResolution(),a=(0,n.default)(i,3),o=a[0],s=a[1],u=a[2];return[o*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),u*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var e=this.getOrigin(),t=this.getResolution(),r=e[0],n=e[1],i=r+t[0]*this.getWidth(),a=n+t[1]*this.getHeight();return[Math.min(r,i),Math.min(n,a),Math.max(r,i),Math.max(n,a)]}}]),e}();t.default=g},function(e,t,r){function n(e,t){var r=(t=t||{}).pos||0,i="<".charCodeAt(0),a=">".charCodeAt(0),o="-".charCodeAt(0),s="/".charCodeAt(0),u="!".charCodeAt(0),c="'".charCodeAt(0),l='"'.charCodeAt(0);function f(){for(var t=[];e[r];)if(e.charCodeAt(r)==i){if(e.charCodeAt(r+1)===s)return(r=e.indexOf(">",r))+1&&(r+=1),t;if(e.charCodeAt(r+1)===u){if(e.charCodeAt(r+2)==o){for(;-1!==r&&(e.charCodeAt(r)!==a||e.charCodeAt(r-1)!=o||e.charCodeAt(r-2)!=o||-1==r);)r=e.indexOf(">",r+1);-1===r&&(r=e.length)}else for(r+=2;e.charCodeAt(r)!==a&&e[r];)r++;r++;continue}var n=v();t.push(n)}else{var c=h();c.trim().length>0&&t.push(c),r++}return t}function h(){var t=r;return-2===(r=e.indexOf("<",r)-1)&&(r=e.length),e.slice(t,r+1)}function d(){for(var t=r;-1==="\n\t>/= ".indexOf(e[r])&&e[r];)r++;return e.slice(t,r)}var p=t.noChildNodes||["img","br","input","meta","link"];function v(){r++;for(var t=d(),n={},i=[];e.charCodeAt(r)!==a&&e[r];){var o=e.charCodeAt(r);if(o>64&&o<91||o>96&&o<123){for(var u=d(),h=e.charCodeAt(r);h&&h!==c&&h!==l&&!(h>64&&h<91||h>96&&h<123)&&h!==a;)r++,h=e.charCodeAt(r);if(h===c||h===l){var v=g();if(-1===r)return{tagName:t,attributes:n,children:i}}else v=null,r--;n[u]=v}r++}if(e.charCodeAt(r-1)!==s)if("script"==t){var m=r+1;r=e.indexOf("<\/script>",r),i=[e.slice(m,r-1)],r+=9}else"style"==t?(m=r+1,r=e.indexOf("</style>",r),i=[e.slice(m,r-1)],r+=8):-1==p.indexOf(t)&&(r++,i=f());else r++;return{tagName:t,attributes:n,children:i}}function g(){var t=e[r],n=++r;return r=e.indexOf(t,n),e.slice(n,r)}function m(){var r=new RegExp("\\s"+t.attrName+"\\s*=['\"]"+t.attrValue+"['\"]").exec(e);return r?r.index:-1}var y=null;if(void 0!==t.attrValue)for(t.attrName=t.attrName||"id",y=[];-1!==(r=m());)-1!==(r=e.lastIndexOf("<",r))&&y.push(v()),e=e.substr(r),r=0;else y=t.parseNode?v():f();return t.filter&&(y=n.filter(y,t.filter)),t.setPos&&(y.pos=r),y}n.simplify=function(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var r in e.forEach((function(e){if("object"===typeof e){t[e.tagName]||(t[e.tagName]=[]);var r=n.simplify(e.children||[]);t[e.tagName].push(r),e.attributes&&(r._attributes=e.attributes)}})),t)1==t[r].length&&(t[r]=t[r][0]);return t},n.filter=function(e,t){var r=[];return e.forEach((function(e){if("object"===typeof e&&t(e)&&r.push(e),e.children){var i=n.filter(e.children,t);r=r.concat(i)}})),r},n.stringify=function(e){var t="";function r(e){if(e)for(var r=0;r<e.length;r++)"string"==typeof e[r]?t+=e[r].trim():n(e[r])}function n(e){for(var n in t+="<"+e.tagName,e.attributes)null===e.attributes[n]?t+=" "+n:-1===e.attributes[n].indexOf('"')?t+=" "+n+'="'+e.attributes[n].trim()+'"':t+=" "+n+"='"+e.attributes[n].trim()+"'";t+=">",r(e.children),t+="</"+e.tagName+">"}return r(e),t},n.toContentString=function(e){if(Array.isArray(e)){var t="";return e.forEach((function(e){t=(t+=" "+n.toContentString(e)).trim()})),t}return"object"===typeof e?n.toContentString(e.children):" "+e},n.getElementById=function(e,t,r){var i=n(e,{attrValue:t});return r?n.simplify(i):i[0]},n.getElementsByClassName=function(e,t,r){var i=n(e,{attrName:"class",attrValue:"[a-zA-Z0-9-s ]*"+t+"[a-zA-Z0-9-s ]*"});return r?n.simplify(i):i},n.parseStream=function(e,t){if("string"===typeof t&&(t=t.length+2),"string"===typeof e){var i=r(17);e=i.createReadStream(e,{start:t}),t=0}var a=t,o="";return e.on("data",(function(t){o+=t;for(var r=0;;){if(!(a=o.indexOf("<",a)+1))return void(a=r);if("/"!==o[a+1]){var i=n(o,{pos:a-1,parseNode:!0,setPos:!0});if((a=i.pos)>o.length-1||a<r)return o=o.slice(r),a=0,void(r=0);e.emit("xml",i),r=a}else a+=1,r=pos}})),e.on("end",(function(){console.log("end")})),e},n.transformStream=function(e){var t=r(139);"string"===typeof e&&(e=e.length+2);var i=e||0,a="";return t({readableObjectMode:!0},(function(e,t,r){a+=e;for(var o=0;;){if(!(i=a.indexOf("<",i)+1))return i=o,r();if("/"!==a[i+1]){var s=n(a,{pos:i-1,parseNode:!0,setPos:!0});if((i=s.pos)>a.length-1||i<o)return a=a.slice(o),i=0,o=0,r();this.push(s),o=i}else i+=1,o=pos}r()}))},e.exports=n,n.xml=n},function(e,t,r){(function(t){var n=r(140).Transform,i=r(151).inherits;function a(e){n.call(this,e),this._destroyed=!1}function o(e,t,r){r(null,e)}function s(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=o),"function"!=typeof n&&(n=null),e(t,r,n)}}i(a,n),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var r=this;t.nextTick((function(){e&&r.emit("error",e),r.emit("close")}))}},e.exports=s((function(e,t,r){var n=new a(e);return n._transform=t,r&&(n._flush=r),n})),e.exports.ctor=s((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=Object.assign({},e,t),a.call(this,this.options)}return i(n,a),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),e.exports.obj=s((function(e,t,r){var n=new a(Object.assign({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(t,r(18))},function(e,t,r){(t=e.exports=r(70)).Stream=t,t.Readable=t,t.Writable=r(75),t.Duplex=r(20),t.Transform=r(77),t.PassThrough=r(150)},function(e,t,r){(function(e){var n=r(142),i=r(143),a=r(71);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t),e}(e,t,r,n):"string"===typeof t?function(e,t,r){if("string"===typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=s(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(n=t.length)!==n?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return j(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function _(e,t,r,n){return z(B(t,e.length-r),e,r,n)}function w(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function O(e,t,r,n){return z(U(t),e,r,n)}function E(e,t,r,n){return z(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function j(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128===(192&a)&&128===(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){var n,i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var a="",o=t;o<r;++o)a+=(n=e[o])<16?"0"+n.toString(16):n.toString(16);return a}function T(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function R(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function L(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,a){return a||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,a){return a||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"===typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(n,i),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=u.isBuffer(e)?e:B(new u(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function U(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(t,r(10))},function(e,t,r){t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=c(e),n=r[0],o=r[1],s=new a(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),u=0,l=o>0?n-4:n,f=0;f<l;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===o&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,s[u++]=255&t),1===o&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(l(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=c}return(d?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+d]=255&o,d+=p,o/=256,c-=8);e[r+d-p]|=128*v}},function(e,t){},function(e,t,r){var n=r(36).Buffer,i=r(146);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,a=n.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=a,i=s,t.copy(r,i),s+=o.data.length,o=o.next;return a},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(148),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,r(10))},function(e,t,r){(function(e,t){!function(e,r){if(!e.setImmediate){var n,i=1,a={},o=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&l(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var r=s.createElement("script");r.onreadystatechange=function(){l(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return a[i]=o,n(i),i++},u.clearImmediate=c}function c(e){delete a[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(t,r(10),r(18))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(n){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(t,r(10))},function(e,t,r){e.exports=a;var n=r(77),i=r(24);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}i.inherits=r(19),i.inherits(a,n),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){(function(e,n){var i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,a=n.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),u=n[r];r<a;u=n[++r])v(u)||!_(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(r,i){if(y(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}};var a,o={};function s(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&t._extend(n,r),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,e,n.depth)}function u(e,t){var r=s.styles[t];return r?"\x1b["+s.colors[r][0]+"m"+e+"\x1b["+s.colors[r][1]+"m":e}function c(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&O(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return m(i)||(i=l(e,i,n)),i}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,r);if(a)return a;var o=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),x(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(r);if(0===o.length){if(O(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return f(r)}var c,_="",E=!1,k=["{","}"];return d(r)&&(E=!0,k=["[","]"]),O(r)&&(_=" [Function"+(r.name?": "+r.name:"")+"]"),b(r)&&(_=" "+RegExp.prototype.toString.call(r)),w(r)&&(_=" "+Date.prototype.toUTCString.call(r)),x(r)&&(_=" "+f(r)),0!==o.length||E&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=E?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)P(t,String(o))?a.push(h(e,t,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(h(e,t,r,n,i,!0))})),a}(e,r,n,s,o):o.map((function(t){return h(e,r,n,s,t,E)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(c,_,k)):k[0]+_+k[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),P(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(r)?l(e,u.value,null):l(e,u.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function d(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function v(e){return null===e}function g(e){return"number"===typeof e}function m(e){return"string"===typeof e}function y(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===E(e)}function _(e){return"object"===typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===E(e)}function x(e){return _(e)&&("[object Error]"===E(e)||e instanceof Error)}function O(e){return"function"===typeof e}function E(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(a)&&(a=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var r=n.pid;o[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=m,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=_,t.isDate=w,t.isError=x,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(152);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",S(),t.format.apply(t,arguments))},t.inherits=r(19),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,r(10),r(18))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoder=function(e){switch(e.Compression){case void 0:case 1:return new n.default;case 5:return new i.default;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new a.default(e);case 8:case 32946:return new o.default;case 32773:return new s.default;default:throw new Error("Unknown compression method identifier: "+e.Compression)}};var n=u(r(154)),i=u(r(156)),a=u(r(157)),o=u(r(158)),s=u(r(170));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(3)),i=s(r(4)),a=s(r(13)),o=s(r(16));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"decodeBlock",value:function(e){return e}}]),t}(s(r(25)).default);t.default=u},function(e,t,r){function n(e,t){var r=e.length-t,n=0;do{for(var i=t;i>0;i--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function i(e,t,r){for(var n=0,i=e.length,a=i/r;i>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;i-=t}for(var s=e.slice(),u=0;u<a;++u)for(var c=0;c<r;++c)e[r*u+c]=s[(r-c-1)*a+u]}Object.defineProperty(t,"__esModule",{value:!0}),t.applyPredictor=function(e,t,r,a,o,s){if(!t||1===t)return e;for(var u=0;u<o.length;++u){if(o[u]%8!==0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(o[u]!==o[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var c=o[0]/8,l=2===s?1:o.length,f=0;f<a;++f){var h=void 0;if(2===t){switch(o[0]){case 8:h=new Uint8Array(e,f*l*r*c,l*r*c);break;case 16:h=new Uint16Array(e,f*l*r*c,l*r*c/2);break;case 32:h=new Uint32Array(e,f*l*r*c,l*r*c/4);break;default:throw new Error("Predictor 2 not allowed with "+o[0]+" bits per sample.")}n(h,l)}else 3===t&&i(h=new Uint8Array(e,f*l*r*c,l*r*c),l,c)}return e}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(3)),i=u(r(4)),a=u(r(13)),o=u(r(16)),s=u(r(25));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function l(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var i=258,a=9,o=0;function s(){i=258,a=9}function u(e){var t=function(e,t,r){var n=t%8,i=Math.floor(t/8),a=8-n,o=t+r-8*(i+1),s=8*(i+2)-(t+r),u=8*(i+2)-t;if(s=Math.max(0,s),i>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var c=e[i]&Math.pow(2,8-n)-1,l=c<<=r-a;if(i+1<e.length){var f=e[i+1]>>>s;l+=f<<=Math.max(0,r-u)}if(o>8&&i+2<e.length){var h=8*(i+3)-(t+r);l+=e[i+2]>>>h}return l}(e,o,a);return o+=a,t}function l(e,n){return r[i]=n,t[i]=e,++i-1}function f(e){for(var n=[],i=e;4096!==i;i=t[i])n.push(r[i]);return n}var h=[];s();for(var d=new Uint8Array(e),p=u(d),v=void 0;257!==p;){if(256===p){for(s(),p=u(d);256===p;)p=u(d);if(p>256)throw new Error("corrupted code at scanline "+p);if(257===p)break;c(h,f(p)),v=p}else if(p<i){var g=f(p);c(h,g),l(v,g[g.length-1]),v=p}else{var m=f(v);if(!m)throw new Error("Bogus entry. Not in dictionary, "+v+" / "+i+", position: "+o);c(h,m),h.push(m[m.length-1]),l(v,m[m.length-1]),v=p}i+1>=Math.pow(2,a)&&(12===a?v=void 0:a++),p=u(d)}return new Uint8Array(h)}var f=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"decodeBlock",value:function(e){return l(e).buffer}}]),t}(s.default);t.default=f},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(13)),i=c(r(16)),a=c(r(3)),o=c(r(4)),s=c(r(38)),u=c(r(25));function c(e){return e&&e.__esModule?e:{default:e}}var l=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function f(e,t){for(var r=0,n=[],i=16;i>0&&!e[i-1];)--i;n.push({children:[],index:0});for(var a=n[0],o=void 0,s=0;s<i;s++){for(var u=0;u<e[s];u++){for((a=n.pop()).children[a.index]=t[r];a.index>0;)a=n.pop();for(a.index++,n.push(a);n.length<=s;)n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o;r++}s+1<i&&(n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o)}return n[0].children}function h(e,t,r,n,i,a,o,u,c){var f=r.mcusPerLine,h=r.progressive,d=t,p=t,v=0,g=0;function m(){if(g>0)return g--,v>>g&1;if(255===(v=e[p++])){var t=e[p++];if(t)throw new Error("unexpected marker: "+(v<<8|t).toString(16))}return g=7,v>>>7}function y(e){for(var t=e,r=void 0;null!==(r=m());){if("number"===typeof(t=t[r]))return t;if("object"!==("undefined"===typeof t?"undefined":(0,s.default)(t)))throw new Error("invalid huffman sequence")}return null}function b(e){for(var t=e,r=0;t>0;){var n=m();if(null===n)return;r=r<<1|n,--t}return r}function _(e){var t=b(e);return t>=1<<e-1?t:t+(-1<<e)+1}var w=0,x=0,O=void 0;function E(e,t,r,n,i){var a=r%f,o=(r/f|0)*e.v+n,s=a*e.h+i;t(e,e.blocks[o][s])}function k(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}var j=n.length,S=void 0,P=void 0,A=void 0,T=void 0,R=void 0,C=void 0;C=h?0===a?0===u?function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:_(r)<<c;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=m()<<c}:0===u?function(e,t){if(w>0)w--;else for(var r=a,n=o;r<=n;){var i=y(e.huffmanTableAC),s=15&i,u=i>>4;if(0===s){if(u<15){w=b(u)+(1<<u)-1;break}r+=16}else t[l[r+=u]]=_(s)*(1<<c),r++}}:function(e,t){for(var r=a,n=o,i=0;r<=n;){var s=l[r],u=t[s]<0?-1:1;switch(x){case 0:var f=y(e.huffmanTableAC),h=15&f;if(i=f>>4,0===h)i<15?(w=b(i)+(1<<i),x=4):(i=16,x=1);else{if(1!==h)throw new Error("invalid ACn encoding");O=_(h),x=i?2:3}continue;case 1:case 2:t[s]?t[s]+=(m()<<c)*u:0===--i&&(x=2===x?3:0);break;case 3:t[s]?t[s]+=(m()<<c)*u:(t[s]=O<<c,x=0);break;case 4:t[s]&&(t[s]+=(m()<<c)*u)}r++}4===x&&0===--w&&(x=0)}:function(e,t){var r=y(e.huffmanTableDC),n=0===r?0:_(r);e.pred+=n,t[0]=e.pred;for(var i=1;i<64;){var a=y(e.huffmanTableAC),o=15&a,s=a>>4;if(0===o){if(s<15)break;i+=16}else t[l[i+=s]]=_(o),i++}};var M=0,I=void 0,L=void 0;L=1===j?n[0].blocksPerLine*n[0].blocksPerColumn:f*r.mcusPerColumn;for(var F=i||L;M<L;){for(P=0;P<j;P++)n[P].pred=0;if(w=0,1===j)for(S=n[0],R=0;R<F;R++)k(S,C,M),M++;else for(R=0;R<F;R++){for(P=0;P<j;P++){var N=S=n[P],D=N.h,B=N.v;for(A=0;A<B;A++)for(T=0;T<D;T++)E(S,C,M,A,T)}if(++M===L)break}if(g=0,(I=e[p]<<8|e[p+1])<65280)throw new Error("marker was not found");if(!(I>=65488&&I<=65495))break;p+=2}return p-d}function d(e,t){var r=[],n=t.blocksPerLine,i=t.blocksPerColumn,a=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function u(e,r,n){var i=t.quantizationTable,a=void 0,o=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,p=n,v=void 0;for(v=0;v<64;v++)p[v]=e[v]*i[v];for(v=0;v<8;++v){var g=8*v;0!==p[1+g]||0!==p[2+g]||0!==p[3+g]||0!==p[4+g]||0!==p[5+g]||0!==p[6+g]||0!==p[7+g]?(a=5793*p[0+g]+128>>8,o=5793*p[4+g]+128>>8,s=p[2+g],u=p[6+g],c=2896*(p[1+g]-p[7+g])+128>>8,h=2896*(p[1+g]+p[7+g])+128>>8,l=p[3+g]<<4,d=a-o+1>>1,a=a+o+1>>1,o=d,d=3784*s+1567*u+128>>8,s=1567*s-3784*u+128>>8,u=d,d=c-(f=p[5+g]<<4)+1>>1,c=c+f+1>>1,f=d,d=h+l+1>>1,l=h-l+1>>1,h=d,d=a-u+1>>1,a=a+u+1>>1,u=d,d=o-s+1>>1,o=o+s+1>>1,s=d,d=2276*c+3406*h+2048>>12,c=3406*c-2276*h+2048>>12,h=d,d=799*l+4017*f+2048>>12,l=4017*l-799*f+2048>>12,f=d,p[0+g]=a+h,p[7+g]=a-h,p[1+g]=o+f,p[6+g]=o-f,p[2+g]=s+l,p[5+g]=s-l,p[3+g]=u+c,p[4+g]=u-c):(d=5793*p[0+g]+512>>10,p[0+g]=d,p[1+g]=d,p[2+g]=d,p[3+g]=d,p[4+g]=d,p[5+g]=d,p[6+g]=d,p[7+g]=d)}for(v=0;v<8;++v){var m=v;0!==p[8+m]||0!==p[16+m]||0!==p[24+m]||0!==p[32+m]||0!==p[40+m]||0!==p[48+m]||0!==p[56+m]?(a=5793*p[0+m]+2048>>12,o=5793*p[32+m]+2048>>12,s=p[16+m],u=p[48+m],c=2896*(p[8+m]-p[56+m])+2048>>12,h=2896*(p[8+m]+p[56+m])+2048>>12,l=p[24+m],d=a-o+1>>1,a=a+o+1>>1,o=d,d=3784*s+1567*u+2048>>12,s=1567*s-3784*u+2048>>12,u=d,d=c-(f=p[40+m])+1>>1,c=c+f+1>>1,f=d,d=h+l+1>>1,l=h-l+1>>1,h=d,d=a-u+1>>1,a=a+u+1>>1,u=d,d=o-s+1>>1,o=o+s+1>>1,s=d,d=2276*c+3406*h+2048>>12,c=3406*c-2276*h+2048>>12,h=d,d=799*l+4017*f+2048>>12,l=4017*l-799*f+2048>>12,f=d,p[0+m]=a+h,p[56+m]=a-h,p[8+m]=o+f,p[48+m]=o-f,p[16+m]=s+l,p[40+m]=s-l,p[24+m]=u+c,p[32+m]=u-c):(d=5793*n[v+0]+8192>>14,p[0+m]=d,p[8+m]=d,p[16+m]=d,p[24+m]=d,p[32+m]=d,p[40+m]=d,p[48+m]=d,p[56+m]=d)}for(v=0;v<64;++v){var y=128+(p[v]+8>>4);r[v]=y<0?0:y>255?255:y}}for(var c=0;c<i;c++){for(var l=c<<3,f=0;f<8;f++)r.push(new Uint8Array(a));for(var h=0;h<n;h++){u(t.blocks[c][h],s,o);for(var d=0,p=h<<3,v=0;v<8;v++)for(var g=r[l+v],m=0;m<8;m++)g[p+m]=s[d++]}}return r}var p=function(){function e(){(0,a.default)(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return(0,o.default)(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(){var n=r(),i=e.subarray(t,t+n-2);return t+=i.length,i}function i(e){var t=0,r=0,n=void 0,i=void 0;for(i in e.components)e.components.hasOwnProperty(i)&&(t<(n=e.components[i]).h&&(t=n.h),r<n.v&&(r=n.v));var a=Math.ceil(e.samplesPerLine/8/t),o=Math.ceil(e.scanLines/8/r);for(i in e.components)if(e.components.hasOwnProperty(i)){n=e.components[i];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*n.h/t),u=Math.ceil(Math.ceil(e.scanLines/8)*n.v/r),c=a*n.h,l=o*n.v,f=[],h=0;h<l;h++){for(var d=[],p=0;p<c;p++)d.push(new Int32Array(64));f.push(d)}n.blocksPerLine=s,n.blocksPerColumn=u,n.blocks=f}e.maxH=t,e.maxV=r,e.mcusPerLine=a,e.mcusPerColumn=o}var a=r();if(65496!==a)throw new Error("SOI not found");for(a=r();65497!==a;){switch(a){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var o=n();65504===a&&74===o[0]&&70===o[1]&&73===o[2]&&70===o[3]&&0===o[4]&&(this.jfif={version:{major:o[5],minor:o[6]},densityUnits:o[7],xDensity:o[8]<<8|o[9],yDensity:o[10]<<8|o[11],thumbWidth:o[12],thumbHeight:o[13],thumbData:o.subarray(14,14+3*o[12]*o[13])}),65518===a&&65===o[0]&&100===o[1]&&111===o[2]&&98===o[3]&&101===o[4]&&0===o[5]&&(this.adobe={version:o[6],flags0:o[7]<<8|o[8],flags1:o[9]<<8|o[10],transformCode:o[11]});break;case 65499:for(var s=r()+t-2;t<s;){var u=e[t++],c=new Int32Array(64);if(u>>4===0)for(var d=0;d<64;d++)c[l[d]]=e[t++];else{if(u>>4!==1)throw new Error("DQT: invalid table spec");for(var p=0;p<64;p++)c[l[p]]=r()}this.quantizationTables[15&u]=c}break;case 65472:case 65473:case 65474:r();for(var v={extended:65473===a,progressive:65474===a,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},g=e[t++],m=void 0,y=0;y<g;y++){m=e[t];var b=e[t+1]>>4,_=15&e[t+1],w=e[t+2];v.componentsOrder.push(m),v.components[m]={h:b,v:_,quantizationIdx:w},t+=3}i(v),this.frames.push(v);break;case 65476:for(var x=r(),O=2;O<x;){for(var E=e[t++],k=new Uint8Array(16),j=0,S=0;S<16;S++,t++)k[S]=e[t],j+=k[S];for(var P=new Uint8Array(j),A=0;A<j;A++,t++)P[A]=e[t];O+=17+j,E>>4===0?this.huffmanTablesDC[15&E]=f(k,P):this.huffmanTablesAC[15&E]=f(k,P)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var T=e[t++],R=[],C=this.frames[0],M=0;M<T;M++){var I=C.components[e[t++]],L=e[t++];I.huffmanTableDC=this.huffmanTablesDC[L>>4],I.huffmanTableAC=this.huffmanTablesAC[15&L],R.push(I)}var F=e[t++],N=e[t++],D=e[t++],B=h(e,t,C,R,this.resetInterval,F,N,D>>4,15&D);t+=B;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker "+a.toString(16))}a=r()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++){var r=this.frames[t].components,n=!0,i=!1,a=void 0;try{for(var o,s=Object.keys(r)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;r[u].quantizationTable=this.quantizationTables[r[u].quantizationIdx],delete r[u].quantizationIdx}}catch(dr){i=!0,a=dr}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}for(var c=e[0],l=c.components,f=c.componentsOrder,h=[],p=c.samplesPerLine,v=c.scanLines,g=0;g<f.length;g++){var m=l[f[g]];h.push({lines:d(0,m),scaleX:m.h/c.maxH,scaleY:m.v/c.maxV})}for(var y=new Uint8Array(p*v*h.length),b=0,_=0;_<v;++_)for(var w=0;w<p;++w)for(var x=0;x<h.length;++x){var O=h[x];y[b]=O.lines[0|_*O.scaleY][0|w*O.scaleX],++b}return y}}]),e}(),v=function(e){function t(e){(0,a.default)(this,t);var r=(0,n.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.reader=new p,e.JPEGTables&&r.reader.parse(e.JPEGTables),r}return(0,i.default)(t,e),(0,o.default)(t,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),t}(u.default);t.default=v},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(3)),i=u(r(4)),a=u(r(13)),o=u(r(16)),s=r(159);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"decodeBlock",value:function(e){return(0,s.inflate)(new Uint8Array(e)).buffer}}]),t}(u(r(25)).default);t.default=c},function(e,t,r){var n=r(160),i=r(37),a=r(165),o=r(166),s=r(167),u=r(168),c=r(169),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(s[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function h(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(e,t){var r,s,u,c,f,h,d=this.strm,p=this.options.chunkSize,v=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"===typeof e?d.input=a.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&v&&(h="string"===typeof v?a.string2buf(v):"[object ArrayBuffer]"===l.call(v)?new Uint8Array(v):v,r=n.inflateSetDictionary(this.strm,h)),r===o.Z_BUF_ERROR&&!0===g&&(r=o.Z_OK,g=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==o.Z_STREAM_END&&(0!==d.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(d.output,d.next_out),c=d.next_out-u,f=a.buf2string(d.output,u),d.next_out=c,d.avail_out=p-c,c&&i.arraySet(d.output,d.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,r){var n=r(37),i=r(161),a=r(162),o=r(163),s=r(164);function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,l(e)):-2}function h(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,f(e))):-2}function d(e,t){var r,n;return e?(n=new c,e.state=n,n.window=null,0!==(r=h(e,t))&&(e.state=null),r):-2}var p,v,g=!0;function m(e){if(g){var t;for(p=new n.Buf32(512),v=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,v,0,e.work,{bits:5}),g=!1}e.lencode=p,e.lenbits=9,e.distcode=v,e.distbits=5}function y(e,t,r,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),n.arraySet(o.window,t,r-i,a,o.wnext),(i-=a)?(n.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=f,t.inflateReset2=h,t.inflateResetKeep=l,t.inflateInit=function(e){return d(e,15)},t.inflateInit2=d,t.inflate=function(e,t){var r,c,l,f,h,d,p,v,g,b,_,w,x,O,E,k,j,S,P,A,T,R,C,M,I=0,L=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(r=e.state).mode&&(r.mode=13),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,v=r.hold,g=r.bits,b=d,_=p,R=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(2&r.wrap&&35615===v){r.check=0,L[0]=255&v,L[1]=v>>>8&255,r.check=a(r.check,L,2,0),v=0,g=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!==(15&v)){e.msg="unknown compression method",r.mode=30;break}if(g-=4,T=8+(15&(v>>>=4)),0===r.wbits)r.wbits=T;else if(T>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<T,e.adler=r.check=1,r.mode=512&v?10:12,v=0,g=0;break;case 2:for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(r.flags=v,8!==(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(L[0]=255&v,L[1]=v>>>8&255,r.check=a(r.check,L,2,0)),v=0,g=0,r.mode=3;case 3:for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}r.head&&(r.head.time=v),512&r.flags&&(L[0]=255&v,L[1]=v>>>8&255,L[2]=v>>>16&255,L[3]=v>>>24&255,r.check=a(r.check,L,4,0)),v=0,g=0,r.mode=4;case 4:for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(L[0]=255&v,L[1]=v>>>8&255,r.check=a(r.check,L,2,0)),v=0,g=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(L[0]=255&v,L[1]=v>>>8&255,r.check=a(r.check,L,2,0)),v=0,g=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>d&&(w=d),w&&(r.head&&(T=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,f,w,T)),512&r.flags&&(r.check=a(r.check,c,w,f)),d-=w,f+=w,r.length-=w),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===d)break e;w=0;do{T=c[f+w++],r.head&&T&&r.length<65536&&(r.head.name+=String.fromCharCode(T))}while(T&&w<d);if(512&r.flags&&(r.check=a(r.check,c,w,f)),d-=w,f+=w,T)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===d)break e;w=0;do{T=c[f+w++],r.head&&T&&r.length<65536&&(r.head.comment+=String.fromCharCode(T))}while(T&&w<d);if(512&r.flags&&(r.check=a(r.check,c,w,f)),d-=w,f+=w,T)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}v=0,g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}e.adler=r.check=u(v),v=0,g=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=v,r.bits=g,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){v>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}switch(r.last=1&v,g-=1,3&(v>>>=1)){case 0:r.mode=14;break;case 1:if(m(r),r.mode=20,6===t){v>>>=2,g-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if((65535&v)!==(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,v=0,g=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(w=r.length){if(w>d&&(w=d),w>p&&(w=p),0===w)break e;n.arraySet(l,c,f,w,h),d-=w,f+=w,p-=w,h+=w,r.length-=w;break}r.mode=12;break;case 17:for(;g<14;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(r.nlen=257+(31&v),v>>>=5,g-=5,r.ndist=1+(31&v),v>>>=5,g-=5,r.ncode=4+(15&v),v>>>=4,g-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}r.lens[F[r.have++]]=7&v,v>>>=3,g-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},R=s(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,R){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;k=(I=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,j=65535&I,!((E=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(j<16)v>>>=E,g-=E,r.lens[r.have++]=j;else{if(16===j){for(M=E+2;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v>>>=E,g-=E,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}T=r.lens[r.have-1],w=3+(3&v),v>>>=2,g-=2}else if(17===j){for(M=E+3;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}g-=E,T=0,w=3+(7&(v>>>=E)),v>>>=3,g-=3}else{for(M=E+7;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}g-=E,T=0,w=11+(127&(v>>>=E)),v>>>=7,g-=7}if(r.have+w>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=T}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,C={bits:r.lenbits},R=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,R){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},R=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,R){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(d>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=v,r.bits=g,o(e,_),h=e.next_out,l=e.output,p=e.avail_out,f=e.next_in,c=e.input,d=e.avail_in,v=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;k=(I=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,j=65535&I,!((E=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(k&&0===(240&k)){for(S=E,P=k,A=j;k=(I=r.lencode[A+((v&(1<<S+P)-1)>>S)])>>>16&255,j=65535&I,!(S+(E=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}v>>>=S,g-=S,r.back+=S}if(v>>>=E,g-=E,r.back+=E,r.length=j,0===k){r.mode=26;break}if(32&k){r.back=-1,r.mode=12;break}if(64&k){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&k,r.mode=22;case 22:if(r.extra){for(M=r.extra;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;k=(I=r.distcode[v&(1<<r.distbits)-1])>>>16&255,j=65535&I,!((E=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(0===(240&k)){for(S=E,P=k,A=j;k=(I=r.distcode[A+((v&(1<<S+P)-1)>>S)])>>>16&255,j=65535&I,!(S+(E=I>>>24)<=g);){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}v>>>=S,g-=S,r.back+=S}if(v>>>=E,g-=E,r.back+=E,64&k){e.msg="invalid distance code",r.mode=30;break}r.offset=j,r.extra=15&k,r.mode=24;case 24:if(r.extra){for(M=r.extra;g<M;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break e;if(w=_-p,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,x=r.wsize-w):x=r.wnext-w,w>r.length&&(w=r.length),O=r.window}else O=l,x=h-r.offset,w=r.length;w>p&&(w=p),p-=w,r.length-=w;do{l[h++]=O[x++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===p)break e;l[h++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===d)break e;d--,v|=c[f++]<<g,g+=8}if(_-=p,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?a(r.check,l,_,h-_):i(r.check,l,_,h-_)),_=p,(r.flags?v:u(v))!==r.check){e.msg="incorrect data check",r.mode=30;break}v=0,g=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===d)break e;d--,v+=c[f++]<<g,g+=8}if(v!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}v=0,g=0}r.mode=29;case 29:R=1;break e;case 30:R=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,r.hold=v,r.bits=g,(r.wsize||_!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&y(e,e.output,e.next_out,_-e.avail_out),b-=e.avail_in,_-=e.avail_out,e.total_in+=b,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?a(r.check,l,_,e.next_out-_):i(r.check,l,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===b&&0===_||4===t)&&0===R&&(R=-5),R},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0===(2&(r=e.state).wrap)?-2:(r.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,t,n,0)!==r.check?-3:y(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){e.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,i){var a=n,o=i+r;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,r){e.exports=function(e,t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,g,m,y,b,_,w,x,O,E,k,j;r=e.state,n=e.next_in,k=e.input,i=n+(e.avail_in-5),a=e.next_out,j=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,v=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(d+=k[n++]<<p,p+=8,d+=k[n++]<<p,p+=8),b=v[d&m];t:for(;;){if(d>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))j[a++]=65535&b;else{if(!(16&_)){if(0===(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&b,(_&=15)&&(p<_&&(d+=k[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=k[n++]<<p,p+=8,d+=k[n++]<<p,p+=8),b=g[d&y];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0===(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(x=65535&b,p<(_&=15)&&(d+=k[n++]<<p,(p+=8)<_&&(d+=k[n++]<<p,p+=8)),(x+=d&(1<<_)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=_,p-=_,x>(_=a-o)){if((_=x-_)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(O=0,E=h,0===f){if(O+=c-_,_<w){w-=_;do{j[a++]=h[O++]}while(--_);O=a-x,E=j}}else if(f<_){if(O+=c+f-_,(_-=f)<w){w-=_;do{j[a++]=h[O++]}while(--_);if(O=0,f<w){w-=_=f;do{j[a++]=h[O++]}while(--_);O=a-x,E=j}}}else if(O+=f-_,_<w){w-=_;do{j[a++]=h[O++]}while(--_);O=a-x,E=j}for(;w>2;)j[a++]=E[O++],j[a++]=E[O++],j[a++]=E[O++],w-=3;w&&(j[a++]=E[O++],w>1&&(j[a++]=E[O++]))}else{O=a-x;do{j[a++]=j[O++],j[a++]=j[O++],j[a++]=j[O++],w-=3}while(w>2);w&&(j[a++]=j[O++],w>1&&(j[a++]=j[O++]))}break}}break}}while(n<i&&a<s);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=d,r.bits=p}},function(e,t,r){var n=r(37),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,c,l,f,h){var d,p,v,g,m,y,b,_,w,x=h.bits,O=0,E=0,k=0,j=0,S=0,P=0,A=0,T=0,R=0,C=0,M=null,I=0,L=new n.Buf16(16),F=new n.Buf16(16),N=null,D=0;for(O=0;O<=15;O++)L[O]=0;for(E=0;E<u;E++)L[t[r+E]]++;for(S=x,j=15;j>=1&&0===L[j];j--);if(S>j&&(S=j),0===j)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(k=1;k<j&&0===L[k];k++);for(S<k&&(S=k),T=1,O=1;O<=15;O++)if(T<<=1,(T-=L[O])<0)return-1;if(T>0&&(0===e||1!==j))return-1;for(F[1]=0,O=1;O<15;O++)F[O+1]=F[O]+L[O];for(E=0;E<u;E++)0!==t[r+E]&&(f[F[t[r+E]]++]=E);if(0===e?(M=N=f,y=19):1===e?(M=i,I-=257,N=a,D-=257,y=256):(M=o,N=s,y=-1),C=0,E=0,O=k,m=l,P=S,A=0,v=-1,g=(R=1<<S)-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){b=O-A,f[E]<y?(_=0,w=f[E]):f[E]>y?(_=N[D+f[E]],w=M[I+f[E]]):(_=96,w=0),d=1<<O-A,k=p=1<<P;do{c[m+(C>>A)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<O-1;C&d;)d>>=1;if(0!==d?(C&=d-1,C+=d):C=0,E++,0===--L[O]){if(O===j)break;O=t[r+f[E]]}if(O>S&&(C&g)!==v){for(0===A&&(A=S),m+=k,T=1<<(P=O-A);P+A<j&&!((T-=L[P+A])<=0);)P++,T<<=1;if(R+=1<<P,1===e&&R>852||2===e&&R>592)return 1;c[v=C&g]=S<<24|P<<16|m-l|0}}return 0!==C&&(c[m+C]=O-A<<24|64<<16|0),h.bits=S,0}},function(e,t,r){var n=r(37),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(Xn){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Xn){a=!1}for(var o=new n.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,t.string2buf=function(e){var t,r,i,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320===(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(u),o=0,a=0;o<u;a++)55296===(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320===(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,n,i,a,s=t||e.length,c=new Array(2*s);for(n=0,r=0;r<s;)if((i=e[r++])<128)c[n++]=i;else if((a=o[i])>4)c[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&r<s;)i=i<<6|63&e[r++],a--;a>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return u(c,n)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}},function(e,t,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(3)),i=s(r(4)),a=s(r(13)),o=s(r(16));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var i=t.getInt8(n);if(i<0){var a=t.getUint8(n+1);i=-i;for(var o=0;o<=i;++o)r.push(a);n+=1}else{for(var s=0;s<=i;++s)r.push(t.getUint8(n+s+1));n+=i+1}}return new Uint8Array(r).buffer}}]),t}(s(r(25)).default);t.default=u},function(e,t,r){function n(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(e).constructor)(t*r*n)}function i(e,t,r,i,a){var o=t/i,s=r/a;return e.map((function(e){for(var u=n(e,i,a),c=0;c<a;++c)for(var l=Math.min(Math.round(s*c),r-1),f=0;f<i;++f){var h=Math.min(Math.round(o*f),t-1),d=e[l*t+h];u[c*i+f]=d}return u}))}function a(e,t,r){return(1-r)*e+r*t}function o(e,t,r,i,o){var s=t/i,u=r/o;return e.map((function(e){for(var c=n(e,i,o),l=0;l<o;++l)for(var f=u*l,h=Math.floor(f),d=Math.min(Math.ceil(f),r-1),p=0;p<i;++p){var v=s*p,g=v%1,m=Math.floor(v),y=Math.min(Math.ceil(v),t-1),b=e[h*t+m],_=e[h*t+y],w=e[d*t+m],x=e[d*t+y],O=a(a(b,_,g),a(w,x,g),f%1);c[l*i+p]=O}return c}))}function s(e,t,r,i,a,o){for(var s=t/i,u=r/a,c=n(e,i,a,o),l=0;l<a;++l)for(var f=Math.min(Math.round(u*l),r-1),h=0;h<i;++h)for(var d=Math.min(Math.round(s*h),t-1),p=0;p<o;++p){var v=e[f*t*o+d*o+p];c[l*i*o+h*o+p]=v}return c}function u(e,t,r,i,o,s){for(var u=t/i,c=r/o,l=n(e,i,o,s),f=0;f<o;++f)for(var h=c*f,d=Math.floor(h),p=Math.min(Math.ceil(h),r-1),v=0;v<i;++v)for(var g=u*v,m=g%1,y=Math.floor(g),b=Math.min(Math.ceil(g),t-1),_=0;_<s;++_){var w=e[d*t*s+y*s+_],x=e[d*t*s+b*s+_],O=e[p*t*s+y*s+_],E=e[p*t*s+b*s+_],k=a(a(w,x,m),a(O,E,m),h%1);l[f*i*s+v*s+_]=k}return l}Object.defineProperty(t,"__esModule",{value:!0}),t.resampleNearest=i,t.resampleBilinear=o,t.resample=function(e,t,r,n,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(s.toLowerCase()){case"nearest":return i(e,t,r,n,a);case"bilinear":case"linear":return o(e,t,r,n,a);default:throw new Error("Unsupported resampling method: '"+s+"'")}},t.resampleNearestInterleaved=s,t.resampleBilinearInterleaved=u,t.resampleInterleaved=function(e,t,r,n,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(o.toLowerCase()){case"nearest":return s(e,t,r,n,i,a);case"bilinear":case"linear":return u(e,t,r,n,i,a);default:throw new Error("Unsupported resampling method: '"+o+"'")}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(3)),i=a(r(4));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){(0,n.default)(this,e),this._dataView=new DataView(t)}return(0,i.default)(e,[{key:"getUint64",value:function(e,t){var r=this.getUint32(e,t),n=this.getUint32(e+4,t);return t?r<<32|n:n<<32|r}},{key:"getInt64",value:function(e,t){var r=void 0;return t?(r=this.getInt32(e,t))<<32|this.getUint32(e+4,t):(r=this.getUint32(e,t),this.getInt32(e+4,t)<<32|r)}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}},{key:"buffer",get:function(){return this._dataView.buffer}}]),e}();t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(3)),i=a(r(4));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,r,i,a){(0,n.default)(this,e),this._dataView=new DataView(t),this._sliceOffset=r,this._littleEndian=i,this._bigTiff=a}return(0,i.default)(e,[{key:"covers",value:function(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}},{key:"readUint8",value:function(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(e){var t=this.readUint32(e),r=this.readUint32(e+4);return this._littleEndian?t<<32|r:r<<32|t}},{key:"readInt64",value:function(e){var t=void 0;return this._littleEndian?(t=this.readInt32(e))<<32|this.readUint32(e+4):(t=this.readUint32(e-this._sliceOffset),this.readInt32(e-this._sliceOffset+4)<<32|t)}},{key:"readOffset",value:function(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}},{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}}]),e}();t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(51)),i=p(r(3)),a=p(r(4)),o=p(r(33)),s=p(r(34)),u=function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();t.makeFetchSource=y,t.makeXHRSource=b,t.makeHttpSource=_,t.makeRemoteSource=function(e,t){var r=t.forceXHR;if("function"===typeof fetch&&!r)return y(e,t);if("undefined"!==typeof XMLHttpRequest)return b(e,t);if(f.default.get)return _(e,t);throw new Error("No remote source available")},t.makeBufferSource=function(e){return{fetch:function(){var t=(0,s.default)(o.default.mark((function t(r,n){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.slice(r,r+n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}},t.makeFileSource=function(e){var t=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new Promise((function(n,i){(0,l.open)(e,t,r,(function(e,t){e?i(e):n(t)}))}))}(e,"r");return{fetch:function(){var e=(0,s.default)(o.default.mark((function e(r,n){var i,a,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return i=e.sent,e.next=5,w(i,c.Buffer.alloc(n),0,n,r);case 5:return a=e.sent,s=a.buffer,e.abrupt("return",s.buffer);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}},t.makeFileReaderSource=function(e){return{fetch:function(){var t=(0,s.default)(o.default.mark((function t(r,n){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var a=e.slice(r,r+n),o=new FileReader;o.onload=function(e){return t(e.target.result)},o.onerror=i,o.readAsArrayBuffer(a)})));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}};var c=r(17),l=r(17),f=p(r(17)),h=p(r(175)),d=p(r(79));function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){var n=t+r,i=new ArrayBuffer(r),a=new Uint8Array(i),o=!0,s=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=f.offset-t,d=f.top-n,p=0,v=0,g=void 0;h<0?p=-h:h>0&&(v=h),d<0?g=f.length-p:d>0&&(g=n-f.offset-p);var m=new Uint8Array(f.data,p,g);a.set(m,v)}}catch(dr){s=!0,u=dr}finally{try{!o&&l.return&&l.return()}finally{if(s)throw u}}return i}function g(e){if(0===e.length)return[];var t=[],r=[];t.push(r);for(var n=0;n<e.length;++n)0===n||e[n]===e[n-1]+1?r.push(e[n]):(r=[e[n]],t.push(r));return t}var m=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.blockSize,a=void 0===n?65536:n;(0,i.default)(this,e),this.retrievalFunction=t,this.blockSize=a,this.blockRequests=new Map,this.blocks=new Map,this.blockIdsAwaitingRequest=null}return(0,a.default)(e,[{key:"fetch",value:function(){var e=(0,s.default)(o.default.mark((function e(t,r){var n,i,a,c,l,f,h,d,p,m,y,b,_,w,x,O,E,k,j,S,P,A,T,R,C,M=this,I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t+r,i=Math.floor(t/this.blockSize)*this.blockSize,a=[],c=[],l=[],f=i;f<n;f+=this.blockSize)h=Math.floor(f/this.blockSize),this.blocks.has(h)||this.blockRequests.has(h)||c.push(h),this.blockRequests.has(h)&&l.push(this.blockRequests.get(h)),a.push(h);if(this.blockIdsAwaitingRequest)for(d=0;d<c.length;++d)p=c[d],this.blockIdsAwaitingRequest.add(p);else this.blockIdsAwaitingRequest=new Set(c);if(I){e.next=10;break}return e.next=10,u();case 10:if(!this.blockIdsAwaitingRequest){e.next=33;break}for(m=g(Array.from(this.blockIdsAwaitingRequest).sort()),y=function(e){for(var t=M.requestData(e[0]*M.blockSize,e.length*M.blockSize),r=function(r){var n=e[r];M.blockRequests.set(n,(0,s.default)(o.default.mark((function e(){var i,a,s,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:i=e.sent,a=r*M.blockSize,s=Math.min(a+M.blockSize,i.data.byteLength),u=i.data.slice(a,s),M.blockRequests.delete(n),M.blocks.set(n,{data:u,offset:i.offset+a,length:u.byteLength,top:i.offset+s});case 8:case"end":return e.stop()}}),e,M)})))())},n=0;n<e.length;++n)r(n)},b=!0,_=!1,w=void 0,e.prev=16,x=m[Symbol.iterator]();!(b=(O=x.next()).done);b=!0)E=O.value,y(E);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),_=!0,w=e.t0;case 24:e.prev=24,e.prev=25,!b&&x.return&&x.return();case 27:if(e.prev=27,!_){e.next=30;break}throw w;case 30:return e.finish(27);case 31:return e.finish(24);case 32:this.blockIdsAwaitingRequest=null;case 33:for(k=[],j=!0,S=!1,P=void 0,e.prev=37,A=c[Symbol.iterator]();!(j=(T=A.next()).done);j=!0)R=T.value,this.blockRequests.has(R)&&k.push(this.blockRequests.get(R));e.next=45;break;case 41:e.prev=41,e.t1=e.catch(37),S=!0,P=e.t1;case 45:e.prev=45,e.prev=46,!j&&A.return&&A.return();case 48:if(e.prev=48,!S){e.next=51;break}throw P;case 51:return e.finish(48);case 52:return e.finish(45);case 53:return e.next=55,Promise.all(k);case 55:return e.next=57,Promise.all(l);case 57:return C=a.map((function(e){return M.blocks.get(e)})),e.abrupt("return",v(C,t,r));case 59:case"end":return e.stop()}}),e,this,[[16,20,24,32],[25,,27,31],[37,41,45,53],[46,,48,52]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestData",value:function(){var e=(0,s.default)(o.default.mark((function e(t,r){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.retrievalFunction(t,r);case 2:return(n=e.sent).length?n.length!==n.data.byteLength&&(n.data=n.data.slice(0,n.length)):n.length=n.data.byteLength,n.top=n.offset+n.length,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function y(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,i=void 0===n?{}:n,a=r.blockSize;return new m(function(){var r=(0,s.default)(o.default.mark((function r(n,a){var s,u,c;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{headers:Object.assign({},i,{Range:"bytes="+n+"-"+(n+a-1)})});case 2:if((s=t.sent).ok){t.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==s.status){t.next=21;break}if(!s.arrayBuffer){t.next=14;break}return t.next=11,s.arrayBuffer();case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,s.buffer();case 16:t.t0=t.sent.buffer;case 17:return u=t.t0,t.abrupt("return",{data:u,offset:n,length:a});case 21:if(!s.arrayBuffer){t.next=27;break}return t.next=24,s.arrayBuffer();case 24:t.t1=t.sent,t.next=30;break;case 27:return t.next=29,s.buffer();case 29:t.t1=t.sent.buffer;case 30:return c=t.t1,t.abrupt("return",{data:c,offset:0,length:c.byteLength});case 32:case"end":return t.stop()}}),r,t)})));return function(e,t){return r.apply(this,arguments)}}(),{blockSize:a})}function b(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.headers,a=void 0===i?{}:i,u=r.blockSize;return new m(function(){var r=(0,s.default)(o.default.mark((function r(i,s){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="arraybuffer",Object.entries(Object.assign({},a,{Range:"bytes="+i+"-"+(i+s-1)})).forEach((function(e){var t=(0,n.default)(e,2),r=t[0],i=t[1];return o.setRequestHeader(r,i)})),o.onload=function(){var e=o.response;206===o.status?t({data:e,offset:i,length:s}):t({data:e,offset:0,length:e.byteLength})},o.onerror=r,o.send()})));case 1:case"end":return t.stop()}}),r,t)})));return function(e,t){return r.apply(this,arguments)}}(),{blockSize:u})}function _(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,i=void 0===n?{}:n,a=r.blockSize;return new m(function(){var r=(0,s.default)(o.default.mark((function r(n,a){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var o=d.default.parse(e);("http:"===o.protocol?f.default:h.default).get(Object.assign({},o,{headers:Object.assign({},i,{Range:"bytes="+n+"-"+(n+a-1)})}),(function(e){var r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){var e=c.Buffer.concat(r).buffer;t({data:e,offset:n,length:e.byteLength})}))})).on("error",r)})));case 1:case"end":return t.stop()}}),r,t)})));return function(e,t){return r.apply(this,arguments)}}(),{blockSize:a})}function w(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise((function(e,r){l.read.apply(void 0,t.concat([function(t,n,i){t?r(t):e({bytesRead:n,buffer:i})}]))}))}},function(e,t,r){var n=r(17),i=r(79),a=e.exports;for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);function s(e){if("string"===typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=s(e),n.request.call(this,e,t)},a.get=function(e,t){return e=s(e),n.get.call(this,e,t)}},function(e,t,r){(function(e,n){var i;!function(a){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var o="object"==typeof n&&n;o.global===o||o.window===o||o.self;var s,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function v(e){throw new RangeError(h[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function m(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var n=0;for(e=r?d(e/700):e>>1,e+=d(e/t);e>455;n+=36)e=d(e/35);return d(n+36*e/(e+38))}function x(e){var t,r,n,i,a,o,s,c,l,f,h,p=[],g=e.length,m=0,y=128,_=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&v("not-basic"),p.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(a=m,o=1,s=36;i>=g&&v("invalid-input"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>d((u-m)/o))&&v("overflow"),m+=c*o,!(c<(l=s<=_?1:s>=_+26?26:s-_));s+=36)o>d(u/(f=36-l))&&v("overflow"),o*=f;_=w(m-a,t=p.length+1,0==a),d(m/t)>u-y&&v("overflow"),y+=d(m/t),m%=t,p.splice(m++,0,y)}return b(p)}function O(e){var t,r,n,i,a,o,s,c,l,f,h,g,m,b,x,O=[];for(g=(e=y(e)).length,t=128,r=0,a=72,o=0;o<g;++o)(h=e[o])<128&&O.push(p(h));for(n=i=O.length,i&&O.push("-");n<g;){for(s=u,o=0;o<g;++o)(h=e[o])>=t&&h<s&&(s=h);for(s-t>d((u-r)/(m=n+1))&&v("overflow"),r+=(s-t)*m,t=s,o=0;o<g;++o)if((h=e[o])<t&&++r>u&&v("overflow"),h==t){for(c=r,l=36;!(c<(f=l<=a?1:l>=a+26?26:l-a));l+=36)x=c-f,b=36-f,O.push(p(_(f+x%b,0))),c=d(x/b);O.push(p(_(c,0))),a=w(r,m,n==i),r=0,++n}++r,++t}return O.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:b},decode:x,encode:O,toASCII:function(e){return m(e,(function(e){return l.test(e)?"xn--"+O(e):e}))},toUnicode:function(e){return m(e,(function(e){return c.test(e)?x(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,r,t,e))||(e.exports=i)}()}).call(t,r(177)(e),r(10))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){t.decode=t.parse=r(180),t.encode=t.stringify=r(181)},function(e,t,r){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var o={};if("string"!==typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var u=1e3;a&&"number"===typeof a.maxKeys&&(u=a.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,v=e[l].replace(s,"%20"),g=v.indexOf(r);g>=0?(f=v.substr(0,g),h=v.substr(g+1)):(f=v,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),n(o,d)?i(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?a(o(e),(function(o){var s=encodeURIComponent(n(o))+r;return i(e[o])?a(e[o],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[o]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(33)),i=u(r(34)),a=u(r(3)),o=u(r(4)),s=u(r(183));function u(e){return e&&e.__esModule?e:{default:e}}var c="undefined"!==typeof navigator?navigator.hardwareConcurrency:null,l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;(0,a.default)(this,e),this.workers=[],this.idleWorkers=[],this.waitQueue=[],this.decoder=null;for(var r=0;r<t;++r){var n=new s.default;this.workers.push(n),this.idleWorkers.push(n)}}return(0,o.default)(e,[{key:"decode",value:function(){var e=(0,i.default)(n.default.mark((function e(t,r){var i,a=this;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForWorker();case 2:return i=e.sent,e.abrupt("return",new Promise((function(e,n){i.onmessage=function(t){a.finishTask(i),e(t.data[0])},i.onerror=function(e){a.finishTask(i),n(e)},i.postMessage(["decode",t,r],[r])})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"waitForWorker",value:function(){var e=(0,i.default)(n.default.mark((function e(){var t,r,i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.idleWorkers.pop())){e.next=3;break}return e.abrupt("return",t);case 3:return r={},i=new Promise((function(e){r.resolve=e})),this.waitQueue.push(r),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishTask",value:function(){var e=(0,i.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.waitQueue.pop())?r.resolve(t):this.idleWorkers.push(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){for(var e=0;e<this.workers.length;++e)this.workers[e].terminate()}}]),e}();t.default=l},function(e,t,r){e.exports=function(){return r(184)('!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=49)}([function(e,t,n){var r=n(30)("wks"),o=n(20),i=n(2).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(8),o=n(40),i=n(25),a=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(2),o=n(1),i=n(24),a=n(7),u=n(5),s=function(e,t,n){var f,c,l,d=e&s.F,h=e&s.G,p=e&s.S,v=e&s.P,b=e&s.B,y=e&s.W,m=h?o:o[t]||(o[t]={}),w=m.prototype,_=h?r:p?r[t]:(r[t]||{}).prototype;h&&(n=t);for(f in n)(c=!d&&_&&void 0!==_[f])&&u(m,f)||(l=c?_[f]:n[f],m[f]=h&&"function"!=typeof _[f]?n[f]:b&&c?i(l,r):y&&_[f]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):v&&"function"==typeof l?i(Function.call,l):l,v&&((m.virtual||(m.virtual={}))[f]=l,e&s.R&&w&&!w[f]&&a(w,f,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(3),o=n(13);e.exports=n(4)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(56),o=n(23);e.exports=function(e){return r(o(e))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(71),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(33),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(90),i=r(o),a=n(94),u=r(a),s=n(33),f=r(s);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,f.default)(t)));e.prototype=(0,u.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=r(o),a=n(12),u=r(a),s=n(97),f=function(){function e(){(0,i.default)(this,e)}return(0,u.default)(e,[{key:"decode",value:function(e,t){var n=this.decodeBlock(t),r=e.Predictor||1;if(1!==r){var o=!e.StripOffsets,i=o?e.TileWidth:e.ImageWidth,a=o?e.TileLength:e.RowsPerStrip||e.ImageLength;return(0,s.applyPredictor)(n,r,i,a,e.BitsPerSample,e.PlanarConfiguration)}return n}}]),e}();t.default=f},function(e,t){e.exports=!0},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)r(n,o)&&(e[o]=n[o])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),o);for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},a={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(o)},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can\'t call method on  "+e);return e}},function(e,t,n){var r=n(53);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can\'t convert object to primitive value")}},function(e,t,n){var r=n(8),o=n(55),i=n(31),a=n(29)("IE_PROTO"),u=function(){},s=function(){var e,t=n(41)("iframe"),r=i.length;for(t.style.display="none",n(59).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\\/script>"),e.close(),s=e.F;r--;)delete s.prototype[i[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[a]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(43),o=n(31);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(30)("keys"),o=n(20);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(1),o=n(2),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(18)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(3).f,o=n(5),i=n(0)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(74),i=r(o),a=n(80),u=r(a),s="function"==typeof u.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof u.default&&e.constructor===u.default&&e!==u.default.prototype?"symbol":typeof e};t.default="function"==typeof u.default&&"symbol"===s(i.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof u.default&&e.constructor===u.default&&e!==u.default.prototype?"symbol":void 0===e?"undefined":s(e)}},function(e,t,n){t.f=n(0)},function(e,t,n){var r=n(2),o=n(1),i=n(18),a=n(34),u=n(3).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports={default:n(51),__esModule:!0}},function(e,t,n){"use strict";var r=n(52)(!0);n(39)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(18),o=n(6),i=n(42),a=n(7),u=n(14),s=n(54),f=n(32),c=n(60),l=n(0)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,v,b,y){s(n,t,p);var m,w,_,g=function(e){if(!d&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",x="values"==v,O=!1,S=e.prototype,E=S[l]||S["@@iterator"]||v&&S[v],A=E||g(v),P=v?x?g("entries"):A:void 0,M="Array"==t?S.entries||E:E;if(M&&(_=c(M.call(new e)))!==Object.prototype&&_.next&&(f(_,k,!0),r||"function"==typeof _[l]||a(_,l,h)),x&&E&&"values"!==E.name&&(O=!0,A=function(){return E.call(this)}),r&&!y||!d&&!O&&S[l]||a(S,l,A),u[t]=A,u[k]=h,v)if(m={values:x?A:g("values"),keys:b?A:g("keys"),entries:P},y)for(w in m)w in S||i(S,w,m[w]);else o(o.P+o.F*(d||O),t,m);return m}},function(e,t,n){e.exports=!n(4)&&!n(19)(function(){return 7!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(9),o=n(2).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){e.exports=n(7)},function(e,t,n){var r=n(5),o=n(10),i=n(57)(!1),a=n(29)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),s=0,f=[];for(n in u)n!=a&&r(u,n)&&f.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~i(f,n)||f.push(n));return f}},function(e,t,n){var r=n(22),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(23);e.exports=function(e){return Object(r(e))}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(43),o=n(31).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(36),o=n(13),i=n(10),a=n(25),u=n(5),s=n(40),f=Object.getOwnPropertyDescriptor;t.f=n(4)?f:function(e,t){if(e=i(e),t=a(t,!0),s)try{return f(e,t)}catch(e){}if(u(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=(0,f.getDecoder)(t),o=r.decode(t,n);e.postMessage([o],[o])}var i=n(50),a=r(i),u=n(68),s=r(u),f=n(69);"undefined"!=typeof self&&self.addEventListener("message",function(e){var t=(0,s.default)(e.data),n=t[0],r=t.slice(1);switch(n){case"decode":o.apply(void 0,[self].concat((0,a.default)(r)))}})},function(e,t,n){"use strict";t.__esModule=!0;var r=n(37),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){n(38),n(61),e.exports=n(1).Array.from},function(e,t,n){var r=n(22),o=n(23);e.exports=function(e){return function(t,n){var i,a,u=String(o(t)),s=r(n),f=u.length;return s<0||s>=f?e?"":void 0:(i=u.charCodeAt(s),i<55296||i>56319||s+1===f||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):i:e?u.slice(s,s+2):a-56320+(i-55296<<10)+65536)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(26),o=n(13),i=n(32),a={};n(7)(a,n(0)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(3),o=n(8),i=n(27);e.exports=n(4)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),u=a.length,s=0;u>s;)r.f(e,n=a[s++],t[n]);return e}},function(e,t,n){var r=n(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(10),o=n(44),i=n(58);e.exports=function(e){return function(t,n,a){var u,s=r(t),f=o(s.length),c=i(a,f);if(e&&n!=n){for(;f>c;)if((u=s[c++])!=u)return!0}else for(;f>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(22),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(5),o=n(45),i=n(29)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(24),o=n(6),i=n(45),a=n(62),u=n(63),s=n(44),f=n(64),c=n(65);o(o.S+o.F*!n(67)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,l,d=i(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,b=void 0!==v,y=0,m=c(d);if(b&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&u(m))for(t=s(d.length),n=new h(t);t>y;y++)f(n,y,b?v(d[y],y):d[y]);else for(l=m.call(d),n=new h;!(o=l.next()).done;y++)f(n,y,b?a(l,v,[o.value,y],!0):o.value);return n.length=y,n}})},function(e,t,n){var r=n(8);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(14),o=n(0)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(3),o=n(13);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(66),o=n(0)("iterator"),i=n(14);e.exports=n(1).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(28),o=n(0)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,n){var r=n(0)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(37),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return Array.isArray(e)?e:(0,o.default)(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){switch(e.Compression){case void 0:case 1:return new a.default;case 5:return new s.default;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new c.default(e);case 8:case 32946:return new d.default;case 32773:return new p.default;default:throw new Error("Unknown compression method identifier: "+e.Compression)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoder=o;var i=n(70),a=r(i),u=n(98),s=r(u),f=n(99),c=r(f),l=n(100),d=r(l),h=n(112),p=r(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=r(o),a=n(12),u=r(a),s=n(15),f=r(s),c=n(16),l=r(c),d=n(17),h=r(d),p=function(e){function t(){return(0,i.default)(this,t),(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,u.default)(t,[{key:"decodeBlock",value:function(e){return e}}]),t}(h.default);t.default=p},function(e,t,n){e.exports={default:n(72),__esModule:!0}},function(e,t,n){n(73);var r=n(1).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(6);r(r.S+r.F*!n(4),"Object",{defineProperty:n(3).f})},function(e,t,n){e.exports={default:n(75),__esModule:!0}},function(e,t,n){n(38),n(76),e.exports=n(34).f("iterator")},function(e,t,n){n(77);for(var r=n(2),o=n(7),i=n(14),a=n(0)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var f=u[s],c=r[f],l=c&&c.prototype;l&&!l[a]&&o(l,a,f),i[f]=i.Array}},function(e,t,n){"use strict";var r=n(78),o=n(79),i=n(14),a=n(10);e.exports=n(39)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(81),__esModule:!0}},function(e,t,n){n(82),n(87),n(88),n(89),e.exports=n(1).Symbol},function(e,t,n){"use strict";var r=n(2),o=n(5),i=n(4),a=n(6),u=n(42),s=n(83).KEY,f=n(19),c=n(30),l=n(32),d=n(20),h=n(0),p=n(34),v=n(35),b=n(84),y=n(85),m=n(8),w=n(9),_=n(10),g=n(25),k=n(13),x=n(26),O=n(86),S=n(48),E=n(3),A=n(27),P=S.f,M=E.f,T=O.f,j=r.Symbol,C=r.JSON,L=C&&C.stringify,B=h("_hidden"),I=h("toPrimitive"),N={}.propertyIsEnumerable,Z=c("symbol-registry"),D=c("symbols"),R=c("op-symbols"),F=Object.prototype,U="function"==typeof j,z=r.QObject,H=!z||!z.prototype||!z.prototype.findChild,G=i&&f(function(){return 7!=x(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=P(F,t);r&&delete F[t],M(e,t,n),r&&e!==F&&M(F,t,r)}:M,K=function(e){var t=D[e]=x(j.prototype);return t._k=e,t},W=U&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},q=function(e,t,n){return e===F&&q(R,t,n),m(e),t=g(t,!0),m(n),o(D,t)?(n.enumerable?(o(e,B)&&e[B][t]&&(e[B][t]=!1),n=x(n,{enumerable:k(0,!1)})):(o(e,B)||M(e,B,k(1,{})),e[B][t]=!0),G(e,t,n)):M(e,t,n)},V=function(e,t){m(e);for(var n,r=b(t=_(t)),o=0,i=r.length;i>o;)q(e,n=r[o++],t[n]);return e},Y=function(e,t){return void 0===t?x(e):V(x(e),t)},J=function(e){var t=N.call(this,e=g(e,!0));return!(this===F&&o(D,e)&&!o(R,e))&&(!(t||!o(this,e)||!o(D,e)||o(this,B)&&this[B][e])||t)},X=function(e,t){if(e=_(e),t=g(t,!0),e!==F||!o(D,t)||o(R,t)){var n=P(e,t);return!n||!o(D,t)||o(e,B)&&e[B][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=T(_(e)),r=[],i=0;n.length>i;)o(D,t=n[i++])||t==B||t==s||r.push(t);return r},$=function(e){for(var t,n=e===F,r=T(n?R:_(e)),i=[],a=0;r.length>a;)!o(D,t=r[a++])||n&&!o(F,t)||i.push(D[t]);return i};U||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(R,n),o(this,B)&&o(this[B],e)&&(this[B][e]=!1),G(this,e,k(1,n))};return i&&H&&G(F,e,{configurable:!0,set:t}),K(e)},u(j.prototype,"toString",function(){return this._k}),S.f=X,E.f=q,n(47).f=O.f=Q,n(36).f=J,n(46).f=$,i&&!n(18)&&u(F,"propertyIsEnumerable",J,!0),p.f=function(e){return K(h(e))}),a(a.G+a.W+a.F*!U,{Symbol:j});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=A(h.store),re=0;ne.length>re;)v(ne[re++]);a(a.S+a.F*!U,"Symbol",{for:function(e){return o(Z,e+="")?Z[e]:Z[e]=j(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in Z)if(Z[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!U,"Object",{create:Y,defineProperty:q,defineProperties:V,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),C&&a(a.S+a.F*(!U||f(function(){var e=j();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(w(t)||void 0!==e)&&!W(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,L.apply(C,r)}}),j.prototype[I]||n(7)(j.prototype,I,j.prototype.valueOf),l(j,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){var r=n(20)("meta"),o=n(9),i=n(5),a=n(3).f,u=0,s=Object.isExtensible||function(){return!0},f=!n(19)(function(){return s(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++u,w:{}}})},l=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[r].w},h=function(e){return f&&p.NEED&&s(e)&&!i(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:l,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(27),o=n(46),i=n(36);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,u=n(e),s=i.f,f=0;u.length>f;)s.call(e,a=u[f++])&&t.push(a);return t}},function(e,t,n){var r=n(28);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(10),o=n(47).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?u(e):o(r(e))}},function(e,t){},function(e,t,n){n(35)("asyncIterator")},function(e,t,n){n(35)("observable")},function(e,t,n){e.exports={default:n(91),__esModule:!0}},function(e,t,n){n(92),e.exports=n(1).Object.setPrototypeOf},function(e,t,n){var r=n(6);r(r.S,"Object",{setPrototypeOf:n(93).set})},function(e,t,n){var r=n(9),o=n(8),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can\'t set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(24)(Function.call,n(48).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={default:n(95),__esModule:!0}},function(e,t,n){n(96);var r=n(1).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(6);r(r.S,"Object",{create:n(26)})},function(e,t,n){"use strict";function r(e,t){var n=e.length-t,r=0;do{for(var o=t;o>0;o--)e[r+t]+=e[r],r++;n-=t}while(n>0)}function o(e,t,n){for(var r=0,o=e.length,i=o/n;o>t;){for(var a=t;a>0;--a)e[r+t]+=e[r],++r;o-=t}for(var u=e.slice(),s=0;s<i;++s)for(var f=0;f<n;++f)e[n*s+f]=u[(n-f-1)*i+s]}function i(e,t,n,i,a,u){if(!t||1===t)return e;for(var s=0;s<a.length;++s){if(a[s]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(a[s]!==a[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var f=a[0]/8,c=2===u?1:a.length,l=0;l<i;++l){var d=void 0;if(2===t){switch(a[0]){case 8:d=new Uint8Array(e,l*c*n*f,c*n*f);break;case 16:d=new Uint16Array(e,l*c*n*f,c*n*f/2);break;case 32:d=new Uint32Array(e,l*c*n*f,c*n*f/4);break;default:throw new Error("Predictor 2 not allowed with "+a[0]+" bits per sample.")}r(d,c,f)}else 3===t&&(d=new Uint8Array(e,l*c*n*f,c*n*f),o(d,c,f))}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.applyPredictor=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=t%8,o=Math.floor(t/8),i=8-r,a=t+n-8*(o+1),u=8*(o+2)-(t+n),s=8*(o+2)-t;if(u=Math.max(0,u),o>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),w;var f=e[o]&Math.pow(2,8-r)-1;f<<=n-i;var c=f;if(o+1<e.length){var l=e[o+1]>>>u;l<<=Math.max(0,n-s),c+=l}if(a>8&&o+2<e.length){var d=8*(o+3)-(t+n);c+=e[o+2]>>>d}return c}function i(e,t){for(var n=t.length-1;n>=0;n--)e.push(t[n]);return e}function a(e){function t(){c=258,l=y}function n(e){var t=o(e,d,l);return d+=l,t}function r(e,t){return s[c]=t,u[c]=e,++c-1}function a(e){for(var t=[],n=e;4096!==n;n=u[n])t.push(s[n]);return t}for(var u=new Uint16Array(4093),s=new Uint8Array(4093),f=0;f<=257;f++)u[f]=4096,s[f]=f;var c=258,l=y,d=0,h=[];t();for(var p=new Uint8Array(e),v=n(p),b=void 0;v!==w;){if(v===m){for(t(),v=n(p);v===m;)v=n(p);if(v>m)throw new Error("corrupted code at scanline "+v);if(v===w)break;i(h,a(v)),b=v}else if(v<c){var g=a(v);i(h,g),r(b,g[g.length-1]),b=v}else{var k=a(b);if(!k)throw new Error("Bogus entry. Not in dictionary, "+b+" / "+c+", position: "+d);i(h,k),h.push(k[k.length-1]),r(b,k[k.length-1]),b=v}c+1>=Math.pow(2,l)&&(l===_?b=void 0:l++),v=n(p)}return new Uint8Array(h)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),s=r(u),f=n(12),c=r(f),l=n(15),d=r(l),h=n(16),p=r(h),v=n(17),b=r(v),y=9,m=256,w=257,_=12,g=function(e){function t(){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"decodeBlock",value:function(e){return a(e).buffer}}]),t}(b.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=0,r=[],o=16;o>0&&!e[o-1];)--o;r.push({children:[],index:0});for(var i=r[0],a=void 0,u=0;u<o;u++){for(var s=0;s<e[u];s++){for(i=r.pop(),i.children[i.index]=t[n];i.index>0;)i=r.pop();for(i.index++,r.push(i);r.length<=u;)r.push(a={children:[],index:0}),i.children[i.index]=a.children,i=a;n++}u+1<o&&(r.push(a={children:[],index:0}),i.children[i.index]=a.children,i=a)}return r[0].children}function i(e,t,n,r,o,i,a,u,s){function f(){if(S>0)return S--,O>>S&1;if(255===(O=e[x++])){var t=e[x++];if(t)throw new Error("unexpected marker: "+(O<<8|t).toString(16))}return S=7,O>>>7}function c(e){for(var t=e,n=void 0;null!==(n=f());){if("number"==typeof(t=t[n]))return t;if("object"!==(void 0===t?"undefined":(0,b.default)(t)))throw new Error("invalid huffman sequence")}return null}function l(e){for(var t=e,n=0;t>0;){var r=f();if(null===r)return;n=n<<1|r,--t}return n}function d(e){var t=l(e);return t>=1<<e-1?t:t+(-1<<e)+1}function h(e,t){var n=c(e.huffmanTableDC),r=0===n?0:d(n);e.pred+=r,t[0]=e.pred;for(var o=1;o<64;){var i=c(e.huffmanTableAC),a=15&i,u=i>>4;if(0===a){if(u<15)break;o+=16}else{o+=u;t[w[o]]=d(a),o++}}}function p(e,t){var n=c(e.huffmanTableDC),r=0===n?0:d(n)<<s;e.pred+=r,t[0]=e.pred}function v(e,t){t[0]|=f()<<s}function y(e,t){if(E>0)return void E--;for(var n=i,r=a;n<=r;){var o=c(e.huffmanTableAC),u=15&o,f=o>>4;if(0===u){if(f<15){E=l(f)+(1<<f)-1;break}n+=16}else{n+=f;t[w[n]]=d(u)*(1<<s),n++}}}function m(e,t){for(var n=i,r=a,o=0;n<=r;){var u=w[n],h=t[u]<0?-1:1;switch(A){case 0:var p=c(e.huffmanTableAC),v=15&p;if(o=p>>4,0===v)o<15?(E=l(o)+(1<<o),A=4):(o=16,A=1);else{if(1!==v)throw new Error("invalid ACn encoding");P=d(v),A=o?2:3}continue;case 1:case 2:t[u]?t[u]+=(f()<<s)*h:0===--o&&(A=2===A?3:0);break;case 3:t[u]?t[u]+=(f()<<s)*h:(t[u]=P<<s,A=0);break;case 4:t[u]&&(t[u]+=(f()<<s)*h)}n++}4===A&&0===--E&&(A=0)}var _=n.mcusPerLine,g=n.progressive,k=t,x=t,O=0,S=0,E=0,A=0,P=void 0,M=r.length,T=void 0,j=void 0,C=void 0,L=void 0,B=void 0,I=void 0;I=g?0===i?0===u?p:v:0===u?y:m:h;var N=0,Z=void 0,D=void 0;D=1===M?r[0].blocksPerLine*r[0].blocksPerColumn:_*n.mcusPerColumn;for(var R=o||D;N<D;){for(j=0;j<M;j++)r[j].pred=0;if(E=0,1===M)for(T=r[0],B=0;B<R;B++)!function(e,t,n){var r=n/e.blocksPerLine|0,o=n%e.blocksPerLine;t(e,e.blocks[r][o])}(T,I,N),N++;else for(B=0;B<R;B++){for(j=0;j<M;j++){T=r[j];var F=T,U=F.h,z=F.v;for(C=0;C<z;C++)for(L=0;L<U;L++)!function(e,t,n,r,o){var i=n/_|0,a=n%_,u=i*e.v+r,s=a*e.h+o;t(e,e.blocks[u][s])}(T,I,N,C,L)}if(++N===D)break}if(S=0,(Z=e[x]<<8|e[x+1])<65280)throw new Error("marker was not found");if(!(Z>=65488&&Z<=65495))break;x+=2}return x-k}function a(e,t){for(var n=[],r=t.blocksPerLine,o=t.blocksPerColumn,i=r<<3,a=new Int32Array(64),u=new Uint8Array(64),s=0;s<o;s++){for(var f=s<<3,c=0;c<8;c++)n.push(new Uint8Array(i));for(var l=0;l<r;l++){!function(e,n,r){var o=t.quantizationTable,i=void 0,a=void 0,u=void 0,s=void 0,f=void 0,c=void 0,l=void 0,d=void 0,h=void 0,p=r,v=void 0;for(v=0;v<64;v++)p[v]=e[v]*o[v];for(v=0;v<8;++v){var b=8*v;0!==p[1+b]||0!==p[2+b]||0!==p[3+b]||0!==p[4+b]||0!==p[5+b]||0!==p[6+b]||0!==p[7+b]?(i=E*p[0+b]+128>>8,a=E*p[4+b]+128>>8,u=p[2+b],s=p[6+b],f=A*(p[1+b]-p[7+b])+128>>8,d=A*(p[1+b]+p[7+b])+128>>8,c=p[3+b]<<4,l=p[5+b]<<4,h=i-a+1>>1,i=i+a+1>>1,a=h,h=u*S+s*O+128>>8,u=u*O-s*S+128>>8,s=h,h=f-l+1>>1,f=f+l+1>>1,l=h,h=d+c+1>>1,c=d-c+1>>1,d=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-u+1>>1,a=a+u+1>>1,u=h,h=f*x+d*k+2048>>12,f=f*k-d*x+2048>>12,d=h,h=c*g+l*_+2048>>12,c=c*_-l*g+2048>>12,l=h,p[0+b]=i+d,p[7+b]=i-d,p[1+b]=a+l,p[6+b]=a-l,p[2+b]=u+c,p[5+b]=u-c,p[3+b]=s+f,p[4+b]=s-f):(h=E*p[0+b]+512>>10,p[0+b]=h,p[1+b]=h,p[2+b]=h,p[3+b]=h,p[4+b]=h,p[5+b]=h,p[6+b]=h,p[7+b]=h)}for(v=0;v<8;++v){var y=v;0!==p[8+y]||0!==p[16+y]||0!==p[24+y]||0!==p[32+y]||0!==p[40+y]||0!==p[48+y]||0!==p[56+y]?(i=E*p[0+y]+2048>>12,a=E*p[32+y]+2048>>12,u=p[16+y],s=p[48+y],f=A*(p[8+y]-p[56+y])+2048>>12,d=A*(p[8+y]+p[56+y])+2048>>12,c=p[24+y],l=p[40+y],h=i-a+1>>1,i=i+a+1>>1,a=h,h=u*S+s*O+2048>>12,u=u*O-s*S+2048>>12,s=h,h=f-l+1>>1,f=f+l+1>>1,l=h,h=d+c+1>>1,c=d-c+1>>1,d=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=a-u+1>>1,a=a+u+1>>1,u=h,h=f*x+d*k+2048>>12,f=f*k-d*x+2048>>12,d=h,h=c*g+l*_+2048>>12,c=c*_-l*g+2048>>12,l=h,p[0+y]=i+d,p[56+y]=i-d,p[8+y]=a+l,p[48+y]=a-l,p[16+y]=u+c,p[40+y]=u-c,p[24+y]=s+f,p[32+y]=s-f):(h=E*r[v+0]+8192>>14,p[0+y]=h,p[8+y]=h,p[16+y]=h,p[24+y]=h,p[32+y]=h,p[40+y]=h,p[48+y]=h,p[56+y]=h)}for(v=0;v<64;++v){var m=128+(p[v]+8>>4);n[v]=m<0?0:m>255?255:m}}(t.blocks[s][l],u,a);for(var d=0,h=l<<3,p=0;p<8;p++)for(var v=n[f+p],b=0;b<8;b++)v[h+b]=u[d++]}}return n}Object.defineProperty(t,"__esModule",{value:!0});var u=n(15),s=r(u),f=n(16),c=r(f),l=n(11),d=r(l),h=n(12),p=r(h),v=n(33),b=r(v),y=n(17),m=r(y),w=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),_=4017,g=799,k=3406,x=2276,O=1567,S=3784,E=5793,A=2896,P=function(){function e(){(0,d.default)(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return(0,p.default)(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){function t(){var t=e[n]<<8|e[n+1];return n+=2,t}var n=0,r=t();if(65496!==r)throw new Error("SOI not found");for(r=t();65497!==r;){switch(r){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var a=function(){var r=t(),o=e.subarray(n,n+r-2);return n+=o.length,o}();65504===r&&74===a[0]&&70===a[1]&&73===a[2]&&70===a[3]&&0===a[4]&&(this.jfif={version:{major:a[5],minor:a[6]},densityUnits:a[7],xDensity:a[8]<<8|a[9],yDensity:a[10]<<8|a[11],thumbWidth:a[12],thumbHeight:a[13],thumbData:a.subarray(14,14+3*a[12]*a[13])}),65518===r&&65===a[0]&&100===a[1]&&111===a[2]&&98===a[3]&&101===a[4]&&0===a[5]&&(this.adobe={version:a[6],flags0:a[7]<<8|a[8],flags1:a[9]<<8|a[10],transformCode:a[11]});break;case 65499:for(var u=t(),s=u+n-2;n<s;){var f=e[n++],c=new Int32Array(64);if(f>>4==0)for(var l=0;l<64;l++){var d=w[l];c[d]=e[n++]}else{if(f>>4!=1)throw new Error("DQT: invalid table spec");for(var h=0;h<64;h++){c[w[h]]=t()}}this.quantizationTables[15&f]=c}break;case 65472:case 65473:case 65474:t();for(var p={extended:65473===r,progressive:65474===r,precision:e[n++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},v=e[n++],b=void 0,y=0;y<v;y++){b=e[n];var m=e[n+1]>>4,_=15&e[n+1],g=e[n+2];p.componentsOrder.push(b),p.components[b]={h:m,v:_,quantizationIdx:g},n+=3}!function(e){var t=0,n=0,r=void 0,o=void 0;for(o in e.components)e.components.hasOwnProperty(o)&&(r=e.components[o],t<r.h&&(t=r.h),n<r.v&&(n=r.v));var i=Math.ceil(e.samplesPerLine/8/t),a=Math.ceil(e.scanLines/8/n);for(o in e.components)if(e.components.hasOwnProperty(o)){r=e.components[o];for(var u=Math.ceil(Math.ceil(e.samplesPerLine/8)*r.h/t),s=Math.ceil(Math.ceil(e.scanLines/8)*r.v/n),f=i*r.h,c=a*r.v,l=[],d=0;d<c;d++){for(var h=[],p=0;p<f;p++)h.push(new Int32Array(64));l.push(h)}r.blocksPerLine=u,r.blocksPerColumn=s,r.blocks=l}e.maxH=t,e.maxV=n,e.mcusPerLine=i,e.mcusPerColumn=a}(p),this.frames.push(p);break;case 65476:for(var k=t(),x=2;x<k;){for(var O=e[n++],S=new Uint8Array(16),E=0,A=0;A<16;A++,n++)S[A]=e[n],E+=S[A];for(var P=new Uint8Array(E),M=0;M<E;M++,n++)P[M]=e[n];x+=17+E,O>>4==0?this.huffmanTablesDC[15&O]=o(S,P):this.huffmanTablesAC[15&O]=o(S,P)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var T=e[n++],j=[],C=this.frames[0],L=0;L<T;L++){var B=C.components[e[n++]],I=e[n++];B.huffmanTableDC=this.huffmanTablesDC[I>>4],B.huffmanTableAC=this.huffmanTablesAC[15&I],j.push(B)}var N=e[n++],Z=e[n++],D=e[n++],R=i(e,n,C,j,this.resetInterval,N,Z,D>>4,15&D);n+=R;break;case 65535:255!==e[n]&&n--;break;default:if(255===e[n-3]&&e[n-2]>=192&&e[n-2]<=254){n-=3;break}throw new Error("unknown JPEG marker "+r.toString(16))}r=t()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var t=0;t<this.frames.length;t++){var n=this.frames[t].components,r=!0,o=!1,i=void 0;try{for(var u,s=Object.keys(n)[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var f=u.value;n[f].quantizationTable=this.quantizationTables[n[f].quantizationIdx],delete n[f].quantizationIdx}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}for(var c=e[0],l=c.components,d=c.componentsOrder,h=[],p=c.samplesPerLine,v=c.scanLines,b=0;b<d.length;b++){var y=l[d[b]];h.push({lines:a(c,y),scaleX:y.h/c.maxH,scaleY:y.v/c.maxV})}for(var m=new Uint8Array(p*v*h.length),w=0,_=0;_<v;++_)for(var g=0;g<p;++g)for(var k=0;k<h.length;++k){var x=h[k];m[w]=x.lines[0|_*x.scaleY][0|g*x.scaleX],++w}return m}}]),e}(),M=function(e){function t(e){(0,d.default)(this,t);var n=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.reader=new P,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return(0,c.default)(t,e),(0,p.default)(t,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),t}(m.default);t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=r(o),a=n(12),u=r(a),s=n(15),f=r(s),c=n(16),l=r(c),d=n(101),h=n(17),p=r(h),v=function(e){function t(){return(0,i.default)(this,t),(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,u.default)(t,[{key:"decodeBlock",value:function(e){return(0,d.inflate)(new Uint8Array(e)).buffer}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==f.Z_OK)throw new Error(c[n]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function o(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}function i(e,t){return t=t||{},t.raw=!0,o(e,t)}var a=n(102),u=n(21),s=n(107),f=n(108),c=n(109),l=n(110),d=n(111),h=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,o,i,c,l,d=this.strm,p=this.options.chunkSize,v=this.options.dictionary,b=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof e?d.input=s.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new u.Buf8(p),d.next_out=0,d.avail_out=p),n=a.inflate(d,f.Z_NO_FLUSH),n===f.Z_NEED_DICT&&v&&(l="string"==typeof v?s.string2buf(v):"[object ArrayBuffer]"===h.call(v)?new Uint8Array(v):v,n=a.inflateSetDictionary(this.strm,l)),n===f.Z_BUF_ERROR&&!0===b&&(n=f.Z_OK,b=!1),n!==f.Z_STREAM_END&&n!==f.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==f.Z_STREAM_END&&(0!==d.avail_in||r!==f.Z_FINISH&&r!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(d.output,d.next_out),i=d.next_out-o,c=s.buf2string(d.output,o),d.next_out=i,d.avail_out=p-i,i&&u.arraySet(d.output,d.output,o,i,0),this.onData(c)):this.onData(u.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(b=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==f.Z_STREAM_END);return n===f.Z_STREAM_END&&(r=f.Z_FINISH),r===f.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f.Z_OK):r!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),d.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=o,t.inflateRaw=i,t.ungzip=o},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Z,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new m.Buf32(ve),t.distcode=t.distdyn=new m.Buf32(be),t.sane=1,t.back=-1,M):C}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):C}function u(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?C:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):C}function s(e,t){var n,r;return e?(r=new o,e.state=r,r.window=null,n=u(e,t),n!==M&&(e.state=null),n):C}function f(e){return s(e,ye)}function c(e){if(me){var t;for(b=new m.Buf32(512),y=new m.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(k(O,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;k(S,e.lens,0,32,y,0,e.work,{bits:5}),me=!1}e.lencode=b,e.lenbits=9,e.distcode=y,e.distbits=5}function l(e,t,n,r){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new m.Buf8(i.wsize)),r>=i.wsize?(m.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),m.arraySet(i.window,t,n-r,o,i.wnext),r-=o,r?(m.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function d(e,t){var n,o,i,a,u,s,f,d,h,p,v,b,y,ve,be,ye,me,we,_e,ge,ke,xe,Oe,Se,Ee=0,Ae=new m.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return C;n=e.state,n.mode===V&&(n.mode=Y),u=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,o=e.input,s=e.avail_in,d=n.hold,h=n.bits,p=s,v=f,xe=M;e:for(;;)switch(n.mode){case Z:if(0===n.wrap){n.mode=Y;break}for(;h<16;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0),d=0,h=0,n.mode=D;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==N){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,h-=4,ke=8+(15&d),0===n.wbits)n.wbits=ke;else if(ke>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<ke,e.adler=n.check=1,n.mode=512&d?W:V,d=0,h=0;break;case D:for(;h<16;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==N){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0)),d=0,h=0,n.mode=R;case R:for(;h<32;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,Ae[2]=d>>>16&255,Ae[3]=d>>>24&255,n.check=_(n.check,Ae,4,0)),d=0,h=0,n.mode=F;case F:for(;h<16;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0)),d=0,h=0,n.mode=U;case U:if(1024&n.flags){for(;h<16;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=z;case z:if(1024&n.flags&&(b=n.length,b>s&&(b=s),b&&(n.head&&(ke=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),m.arraySet(n.head.extra,o,a,b,ke)),512&n.flags&&(n.check=_(n.check,o,b,a)),s-=b,a+=b,n.length-=b),n.length))break e;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===s)break e;b=0;do{ke=o[a+b++],n.head&&ke&&n.length<65536&&(n.head.name+=String.fromCharCode(ke))}while(ke&&b<s);if(512&n.flags&&(n.check=_(n.check,o,b,a)),s-=b,a+=b,ke)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=G;case G:if(4096&n.flags){if(0===s)break e;b=0;do{ke=o[a+b++],n.head&&ke&&n.length<65536&&(n.head.comment+=String.fromCharCode(ke))}while(ke&&b<s);if(512&n.flags&&(n.check=_(n.check,o,b,a)),s-=b,a+=b,ke)break e}else n.head&&(n.head.comment=null);n.mode=K;case K:if(512&n.flags){for(;h<16;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=V;break;case W:for(;h<32;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}e.adler=n.check=r(d),d=0,h=0,n.mode=q;case q:if(0===n.havedict)return e.next_out=u,e.avail_out=f,e.next_in=a,e.avail_in=s,n.hold=d,n.bits=h,j;e.adler=n.check=1,n.mode=V;case V:if(t===A||t===P)break e;case Y:if(n.last){d>>>=7&h,h-=7&h,n.mode=fe;break}for(;h<3;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=J;break;case 1:if(c(n),n.mode=ne,t===P){d>>>=2,h-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,h-=2;break;case J:for(d>>>=7&h,h-=7&h;h<32;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,h=0,n.mode=X,t===P)break e;case X:n.mode=Q;case Q:if(b=n.length){if(b>s&&(b=s),b>f&&(b=f),0===b)break e;m.arraySet(i,o,a,b,u),s-=b,a+=b,f-=b,u+=b,n.length-=b;break}n.mode=V;break;case $:for(;h<14;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;h<3;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}n.lens[Pe[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[Pe[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Oe={bits:n.lenbits},xe=k(x,n.lens,0,19,n.lencode,0,n.work,Oe),n.lenbits=Oe.bits,xe){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Ee=n.lencode[d&(1<<n.lenbits)-1],be=Ee>>>24,ye=Ee>>>16&255,me=65535&Ee,!(be<=h);){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(me<16)d>>>=be,h-=be,n.lens[n.have++]=me;else{if(16===me){for(Se=be+2;h<Se;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(d>>>=be,h-=be,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}ke=n.lens[n.have-1],b=3+(3&d),d>>>=2,h-=2}else if(17===me){for(Se=be+3;h<Se;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}d>>>=be,h-=be,ke=0,b=3+(7&d),d>>>=3,h-=3}else{for(Se=be+7;h<Se;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}d>>>=be,h-=be,ke=0,b=11+(127&d),d>>>=7,h-=7}if(n.have+b>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;b--;)n.lens[n.have++]=ke}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Oe={bits:n.lenbits},xe=k(O,n.lens,0,n.nlen,n.lencode,0,n.work,Oe),n.lenbits=Oe.bits,xe){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Oe={bits:n.distbits},xe=k(S,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Oe),n.distbits=Oe.bits,xe){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===P)break e;case ne:n.mode=re;case re:if(s>=6&&f>=258){e.next_out=u,e.avail_out=f,e.next_in=a,e.avail_in=s,n.hold=d,n.bits=h,g(e,v),u=e.next_out,i=e.output,f=e.avail_out,a=e.next_in,o=e.input,s=e.avail_in,d=n.hold,h=n.bits,n.mode===V&&(n.back=-1);break}for(n.back=0;Ee=n.lencode[d&(1<<n.lenbits)-1],be=Ee>>>24,ye=Ee>>>16&255,me=65535&Ee,!(be<=h);){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(ye&&0==(240&ye)){for(we=be,_e=ye,ge=me;Ee=n.lencode[ge+((d&(1<<we+_e)-1)>>we)],be=Ee>>>24,ye=Ee>>>16&255,me=65535&Ee,!(we+be<=h);){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}d>>>=we,h-=we,n.back+=we}if(d>>>=be,h-=be,n.back+=be,n.length=me,0===ye){n.mode=se;break}if(32&ye){n.back=-1,n.mode=V;break}if(64&ye){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ye,n.mode=oe;case oe:if(n.extra){for(Se=n.extra;h<Se;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ie;case ie:for(;Ee=n.distcode[d&(1<<n.distbits)-1],be=Ee>>>24,ye=Ee>>>16&255,me=65535&Ee,!(be<=h);){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(0==(240&ye)){for(we=be,_e=ye,ge=me;Ee=n.distcode[ge+((d&(1<<we+_e)-1)>>we)],be=Ee>>>24,ye=Ee>>>16&255,me=65535&Ee,!(we+be<=h);){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}d>>>=we,h-=we,n.back+=we}if(d>>>=be,h-=be,n.back+=be,64&ye){e.msg="invalid distance code",n.mode=de;break}n.offset=me,n.extra=15&ye,n.mode=ae;case ae:if(n.extra){for(Se=n.extra;h<Se;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=ue;case ue:if(0===f)break e;if(b=v-f,n.offset>b){if((b=n.offset-b)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}b>n.wnext?(b-=n.wnext,y=n.wsize-b):y=n.wnext-b,b>n.length&&(b=n.length),ve=n.window}else ve=i,y=u-n.offset,b=n.length;b>f&&(b=f),f-=b,n.length-=b;do{i[u++]=ve[y++]}while(--b);0===n.length&&(n.mode=re);break;case se:if(0===f)break e;i[u++]=n.length,f--,n.mode=re;break;case fe:if(n.wrap){for(;h<32;){if(0===s)break e;s--,d|=o[a++]<<h,h+=8}if(v-=f,e.total_out+=v,n.total+=v,v&&(e.adler=n.check=n.flags?_(n.check,i,v,u-v):w(n.check,i,v,u-v)),v=f,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,h=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;h<32;){if(0===s)break e;s--,d+=o[a++]<<h,h+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,h=0}n.mode=le;case le:xe=T;break e;case de:xe=L;break e;case he:return B;case pe:default:return C}return e.next_out=u,e.avail_out=f,e.next_in=a,e.avail_in=s,n.hold=d,n.bits=h,(n.wsize||v!==e.avail_out&&n.mode<de&&(n.mode<fe||t!==E))&&l(e,e.output,e.next_out,v-e.avail_out)?(n.mode=he,B):(p-=e.avail_in,v-=e.avail_out,e.total_in+=p,e.total_out+=v,n.total+=v,n.wrap&&v&&(e.adler=n.check=n.flags?_(n.check,i,v,e.next_out-v):w(n.check,i,v,e.next_out-v)),e.data_type=n.bits+(n.last?64:0)+(n.mode===V?128:0)+(n.mode===ne||n.mode===X?256:0),(0===p&&0===v||t===E)&&xe===M&&(xe=I),xe)}function h(e){if(!e||!e.state)return C;var t=e.state;return t.window&&(t.window=null),e.state=null,M}function p(e,t){var n;return e&&e.state?(n=e.state,0==(2&n.wrap)?C:(n.head=t,t.done=!1,M)):C}function v(e,t){var n,r,o=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==q?C:n.mode===q&&(r=1,(r=w(r,t,o,0))!==n.check)?L:l(e,t,o,o)?(n.mode=he,B):(n.havedict=1,M)):C}var b,y,m=n(21),w=n(103),_=n(104),g=n(105),k=n(106),x=0,O=1,S=2,E=4,A=5,P=6,M=0,T=1,j=2,C=-2,L=-3,B=-4,I=-5,N=8,Z=1,D=2,R=3,F=4,U=5,z=6,H=7,G=8,K=9,W=10,q=11,V=12,Y=13,J=14,X=15,Q=16,$=17,ee=18,te=19,ne=20,re=21,oe=22,ie=23,ae=24,ue=25,se=26,fe=27,ce=28,le=29,de=30,he=31,pe=32,ve=852,be=592,ye=15,me=!0;t.inflateReset=a,t.inflateReset2=u,t.inflateResetKeep=i,t.inflateInit=f,t.inflateInit2=s,t.inflate=d,t.inflateEnd=h,t.inflateGetHeader=p,t.inflateSetDictionary=v,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+t[r++]|0,i=i+o|0}while(--a);o%=65521,i%=65521}return o|i<<16|0}e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=o,a=r+n;e^=-1;for(var u=r;u<a;u++)e=e>>>8^i[255&(e^t[u])];return-1^e}var o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,i,a,u,s,f,c,l,d,h,p,v,b,y,m,w,_,g,k,x,O,S,E;n=e.state,r=e.next_in,S=e.input,o=r+(e.avail_in-5),i=e.next_out,E=e.output,a=i-(t-e.avail_out),u=i+(e.avail_out-257),s=n.dmax,f=n.wsize,c=n.whave,l=n.wnext,d=n.window,h=n.hold,p=n.bits,v=n.lencode,b=n.distcode,y=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{p<15&&(h+=S[r++]<<p,p+=8,h+=S[r++]<<p,p+=8),w=v[h&y];t:for(;;){if(_=w>>>24,h>>>=_,p-=_,0===(_=w>>>16&255))E[i++]=65535&w;else{if(!(16&_)){if(0==(64&_)){w=v[(65535&w)+(h&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}g=65535&w,_&=15,_&&(p<_&&(h+=S[r++]<<p,p+=8),g+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=S[r++]<<p,p+=8,h+=S[r++]<<p,p+=8),w=b[h&m];n:for(;;){if(_=w>>>24,h>>>=_,p-=_,!(16&(_=w>>>16&255))){if(0==(64&_)){w=b[(65535&w)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&w,_&=15,p<_&&(h+=S[r++]<<p,(p+=8)<_&&(h+=S[r++]<<p,p+=8)),(k+=h&(1<<_)-1)>s){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=_,p-=_,_=i-a,k>_){if((_=k-_)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=0,O=d,0===l){if(x+=f-_,_<g){g-=_;do{E[i++]=d[x++]}while(--_);x=i-k,O=E}}else if(l<_){if(x+=f+l-_,(_-=l)<g){g-=_;do{E[i++]=d[x++]}while(--_);if(x=0,l<g){_=l,g-=_;do{E[i++]=d[x++]}while(--_);x=i-k,O=E}}}else if(x+=l-_,_<g){g-=_;do{E[i++]=d[x++]}while(--_);x=i-k,O=E}for(;g>2;)E[i++]=O[x++],E[i++]=O[x++],E[i++]=O[x++],g-=3;g&&(E[i++]=O[x++],g>1&&(E[i++]=O[x++]))}else{x=i-k;do{E[i++]=E[x++],E[i++]=E[x++],E[i++]=E[x++],g-=3}while(g>2);g&&(E[i++]=E[x++],g>1&&(E[i++]=E[x++]))}break}}break}}while(r<o&&i<u);g=p>>3,r-=g,p-=g<<3,h&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<u?u-i+257:257-(i-u),n.hold=h,n.bits=p}},function(e,t,n){"use strict";var r=n(21),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,s,f,c,l,d){var h,p,v,b,y,m,w,_,g,k=d.bits,x=0,O=0,S=0,E=0,A=0,P=0,M=0,T=0,j=0,C=0,L=null,B=0,I=new r.Buf16(16),N=new r.Buf16(16),Z=null,D=0;for(x=0;x<=15;x++)I[x]=0;for(O=0;O<s;O++)I[t[n+O]]++;for(A=k,E=15;E>=1&&0===I[E];E--);if(A>E&&(A=E),0===E)return f[c++]=20971520,f[c++]=20971520,d.bits=1,0;for(S=1;S<E&&0===I[S];S++);for(A<S&&(A=S),T=1,x=1;x<=15;x++)if(T<<=1,(T-=I[x])<0)return-1;if(T>0&&(0===e||1!==E))return-1;for(N[1]=0,x=1;x<15;x++)N[x+1]=N[x]+I[x];for(O=0;O<s;O++)0!==t[n+O]&&(l[N[t[n+O]]++]=O);if(0===e?(L=Z=l,m=19):1===e?(L=o,B-=257,Z=i,D-=257,m=256):(L=a,Z=u,m=-1),C=0,O=0,x=S,y=c,P=A,M=0,v=-1,j=1<<A,b=j-1,1===e&&j>852||2===e&&j>592)return 1;for(;;){w=x-M,l[O]<m?(_=0,g=l[O]):l[O]>m?(_=Z[D+l[O]],g=L[B+l[O]]):(_=96,g=0),h=1<<x-M,p=1<<P,S=p;do{p-=h,f[y+(C>>M)+p]=w<<24|_<<16|g|0}while(0!==p);for(h=1<<x-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,O++,0==--I[x]){if(x===E)break;x=t[n+l[O]]}if(x>A&&(C&b)!==v){for(0===M&&(M=A),y+=S,P=x-M,T=1<<P;P+M<E&&!((T-=I[P+M])<=0);)P++,T<<=1;if(j+=1<<P,1===e&&j>852||2===e&&j>592)return 1;v=C&b,f[v]=A<<24|P<<16|y-c|0}}return 0!==C&&(f[y+C]=x-M<<24|64<<16|0),d.bits=A,0}},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var o=n(21),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var u=new o.Buf8(256),s=0;s<256;s++)u[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;u[254]=u[254]=1,t.string2buf=function(e){var t,n,r,i,a,u=e.length,s=0;for(i=0;i<u;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<u&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<u&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,o,i,a,s=t||e.length,f=new Array(2*s);for(o=0,n=0;n<s;)if((i=e[n++])<128)f[o++]=i;else if((a=u[i])>4)f[o++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&e[n++],a--;a>1?f[o++]=65533:i<65536?f[o++]=i:(i-=65536,f[o++]=55296|i>>10&1023,f[o++]=56320|1023&i)}return r(f,o)},t.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+u[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=r(o),a=n(12),u=r(a),s=n(15),f=r(s),c=n(16),l=r(c),d=n(17),h=r(d),p=function(e){function t(){return(0,i.default)(this,t),(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,u.default)(t,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),n=[],r=0;r<e.byteLength;++r){var o=t.getInt8(r);if(o<0){var i=t.getUint8(r+1);o=-o;for(var a=0;a<=o;++a)n.push(i);r+=1}else{for(var u=0;u<=o;++u)n.push(t.getUint8(r+u+1));r+=o+1}}return new Uint8Array(n).buffer}}]),t}(h.default);t.default=p}]);',r.p+"5ab013ff8460f25888f3.decoder.worker.min.js")}},function(e,t,r){var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var r;try{(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),r=r.getBlob()}catch(i){r=new Blob([e])}return new Worker(n.createObjectURL(r))}catch(i){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(i){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,r){var n=r(54),i=r(186),a=(0,i.invert)(n.fieldTagNames),o=(0,i.invert)(n.geoKeyNames),s={};(0,i.assign)(s,a),(0,i.assign)(s,o);var u=(0,i.invert)(n.fieldTypeNames),c={nextZero:function(e,t){for(var r=t;0!==e[r];)r++;return r},readUshort:function(e,t){return e[t]<<8|e[t+1]},readShort:function(e,t){var r=c.ui8;return r[0]=e[t+1],r[1]=e[t+0],c.i16[0]},readInt:function(e,t){var r=c.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],c.i32[0]},readUint:function(e,t){var r=c.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],c.ui32[0]},readASCII:function(e,t,r){return r.map((function(r){return String.fromCharCode(e[t+r])})).join("")},readFloat:function(e,t){var r=c.ui8;return(0,i.times)(4,(function(n){r[n]=e[t+3-n]})),c.fl32[0]},readDouble:function(e,t){var r=c.ui8;return(0,i.times)(8,(function(n){r[n]=e[t+7-n]})),c.fl64[0]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r>>0&255},writeASCII:function(e,t,r){(0,i.times)(r.length,(function(n){e[t+n]=r.charCodeAt(n)}))},ui8:new Uint8Array(8)};c.fl64=new Float64Array(c.ui8.buffer),c.writeDouble=function(e,t,r){c.fl64[0]=r,(0,i.times)(8,(function(r){e[t+r]=c.ui8[7-r]}))};var l=function(e){var t=new Uint8Array(1e3),r=4,a=c;t[0]=77,t[1]=77,t[3]=42;var o=8;if(a.writeUint(t,r,o),r+=4,e.forEach((function(r,s){var c=function(e,t,r,a){var o=r,s=Object.keys(a).filter((function(e){return void 0!==e&&null!==e&&"undefined"!==e}));e.writeUshort(t,o,s.length);var c=(o+=2)+12*s.length+4;return s.forEach((function(r){var s=null;"number"===typeof r?s=r:"string"===typeof r&&(s=parseInt(r,10));var l=n.fieldTagTypes[s],f=u[l];if(null==l||void 0===l||"undefined"===typeof l)throw new Error("unknown type of tag: "+s);var h=a[r];if("undefined"===typeof h)throw new Error("failed to get value for key "+r);"ASCII"===l&&"string"===typeof h&&!1===(0,i.endsWith)(h,"\0")&&(h+="\0");var d=h.length;e.writeUshort(t,o,s),o+=2,e.writeUshort(t,o,f),o+=2,e.writeUint(t,o,d);var p=[-1,1,1,2,4,8,0,0,0,0,0,0,8][f]*d,v=o+=4;p>4&&(e.writeUint(t,o,c),v=c),"ASCII"===l?e.writeASCII(t,v,h):"SHORT"===l?(0,i.times)(d,(function(r){e.writeUshort(t,v+2*r,h[r])})):"LONG"===l?(0,i.times)(d,(function(r){e.writeUint(t,v+4*r,h[r])})):"RATIONAL"===l?(0,i.times)(d,(function(r){e.writeUint(t,v+8*r,Math.round(1e4*h[r])),e.writeUint(t,v+8*r+4,1e4)})):"DOUBLE"===l&&(0,i.times)(d,(function(r){e.writeDouble(t,v+8*r,h[r])})),p>4&&(c+=p+=1&p),o+=4})),[o,c]}(a,t,o,r);o=c[1],s<e.length-1&&a.writeUint(t,c[0],o)})),t.slice)return t.slice(0,o).buffer;for(var s=new Uint8Array(o),l=0;l<o;l++)s[l]=t[l];return s.buffer},f=[["Compression",1],["PlanarConfiguration",1],["XPosition",0],["YPosition",0],["ResolutionUnit",1],["ExtraSamples",0],["GeoAsciiParams","WGS 84\0"],["ModelTiepoint",[0,0,0,-180,90,0]],["GTModelTypeGeoKey",2],["GTRasterTypeGeoKey",1],["GeographicTypeGeoKey",4326],["GeogCitationGeoKey","WGS 84"]];e.exports={writeGeotiff:function(e,t){var r="number"===typeof e[0],a=void 0,o=void 0,u=void 0,c=void 0;r?(a=t.height||t.ImageLength,u=t.width||t.ImageWidth,o=e.length/(a*u),c=e):(o=e.length,a=e[0].length,u=e[0][0].length,c=[],(0,i.times)(a,(function(t){(0,i.times)(u,(function(r){(0,i.times)(o,(function(n){c.push(e[n][t][r])}))}))}))),t.ImageLength=a,delete t.height,t.ImageWidth=u,delete t.width,t.BitsPerSample||(t.BitsPerSample=(0,i.times)(o,(function(){return 8}))),f.forEach((function(e){var r=e[0];if(!t[r]){var n=e[1];t[r]=n}})),t.PhotometricInterpretation||(t.PhotometricInterpretation=3===t.BitsPerSample.length?2:1),t.SamplesPerPixel||(t.SamplesPerPixel=[o]),t.StripByteCounts||(t.StripByteCounts=[o*a*u]),t.ModelPixelScale||(t.ModelPixelScale=[360/u,180/a,0]),t.SampleFormat||(t.SampleFormat=(0,i.times)(o,(function(){return 1})));var h=Object.keys(t).filter((function(e){return(0,i.endsWith)(e,"GeoKey")})).sort((function(e,t){return s[e]-s[t]}));if(!t.GeoKeyDirectory){var d=[1,1,0,h.length];h.forEach((function(e){var r=Number(s[e]);d.push(r);var i=void 0,a=void 0,o=void 0;"SHORT"===n.fieldTagTypes[r]?(i=1,a=0,o=t[e]):"GeogCitationGeoKey"===e?(i=t.GeoAsciiParams.length,a=Number(s.GeoAsciiParams),o=0):console.log("[geotiff.js] couldn't get TIFFTagLocation for "+e),d.push(a),d.push(i),d.push(o)})),t.GeoKeyDirectory=d}for(var p in h)h.hasOwnProperty(p)&&delete t[p];["Compression","ExtraSamples","GeographicTypeGeoKey","GTModelTypeGeoKey","GTRasterTypeGeoKey","ImageLength","ImageWidth","PhotometricInterpretation","PlanarConfiguration","ResolutionUnit","SamplesPerPixel","XPosition","YPosition"].forEach((function(e){var r;t[e]&&(t[e]=(r=t[e],Array.isArray(r)?r:[r]))}));var v=function(e){var t={};for(var r in e)"StripOffsets"!==r&&(s[r]||console.error(r,"not in name2code:",Object.keys(s)),t[s[r]]=e[r]);return t}(t);return function(e,t,r,n){if(void 0===r||null===r)throw new Error("you passed into encodeImage a width of type "+r);if(void 0===t||null===t)throw new Error("you passed into encodeImage a width of type "+t);var a={256:[t],257:[r],273:[1e3],278:[r],305:"geotiff.js"};if(n)for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);var s=new Uint8Array(l([a])),u=new Uint8Array(e),c=a[277],f=new Uint8Array(1e3+t*r*c);return(0,i.times)(s.length,(function(e){f[e]=s[e]})),(0,i.forEach)(u,(function(e,t){f[1e3+t]=e})),f.buffer}(c,u,a,v)}}},function(e,t,r){function n(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.assign=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},t.chunk=function(e,t){for(var r=[],n=e.length,i=0;i<n;i+=t){for(var a=[],o=i;o<i+t;o++)a.push(e[o]);r.push(a)}return r},t.endsWith=function(e,t){return!(e.length<t.length)&&e.substr(e.length-t.length)===t},t.forEach=function(e,t){for(var r=e.length,n=0;n<r;n++)t(e[n],n)},t.invert=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[n]=r}return t},t.range=function(e){for(var t=[],r=0;r<e;r++)t.push(r);return t},t.times=function(e,t){for(var r=[],n=0;n<e;n++)r.push(t(n));return r},t.toArray=n,t.toArrayRecursively=function e(t){return t.length?n(t).map(e):t}}])},e.exports=r()}));(Fn=Nn)&&Fn.__esModule&&Object.prototype.hasOwnProperty.call(Fn,"default")&&Fn.default;var Dn=Nn.fromUrl,Bn=Nn.Pool,Un=function(){function e(t,r,n,i){var a;(L(this,e),Array.isArray(t))?(this.isPyramid=!0,a=X(t,1)[0]):(this.isPyramid=!1,a=t);this._data=t,this.scale=n,this.chunkIndex=Array(a.shape.length).fill(0),r?(this.channelIndex=a.shape.length-1,this.xIndex=a.shape.length-2,this.yIndex=a.shape.length-3):(this.xIndex=a.shape.length-1,this.yIndex=a.shape.length-2,this.channelIndex=a.shape.length-3),this.channelChunkSize=a.chunks[this.channelIndex],this.dimensions=i,this.dimNames=Object.keys(i),this.type="zarr"}return N(e,[{key:"setChunkIndex",value:function(e,t){var r=Z(this.chunkIndex);if("string"===typeof e){r[this.dimNames.indexOf(e)]=t}else{if(e.length!==t.length)throw Error("Dimension names and indicies must be same length when set together");for(var n=0;n<e.length;n+=1){r[this.dimNames.indexOf(e[n])]=t[n]}}this.chunkIndex=r}},{key:"getTile",value:function(){var e=I(f.a.mark((function e(t){var r,n,i,a,o,s,u,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.x,n=t.y,i=t.z,a=this.isPyramid?this._data[i]:this._data,(o=Z(this.chunkIndex))[this.xIndex]=r,o[this.yIndex]=n,!this.isRgb){e.next=10;break}return e.next=8,a.getRawChunk(o);case 8:return s=e.sent,e.abrupt("return",s.data);case 10:return e.next=12,a.getRawChunk(o);case 12:if(u=e.sent,c=u.data,!(this.channelChunkSize>1)){e.next=16;break}return e.abrupt("return",this._decodeChannels(c));case 16:return e.abrupt("return",[c]);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRaster",value:function(){var e=I(f.a.mark((function e(t){var r,n,i,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.z,n=this.isPyramid?this._data[r]:this._data,(i=Z(this.chunkIndex))[this.xIndex]=null,i[this.yIndex]=null,e.next=7,n.getRaw(i);case 7:return a=e.sent,o=a.data,e.abrupt("return",[o]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_decodeChannels",value:function(e){var t=e.length/this.channelChunkSize;return Q(this.channelChunkSize).map((function(r){return e.subarray(t*r,t*r+t)}))}},{key:"_base",get:function(){return this.isPyramid?this._data[0]:this._data}},{key:"vivMetadata",get:function(){var e=this._base.dtype,t=this._base.shape[this.yIndex];return{imageWidth:this._base.shape[this.xIndex],imageHeight:t,tileSize:this._base.chunks[this.xIndex],minZoom:this.isPyramid?-this._data.length:0,dtype:e,scale:this.scale}}}]),e}(),zn=function(){function e(t,r){L(this,e),this.channelPyramids=t,this.pool=r,this.type="tiff",this.isPyramid=!0}return N(e,[{key:"getTile",value:function(){var e=I(f.a.mark((function e(t){var r,n,i,a,o,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.x,n=t.y,i=t.z,a=this.channelPyramids.map((function(e){var t=e[i];return s._getChannel({image:t,x:r,y:n})})),e.next=4,Promise.all(a);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getChannel",value:function(){var e=I(f.a.mark((function e(t){var r,n,i,a,o,s,u,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.image,n=t.x,i=t.y,e.next=3,r.getTileOrStrip(n,i,0,this.pool);case 3:return a=e.sent,o=8===r.fileDirectory.BitsPerSample[0],s=16===r.fileDirectory.BitsPerSample[0],u=32===r.fileDirectory.BitsPerSample[0],c=o&&new Uint8Array(a.data)||s&&new Uint16Array(a.data)||u&&new Uint32Array(a.data),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"vivMetadata",get:function(){var e,t=this.channelPyramids[0][0].fileDirectory,r=-1*this.channelPyramids[0].length,n=t.ImageWidth,i=t.ImageLength,a=t.TileWidth,o=t.BitsPerSample;return o instanceof Uint8Array&&(e="<u1"),o instanceof Uint16Array&&(e="<u2"),o instanceof Uint32Array&&(e="<u4"),o instanceof Float32Array&&(e="<f4"),{minZoom:r,imageWidth:n,imageHeight:i,tileSize:a,dtype:e}}}]),e}();function Vn(e){return Gn.apply(this,arguments)}function Gn(){return(Gn=I(f.a.mark((function e(t){var r,n,i,a,o,s,u,c,l,h,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootZarrUrl,n=t.minZoom,i=t.dimensions,a=t.isRgb,o=void 0!==a&&a,s=t.scale,u=void 0===s?1:s,!((c=-n)>0)){e.next=8;break}return l=Q(c).map((function(e){return In({store:"".concat(r,"/").concat(String(e).padStart(2,"0"))})})),e.next=6,Promise.all(l);case 6:return h=e.sent,e.abrupt("return",new Un(h,o,u,i));case 8:return e.next=10,In({store:r});case 10:return d=e.sent,p=new Un(d,o,u,i),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hn(e){return Wn.apply(this,arguments)}function Wn(){return(Wn=I(f.a.mark((function e(t){var r,n,i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.channelUrls,n=r.map(function(){var e=I(f.a.mark((function e(t){var r,n,i,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(t);case 2:return r=e.sent,e.next=5,r.parseFileDirectories();case 5:return n=e.sent,i=n.length,a=Q(i).map((function(e){return r.getImage(e)})),e.next=10,Promise.all(a);case 10:return o=e.sent,e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=new Bn,e.next=5,Promise.all(n);case 5:return a=e.sent,e.abrupt("return",new zn(a,i));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,r(62),r(485).Buffer,r(68))},function(e,t,r){"use strict";(function(e){var t=r(348),n=r(23),i=r(156);function a(e,t){var r=t.extension,a=t.target,o=t.target2,s=i.b[r];Object(n.a)(s);for(var u=s.meta,c=(void 0===u?{}:u).suffix,l=void 0===c?"":c,f=e.getExtension(r),h=function(){var t=p[d],r="".concat(t).concat(l),n=null;"meta"===t||"function"===typeof e[t]||(f&&"function"===typeof f[r]?n=function(){return f[r].apply(f,arguments)}:"function"===typeof s[t]&&(n=s[t].bind(a))),n&&(a[t]=n,o[t]=n)},d=0,p=Object.keys(s);d<p.length;d++)h()}("undefined"!==typeof e?e:window).polyfillContext=function(e){return e.luma=e.luma||{},e.luma.polyfilled||(Object(t.a)(e),function(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(u){n=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}}(e),function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,s=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;"overrides"!==u&&a(e,{extension:u,target:e.luma,target2:e})}}catch(c){n=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}(e,i.b),function(e,t){var r=t.target,n=t.target2;Object.keys(i.a).forEach((function(t){if("function"===typeof i.a[t]){var a=e[t]?e[t].bind(e):function(){},o=i.a[t].bind(null,e,a);r[t]=o,n[t]=o}}))}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0),e}}).call(this,r(62))},function(e,t,r){"use strict";(function(e,n){var i=r(169);Object.defineProperty(t,"__esModule",{value:!0}),t.console=t.process=t.document=t.global=t.window=t.self=void 0;var a=i(r(204)),o={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof e&&e,document:"undefined"!==typeof document&&document,process:"object"===("undefined"===typeof n?"undefined":(0,a.default)(n))&&n},s=o.self||o.window||o.global;t.self=s;var u=o.window||o.self||o.global;t.window=u;var c=o.global||o.self||o.window;t.global=c;var l=o.document||{};t.document=l;var f=o.process||{};t.process=f;var h=console;t.console=h}).call(this,r(62),r(68))},function(e,t,r){"use strict";(function(e){var n=r(169);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.isBrowserMainThread=function(){return o()&&"undefined"!==typeof document};var i=n(r(204)),a=n(r(244));function o(){return!("object"===("undefined"===typeof e?"undefined":(0,i.default)(e))&&"[object process]"===String(e)&&!e.browser)||(0,a.default)()}}).call(this,r(68))},function(e,t,r){"use strict";(function(e){var n=r(14),i=r(295);r.d(t,"d",(function(){return i.a}));var a=r(132);r.d(t,"e",(function(){return a.a}));var o=r(296);r.d(t,"f",(function(){return o.a}));var s=r(297);r.d(t,"a",(function(){return s.a}));var u=r(152);r.d(t,"b",(function(){return u.a}));var c=r(177);r.d(t,"c",(function(){return c.a}));var l=r(15);r.d(t,"t",(function(){return l.f})),r.d(t,"u",(function(){return l.g})),r.d(t,"z",(function(){return l.l})),r.d(t,"A",(function(){return l.m})),r.d(t,"s",(function(){return l.e})),r.d(t,"x",(function(){return l.j})),r.d(t,"y",(function(){return l.k})),r.d(t,"G",(function(){return l.s})),r.d(t,"F",(function(){return l.r})),r.d(t,"C",(function(){return l.o})),r.d(t,"w",(function(){return l.i})),r.d(t,"D",(function(){return l.p})),r.d(t,"v",(function(){return l.h})),r.d(t,"E",(function(){return l.q})),r.d(t,"n",(function(){return l.b})),r.d(t,"m",(function(){return l.a})),r.d(t,"p",(function(){return l.c})),r.d(t,"r",(function(){return l.d})),r.d(t,"B",(function(){return l.n})),r.d(t,"l",(function(){return l.t}));var f=r(18);r.d(t,"q",(function(){return f.a}));var h=r(298);r.d(t,"h",(function(){return h.a}));var d=r(299);r.d(t,"k",(function(){return d.a}));var p=r(300);r.d(t,"j",(function(){return p.a}));var v=r(153);r.d(t,"g",(function(){return v.a}));var g=r(301);r.d(t,"i",(function(){return g.a}));var m=r(91);r.d(t,"o",(function(){return m.a}));var y={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof e&&e};(y.global||y.self||y.window).mathgl={config:n.config}}).call(this,r(62))},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(151),c=r(15),l=r(18),f=r(52),h=r(76),d=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(n.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,2)),Object(c.m)(r)&&1===arguments.length?e.copy(r):(c.f.debug&&(Object(l.a)(r),Object(l.a)(i)),e[0]=r,e[1]=i),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"set",value:function(e,t,r){return this[0]=e,this[1]=t,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this.check()}},{key:"fromObject",value:function(e){return c.f.debug&&(Object(l.a)(e.x),Object(l.a)(e.y)),this[0]=e.x,this[1]=e.y,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return f.j(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return Object(h.a)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return f.i(this,this,e),this.check()}},{key:"transformByMatrix2x3",value:function(e){return f.h(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return f.g(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),t}(u.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(151),c=r(15),l=r(18),f=r(39),h=r(76),d=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(n.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0,-0)),Object(c.m)(r)&&1===arguments.length?e.copy(r):(c.f.debug&&(Object(l.a)(r),Object(l.a)(i),Object(l.a)(s),Object(l.a)(u)),e[0]=r,e[1]=i,e[2]=s,e[3]=u),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"set",value:function(e,t,r,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"fromObject",value:function(e){return c.f.debug&&(Object(l.a)(e.x),Object(l.a)(e.y),Object(l.a)(e.z),Object(l.a)(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}},{key:"transform",value:function(e){return f.o(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return Object(h.e)(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return Object(h.d)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return f.p(this,this,e),this.check()}},{key:"applyMatrix4",value:function(e){return e.transform(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(l.a)(e)}}]),t}(u.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(2),i=r(6),a=r(5),o=r(3),s=r(7),u=r(206),c=r(18),l=r(76),f=r(77),h=r(52),d=r(39),p=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),g=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),m={},y=function(e){function t(e){var r;return Object(n.a)(this,t),r=Object(i.a)(this,Object(a.a)(t).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(e)?r.copy(e):r.identity(),r}return Object(s.a)(t,e),Object(o.a)(t,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return g}}],[{key:"IDENTITY",get:function(){return m.IDENTITY=m.IDENTITY||Object.freeze(new t(p)),m.IDENTITY}},{key:"ZERO",get:function(){return m.ZERO=m.ZERO||Object.freeze(new t(v)),m.ZERO}}]),Object(o.a)(t,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}},{key:"set",value:function(e,t,r,n,i,a,o,s,u){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this.check()}},{key:"setRowMajor",value:function(e,t,r,n,i,a,o,s,u){return this[0]=e,this[1]=n,this[2]=o,this[3]=t,this[4]=i,this[5]=s,this[6]=r,this[7]=a,this[8]=u,this.check()}},{key:"determinant",value:function(){return f.b(this)}},{key:"identity",value:function(){return this.copy(p)}},{key:"fromQuaternion",value:function(e){return f.c(this,e),this.check()}},{key:"transpose",value:function(){return f.i(this,this),this.check()}},{key:"invert",value:function(){return f.d(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return f.e(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return f.e(this,this,e),this.check()}},{key:"rotate",value:function(e){return f.f(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?f.g(this,this,e):f.g(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return f.h(this,this,e),this.check()}},{key:"transform",value:function(e,t){switch(e.length){case 2:t=h.i(t||[-0,-0],e,this);break;case 3:t=d.n(t||[-0,-0,-0],e,this);break;case 4:t=Object(l.e)(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(t,e.length),t}},{key:"transformVector",value:function(e,t){return Object(c.c)("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector2",value:function(e,t){return Object(c.c)("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector3",value:function(e,t){return Object(c.c)("Matrix3.transformVector"),this.transform(e,t)}}]),t}(u.a)},function(e,t,r){"use strict";t.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(10),i=r(2),a=r(3),o=r(15),s=r(132),u=r(39),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.phi,n=t.theta,a=t.radius,o=t.bearing,s=t.pitch,u=(t.altitude,t.radiusScale),c=void 0===u?6371e3:u;Object(i.a)(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(r)||Number.isFinite(n)?(this.phi=r||0,this.theta=n||0):(Number.isFinite(o)||Number.isFinite(s))&&(this.bearing=o||0,this.pitch=s||0),this.radius=a||1,this.radiusScale=c||1,this.check()}return Object(a.a)(e,[{key:"toString",value:function(){return this.formatString(o.f)}},{key:"formatString",value:function(e){var t=e.printTypes,r=(e.printDegrees,o.l);return"".concat(t?"Spherical":"","[rho:").concat(r(this.radius),",theta:").concat(r(this.theta),",phi:").concat(r(this.phi),"]")}},{key:"equals",value:function(e){return Object(o.j)(this.radius,e.radius)&&Object(o.j)(this.theta,e.theta)&&Object(o.j)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=Object(n.a)(e,3),r=t[0],i=t[1],a=t[2];this.radius=1+a/this.radiusScale,this.phi=Object(o.o)(i),this.theta=Object(o.o)(r)}},{key:"fromVector3",value:function(e){return this.radius=u.g(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(o.d)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new s.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-Object(o.i)(this.phi)},set:function(e){this.phi=Math.PI-Object(o.o)(e)}},{key:"pitch",get:function(){return Object(o.i)(this.theta)},set:function(e){this.theta=Object(o.o)(e)}},{key:"longitude",get:function(){return Object(o.i)(this.phi)}},{key:"latitude",get:function(){return Object(o.i)(this.theta)}},{key:"lng",get:function(){return Object(o.i)(this.phi)}},{key:"lat",get:function(){return Object(o.i)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),i=r(3),a=r(152),o=r(132),s=r(153),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.x,i=void 0===r?0:r,a=t.y,u=void 0===a?0:a,c=t.z,l=void 0===c?0:c,f=t.roll,h=void 0===f?0:f,d=t.pitch,p=void 0===d?0:d,v=t.yaw,g=void 0===v?0:v,m=t.position,y=t.orientation;Object(n.a)(this,e),Array.isArray(m)&&3===m.length?this.position=new o.a(m):this.position=new o.a(i,u,l),Array.isArray(y)&&4===y.length?this.orientation=new s.a(y,y[3]):this.orientation=new s.a(h,p,g,s.a.RollPitchYaw)}return Object(i.a)(e,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(e){return!!e&&(this.position.equals(e.position)&&this.orientation.equals(e.orientation))}},{key:"exactEquals",value:function(e){return!!e&&(this.position.exactEquals(e.position)&&this.orientation.exactEquals(e.orientation))}},{key:"getTransformationMatrix",value:function(){var e=Math.sin(this.roll),t=Math.sin(this.pitch),r=Math.sin(this.yaw),n=Math.cos(this.roll),i=Math.cos(this.pitch),o=Math.cos(this.yaw);return(new a.a).setRowMajor(o*i,-r*n+o*t*e,r*e+o*t*n,this.x,r*i,o*n+r*t*e,-o*e+r*t*n,this.y,-t,i*e,i*n,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(e){return(new a.a).multiplyRight(this.getTransformationMatrix()).multiplyRight(e.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(e){return(new a.a).multiplyRight(e.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(e){return this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){return this.position.y=e}},{key:"z",get:function(){return this.position.z},set:function(e){return this.position.z=e}},{key:"roll",get:function(){return this.orientation.roll},set:function(e){return this.orientation.roll=e}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(e){return this.orientation.pitch=e}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(e){return this.orientation.yaw=e}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),i=r(3),a=r(15),o=function(){function e(t){Object(n.a)(this,e),this.points=t,this.isClosed=Object(a.j)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return Object(i.a)(e,[{key:"getSignedArea",value:function(){var e=0;return this.forEachSegment((function(t,r){e+=(t[0]+r[0])*(t[1]-r[1])})),e/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){for(var t=this.points.length,r=0;r<t-1;r++)e(this.points[r],this.points[r+1],r,r+1);this.isClosed||e(this.points[t-1],this.points[0],t-1,0)}}]),e}()},function(e,t,r){"use strict";var n=r(477);t.a=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},n.a)},function(e,t,r){"use strict";var n=r(304);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,a,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,,,,,,,function(e,t,r){"use strict";var n=r(547),i=r(313),a=r(194),o=r(395),s=r(549);function u(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return u.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof o)return p(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,a,s,l=c.call(this,t,r);return l&&(i=l.schema,t=l.root,s=l.baseId),i instanceof o?a=i.validate||e.call(this,i.schema,t,void 0,s):void 0!==i&&(a=p(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),a}function c(e,t){var r=n.parse(t),i=g(r),a=v(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==a){var s=y(i),u=this._refs[s];if("string"==typeof u)return l.call(this,e,u,r);if(u instanceof o)u.validate||this._compile(u),e=u;else{if(!((u=this._schemas[s])instanceof o))return;if(u.validate||this._compile(u),s==y(t))return{schema:u,root:e,baseId:a};e=u}if(!e.schema)return;a=v(this._getId(e.schema))}return h.call(this,r,a,e.schema,e)}function l(e,t,r){var n=c.call(this,e,t);if(n){var i=n.schema,a=n.baseId;e=n.root;var o=this._getId(i);return o&&(a=b(a,o)),h.call(this,r,a,i,e)}}e.exports=u,u.normalizeId=y,u.fullPath=v,u.url=b,u.ids=function(e){var t=y(this._getId(e)),r={"":t},o={"":v(t,!1)},u={},c=this;return s(e,{allKeys:!0},(function(e,t,s,l,f,h,d){if(""!==t){var p=c._getId(e),v=r[l],g=o[l]+"/"+f;if(void 0!==d&&(g+="/"+("number"==typeof d?d:a.escapeFragment(d))),"string"==typeof p){p=v=y(v?n.resolve(v,p):p);var m=c._refs[p];if("string"==typeof m&&(m=c._refs[m]),m&&m.schema){if(!i(e,m.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(g))if("#"==p[0]){if(u[p]&&!i(e,u[p]))throw new Error('id "'+p+'" resolves to more than one schema');u[p]=e}else c._refs[p]=g}r[t]=v,o[t]=g}})),u},u.inlineRef=p,u.schema=c;var f=a.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),o=1;o<i.length;o++){var s=i[o];if(s){if(void 0===(r=r[s=a.unescapeFragment(s)]))break;var u;if(!f[s]&&((u=this._getId(r))&&(t=b(t,u)),r.$ref)){var l=b(t,r.$ref),h=c.call(this,n,l);h&&(r=h.schema,n=h.root,t=h.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var d=a.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(n+=e(r)),n==1/0)return 1/0}else for(var a in t){if("$ref"==a)return 1/0;if(d[a])n++;else if("object"==typeof(r=t[a])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function v(e,t){return!1!==t&&(e=y(e)),g(n.parse(e))}function g(e){return n.serialize(e).split("#")[0]+"#"}var m=/#\/?$/;function y(e){return e?e.replace(m,""):""}function b(e,t){return t=y(t),n.resolve(e,t)}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;0!==i--;){var o=a[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}},function(e,t,r){"use strict";var n=r(312);function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function a(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:a((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:a(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(40),i={};function a(e,t){var r;i[e]=!0,void 0!==t&&(r=t,n.global.console&&n.global.console.error&&n.global.console.error(r))}var o=function e(t){var r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};(o.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var s=function(e){var t=this;this.gl=e,function(e){var t=e.getError;e.getError=function(){var r;do{0!==(r=t.apply(e))&&(i[r]=!0)}while(0!==r);for(r in i)if(i[r])return delete i[r],parseInt(r,10);return 0}}(e);var r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){var n=t.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,e);var i=n.attribs[e];return i.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){var n=t.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,e);var i=n.attribs[e];return i.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,n){switch(e){case 34962:t.currentArrayBuffer=n;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=n}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,n){var i=t.currentVertexArrayObject,a=i.attribs[e];switch(n){case 34975:return a.buffer;case 34338:return a.enabled;case 34339:return a.size;case 34340:return a.stride;case 34341:return a.type;case 34922:return a.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,n,i,a,o,s){var u=t.currentVertexArrayObject;u.maxAttrib=Math.max(u.maxAttrib,e);var c=u.attribs[e];return c.buffer=t.currentArrayBuffer,c.size=n,c.type=i,c.normalized=a,c.stride=o,c.offset=s,c.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(function(){var e;e="OESVertexArrayObject emulation library context restored",n.global.console&&n.global.console.log&&n.global.console.log(e),t.reset_()}),!0),this.reset_()};function u(e){if("function"!==typeof e.createVertexArray){var t=e.getSupportedExtensions;e.getSupportedExtensions=function(){var e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};var r=e.getExtension;e.getExtension=function(t){var n=r.call(this,t);return n||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new s(this)),this.__OESVertexArrayObject))}}}s.prototype.VERTEX_ARRAY_BINDING_OES=34229,s.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new o(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},s.prototype.createVertexArrayOES=function(){var e=new o(this);return this.vertexArrayObjects.push(e),e},s.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},s.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof o&&e.hasBeenBound&&e.ext===this)},s.prototype.bindVertexArrayOES=function(e){var t=this.gl;if(!e||e.isAlive){var r=this.original,n=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(n!==i){n&&i.elementArrayBuffer===n.elementArrayBuffer||r.bindBuffer.call(t,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,s=Math.max(n?n.maxAttrib:0,i.maxAttrib),u=0;u<=s;u++){var c=i.attribs[u],l=n?n.attribs[u]:null;if(n&&c.enabled===l.enabled||(c.enabled?r.enableVertexAttribArray.call(t,u):r.disableVertexAttribArray.call(t,u)),c.enabled){var f=!1;n&&c.buffer===l.buffer||(o!==c.buffer&&(r.bindBuffer.call(t,34962,c.buffer),o=c.buffer),f=!0),(f||c.cached!==l.cached)&&r.vertexAttribPointer.call(t,u,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(t,34962,this.currentArrayBuffer)}}else a(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(0),i=r(137),a=r(350),o=r(351),s=r(89),u=r(28);function c(e,t){Object(u.a)(e instanceof i.a||e instanceof a.a||e instanceof o.a);var r=e.constructor,n=e.gl,s=e.width,c=e.height,l=e.format,f=e.type,h=e.dataFormat,d=e.border,p=e.mipmaps;return new r(n,Object.assign({width:s,height:c,format:l,type:f,dataFormat:h,border:d,mipmaps:p},t))}function l(e,t){var r=e.gl,i=e.width,a=e.height,o=e.id;return new s.a(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:i,height:a,attachments:Object(n.a)({},36064,e)}))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(8),i=r.n(n),a=r(17),o=r(2),s=r(3),u=r(6),c=r(5),l=r(38),f=r(7),h=r(9),d=r(75),p=r(83),v=[34069,34070,34071,34072,34073,34074],g=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),Object(p.b)(e),(r=Object(u.a)(this,Object(c.a)(t).call(this,e,Object.assign({},n,{target:34067})))).initialize(n),Object.seal(Object(l.a)(r)),r}return Object(f.a)(t,e),Object(s.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mipmaps,n=void 0===r||r,i=t.parameters,a=void 0===i?{}:i;this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,n&&e.generateMipmap(t),e.setParameters(a)}))}},{key:"subImage",value:function(e){var t=e.face,r=e.data,n=e.x,i=void 0===n?0:n,a=e.y,o=void 0===a?0:a,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:r,x:i,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var r,n,a,o,s,u,c,l,f,d,p,g,m,y=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.width,n=t.height,a=t.pixels,o=t.data,s=t.border,u=void 0===s?0:s,c=t.format,l=void 0===c?6408:c,f=t.type,d=void 0===f?5121:f,p=this.gl,g=a||o,e.next=5,Promise.all(v.map((function(e){var t=g[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:m=e.sent,this.bind(),v.forEach((function(e,t){m[t].length>1&&!1!==y.opts.mipmaps&&h.h.warn("".concat(y.id," has mipmap and multiple LODs."))(),m[t].forEach((function(t,i){r&&n?p.texImage2D(e,i,l,r,n,u,l,d,t):p.texImage2D(e,i,l,l,d,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function(e){var t=this,r=e.face,n=e.width,i=e.height,a=e.pixels,o=e.data,s=e.border,u=void 0===s?0:s,c=e.format,l=void 0===c?6408:c,f=e.type,h=void 0===f?5121:f,d=this.gl,p=a||o;return this.bind(),p instanceof Promise?p.then((function(n){return t.setImageDataForFace(Object.assign({},e,{face:r,data:n,pixels:n}))})):this.width||this.height?d.texImage2D(r,0,l,n,i,u,l,h,p):d.texImage2D(r,0,l,l,h,p),this}}]),t}(d.a);g.FACES=v},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),i=r(6),a=r(5),o=r(38),s=r(3),u=r(7),c=r(9),l=r(83),f=r(75),h=r(107),d=r(57),p=function(e){function t(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,t),Object(l.a)(e),s=Object.assign({depth:1},s,{target:32879,unpackFlipY:!1}),(r=Object(i.a)(this,Object(a.a)(t).call(this,e,s))).initialize(s),Object.seal(Object(o.a)(r)),r}return Object(u.a)(t,e),Object(s.a)(t,null,[{key:"isSupported",value:function(e){return Object(c.g)(e)}}]),Object(s.a)(t,[{key:"setImageData",value:function(e){var t=this,r=e.level,n=void 0===r?0:r,i=e.dataFormat,a=void 0===i?6408:i,o=e.width,s=e.height,u=e.depth,l=void 0===u?1:u,f=e.border,p=void 0===f?0:f,v=e.format,g=e.type,m=void 0===g?5121:g,y=e.offset,b=void 0===y?0:y,_=e.data,w=e.parameters,x=void 0===w?{}:w;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(c.l)(this.gl,x,(function(){ArrayBuffer.isView(_)&&t.gl.texImage3D(t.target,n,a,o,s,l,p,v,m,_),_ instanceof d.a&&(t.gl.bindBuffer(35052,_.handle),t.gl.texImage3D(t.target,n,a,o,s,l,p,v,m,b))})),_&&_.byteLength)this._trackAllocatedMemory(_.byteLength,"Texture");else{var O=h.a[this.dataFormat]||4,E=h.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*O*E,"Texture")}return this.loaded=!0,this}}]),t}(f.a)},function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o}));var n=r(105),i=[];function a(e){e=Array.isArray(e)?e:[e];var t=!0,r=!1,a=void 0;try{for(var o,s=function(){var e=o.value,t=Object(n.b)(e);i.find((function(e){return t===e}))||i.unshift(t)},u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0)s()}catch(c){r=!0,a=c}finally{try{t||null==u.return||u.return()}finally{if(r)throw a}}}function o(){return i}},function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n,s,u,c,l,d,p,g=t&&t.length,m=g?t[0]*r:e.length,y=i(e,0,m,r,!0),b=[];if(!y||y.next===y.prev)return b;if(g&&(y=function(e,t,r,n){var o,s,u,c,l,d=[];for(o=0,s=t.length;o<s;o++)u=t[o]*n,c=o<s-1?t[o+1]*n:e.length,(l=i(e,u,c,n,!1))===l.next&&(l.steiner=!0),d.push(v(l));for(d.sort(f),o=0;o<d.length;o++)h(d[o],r),r=a(r,r.next);return r}(e,t,y,r)),e.length>80*r){n=u=e[0],s=c=e[1];for(var _=r;_<m;_+=r)(l=e[_])<n&&(n=l),(d=e[_+1])<s&&(s=d),l>u&&(u=l),d>c&&(c=d);p=0!==(p=Math.max(u-n,c-s))?1/p:0}return o(y,b,r,n,s,p),b}function i(e,t,r,n,i){var a,o;if(i===P(e,t,r,n)>0)for(a=t;a<r;a+=n)o=k(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=k(a,e[a],e[a+1],o);return o&&b(o,o.next)&&(j(o),o=o.next),o}function a(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!b(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(j(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function o(e,t,r,n,i,f,h){if(e){!h&&f&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=p(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,o,s,u,c=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(u=c;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,c*=2}while(o>1)}(i)}(e,n,i,f);for(var d,v,g=e;e.prev!==e.next;)if(d=e.prev,v=e.next,f?u(e,n,i,f):s(e))t.push(d.i/r),t.push(e.i/r),t.push(v.i/r),j(e),e=v.next,g=v.next;else if((e=v)===g){h?1===h?o(e=c(a(e),t,r),t,r,n,i,f,2):2===h&&l(e,t,r,n,i,f):o(a(e),t,r,n,i,f,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(y(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(g(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,r,n){var i=e.prev,a=e,o=e.next;if(y(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=p(s,u,t,r,n),h=p(c,l,t,r,n),d=e.prevZ,v=e.nextZ;d&&d.z>=f&&v&&v.z<=h;){if(d!==e.prev&&d!==e.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==e.prev&&v!==e.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=h;){if(v!==e.prev&&v!==e.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!b(i,o)&&_(i,n,n.next,o)&&O(i,o)&&O(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),j(n),j(n.next),n=e=o),n=n.next}while(n!==e);return a(n)}function l(e,t,r,n,i,s){var u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&m(u,c)){var l=E(u,c);return u=a(u,u.next),l=a(l,l.next),o(u,t,r,n,i,s),void o(l,t,r,n,i,s)}c=c.next}u=u.next}while(u!==e)}function f(e,t){return e.x-t.x}function h(e,t){if(t=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r;var u,c=r,l=r.x,f=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=l&&i!==n.x&&g(a<f?i:o,a,l,f,a<f?o:i,a,n.x,n.y)&&(u=Math.abs(a-n.y)/(i-n.x),O(n,e)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&d(r,n)))&&(r=n,h=u)),n=n.next}while(n!==c);return r}(e,t)){var r=E(t,e);a(t,t.next),a(r,r.next)}}function d(e,t){return y(e.prev,e,t.prev)<0&&y(t.next,e,e.next)<0}function p(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function g(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(O(e,t)&&O(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!==r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(y(e.prev,e,t.prev)||y(e,t.prev,t))||b(e,t)&&y(e.prev,e,e.next)>0&&y(t.prev,t,t.next)>0)}function y(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,r,n){var i=x(y(e,t,r)),a=x(y(e,t,n)),o=x(y(r,n,e)),s=x(y(r,n,t));return i!==a&&o!==s||(!(0!==i||!w(e,r,t))||(!(0!==a||!w(e,n,t))||(!(0!==o||!w(r,e,n))||!(0!==s||!w(r,t,n)))))}function w(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function x(e){return e>0?1:e<0?-1:0}function O(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function E(e,t){var r=new S(e.i,e.x,e.y),n=new S(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function k(e,t,r,n){var i=new S(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function j(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}e.exports=n,e.exports.default=n,n.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(P(e,0,a,r));if(i)for(var s=0,u=t.length;s<u;s++){var c=t[s]*r,l=s<u-1?t[s+1]*r:e.length;o-=Math.abs(P(e,c,l,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},,function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(10),o=r(0),s=r(92),u=r(250),c=r(209);function l(e){return f(function e(t,r){return t.map((function(t){return t instanceof u.a||(Object(c.a)("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Object(c.a)(t.name,"shader module has no name"),(t=new u.a(t)).dependencies=e(t.dependencies)),t}))}(e))}function f(e){var t={},r={};return h({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((function(e,t){return r[t]-r[e]})).map((function(e){return t[e]}))}function h(e){var t=e.modules,r=e.level,n=e.moduleMap,i=e.moduleDepth;if(r>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;n[l.name]=l,(void 0===i[l.name]||i[l.name]<r)&&(i[l.name]=r)}}catch(y){o=!0,s=y}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var f=!0,d=!1,p=void 0;try{for(var v,g=t[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;m.dependencies&&h({modules:m.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}}catch(y){d=!0,p=y}finally{try{f||null==g.return||g.return()}finally{if(d)throw p}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!==typeof window&&window.navigator||{},r=e.userAgent||t.userAgent||"",n=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return n||i}var p={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},v={};Object.keys(p).forEach((function(e){v[e]=e}));var g={};function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=p[t];if(Object(c.a)(n,t),!d(r))return!0;if(t in g)return g[t];var i=n[0],a=r.behavior||"enable",o="#extension GL_".concat(i," : ").concat(a,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,o),e.compileShader(s);var u=e.getShaderParameter(s,35713);return e.deleteShader(s),g[t]=u,u}function y(e,t){var r=p[t];Object(c.a)(r,t);var n=function(e){return Boolean(e&&2===e._version)}(e)&&r[1]||r[0],i="string"===typeof n?Boolean(e.getExtension(n)):n;return Object(c.a)(!1===i||!0===i),i}function b(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return y(e,t)}))}var _=r(211);function w(e,t,r){switch(t){case 300:return r?function(e){return e.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"out $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(+/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}(e):function(e){return e.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"in $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}(e);case 100:return r?function(e){return e.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1").replace(/^[ \t]*out[ \t]+(.+;)/gm,"varying $1").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")}(e):function(e){var t=(e=e.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+/gm,"varying ").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")).match(O);if(t){var r=t[1];e=e.replace(O,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),"gl_FragColor")}return e}(e);default:throw new Error("unknown GLSL version ".concat(t))}}var x,O=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;var E="\n\n".concat(_.a,"\n\n"),k=(x={},Object(o.a)(x,s.b,"vertex"),Object(o.a)(x,s.a,"fragment"),x);function j(e,t){var r=t.vs,n=t.fs,i=l(t.modules||[]);return{gl:e,vs:S(e,Object.assign({},t,{source:r,type:s.b,modules:i})),fs:S(e,Object.assign({},t,{source:n,type:s.a,modules:i})),getUniforms:P(i)}}function S(e,t){var r=t.id,n=t.source,i=t.type,o=t.modules,u=t.defines,l=void 0===u?{}:u,f=t.hookFunctions,h=void 0===f?[]:f,d=t.inject,p=void 0===d?{}:d,g=t.transpileToGLSL100,y=void 0!==g&&g,x=t.prologue,O=void 0===x||x,j=t.log;Object(c.a)("string"===typeof n,"shader source must be a string");var S=i===s.b,P=n.split("\n"),A=100,T="",R=n;0===P[0].indexOf("#version ")?(A=300,T=P[0],R=P.slice(1).join("\n")):T="#version ".concat(A);var C={};o.forEach((function(e){Object.assign(C,e.getDefines())})),Object.assign(C,l);var M=O?"".concat(T,"\n").concat(function(e){var t=e.id,r=e.source,n=e.type;return t&&"string"===typeof t&&-1===r.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(k[n],"\n\n"):""}({id:r,source:n,type:i}),"\n").concat(function(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(k[t].toUpperCase(),"\n")}({type:i}),"\n").concat(function(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(e,t){if(e.match(/NVIDIA/i)||t.match(/NVIDIA/i))return"NVIDIA";if(e.match(/INTEL/i)||t.match(/INTEL/i))return"INTEL";if(e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(r,n),vendor:r,renderer:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,r){var n="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return b(e,v.GLSL_FRAG_DEPTH)&&(n+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),b(e,v.GLSL_DERIVATIVES)&&m(e,v.GLSL_DERIVATIVES)&&(n+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),b(e,v.GLSL_FRAG_DATA)&&m(e,v.GLSL_FRAG_DATA,{behavior:"require"})&&(n+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),b(e,v.GLSL_TEXTURE_LOD)&&(n+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),n}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,r="";for(var n in e){0===t&&(r+="\n// APPLICATION DEFINES\n"),t++;var i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],"\n"))}0===t&&(r+="\n");return r}(C),"\n").concat(S?"":"precision highp float;\n\n","\n"):"".concat(T,"\n");h=function(e){var t={vs:{},fs:{}};return e.forEach((function(e){var r;"string"!==typeof e?e=(r=e).hook:r={};var n=(e=e.trim()).split(":"),i=Object(a.a)(n,2),o=i[0],s=i[1],u=e.replace(/\(.+/,"");t[o][u]=Object.assign(r,{signature:s})})),t}(h);var I={},L={},F={};for(var N in p){var D="string"===typeof p[N]?{injection:p[N],order:0}:p[N],B=N.match(/^(v|f)s:(#)?([\w-]+)$/);if(B){var U=B[2],z=B[3];U?"decl"===z?L[N]=[D]:F[N]=[D]:I[N]=[D]}else F[N]=[D]}var V=!0,G=!1,H=void 0;try{for(var W,X=o[Symbol.iterator]();!(V=(W=X.next()).done);V=!0){var Z=W.value;j&&Z.checkDeprecations(R,j),M+=Z.getModuleSource(i,A);var Y=Z.injections[i];for(var q in Y){var K=q.match(/^(v|f)s:#([\w-]+)$/);if(K){var $="decl"===K[2]?L:F;$[q]=$[q]||[],$[q].push(Y[q])}else I[q]=I[q]||[],I[q].push(Y[q])}}}catch(Q){G=!0,H=Q}finally{try{V||null==X.return||X.return()}finally{if(G)throw H}}return M+=E,M=Object(_.c)(M,i,L),M+=function(e,t){var r="";for(var n in e){var i=e[n];if(r+="void ".concat(i.signature," {\n"),i.header&&(r+="  ".concat(i.header)),t[n]){var a=t[n];a.sort((function(e,t){return e.order-t.order}));var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;r+="  ".concat(f.injection,"\n")}}catch(Q){s=!0,u=Q}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}i.footer&&(r+="  ".concat(i.footer)),r+="}\n"}return r}(h[i],I),M+=R,M=w(M=Object(_.c)(M,i,F),y?100:A,S)}function P(e){return function(t){var r={},n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value.getUniforms(t,r);Object.assign(r,u)}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}var A=r(831);r.d(t,"a",(function(){return T}));var T=function(){function e(t){Object(n.a)(this,e),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(i.a)(e,null,[{key:"getDefaultProgramManager",value:function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager}}]),Object(i.a)(e,[{key:"addDefaultModule",value:function(e){this._defaultModules.find((function(t){return t.name===e.name}))||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"===typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((function(e){return e.name!==t})),this.stateHash++}},{key:"addShaderHook",value:function(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.vs,n=void 0===r?"":r,i=t.fs,a=void 0===i?"":i,o=t.defines,s=void 0===o?{}:o,u=t.inject,c=void 0===u?{}:u,l=t.varyings,f=void 0===l?[]:l,h=t.bufferMode,d=void 0===h?35981:h,p=t.transpileToGLSL100,v=void 0!==p&&p,g=this._getModuleList(t.modules),m=this._getHash(n),y=this._getHash(a),b=g.map((function(t){return e._getHash(t.name)})).sort(),_=f.map((function(t){return e._getHash(t)})),w=Object.keys(s).sort(),x=Object.keys(c).sort(),O=[],E=[],k=!0,S=!1,P=void 0;try{for(var T,R=w[Symbol.iterator]();!(k=(T=R.next()).done);k=!0){var C=T.value;O.push(this._getHash(C)),O.push(this._getHash(s[C]))}}catch(z){S=!0,P=z}finally{try{k||null==R.return||R.return()}finally{if(S)throw P}}var M=!0,I=!1,L=void 0;try{for(var F,N=x[Symbol.iterator]();!(M=(F=N.next()).done);M=!0){var D=F.value;E.push(this._getHash(D)),E.push(this._getHash(c[D]))}}catch(z){I=!0,L=z}finally{try{M||null==N.return||N.return()}finally{if(I)throw L}}var B="".concat(m,"/").concat(y,"D").concat(O.join("/"),"M").concat(b.join("/"),"I").concat(E.join("/"),"V").concat(_.join("/"),"H").concat(this.stateHash,"B").concat(d).concat(v?"T":"");if(!this._programCache[B]){var U=j(this.gl,{vs:n,fs:a,modules:g,inject:c,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:v});this._programCache[B]=new A.a(this.gl,{hash:B,vs:U.vs,fs:U.fs,varyings:f,bufferMode:d}),this._getUniforms[B]=U.getUniforms||function(e){},this._useCounts[B]=0}return this._useCounts[B]++,this._programCache[B]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),r={},n=0,i=0,a=this._defaultModules.length;i<a;++i){var o=this._defaultModules[i],s=o.name;t[n++]=o,r[s]=!0}for(var u=0,c=e.length;u<c;++u){var l=e[u],f=l.name;r[f]||(t[n++]=l,r[f]=!0)}return t.length=n,t}}]),e}()},,,,,,,function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(176),o=function(){function e(t,r){Object(n.a)(this,e),this.name=t,this.type=r,this.sampleSize=1,this.reset()}return Object(i.a)(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(a.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(a.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),s=function(){function e(t){var r=t.id,i=t.stats;Object(n.a)(this,e),this.id=r,this.stats={},this._initializeStats(i),Object.seal(this)}return Object(i.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,r=e.type;return this.stats[t]||(this.stats[t]=e instanceof o?e:new o(t,r)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}();r.d(t,"a",(function(){return s}))},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(e,t,r,n){var i=t&&t.prototype instanceof l?t:l,a=Object.create(i.prototype),o=new x(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return E()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=b(o,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,o),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=s;var c={};function l(){}function f(){}function h(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(O([])));v&&v!==t&&r.call(v,i)&&(d=v);var g=h.prototype=l.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var n;this._invoke=function(i,a){function o(){return new t((function(n,o){!function n(i,a,o,s){var c=u(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}(i,a,n,o)}))}return n=n?n.then(o,o):o()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=g.constructor=h,h.constructor=f,h[o]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new y(s(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;w(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(2),i=r(3),a=r(78),o=r(106),s=r(31),u=r(57),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r=t.attributes,i=void 0===r?{}:r;this.typedArrayManager=o.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=i,this.opts=t,this.updateGeometry(t),Object.seal(this)}return Object(i.a)(e,[{key:"updateGeometry",value:function(e){Object.assign(this.opts,e);var t=this.opts,r=t.data,n=t.buffers,i=void 0===n?{}:n,a=t.getGeometry,o=t.geometryBuffer,u=t.positionFormat,c=t.dataChanged,l=t.normalize,f=void 0===l||l;if(this.data=r,this.getGeometry=a,this.positionSize=o&&o.size||("XY"===u?2:3),this.buffers=i,this.normalize=f,o&&(Object(s.a)(r.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(o),f||(i.positions=o)),this.geometryBuffer=i.positions,Array.isArray(c)){var h=!0,d=!1,p=void 0;try{for(var v,g=c[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;this._rebuildGeometry(m)}}catch(y){d=!0,p=y}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,r=e.endRow;this._rebuildGeometry({startRow:t,endRow:r})}},{key:"updateGeometryAttributes",value:function(e,t,r){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(e){var t=e.value||e;return Object(s.a)(ArrayBuffer.isView(t),"cannot read geometries"),Object(a.b)(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(e,t){var r=this.attributes,n=this.buffers,i=this._attributeDefs,a=this.typedArrayManager;for(var o in i)if(o in n)a.release(r[o]),r[o]=null;else{var s=i[o];s.copy=t,r[o]=a.allocate(r[o],e,s)}}},{key:"_forEachGeometry",value:function(e,t,r){var n=this.data,i=this.getGeometry,o=Object(a.a)(n,t,r),s=o.iterable,u=o.objectInfo,c=!0,l=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;u.index++,e(i(p,u),u.index)}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var r=this.indexStarts,n=this.vertexStarts,i=this.instanceCount,a=this.data,o=this.geometryBuffer,s=e||{},c=s.startRow,l=void 0===c?0:c,f=s.endRow,h=void 0===f?1/0:f;if(e||(r=[0],n=[0]),this.normalize||!o)this._forEachGeometry((function(e,r){n[r+1]=n[r]+t.getGeometrySize(e)}),l,h),i=n[n.length-1];else if(o.buffer instanceof u.a){var d=o.stride||4*this.positionSize;n=a.startIndices,i=n[a.length]||o.buffer.byteLength/d}else{var p=o.value||o,v=o.stride/p.BYTES_PER_ELEMENT||this.positionSize;n=a.startIndices,i=n[a.length]||p.length/v}this._allocate(i,Boolean(e)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;var g={};this._forEachGeometry((function(e,a){g.vertexStart=n[a],g.indexStart=r[a];var o=a<n.length-1?n[a+1]:i;g.geometrySize=o-n[a],g.geometryIndex=a,t.updateGeometryAttributes(e,g)}),l,h),this.vertexCount=r[r.length-1]}}}]),e}()},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(3),o=r(231),s=r(31),u=r(101),c=r(22),l=r(87),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractiveStateChange:t.onInteractiveStateChange},Object.seal(this),this.setProps(t)}return Object(a.a)(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var t=this.controllers[e];t&&t.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter((function(t){return t.containsPixel(e)})):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach((function(t){e[t.id]=t})),e}},{key:"getView",value:function(e){return"string"===typeof e?this.views.find((function(t){return t.id===e})):e}},{key:"getViewState",value:function(e){var t=this.getView(e),r=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(r):r}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var r=this.getViewports(),n={x:e[0],y:e[1]},i=r.length-1;i>=0;--i){var a=r[i];if(a.containsPixel(n)){var o=e.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){Object(s.a)(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=Object(l.b)(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!Object(u.a)(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):c.a.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e){return new(0,e.type)(Object.assign({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function(e,t,r,n){if(e.controller){var i=Object.assign({},e.controller,t,{id:e.id,x:r.x,y:r.y,width:r.width,height:r.height});return n?n.setProps(i):n=this._createController(i),n}return null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,r=this.views,n=this.controllers;this._viewports=[],this.controllers={};for(var i=r.length;i--;){var a=r[i],o=this.getViewState(a),s=a.makeViewport({width:e,height:t,viewState:o});this.controllers[a.id]=this._updateController(a,o,s,n[a.id]),this._viewports.unshift(s)}for(var u in n)n[u]&&!this.controllers[u]&&n[u].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach((function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)}))}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some((function(r,n){return!e[n].equals(t[n])}))}}]),e}(),h=r(228),d=r(189),p=new d.a,v=function(){function e(){Object(i.a)(this,e),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(a.a)(e,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&Object(u.a)(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.effects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.cleanup()}}catch(l){t=!0,r=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}var a=!0,o=!1,s=void 0;try{for(var u,c=this._internalEffects[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.cleanup()}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(e){return e instanceof d.a}))||this._internalEffects.push(p)}}]),e}(),g=r(131),m=r(235),y=r(89),b=r(137),_=r(9),w=r(249),x=r(207),O={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function E(e){var t=e.pickedColors,r=e.layers,n=e.deviceX,i=e.deviceY,a=e.deviceRadius,o=e.deviceRect;if(t){for(var s=o.x,u=o.y,l=o.width,f=o.height,h=a*a,d=-1,p=0,v=0;v<f;v++){var g=v+u-i,m=g*g;if(m>h)p+=4*l;else for(var y=0;y<l;y++){if(t[p+3]-1>=0){var b=y+s-n,_=b*b+m;_<=h&&(h=_,d=p)}p+=4}}if(d>=0){var w=t[d+3]-1,x=t.slice(d,d+4),E=r[w];if(E){var k=E.decodePickingColor(x),j=Math.floor(d/4/l);return{pickedColor:x,pickedLayer:E,pickedObjectIndex:k,pickedX:s+(d/4-j*l),pickedY:u+j}}c.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return O}function k(e){var t=e.pickInfo,r=e.lastPickedInfo,n=e.mode,i=e.layers,a=e.viewports,o=e.x,s=e.y,u=e.z,c=e.pixelRatio,l=t.pickedColor,f=t.pickedLayer,h=t.pickedObjectIndex,d=f?[f]:[];if("hover"===n){var p=r.index,v=r.layerId,g=f&&f.props.id;if(g!==v||h!==p){if(g!==v){var m=i.find((function(e){return e.props.id===v}));m&&d.unshift(m)}r.layerId=g,r.index=h,r.info=null}}var y={viewports:a}.viewports[0],b=y&&y.unproject([o,s],{targetZ:u}),_={color:null,layer:null,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:b,lngLat:b,devicePixel:[t.pickedX,t.pickedY],pixelRatio:c},w=new Map;return w.set(null,_),d.forEach((function(e){var t=Object.assign({},_);e===f&&(t.color=l,t.index=h,t.picked=!0),t=j({layer:e,info:t,mode:n}),e===f&&"hover"===n&&(r.info=t),t&&w.set(t.layer.id,t),"hover"===n&&e.props.autoHighlight&&(e.setModuleParameters({pickingSelectedColor:f===e?l:null}),e.setNeedsRedraw())})),w}function j(e){for(var t=e.layer,r=e.info,n=e.mode;t&&r;){var i=r.layer||t;r.layer=t,r=t.getPickingInfo({info:r,mode:n,sourceLayer:i}),t=t.parent}return r}var S=function(){function e(t){Object(i.a)(this,e),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new x.a(t),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Object(a.a)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"onError"in e&&(this._onError=e.onError)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var t=e.x,r=e.y,n=e.layers,i=e.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,o=a&&a.layer&&a.layer.id,s=o?n.find((function(e){return e.id===o})):null,u=i[0]&&i[0].unproject([t,r]),c={x:t,y:r,coordinate:u,lngLat:u,layer:s};return s?Object.assign({},a,c):Object.assign(c,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new y.a(e),y.a.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new y.a(e),this.depthFBO.attach(Object(n.a)({},36064,new b.a(e,{format:Object(_.g)(e)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"_pickClosestObject",value:function(e){var t=e.layers,r=e.viewports,n=e.x,i=e.y,a=e.radius,o=void 0===a?0:a,s=e.depth,u=void 0===s?1:s,c=e.mode,l=void 0===c?"query":c,f=e.unproject3D,h=e.onViewportActive;this._resizeBuffer();for(var d,p=Object(_.c)(this.gl),v=Object(_.b)(this.gl,[n,i],!0),g=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],m=Math.round(o*p),y=this.pickingFBO,b=y.width,w=y.height,x=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:b,deviceHeight:w}),O=[],j={},S=0;S<u;S++){var P=E({pickedColors:x&&this._drawAndSample({layers:t,viewports:r,onViewportActive:h,deviceRect:x,pass:"picking:".concat(l),redrawReason:l}),layers:t,deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:x}),A=void 0;if(P.pickedLayer&&f&&this.depthFBO)A=this._drawAndSample({layers:[P.pickedLayer],viewports:r,onViewportActive:h,deviceRect:{x:P.pickedX,y:P.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0})[0]*r[0].distanceScales.metersPerUnit[2]+r[0].position[2];if(P.pickedColor&&S+1<u){var T=P.pickedColor[3]-1;j[T]=!0,t[T].clearPickingColor(P.pickedColor)}d=k({pickInfo:P,lastPickedInfo:this.lastPickedInfo,mode:l,layers:t,viewports:r,x:n,y:i,z:A,pixelRatio:p});var R=!0,C=!1,M=void 0;try{for(var I,L=d.values()[Symbol.iterator]();!(R=(I=L.next()).done);R=!0){var F=I.value;F.layer&&O.push(F)}}catch(D){C=!0,M=D}finally{try{R||null==L.return||L.return()}finally{if(C)throw M}}if(!P.pickedColor)break}for(var N in j)t[N].restorePickingColors();return{result:O,emptyInfo:d&&d.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var t=e.layers,r=e.viewports,n=e.x,i=e.y,a=e.width,o=void 0===a?1:a,s=e.height,u=void 0===s?1:s,l=e.mode,f=void 0===l?"query":l,h=e.onViewportActive;this._resizeBuffer();var d=Object(_.c)(this.gl),p=Object(_.b)(this.gl,[n,i],!0),v=p.x,g=p.y+p.height,m=Object(_.b)(this.gl,[n+o,i+u],!0),y=m.x+m.width,b=m.y,w={x:v,y:b,width:y-v,height:g-b},x=function(e){var t=e.pickedColors,r=e.layers,n=new Map;if(t)for(var i=0;i<t.length;i+=4){var a=t[i+3]-1;if(a>=0){var o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){var u=r[a];u?n.set(s,{pickedColor:o,pickedLayer:u,pickedObjectIndex:u.decodePickingColor(o)}):c.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}({pickedColors:this._drawAndSample({layers:t,viewports:r,onViewportActive:h,deviceRect:w,pass:"picking:".concat(f),redrawReason:f}),layers:t}),O=new Map;return x.forEach((function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:n,y:i,width:o,height:u,pixelRatio:d};t=j({layer:e.pickedLayer,info:t,mode:f}),O.has(t.object)||O.set(t.object,t)})),Array.from(O.values())}},{key:"_drawAndSample",value:function(e){var t=e.layers,r=e.viewports,n=e.onViewportActive,i=e.deviceRect,a=e.pass,o=e.redrawReason,u=e.pickZ;if(Object(s.a)(i.width>0&&i.height>0),t.filter((function(e){return e.isPickable()})).length<1)return null;var c=u?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,onError:this._onError,viewports:r,onViewportActive:n,pickingFBO:c,deviceRect:i,pass:a,redrawReason:o,pickZ:u});var l=i.x,f=i.y,h=i.width,d=i.height,p=new(u?Float32Array:Uint8Array)(h*d*4);return Object(w.c)(c,{sourceX:l,sourceY:f,sourceWidth:h,sourceHeight:d,target:p}),p}},{key:"_getPickingRect",value:function(e){var t=e.deviceX,r=e.deviceY,n=e.deviceRadius,i=e.deviceWidth,a=e.deviceHeight,o=Math.max(0,t-n),s=Math.max(0,r-n),u=Math.min(i,t+n+1)-o,c=Math.min(a,r+n+1)-s;return u<=0||c<=0?null:{x:o,y:s,width:u,height:c}}}]),e}(),P={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},A=function(){function e(t){Object(i.a)(this,e);var r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,P),r.appendChild(this.el))}return Object(a.a)(e,[{key:"setTooltip",value:function(e,t,r){var n=this.el;if("string"===typeof e)n.innerText=e;else{if(!e)return void(n.style.display="none");"text"in e&&(n.innerText=e.text),"html"in e&&(n.innerHTML=e.html),"className"in e&&(n.className=e.className),Object.assign(n.style,e.style)}n.style.display="block",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),e}(),T=r(275),R=r(40),C=r(832),M=r(478),I=r(182),L=r(362),F=r(10),N=r(184),D=r.n(N),B={mousedown:1,mousemove:2,mouseup:4};!function(e){var t=e.prototype.handler;e.prototype.handler=function(e){var r=this.store;e.button>0&&(function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}(r,(function(t){return t.pointerId===e.pointerId}))||r.push(e)),t.call(this,e)}}(D.a.PointerEventInput),D.a.MouseInput.prototype.handler=function(e){var t=B[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};var U=D.a.Manager,z=D.a,V=z?[[z.Rotate,{enable:!1}],[z.Pinch,{enable:!1}],[z.Swipe,{enable:!1}],[z.Pan,{threshold:0,enable:!1}],[z.Press,{enable:!1}],[z.Tap,{event:"doubletap",taps:2,enable:!1}],[z.Tap,{event:"anytap",enable:!1}],[z.Tap,{enable:!1}]]:null,G={rotate:["pinch"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},H={doubletap:["tap"]},W={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},X=["keydown","keyup"],Z=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Y=["wheel","mousewheel","DOMMouseScroll"],q={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},K={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},$=r(136),Q=-1!==$.b.indexOf("firefox"),J=Y,ee=function(){function e(t,r){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,e),this.element=t,this.callback=r,this.options=Object.assign({enable:!0},a),this.events=J.concat(a.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,n.handleEvent,!!$.a&&{passive:!1})}))}return Object(a.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;$.c.WheelEvent&&(Q&&e.deltaMode===$.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=$.c.devicePixelRatio),e.deltaMode===$.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var r={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625===0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,r)}}},{key:"_onWheel",value:function(e,t,r){this.callback({type:"wheel",center:r,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),te=Z,re=function(){function e(t,r){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,e),this.element=t,this.callback=r,this.pressed=!1,this.options=Object.assign({enable:!0},a),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=te.concat(a.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,n.handleEvent)}))}return Object(a.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),ne=X,ie=function(){function e(t,r){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,e),this.element=t,this.callback=r,this.options=Object.assign({enable:!0},a),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=ne.concat(a.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=a.tabIndex||0,t.style.outline="none",this.events.forEach((function(e){return t.addEventListener(e,n.handleEvent)}))}return Object(a.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}(),ae=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.a)(this,e),this.element=t,this.callback=r,this.options=Object.assign({enable:!0},n),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return Object(a.a)(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),oe=r(11),se={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var ue={srcElement:"root",priority:0},ce=function(){function e(t){Object(i.a)(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(a.a)(e,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.handlers,o=this.handlersByElement;r&&("object"!==Object(oe.a)(r)||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},ue,r):ue;var s=o.get(r.srcElement);s||(s=[],o.set(r.srcElement,s));var u={type:e,handler:t,srcElement:r.srcElement,priority:r.priority};n&&(u.once=!0),i&&(u.passive=!0),a.push(u),this._active=this._active||!u.passive;for(var c=s.length-1;c>=0&&!(s[c].priority>=u.priority);)c--;s.splice(c+1,0,u)}},{key:"remove",value:function(e,t){for(var r=this.handlers,n=this.handlersByElement,i=r.length-1;i>=0;i--){var a=r[i];if(a.type===e&&a.handler===t){r.splice(i,1);var o=n.get(a.srcElement);o.splice(o.indexOf(a),1),0===o.length&&n.delete(a.srcElement)}}this._active=r.some((function(e){return!e.passive}))}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),r=e.srcEvent.target;r&&r!==t.rootElement;){if(this._emit(t,r),t.handled)return;r=r.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var r=this.handlersByElement.get(t);if(r){for(var n=!1,i=function(){e.handled=!0},a=function(){e.handled=!0,n=!0},o=[],s=0;s<r.length;s++){var u=r[s],c=u.type,l=u.handler,f=u.once;if(l(Object.assign({},e,{type:c,stopPropagation:i,stopImmediatePropagation:a})),f&&o.push(r[s]),n)break}for(var h=0;h<o.length;h++){var d=o[h];c=d.type,l=d.handler;this.remove(c,l)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=se[e.srcEvent.type];if(!t)return null;var r=e.srcEvent,n=r.buttons,i=r.button,a=r.which,o=!1,s=!1,u=!1;return 4===t||2===t&&!Number.isFinite(n)?(o=1===a,s=2===a,u=3===a):2===t?(o=Boolean(1&n),s=Boolean(4&n),u=Boolean(2&n)):1===t&&(o=0===i,s=1===i,u=2===i),{leftButton:o,middleButton:s,rightButton:u}}(e),function(e,t){var r=e.srcEvent;if(!e.center&&!Number.isFinite(r.clientX))return null;var n=e.center||{x:r.clientX,y:r.clientY},i=t.getBoundingClientRect(),a=i.width/t.offsetWidth,o=i.height/t.offsetHeight;return{center:n,offsetCenter:{x:(n.x-i.left-t.clientLeft)/a,y:(n.y-i.top-t.clientTop)/o}}}(e,t),{handled:!1,rootElement:t})}}]),e}(),le={events:null,recognizers:null,recognizerOptions:{},Manager:U,touchAction:"none",tabIndex:0},fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,e),this.options=Object.assign({},le,r),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var n=r.events;n&&this.on(n)}return Object(a.a)(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var r=this.options,n=r.Manager;for(var i in this.manager=new n(e,{touchAction:r.touchAction,recognizers:r.recognizers||V}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(G).forEach((function(e){var r=t.manager.get(e);r&&G[e].forEach((function(e){r.recognizeWith(e)}))})),r.recognizerOptions){var a=this.manager.get(i);if(a){var o=r.recognizerOptions[i];delete o.enable,a.set(o)}}this.wheelInput=new ee(e,this._onOtherEvent,{enable:!1}),this.moveInput=new re(e,this._onOtherEvent,{enable:!1}),this.keyInput=new ie(e,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new ae(e,this._onOtherEvent,{enable:!1});var s=!0,u=!1,c=void 0;try{for(var l,f=this.events[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=Object(F.a)(l.value,2),d=h[0],p=h[1];p.isEmpty()||(this._toggleRecognizer(p.recognizerName,!0),this.manager.on(d,p.handleEvent))}}catch(v){u=!0,c=v}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,r){this._addEventHandler(e,t,r,!1)}},{key:"once",value:function(e,t,r){this._addEventHandler(e,t,r,!0)}},{key:"watch",value:function(e,t,r){this._addEventHandler(e,t,r,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var r=this.manager;if(r){var n=r.get(e);if(n&&n.options.enable!==t){n.set({enable:t});var i=H[e];i&&!this.options.recognizers&&i.forEach((function(i){var a=r.get(i);t?(a.requireFailure(e),n.dropRequireFailure(i)):a.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,r,n,i){if("string"===typeof e){var a=this.manager,o=this.events,s=K[e]||e,u=o.get(s);u||(u=new ce(this),o.set(s,u),u.recognizerName=q[s]||s,a&&a.on(s,u.handleEvent)),u.add(e,t,r,n,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}else for(var c in r=t,e)this._addEventHandler(c,e[c],r,n,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"===typeof e){var r=this.events,n=K[e]||e,i=r.get(n);if(i&&(i.remove(e,t),i.isEmpty())){var a=i.recognizerName,o=!1,s=!0,u=!1,c=void 0;try{for(var l,f=r.values()[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;if(h.recognizerName===a&&!h.isEmpty()){o=!0;break}}}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}o||this._toggleRecognizer(a,!1)}}else for(var d in e)this._removeEventHandler(d,e[d])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,r=W[t.type];r&&this.manager.emit(r,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}(),he=r(21);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(){}r.d(t,"a",(function(){return ge}));var ve={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_framebuffer:null,_animate:!1,onWebGLInitialized:pe,onResize:pe,onViewStateChange:pe,onBeforeRender:pe,onAfterRender:pe,onLoad:pe,onError:null,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},ge=function(){function e(t){Object(i.a)(this,e),t=Object.assign({},ve,t),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),t.viewState&&t.initialViewState&&c.a.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Object(R.getBrowser)()&&c.a.warn("IE 11 support will be deprecated in v8.0")(),t.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new L.a({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),this.animationLoop.start()}return Object(a.a)(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&c.a.removed("onLayerHover","onHover")(),"onLayerClick"in e&&c.a.removed("onLayerClick","onClick")(),e.initialViewState&&!Object(u.a)(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);var t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var r=this.viewManager.needsRedraw(e),n=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return t=t||r||n||i||a}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_pick",value:function(e,t,r){var n=this.stats;n.get("Pick Count").incrementCount(),n.get(t).timeStart();var i=this.deckPicker[e](Object.assign({layers:this.layerManager.getLayers(r),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport},r));return n.get(t).timeEnd(),i}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"===typeof t&&(t=document.getElementById(t),Object(s.a)(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var r=e.id,n=e.style;return t.id=r,Object.assign(t.style,n),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,r=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(r||0===r)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.position="absolute",this.canvas.style.height=r)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,r=e.clientHeight||e.height;return(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,r=e.width,n=e.height,i=e.gl,a=e.glOptions,o=e.debug,s=e.useDevicePixels,u=e.autoResizeDrawingBuffer;return new C.a({width:r,height:n,useDevicePixels:s,autoResizeDrawingBuffer:u,autoResizeViewport:!1,gl:i,onCreateContext:function(e){return Object(_.a)(Object.assign({},a,e,{canvas:t.canvas,debug:o}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var e=this.props.views||[new h.a({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var r=e.offsetCenter;if(!r)return;t.x=r.x,t.y=r.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.event){var t=this._pick("pickObject","pickObject Time",e),r=t.result,n=t.emptyInfo,i=r[0]||n;if(this.props.getTooltip){var a=this.props.getTooltip(i);this.tooltip.setTooltip(a,i.x,i.y)}var o=!1;i.layer&&(o=i.layer.onHover(i,e.event)),!o&&this.props.onHover&&this.props.onHover(i,e.event),e.event=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,Object(_.e)(e,{enable:!0,copyState:!0})),this.tooltip=new A(this.canvas),Object(_.k)(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var t=new M.a;for(var r in t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new fe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),he.b)this.eventManager.on(r,this._onEvent);this.viewManager=new f({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var n=this.viewManager.getViewports()[0];this.layerManager=new o.a(e,{deck:this,stats:this.stats,viewport:n,timeline:t}),this.effectManager=new v,this.deckRenderer=new m.a(e),this.deckPicker=new S(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var r=this.layerManager.context.gl;Object(_.k)(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:r})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),c.a.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.viewState,Object(n.a)({},e.viewId,t)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,r=void 0!==t&&t;r!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=r)}},{key:"_onEvent",value:function(e){var t=he.b[e.type],r=e.offsetCenter;if(t&&r){var n=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:n,viewports:this.getViewports(r)},this._lastPointerDownInfo),a=i.layer,o=a&&(a[t.handler]||a.props[t.handler]),s=this.props[t.handler],u=!1;o&&(u=o.call(a,i,e)),!u&&s&&s(i,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var r=I.a.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}]),e}();ge.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(g.a)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,onError:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool}},ge.defaultProps=ve,ge.VERSION=T.a.VERSION},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(22),c=r(213),l=r(234),f=r(148),h=r(175),d=r(237);function p(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=r.startRow,a=void 0===i?0:i,o=r.endRow,s=void 0===o?e.length:o,c=a;c<s;c++){var l=e[c];u.a.assert(l&&l.geometry,"GeoJSON does not have geometry");var f=l.geometry;if("GeometryCollection"===f.type){u.a.assert(Array.isArray(f.geometries),"GeoJSON does not have geometries array");for(var h=f.geometries,d=0;d<h.length;d++){var p=h[d];v(p,n,t,l,c)}}else v(f,n,t,l,c)}return n}function v(e,t,r,n,i){var a=e.type,o=e.coordinates,s=t.pointFeatures,c=t.lineFeatures,l=t.polygonFeatures,f=t.polygonOutlineFeatures;if(function(e,t){var r=g[e];u.a.assert(r,"Unknown GeoJSON type ".concat(e));for(;t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}(a,o))switch(a){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":o.forEach((function(e){s.push(r({geometry:{type:"Point",coordinates:e}},n,i))}));break;case"LineString":c.push(r({geometry:e},n,i));break;case"MultiLineString":o.forEach((function(e){c.push(r({geometry:{type:"LineString",coordinates:e}},n,i))}));break;case"Polygon":l.push(r({geometry:e},n,i)),o.forEach((function(e){f.push(r({geometry:{type:"LineString",coordinates:e}},n,i))}));break;case"MultiPolygon":o.forEach((function(e){l.push(r({geometry:{type:"Polygon",coordinates:e}},n,i)),e.forEach((function(e){f.push(r({geometry:{type:"LineString",coordinates:e}},n,i))}))}))}else u.a.warn("".concat(a," coordinates are malformed"))()}var g={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};r.d(t,"a",(function(){return b}));var m={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};function y(e){return e.geometry.coordinates}var b=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initializeState",value:function(){this.state={features:{}},this.props.getLineDashArray&&u.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.props,r=e.changeFlags;if(r.dataChanged){var n=function(e){if(Array.isArray(e))return e;switch(u.a.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return u.a.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),i=this.getSubLayerRow.bind(this);if(Array.isArray(r.dataChanged)){var a=this.state.features,o={},s={};for(var c in a)o[c]=a[c].slice(),s[c]=[];var l=!0,f=!1,h=void 0;try{for(var v,g=r.dataChanged[Symbol.iterator]();!(l=(v=g.next()).done);l=!0){var m=v.value,y=p(n,i,m);for(var b in a)s[b].push(Object(d.a)({data:o[b],getIndex:function(e){return e.__source.index},dataRange:m,replace:y[b]}))}}catch(_){f=!0,h=_}finally{try{l||null==g.return||g.return()}finally{if(f)throw h}}this.setState({features:o,featuresDiff:s})}else this.setState({features:p(n,i),featuresDiff:{}})}}},{key:"renderLayers",value:function(){var e=this.state,t=e.features,r=e.featuresDiff,n=t.pointFeatures,i=t.lineFeatures,a=t.polygonFeatures,o=t.polygonOutlineFeatures,s=this.props,u=s.stroked,c=s.filled,d=s.extruded,p=s.wireframe,v=s.material,g=s.transitions,m=this.props,b=m.lineWidthUnits,_=m.lineWidthScale,w=m.lineWidthMinPixels,x=m.lineWidthMaxPixels,O=m.lineJointRounded,E=m.lineMiterLimit,k=m.pointRadiusScale,j=m.pointRadiusMinPixels,S=m.pointRadiusMaxPixels,P=m.elevationScale,A=m.lineDashJustified,T=this.props,R=T.getLineColor,C=T.getFillColor,M=T.getRadius,I=T.getLineWidth,L=T.getLineDashArray,F=T.getElevation,N=T.updateTriggers,D=this.getSubLayerClass("polygons-fill",h.a),B=this.getSubLayerClass("polygons-stroke",f.a),U=this.getSubLayerClass("line-strings",f.a),z=this.getSubLayerClass("points",l.a),V=this.shouldRenderSubLayer("polygons-fill",a)&&new D({_dataDiff:r.polygonFeatures&&function(){return r.polygonFeatures},extruded:d,elevationScale:P,filled:c,wireframe:p,material:v,getElevation:this.getSubLayerAccessor(F),getFillColor:this.getSubLayerAccessor(C),getLineColor:this.getSubLayerAccessor(R),transitions:g&&{getPolygon:g.geometry,getElevation:g.getElevation,getFillColor:g.getFillColor,getLineColor:g.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:N.getElevation,getFillColor:N.getFillColor,getLineColor:N.getLineColor}}),{data:a,getPolygon:y});return[!d&&V,!d&&u&&this.shouldRenderSubLayer("polygons-stroke",o)&&new B({_dataDiff:r.polygonOutlineFeatures&&function(){return r.polygonOutlineFeatures},widthUnits:b,widthScale:_,widthMinPixels:w,widthMaxPixels:x,rounded:O,miterLimit:E,dashJustified:A,getColor:this.getSubLayerAccessor(R),getWidth:this.getSubLayerAccessor(I),getDashArray:this.getSubLayerAccessor(L),transitions:g&&{getPath:g.geometry,getColor:g.getLineColor,getWidth:g.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:N.getLineColor,getWidth:N.getLineWidth,getDashArray:N.getLineDashArray}}),{data:o,getPath:y}),this.shouldRenderSubLayer("linestrings",i)&&new U({_dataDiff:r.lineFeatures&&function(){return r.lineFeatures},widthUnits:b,widthScale:_,widthMinPixels:w,widthMaxPixels:x,rounded:O,miterLimit:E,dashJustified:A,getColor:this.getSubLayerAccessor(R),getWidth:this.getSubLayerAccessor(I),getDashArray:this.getSubLayerAccessor(L),transitions:g&&{getPath:g.geometry,getColor:g.getLineColor,getWidth:g.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:N.getLineColor,getWidth:N.getLineWidth,getDashArray:N.getLineDashArray}}),{data:i,getPath:y}),this.shouldRenderSubLayer("points",n)&&new z({_dataDiff:r.pointFeatures&&function(){return r.pointFeatures},stroked:u,filled:c,radiusScale:k,radiusMinPixels:j,radiusMaxPixels:S,lineWidthUnits:b,lineWidthScale:_,lineWidthMinPixels:w,lineWidthMaxPixels:x,getFillColor:this.getSubLayerAccessor(C),getLineColor:this.getSubLayerAccessor(R),getRadius:this.getSubLayerAccessor(M),getLineWidth:this.getSubLayerAccessor(I),transitions:g&&{getPosition:g.geometry,getFillColor:g.getFillColor,getLineColor:g.getLineColor,getRadius:g.getRadius,getLineWidth:g.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:N.getFillColor,getLineColor:N.getLineColor,getRadius:N.getRadius,getLineWidth:N.getLineWidth}}),{data:n,getPosition:y}),d&&V]}}]),t}(c.a);b.layerName="GeoJsonLayer",b.defaultProps=m},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(194);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var r,n="boolean"===typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){var i={key:t,value:e[t]},a={key:n,value:e[n]};return r(i,a)}}),a=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==a.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=a.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(o="",r=0;r<u.length;r++){var c=u[r],l=e(t[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return a.splice(s,1),"{"+o+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",i=!0===e.schema.$async,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var u="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(u);e.logger.warn(u)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!a&&!e.schema.$ref){var c=e.level,l=e.dataLevel,f=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,v="data"+(l||""),g="valid"+c;if(!1===e.schema){e.isTop?p=!0:n+=" var "+g+" = false; ",($=$||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";var m=n;n=$.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var y=e.isTop;c=e.level=0,l=e.dataLevel=0,v="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{c=e.level,v="data"+((l=e.dataLevel)||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}g="valid"+c,p=!e.opts.allErrors;var _="",w="",x=e.schema.type,O=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(O?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],O=!0)),O&&1==x.length&&(x=x[0],O=!1),e.schema.$ref&&a){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,x);var k=e.RULES.types[x];if(E||O||!0===k||k&&!Q(k)){h=e.schemaPath+".type",d=e.errSchemaPath+"/type",h=e.schemaPath+".type",d=e.errSchemaPath+"/type";var j=O?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[j](x,v,!0)+") { ",E){var S="dataType"+c,P="coerced"+c;n+=" var "+S+" = typeof "+v+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+S+" == 'object' && Array.isArray("+v+")) "+S+" = 'array'; "),n+=" var "+P+" = undefined; ";var A="",T=E;if(T)for(var R,C=-1,M=T.length-1;C<M;)R=T[C+=1],C&&(n+=" if ("+P+" === undefined) { ",A+="}"),"array"==e.opts.coerceTypes&&"array"!=R&&(n+=" if ("+S+" == 'array' && "+v+".length == 1) { "+P+" = "+v+" = "+v+"[0]; "+S+" = typeof "+v+";  } "),"string"==R?n+=" if ("+S+" == 'number' || "+S+" == 'boolean') "+P+" = '' + "+v+"; else if ("+v+" === null) "+P+" = ''; ":"number"==R||"integer"==R?(n+=" if ("+S+" == 'boolean' || "+v+" === null || ("+S+" == 'string' && "+v+" && "+v+" == +"+v+" ","integer"==R&&(n+=" && !("+v+" % 1)"),n+=")) "+P+" = +"+v+"; "):"boolean"==R?n+=" if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+P+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+P+" = true; ":"null"==R?n+=" if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+P+" = null; ":"array"==e.opts.coerceTypes&&"array"==R&&(n+=" if ("+S+" == 'string' || "+S+" == 'number' || "+S+" == 'boolean' || "+v+" == null) "+P+" = ["+v+"]; ");n+=" "+A+" if ("+P+" === undefined) {   ",($=$||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=O?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=O?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";m=n;n=$.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var I=l?"data"+(l-1||""):"parentData";n+=" "+v+" = "+P+"; ",l||(n+="if ("+I+" !== undefined)"),n+=" "+I+"["+(l?e.dataPathArr[l]:"parentDataProperty")+"] = "+P+"; } "}else{($=$||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=O?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=O?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";m=n;n=$.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!a)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(n+=" } if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",w+="}");else{var L=e.RULES;if(L)for(var F=-1,N=L.length-1;F<N;)if(Q(k=L[F+=1])){if(k.type&&(n+=" if ("+e.util.checkDataType(k.type,v)+") { "),e.opts.useDefaults)if("object"==k.type&&e.schema.properties){f=e.schema.properties;var D=Object.keys(f);if(D)for(var B,U=-1,z=D.length-1;U<z;){if(void 0!==(H=f[B=D[U+=1]]).default){var V=v+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+V+" === null || "+V+" === '' "),n+=" ) "+V+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}}else if("array"==k.type&&Array.isArray(e.schema.items)){var G=e.schema.items;if(G){C=-1;for(var H,W=G.length-1;C<W;)if(void 0!==(H=G[C+=1]).default){V=v+"["+C+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+V;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+V+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+V+" === null || "+V+" === '' "),n+=" ) "+V+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}}var X=k.rules;if(X)for(var Z,Y=-1,q=X.length-1;Y<q;)if(J(Z=X[Y+=1])){var K=Z.code(e,Z.keyword,k.type);K&&(n+=" "+K+" ",p&&(_+="}"))}if(p&&(n+=" "+_+" ",_=""),k.type&&(n+=" } ",x&&x===k.type&&!E)){n+=" else { ";var $;h=e.schemaPath+".type",d=e.errSchemaPath+"/type";($=$||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=O?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=O?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";m=n;n=$.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}p&&(n+=" if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",w+="}")}}function Q(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return!0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return p&&(n+=" "+w+" "),y?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+c+";",n=e.util.cleanUpCode(n),y&&(n=e.util.finalCleanUpCode(n,i)),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s;var d="maximum"==t,p=d?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[p],g=e.opts.$data&&v&&v.$data,m=d?"<":">",y=d?">":"<",b=void 0;if(g){var _=e.util.getData(v.$data,o,e.dataPathArr),w="exclusive"+a,x="exclType"+a,O="exclIsNumber"+a,E="' + "+(S="op"+a)+" + '";i+=" var schemaExcl"+a+" = "+_+"; ",i+=" var "+w+"; var "+x+" = typeof "+(_="schemaExcl"+a)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var k;b=p;(k=k||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var j=i;i=k.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+x+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+_+" "+m+"= "+n+") ? "+f+" "+y+"= "+_+" : "+f+" "+y+" "+n+" ) : ( ("+w+" = "+_+" === true) ? "+f+" "+y+"= "+n+" : "+f+" "+y+" "+n+" ) || "+f+" !== "+f+") { var op"+a+" = "+w+" ? '"+m+"' : '"+m+"='; ",void 0===s&&(b=p,c=e.errSchemaPath+"/"+p,n=_,h=g)}else{E=m;if((O="number"==typeof v)&&h){var S="'"+E+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+v+" "+m+"= "+n+" ? "+f+" "+y+"= "+v+" : "+f+" "+y+" "+n+" ) || "+f+" !== "+f+") { "}else{O&&void 0===s?(w=!0,b=p,c=e.errSchemaPath+"/"+p,n=v,y+="="):(O&&(n=Math[d?"min":"max"](v,s)),v===(!O||n)?(w=!0,b=p,c=e.errSchemaPath+"/"+p,y+="="):(w=!1,E+="="));S="'"+E+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+f+" "+y+" "+n+" || "+f+" !== "+f+") { "}}b=b||t,(k=k||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+S+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+E+" ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";j=i;return i=k.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+f+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s;var d="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+f+".length ":i+=" ucs2length("+f+") ",i+=" "+d+" "+n+") { ";var p=t,v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var g=i;return i=v.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+f+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(7),u=r(87),c=r(213),l=r(371),f=r(10),h=r(22),d=function(){function e(t){var r=t.x,i=t.y,a=t.z,o=t.onTileLoad,s=t.onTileError;Object(n.a)(this,e),this.x=r,this.y=i,this.z=a,this.isVisible=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this.onTileLoad=o,this.onTileError=s}return Object(i.a)(e,[{key:"loadData",value:function(e){var t=this,r=this.x,n=this.y,i=this.z,a=this.bbox;e&&(this._loader=Promise.resolve(e({x:r,y:n,z:i,bbox:a})).then((function(e){return t.content=e,t._isLoaded=!0,t.onTileLoad(t),e})).catch((function(e){t._isLoaded=!0,t.onTileError(e)})))}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"byteLength",get:function(){var e=this.content?this.content.byteLength:0;return Number.isFinite(e)||h.a.error("byteLength not defined in tile data")(),e}}]),e}(),p=r(37),v={type:"url",value:"",validate:function(e){return"string"===typeof e||Array.isArray(e)&&e.every((function(e){return"string"===typeof e}))},equals:function(e,t){if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function g(e){var t=[e.unproject([0,0]),e.unproject([e.width,0]),e.unproject([0,e.height]),e.unproject([e.width,e.height])];return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}function m(e,t){var r=Object(p.l)(e),n=Object(f.a)(r,2),i=n[0],a=n[1];return[i*=t/512,a=(1-a/512)*t]}function y(e,t){var r=Object(f.a)(e,2);return[r[0]*t/512,r[1]*t/512]}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return 512*Math.pow(2,e)/t}function _(e,t,r){var n=b(r),i=e/n*360-180,a=Math.PI-2*Math.PI*t/n;return[i,180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)))]}function w(e,t,r,n){var i=b(r,n);return[e/i*512,t/i*512]}function x(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;if(e.isGeospatial){var a=_(t,r,n),o=Object(f.a)(a,2),s=o[0],u=o[1],c=_(t+1,r+1,n),l=Object(f.a)(c,2),h=l[0],d=l[1];return{west:s,north:u,east:h,south:d}}var p=w(t,r,n,i),v=Object(f.a)(p,2),g=v[0],m=v[1],y=w(t+1,r+1,n,i),b=Object(f.a)(y,2),x=b[0],O=b[1];return{left:g,top:m,right:x,bottom:O}}function O(e,t,r){for(var n=g(e),i=b(t,r),a=y([n[0],n[1]],i),o=Object(f.a)(a,2),s=o[0],u=o[1],c=y([n[2],n[3]],i),l=Object(f.a)(c,2),h=l[0],d=l[1],p=[],v=Math.floor(s);v<h;v++)for(var m=Math.floor(u);m<d;m++)p.push({x:v,y:m,z:t});return p}function E(e,t){var r=g(e),n=b(t),i=m([r[0],r[3]],n),a=Object(f.a)(i,2),o=a[0],s=a[1],u=m([r[2],r[1]],n),c=Object(f.a)(u,2),l=c[0],h=c[1],d=[];o=Math.floor(o),l=Math.min(o+n,l),s=Math.max(0,Math.floor(s)),h=Math.min(n,h);for(var p=o;p<l;p++)for(var v=s;v<h;v++){var y=p-Math.floor(p/n)*n;d.push({x:y,y:v,z:t})}return d}var k=function(){function e(t){var r=this;Object(n.a)(this,e),this.opts=t,this._getTileData=t.getTileData,this.onTileError=t.onTileError,this.onTileLoad=function(e){t.onTileLoad(e),r.opts.maxCacheByteSize&&(r._cacheByteSize+=e.byteLength,r._resizeCache())},this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(t)}return Object(i.a)(e,[{key:"setOptions",value:function(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}},{key:"update",value:function(e){var t=this;if(e!==this._viewport){this._viewport=e;var r=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom});this._selectedTiles=r.map((function(e){return t._getTile(e,!0)})),this._dirty&&this._rebuildTree()}var n=this.updateTileStates();return this._dirty&&this._resizeCache(),n&&this._frameNumber++,this._frameNumber}},{key:"getTileIndices",value:function(e){return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,i=Math.ceil(e.zoom);return Number.isFinite(r)&&i<r?[]:(Number.isFinite(t)&&i>t&&(i=t),e.isGeospatial?E(e,i):O(e,i,n))}(e.viewport,e.maxZoom,e.minZoom,this.opts.tileSize)}},{key:"getTileMetadata",value:function(e){var t=e.x,r=e.y,n=e.z;return{bbox:x(this._viewport,t,r,n,this.opts.tileSize)}}},{key:"getParentIndex",value:function(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}},{key:"updateTileStates",value:function(){this._updateTileStates(this.selectedTiles);var e=!1,t=!0,r=!1,n=void 0;try{for(var i,a=this._cache.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=Boolean(1&o.state);o.isVisible!==s&&(e=!0,o.isVisible=s)}}catch(u){r=!0,n=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"_rebuildTree",value:function(){var e=this._cache,t=!0,r=!1,n=void 0;try{for(var i,a=e.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.parent=null,o.children.length=0}}catch(p){r=!0,n=p}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var s=!0,u=!1,c=void 0;try{for(var l,f=e.values()[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=this._getNearestAncestor(h.x,h.y,h.z);h.parent=d,d&&d.children.push(h)}}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"_updateTileStates",value:function(e){var t=this._cache,r=this.opts.refinementStrategy||"best-available",n=!0,i=!1,a=void 0;try{for(var o,s=t.values()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.state=0}}catch(E){i=!0,a=E}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}var u=!0,c=!1,l=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){f.value.state=5}}catch(E){c=!0,l=E}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}if("never"!==r){var d=!0,p=!1,v=void 0;try{for(var g,m=e[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){S(g.value,r)}}catch(E){p=!0,v=E}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}var y=!0,b=!1,_=void 0;try{for(var w,x=e[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var O=w.value;j(O)&&P(O)}}catch(E){b=!0,_=E}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}}},{key:"_resizeCache",value:function(){var e=this._cache,t=this.opts,r=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),n=t.maxCacheByteSize||1/0;if(e.size>r||this._cacheByteSize>n){var i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=Object(f.a)(s.value,2),l=c[0],h=c[1];if(h.isVisible||(this._cacheByteSize-=t.maxCacheByteSize?h.byteLength:0,e.delete(l)),e.size<=r&&this._cacheByteSize<=n)break}}catch(d){a=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((function(e,t){return e.z-t.z})),this._dirty=!1)}},{key:"_getTile",value:function(e,t){var r=e.x,n=e.y,i=e.z,a="".concat(r,",").concat(n,",").concat(i),o=this._cache.get(a);return!o&&t&&(o=new d({x:r,y:n,z:i,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(o,this.getTileMetadata(o)),o.loadData(this._getTileData),this._cache.set(a,o),this._dirty=!0),o}},{key:"_getNearestAncestor",value:function(e,t,r){for(var n=this._minZoom,i=void 0===n?0:n,a={x:e,y:t,z:r};a.z>i;){a=this.getParentIndex(a);var o=this._getTile(a);if(o)return o}return null}},{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles.every((function(e){return e.isLoaded}))}}]),e}();function j(e){for(var t=e;t;){if(!1&t.state)return!0;if(t.isLoaded)return!1;t=t.parent}return!0}function S(e,t){for(var r,n=3;r=e.parent;){if(e.isLoaded&&(n=4,"best-available"===t))return;r.state=Math.max(r.state,n),e=r}}function P(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.state=Math.max(o.state,3),o.isLoaded||P(o)}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}r.d(t,"a",(function(){return T}));var A={data:[],dataComparator:v.equals,renderSubLayers:{type:"function",value:function(e){return new l.a(e)},compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:function(e){},compare:!1},onTileError:{type:"function",value:function(e){return console.error(e)},compare:!1},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available"},T=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initializeState",value:function(){this.state={tiles:[],isLoaded:!1}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,r=(e.oldProps,e.context,e.changeFlags),n=this.state.tileset,i=!n||r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getTileData);if(i){var a=t.maxZoom,o=t.minZoom,s=t.tileSize,u=t.maxCacheSize,c=t.maxCacheByteSize,l=t.refinementStrategy;n=new k({getTileData:this.getTileData.bind(this),maxCacheSize:u,maxCacheByteSize:c,maxZoom:a,minZoom:o,tileSize:s,refinementStrategy:l,onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this)}),this.setState({tileset:n})}else r.propsChanged&&(n.setOptions(t),this.state.tileset.tiles.forEach((function(e){e.layers=null})));(i||r.viewportChanged)&&this._updateTileset()}},{key:"_updateTileset",value:function(){var e=this.state.tileset,t=this.props.onViewportLoad,r=e.update(this.context.viewport),n=e.isLoaded,i=this.state.isLoaded!==n,a=this.state.frameNumber!==r;n&&t&&(i||a)&&t(e.selectedTiles.map((function(e){return e.data}))),a&&this.setState({frameNumber:r}),this.state.isLoaded=n}},{key:"_onTileLoad",value:function(e){var t=this.getCurrentLayer();t.props.onTileLoad(e),t._updateTileset()}},{key:"_onTileError",value:function(e){var t=this.getCurrentLayer();t.props.onTileError(e),t._updateTileset()}},{key:"getTileData",value:function(e){var t,r,n=this.props,i=n.getTileData,a=n.fetch,o=n.data;return e.url=(r=e,(t=o)&&t.length?(Array.isArray(t)&&(t=t[Math.abs(r.x+r.y)%t.length]),t.replace(/\{ *([\w_-]+) *\}/g,(function(e,t){return r[t]}))):null),i?i(e):e.url?a(e.url,{layer:this}):null}},{key:"renderSubLayers",value:function(e){return this.props.renderSubLayers(e)}},{key:"getPickingInfo",value:function(e){var t=e.info,r=e.sourceLayer;return t.sourceLayer=r,t.tile=r.props.tile,t}},{key:"renderLayers",value:function(){var e=this,t=this.props.visible;return this.state.tileset.tiles.map((function(r){var n=t&&r.isVisible;if(r.layers)r.layers[0]&&r.layers[0].props.visible!==n&&(r.layers=r.layers.map((function(e){return e.clone({visible:n})})));else{var i=e.renderSubLayers(Object.assign({},e.props,{id:"".concat(e.id,"-").concat(r.x,"-").concat(r.y,"-").concat(r.z),data:r.data,visible:n,_offset:0,tile:r}));r.layers=Object(u.b)(i,Boolean)}return r.layers}))}},{key:"isLoaded",get:function(){return this.state.tileset.selectedTiles.every((function(e){return e.layers&&e.layers.every((function(e){return e.isLoaded}))}))}}]),t}(c.a);T.layerName="TileLayer",T.defaultProps=A},,,function(e,t,r){"use strict";var n=r(169),i=r(463);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(t,"window",{enumerable:!0,get:function(){return a.window}}),Object.defineProperty(t,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(t,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(t,"process",{enumerable:!0,get:function(){return a.process}}),Object.defineProperty(t,"console",{enumerable:!0,get:function(){return a.console}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"isBrowserMainThread",{enumerable:!0,get:function(){return o.isBrowserMainThread}}),Object.defineProperty(t,"getBrowser",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return s.isMobile}}),Object.defineProperty(t,"isElectron",{enumerable:!0,get:function(){return u.default}});var a=r(292),o=i(r(293)),s=i(r(464)),u=n(r(244))},function(e,t,r){var n=r(204);function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}},function(e,t,r){"use strict";var n=r(169);Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=function(){return"undefined"!==typeof i.window.orientation},t.default=function(e){if(!e&&!(0,a.default)())return"Node";if((0,o.default)(e))return"Electron";var t="undefined"!==typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=-1!==r.indexOf("MSIE "),s=-1!==r.indexOf("Trident/");if(n||s)return"IE";if(i.window.chrome)return"Chrome";if(i.window.safari)return"Safari";if(i.window.mozInnerScreenX)return"Firefox";return"Unknown"};var i=r(292),a=n(r(293)),o=n(r(244))},,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(9);function i(e,t,r,i){var a="See luma.gl ".concat(r," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),o=Object.getPrototypeOf(e);i.forEach((function(e){o.methodName||(o[e]=function(){throw n.h.removed("Calling removed method ".concat(t,".").concat(e,": "),a)(),new Error(e)})}))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return u}));var n=r(246),i=r(9),a=r(28);function o(e,t){return s(e,t)}function s(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return c(e,t)}))}function u(e){for(var t in e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},n.b)void 0===e.luma.caps[t]&&(e.luma.caps[t]=c(e,t));return e.luma.caps}function c(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){var r,o=n.b[t];Object(a.a)(o,t);var s=Object(i.g)(e)&&o[1]||o[0];if("function"===typeof s)r=s(e);else if(Array.isArray(s)){r=!0;var u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;r=r&&Boolean(e.getExtension(d))}}catch(p){c=!0,l=p}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}else"string"===typeof s?r=Boolean(e.getExtension(s)):"boolean"===typeof s?r=s:Object(a.a)(!1);return r}(e,t)),e.luma.caps[t]||i.h.log(2,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}},function(e,t,r){"use strict";var n={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};t.a={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){var r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}else t.picking_uSelectedColorValid=0;return e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor.map((function(e){return e/255}))),void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(10),i=r(2),a=r(3),o=1,s=1,u=function(){function e(){Object(i.a)(this,e),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(a.a)(e,[{key:"addChannel",value:function(e){var t=e.delay,r=void 0===t?0:t,n=e.duration,i=void 0===n?Number.POSITIVE_INFINITY:n,a=e.rate,s=void 0===a?1:a,u=e.repeat,c=o++,l={time:0,delay:r,duration:i,rate:s,repeat:void 0===u?1:u};return this._setChannelTime(l,this.time),this.channels.set(c,l),c}},{key:"removeChannel",value:function(e){this.channels.delete(e);var t=!0,r=!1,i=void 0;try{for(var a,o=this.animations[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=Object(n.a)(a.value,2),u=s[0];s[1].channel===e&&this.detachAnimation(u)}}catch(c){r=!0,i=c}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"isFinished",value:function(e){var t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}},{key:"getTime",value:function(e){if(void 0===e)return this.time;var t=this.channels.get(e);return void 0===t?-1:t.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var t=this.channels.values(),r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;this._setChannelTime(s,this.time)}}catch(m){n=!0,i=m}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}var u=this.animations.values(),c=!0,l=!1,f=void 0;try{for(var h,d=u[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value,v=p.animation,g=p.channel;v.setTime(this.getTime(g))}}catch(m){l=!0,f=m}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,t){var r=s++;return this.animations.set(r,{animation:e,channel:t}),e.setTime(this.getTime(t)),r}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,t){var r=t-e.delay;r>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}]),e}()},,,,function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(6),o=r(5),s=r(38),u=r(7),c=r(1),l=r.n(c),f=r(4),h=r.n(f),d=r(370),p=r(143),v=r(16);function g(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}var m=r(114),y=r(145);function b(e){return e?"function"===typeof e?Object(c.createElement)(m.a,{},e):Array.isArray(e)?e.map(b):(g(e.type,m.a),e):e}function _(e){var t=e.children,r=e.layers,n=e.views,i=[],a=[],o={};return l.a.Children.forEach(b(t),(function(e){if(e){var t=e.type;if(g(t,y.a)){var r=function(e,t){var r={},n=e.defaultProps||{};for(var i in t)n[i]!==t[i]&&(r[i]=t[i]);return new e(r)}(t,e.props);a.push(r)}else i.push(e);if(t!==m.a&&g(t,m.a)&&e.props.id){var n=new t(e.props);o[n.id]=n}}})),Object.keys(o).length>0&&(Array.isArray(n)?n.forEach((function(e){o[e.id]=e})):n&&(o[n.id]=n),n=Object.values(o)),{layers:r=a.length>0?[].concat(a,Object(v.a)(r)):r,children:i,views:n}}var w={position:"absolute",zIndex:-1};function x(e,t){return e?"function"===typeof e?e(t):Array.isArray(e)?e.map((function(e){return x(e,t)})):function(e){var t=e&&e.type,r=t&&t.defaultProps;return r&&r.mapStyle}(e)?(t.style=w,Object(c.cloneElement)(e,t)):function(e){var t=e&&e.type;return t&&t.deckGLViewProps}(e)?Object(c.cloneElement)(e,t):e:e}function O(e){var t=e.children,r=(e.viewports,e.deck),n=e.ContextProvider,i=(r||{}).viewManager;if(!i||!i.views.length)return[];var a={},o=i.views[0].id,s=!0,u=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,p=o,y=d;g(d.type,m.a)&&(p=d.props.id||o,y=d.props.children);var b=i.getViewport(p),_=i.getViewState(p);if(b)y=x(y,{x:b.x,y:b.y,width:b.width,height:b.height,viewport:b,viewState:_}),a[p]||(a[p]={viewport:b,children:[]}),a[p].children.push(y)}}catch(w){u=!0,l=w}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}return Object.keys(a).map((function(e){var t=a[e],i=t.viewport,o=t.children,s={position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height},u="view-".concat(e),l=c.createElement.apply(void 0,["div",{key:u,id:u,style:s}].concat(Object(v.a)(o)));if(n){var f={viewport:i,container:r.canvas.offsetParent,eventManager:r.eventManager,onViewStateChange:function(t){t.viewId=e,r._onViewStateChange(t)}};return Object(c.createElement)(n,{key:u,value:f},l)}return l}))}var E={mixBlendMode:null};function k(e){var t=e.width,r=e.height,n=e.style,i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:r},a={left:0,top:0};if(n)for(var o in n)o in E?a[o]=n[o]:i[o]=n[o];return{containerStyle:i,canvasStyle:a}}r.d(t,"a",(function(){return P}));var j=d.a.getPropTypes(h.a),S=d.a.defaultProps,P=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,e))).viewports=null,r.children=null,r._needsRedraw=null,r._containerRef=l.a.createRef(),r._canvasRef=l.a.createRef(),r.pickObject=r.pickObject.bind(Object(s.a)(r)),r.pickMultipleObjects=r.pickMultipleObjects.bind(Object(s.a)(r)),r.pickObjects=r.pickObjects.bind(Object(s.a)(r)),r._extractJSXLayers=Object(p.a)(_),r._positionChildrenUnderViews=Object(p.a)(O),r._extractStyles=Object(p.a)(k),r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.Deck||d.a;this.deck=this.deck||new e(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,r=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!r}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){return this.deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this.deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this.deck.pickObjects(e)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),r=t.layers,n=t.views,i=Object.assign({},e,{style:null,width:"100%",height:"100%",layers:r,views:n});this.deck.setProps(i)}},{key:"render",value:function(){var e=this.props,t=e.ContextProvider,r=e.width,n=e.height,i=e.style,a=(this.deck||{}).viewManager;this.viewports=a&&a.getViewports(),this.children=this._parseJSX(this.props).children;var o=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:t}),s=this._extractStyles({width:r,height:n,style:i}),u=s.containerStyle,l=s.canvasStyle,f=Object(c.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:l});return Object(c.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:u},[f,o])}}]),t}(l.a.Component);P.propTypes=j,P.defaultProps=S},,,function(e,t,r){"use strict";(function(e){var n=r(486),i=r(487),a=r(488);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,r,n):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(n=t.length)!==n?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return j(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function _(e,t,r,n){return V(U(t,e.length-r),e,r,n)}function w(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function O(e,t,r,n){return V(z(t),e,r,n)}function E(e,t,r,n){return V(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function j(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128===(192&a)&&128===(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"===typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(n,i),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=B(e[a]);return i}function T(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function R(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function L(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,a){return a||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,a){return a||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=u.isBuffer(e)?e:U(new u(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function z(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function V(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(62))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),o=n[0],s=n[1],u=new a(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),l=0,f=s>0?o-4:o;for(r=0;r<f;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(l(e,o,o+16383>s?s:o+16383));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=c}return(d?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+d]=255&o,d+=p,o/=256,c-=8);e[r+d-p]|=128*v}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(312),i=r(194),a=r(314),o=r(396),s=r(397),u=i.ucs2length,c=r(313),l=a.Validation;function f(e,t,r){var n=d.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function h(e,t,r){var n=d.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function d(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function p(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function v(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function m(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,d,b){var _=this,w=this._opts,x=[void 0],O={},E=[],k={},j=[],S={},P=[];r=r||{schema:t,refVal:x,refs:O};var A=f.call(this,t,r,b),T=this._compilations[A.index];if(A.compiling)return T.callValidate=function e(){var t=T.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var R=this._formats,C=this.RULES;try{var M=L(t,r,d,b);T.validate=M;var I=T.callValidate;return I&&(I.schema=M.schema,I.errors=null,I.refs=M.refs,I.refVal=M.refVal,I.root=M.root,I.$async=M.$async,w.sourceCode&&(I.source=M.source)),M}finally{h.call(this,t,r,b)}function L(t,o,f,h){var d=!o||o&&o.schema==t;if(o.schema!=r.schema)return e.call(_,t,o,f,h);var b,k=!0===t.$async,S=s({isTop:!0,schema:t,isRoot:d,baseId:h,root:o,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:a.MissingRef,RULES:C,validate:s,util:i,resolve:n,resolveRef:F,usePattern:B,useDefault:U,useCustomRule:z,opts:w,formats:R,logger:_.logger,self:_});S=y(x,g)+y(E,p)+y(j,v)+y(P,m)+S,w.processCode&&(S=w.processCode(S));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",S)(_,C,R,r,x,j,P,c,u,l),x[0]=b}catch(A){throw _.logger.error("Error compiling schema, function code:",S),A}return b.schema=t,b.errors=null,b.refs=O,b.refVal=x,b.root=d?b:o,k&&(b.$async=!0),!0===w.sourceCode&&(b.source={code:S,patterns:E,defaults:j}),b}function F(t,i,a){i=n.url(t,i);var o,s,u=O[i];if(void 0!==u)return D(o=x[u],s="refVal["+u+"]");if(!a&&r.refs){var c=r.refs[i];if(void 0!==c)return D(o=r.refVal[c],s=N(i,o))}s=N(i);var l=n.call(_,L,r,i);if(void 0===l){var f=d&&d[i];f&&(l=n.inlineRef(f,w.inlineRefs)?f:e.call(_,f,r,d,t))}if(void 0!==l)return function(e,t){var r=O[e];x[r]=t}(i,l),D(l,s);!function(e){delete O[e]}(i)}function N(e,t){var r=x.length;return x[r]=t,O[e]=r,"refVal"+r}function D(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function B(e){var t=k[e];return void 0===t&&(t=k[e]=E.length,E[t]=e),"pattern"+t}function U(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=o(e),r=S[t];return void 0===r&&(r=S[t]=j.length,j[r]=e),"default"+r}}function z(e,t,r,n){if(!1!==_._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var a=e.definition.validateSchema;if(a)if(!a(t)){var o="keyword schema is invalid: "+_.errorsText(a.errors);if("log"!=_._opts.validateSchema)throw new Error(o);_.logger.error(o)}}var s,u=e.definition.compile,c=e.definition.inline,l=e.definition.macro;if(u)s=u.call(_,t,r,n);else if(l)s=l.call(_,t,r,n),!1!==w.validateSchema&&_.validateSchema(s,!0);else if(c)s=c.call(_,n,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=P.length;return P[f]=s,{code:"customRule"+f,validate:s}}}},function(e,t,r){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function a(e){var n=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=t("[\\:\\/\\?\\#\\[\\]\\@]",a),s=e?"[\\uE000-\\uF8FF]":"[]",u=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),l=r(r(i+"|"+t(u,a,"[\\:]"))+"*"),f=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),h=r(f+"\\."+f+"\\."+f+"\\."+f),d=r(n+"{1,4}"),p=r(r(d+"\\:"+d)+"|"+h),v=r(r(d+"\\:")+"{6}"+p),g=r("\\:\\:"+r(d+"\\:")+"{5}"+p),m=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+p),y=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+p),b=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+p),_=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),w=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),x=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),O=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),E=r([v,g,m,y,b,_,w,x,O].join("|")),k=r(r(u+"|"+i)+"+"),j=(r(E+"\\%25"+k),r(E+r("\\%25|\\%(?!"+n+"{2})")+k)),S=r("[vV]"+n+"+\\."+t(u,a,"[\\:]")+"+"),P=r("\\["+r(j+"|"+E+"|"+S)+"\\]"),A=r(r(i+"|"+t(u,a))+"*"),T=r(P+"|"+h+"(?!"+A+")|"+A),R=r("[0-9]*"),C=r(r(l+"@")+"?"+T+r("\\:"+R)+"?"),M=r(i+"|"+t(u,a,"[\\:\\@]")),I=r(M+"*"),L=r(M+"+"),F=r(r(i+"|"+t(u,a,"[\\@]"))+"+"),N=r(r("\\/"+I)+"*"),D=r("\\/"+r(L+N)+"?"),B=r(F+N),U=r(L+N),z="(?!"+M+")",V=(r(N+"|"+D+"|"+B+"|"+U+"|"+z),r(r(M+"|"+t("[\\/\\?]",s))+"*")),G=r(r(M+"|[\\/\\?]")+"*"),H=r(r("\\/\\/"+C+N)+"|"+D+"|"+U+"|"+z),W=r(c+"\\:"+H+r("\\?"+V)+"?"+r("\\#"+G)+"?"),X=r(r("\\/\\/"+C+N)+"|"+D+"|"+B+"|"+z),Z=r(X+r("\\?"+V)+"?"+r("\\#"+G)+"?");return r(W+"|"+Z),r(c+"\\:"+H+r("\\?"+V)+"?"),r(r("\\/\\/("+r("("+l+")@")+"?("+T+")"+r("\\:("+R+")")+"?)")+"?("+N+"|"+D+"|"+U+"|"+z+")"),r("\\?("+V+")"),r("\\#("+G+")"),r(r("\\/\\/("+r("("+l+")@")+"?("+T+")"+r("\\:("+R+")")+"?)")+"?("+N+"|"+D+"|"+B+"|"+z+")"),r("\\?("+V+")"),r("\\#("+G+")"),r(r("\\/\\/("+r("("+l+")@")+"?("+T+")"+r("\\:("+R+")")+"?)")+"?("+N+"|"+D+"|"+U+"|"+z+")"),r("\\?("+V+")"),r("\\#("+G+")"),r("("+l+")@"),r("\\:("+R+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,o),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+k+")")+"?\\]?$")}}var o=a(!1),s=a(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=/^xn--/,f=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function g(e){throw new RangeError(d[e])}function m(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(h,".")).split("."),t).join(".");return n+i}function y(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),r--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=36)e=p(e/35);return p(n+36*e/(e+38))},w=function(e){var t,r=[],n=e.length,i=0,a=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)e.charCodeAt(u)>=128&&g("not-basic"),r.push(e.charCodeAt(u));for(var l=s>0?s+1:0;l<n;){for(var f=i,h=1,d=36;;d+=36){l>=n&&g("invalid-input");var v=(t=e.charCodeAt(l++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(v>=36||v>p((c-i)/h))&&g("overflow"),i+=v*h;var m=d<=o?1:d>=o+26?26:d-o;if(v<m)break;var y=36-m;h>p(c/y)&&g("overflow"),h*=y}var b=r.length+1;o=_(i-f,b,0==f),p(i/b)>c-a&&g("overflow"),a+=p(i/b),i%=b,r.splice(i++,0,a)}return String.fromCodePoint.apply(String,r)},x=function(e){var t=[],r=(e=y(e)).length,n=128,i=0,a=72,o=!0,s=!1,u=void 0;try{for(var l,f=e[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var h=l.value;h<128&&t.push(v(h))}}catch(U){s=!0,u=U}finally{try{!o&&f.return&&f.return()}finally{if(s)throw u}}var d=t.length,m=d;for(d&&t.push("-");m<r;){var w=c,x=!0,O=!1,E=void 0;try{for(var k,j=e[Symbol.iterator]();!(x=(k=j.next()).done);x=!0){var S=k.value;S>=n&&S<w&&(w=S)}}catch(U){O=!0,E=U}finally{try{!x&&j.return&&j.return()}finally{if(O)throw E}}var P=m+1;w-n>p((c-i)/P)&&g("overflow"),i+=(w-n)*P,n=w;var A=!0,T=!1,R=void 0;try{for(var C,M=e[Symbol.iterator]();!(A=(C=M.next()).done);A=!0){var I=C.value;if(I<n&&++i>c&&g("overflow"),I==n){for(var L=i,F=36;;F+=36){var N=F<=a?1:F>=a+26?26:F-a;if(L<N)break;var D=L-N,B=36-N;t.push(v(b(N+D%B,0))),L=p(D/B)}t.push(v(b(L,0))),a=_(i,P,m==d),i=0,++m}}}catch(U){T=!0,R=U}finally{try{!A&&M.return&&M.return()}finally{if(T)throw R}}++i,++n}return t.join("")},O=function(e){return m(e,(function(e){return f.test(e)?"xn--"+x(e):e}))},E=function(e){return m(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))},k={};function j(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function S(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var a=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&a)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var o=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function P(e,t){function r(e){var r=S(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,j).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,j).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,j).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,j).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,j).replace(t.PCT_ENCODED,i)),e}function A(e){return e.replace(/^0*(.*)/,"$1")||"0"}function T(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(A).join("."):e}function R(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),i=n[1],a=n[2];if(i){for(var o=i.toLowerCase().split("::").reverse(),s=u(o,2),c=s[0],l=s[1],f=l?l.split(":").map(A):[],h=c.split(":").map(A),d=t.IPV4ADDRESS.test(h[h.length-1]),p=d?7:8,v=h.length-p,g=Array(p),m=0;m<p;++m)g[m]=f[m]||h[v+m]||"";d&&(g[p-1]=T(g[p-1],t));var y=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(y&&y.length>1){var _=g.slice(0,y.index),w=g.slice(y.index+y.length);b=_.join(":")+"::"+w.join(":")}else b=g.join(":");return a&&(b+="%"+a),b}return e}var C=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,M=void 0==="".match(/(){0}/)[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?s:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(C);if(i){M?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=R(T(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var a=k[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||a&&a.unicodeSupport)P(r,n);else{if(r.host&&(t.domainHost||a&&a.domainHost))try{r.host=O(r.host.replace(n.PCT_ENCODED,S).toLowerCase())}catch(u){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+u}P(r,o)}a&&a.parse&&a.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function L(e,t){var r=!1!==t.iri?s:o,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(R(T(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"===typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}var F=/^\.\.?\//,N=/^\/\.(\/|$)/,D=/^\/\.\.(\/|$)/,B=/^\/?(?:.|\n)*?(?=\/|$)/;function U(e){for(var t=[];e.length;)if(e.match(F))e=e.replace(F,"");else if(e.match(N))e=e.replace(N,"/");else if(e.match(D))e=e.replace(D,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(B);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:o,n=[],i=k[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?E(e.host):O(e.host.replace(r.PCT_ENCODED,S).toLowerCase())}catch(c){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+c}P(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var a=L(e,t);if(void 0!==a&&("suffix"!==t.reference&&n.push("//"),n.push(a),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=U(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i={};return n||(e=I(z(e,r),r),t=I(z(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=U(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=U(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function G(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:o.PCT_ENCODED,S)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},W={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},X={},Z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Y="[0-9A-Fa-f]",q=r(r("%[EFef]"+Y+"%"+Y+Y+"%"+Y+Y)+"|"+r("%[89A-Fa-f]"+Y+"%"+Y+Y)+"|"+r("%"+Y+Y)),K=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),$=new RegExp(Z,"g"),Q=new RegExp(q,"g"),J=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',K),"g"),ee=new RegExp(t("[^]",Z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function re(e){var t=S(e);return t.match($)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,a={},o=r.query.split("&"),s=0,u=o.length;s<u;++s){var c=o[s].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),f=0,h=l.length;f<h;++f)n.push(l[f]);break;case"subject":r.subject=G(c[1],t);break;case"body":r.body=G(c[1],t);break;default:i=!0,a[G(c[0],t)]=G(c[1],t)}}i&&(r.headers=a)}r.query=void 0;for(var d=0,p=n.length;d<p;++d){var v=n[d].split("@");if(v[0]=G(v[0]),t.unicodeSupport)v[1]=G(v[1],t).toLowerCase();else try{v[1]=O(G(v[1],t).toLowerCase())}catch(g){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}n[d]=v.join("@")}return r},serialize:function(e,t){var r,n=e,a=void 0!==(r=e.to)&&null!==r?r instanceof Array?r:"number"!==typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(a){for(var o=0,s=a.length;o<s;++o){var u=String(a[o]),c=u.lastIndexOf("@"),l=u.slice(0,c).replace(Q,re).replace(Q,i).replace(J,j),f=u.slice(c+1);try{f=t.iri?E(f):O(G(f,t).toLowerCase())}catch(v){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+v}a[o]=l+"@"+f}n.path=a.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var d=[];for(var p in h)h[p]!==X[p]&&d.push(p.replace(Q,re).replace(Q,i).replace(ee,j)+"="+h[p].replace(Q,re).replace(Q,i).replace(te,j));return d.length&&(n.query=d.join("&")),n}},ie=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ie),n=e;if(r){var i=t.scheme||n.scheme||"urn",a=r[1].toLowerCase(),o=r[2],s=i+":"+(t.nid||a),u=k[s];n.nid=a,n.nss=o,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),a=k[i];a&&(e=a.serialize(e,t));var o=e,s=e.nss;return o.path=(n||t.nid)+":"+s,o}},oe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(oe)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};k[H.scheme]=H,k[W.scheme]=W,k[ne.scheme]=ne,k[ae.scheme]=ae,k[se.scheme]=se,e.SCHEMES=k,e.pctEncChar=j,e.pctDecChars=S,e.parse=I,e.removeDotSegments=U,e.serialize=z,e.resolveComponents=V,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return z(V(I(e,n),I(t,n),n,!0),n)},e.normalize=function(e,t){return"string"===typeof e?e=z(I(e,t),t):"object"===n(e)&&(e=I(z(e,t),t)),e},e.equal=function(e,t,r){return"string"===typeof e?e=z(I(e,r),r):"object"===n(e)&&(e=z(e,r)),"string"===typeof t?t=z(I(t,r),r):"object"===n(t)&&(t=z(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:o.ESCAPE,j)},e.unescapeComponent=G,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,i,a,o,s,u,c,l,f){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var h in r(a,o,s,u,c,l,f),a){var d=a[h];if(Array.isArray(d)){if(h in n.arrayKeywords)for(var p=0;p<d.length;p++)e(t,r,i,d[p],o+"/"+h+"/"+p,s,o,h,a,p)}else if(h in n.propsKeywords){if(d&&"object"==typeof d)for(var v in d)e(t,r,i,d[v],o+"/"+h+"/"+v.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,h,a,v)}else(h in n.keywords||t.allKeys&&!(h in n.skipKeywords))&&e(t,r,i,d,o+"/"+h,s,o,h,a)}i(a,o,s,u,c,l,f)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(194),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,f=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function v(e){return e="full"==e?"full":"fast",n.copy(v[e])}function g(e){var t=e.match(i);if(!t)return!1;var r=+t[1],n=+t[2],o=+t[3];return n>=1&&n<=12&&o>=1&&o<=(2==n&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(r)?29:a[n])}function m(e,t){var r=e.match(o);if(!r)return!1;var n=r[1],i=r[2],a=r[3],s=r[5];return(n<=23&&i<=59&&a<=59||23==n&&59==i&&60==a)&&(!t||s)}e.exports=v,v.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:f,"json-pointer":h,"json-pointer-uri-fragment":d,"relative-json-pointer":p},v.full={date:g,time:m,"date-time":function(e){var t=e.split(y);return 2==t.length&&g(t[0])&&m(t[1],!0)},uri:function(e){return b.test(e)&&u.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:f,"json-pointer":h,"json-pointer-uri-fragment":d,"relative-json-pointer":p};var y=/t|\s/i;var b=/\/|:/;var _=/[^\\]\\Z/;function w(e){if(_.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}}},function(e,t,r){"use strict";var n=r(553),i=r(194).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var i;if("object"==typeof r){var a=Object.keys(r)[0];i=r[a],r=a,i.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:i}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(554),allOf:r(555),anyOf:r(556),$comment:r(557),const:r(558),contains:r(559),dependencies:r(560),enum:r(561),format:r(562),if:r(563),items:r(564),maximum:r(398),minimum:r(398),maxItems:r(399),minItems:r(399),maxLength:r(400),minLength:r(400),maxProperties:r(401),minProperties:r(401),multipleOf:r(565),not:r(566),oneOf:r(567),pattern:r(568),properties:r(569),propertyNames:r(570),required:r(571),uniqueItems:r(572),validate:r(397)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,a=" ",o=e.level,s=e.dataLevel,u=e.schema[t],c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(s||""),h="valid"+o;if("#"==u||"#/"==u)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===d){var p=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){e.logger.error(p),(y=y||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(a+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(a+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";var v=a;a=y.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,p);e.logger.warn(p),l&&(a+=" if (true) { ")}}else if(d.inline){var g=e.util.copy(e);g.level++;var m="valid"+g.level;g.schema=d.schema,g.schemaPath="",g.errSchemaPath=u,a+=" "+e.validate(g).replace(/validate\.schema/g,d.code)+" ",l&&(a+=" if ("+m+") { ")}else n=!0===d.$async||e.async&&!1!==d.$async,i=d.code}if(i){var y;(y=y||[]).push(a),a="",e.opts.passContext?a+=" "+i+".call(this, ":a+=" "+i+"( ",a+=" "+f+", (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var b=a+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(a=y.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(a+=" var "+h+"; "),a+=" try { await "+b+"; ",l&&(a+=" "+h+" = true; "),a+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(a+=" "+h+" = false; "),a+=" } ",l&&(a+=" if ("+h+") { ")}else a+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(a+=" else { ")}return a}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var l="valid"+u.level,f=u.baseId,h=!0,d=i;if(d)for(var p,v=-1,g=d.length-1;v<g;)p=d[v+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all))&&(h=!1,u.schema=p,u.schemaPath=a+"["+v+"]",u.errSchemaPath=o+"/"+v,n+="  "+e.validate(u)+" ",u.baseId=f,s&&(n+=" if ("+l+") { ",c+="}"));return s&&(n+=h?" if (true) { ":" "+c.slice(0,-1)+" "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level;if(o.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var g=d.baseId;n+=" var "+h+" = errors; var "+f+" = false;  ";var m=e.compositeRule;e.compositeRule=d.compositeRule=!0;var y=o;if(y)for(var b,_=-1,w=y.length-1;_<w;)b=y[_+=1],d.schema=b,d.schemaPath=s+"["+_+"]",d.errSchemaPath=u+"/"+_,n+="  "+e.validate(d)+" ",d.baseId=g,n+=" "+f+" = "+f+" || "+v+"; if (!"+f+") { ",p+="}";e.compositeRule=d.compositeRule=m,n+=" "+p+" if (!"+f+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],a=e.errSchemaPath+"/"+t,o=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?n+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+o+", "+e.util.toQuotedString(a)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; "),h||(n+=" var schema"+i+" = validate.schema"+s+";"),n+="var "+f+" = equal("+l+", schema"+i+"); if (!"+f+") {   ";var d=d||[];d.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,v="i"+i,g=d.dataLevel=e.dataLevel+1,m="data"+g,y=e.baseId,b=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all);if(n+="var "+h+" = errors;var "+f+";",b){var _=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=o,d.schemaPath=s,d.errSchemaPath=u,n+=" var "+p+" = false; for (var "+v+" = 0; "+v+" < "+l+".length; "+v+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var w=l+"["+v+"]";d.dataPathArr[g]=v;var x=e.validate(d);d.baseId=y,e.util.varOccurences(x,m)<2?n+=" "+e.util.varReplace(x,m,w)+" ":n+=" var "+m+" = "+w+"; "+x+" ",n+=" if ("+p+") break; }  ",e.compositeRule=d.compositeRule=_,n+="  if (!"+p+") {"}else n+=" if ("+l+".length == 0) {";var O=O||[];O.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var E=n;return n=O.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="errs__"+i,h=e.util.copy(e),d="";h.level++;var p="valid"+h.level,v={},g={},m=e.opts.ownProperties;for(w in o){var y=o[w],b=Array.isArray(y)?g:v;b[w]=y}n+="var "+f+" = errors;";var _=e.errorPath;for(var w in n+="var missing"+i+";",g)if((b=g[w]).length){if(n+=" if ( "+l+e.util.getProperty(w)+" !== undefined ",m&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(w)+"') "),c){n+=" && ( ";var x=b;if(x)for(var O=-1,E=x.length-1;O<E;){T=x[O+=1],O&&(n+=" || "),n+=" ( ( "+(I=l+(M=e.util.getProperty(T)))+" === undefined ",m&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:M)+") ) "}n+=")) {  ";var k="missing"+i,j="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,k,!0):_+" + "+k);var S=S||[];S.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var P=n;n=S.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var A=b;if(A)for(var T,R=-1,C=A.length-1;R<C;){T=A[R+=1];var M=e.util.getProperty(T),I=(j=e.util.escapeQuotes(T),l+M);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,T,e.opts.jsonPointers)),n+=" if ( "+I+" === undefined ",m&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(d+="}",n+=" else { ")}e.errorPath=_;var L=h.baseId;for(var w in v){y=v[w];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(n+=" "+p+" = true; if ( "+l+e.util.getProperty(w)+" !== undefined ",m&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(w)+"') "),n+=") { ",h.schema=y,h.schemaPath=s+e.util.getProperty(w),h.errSchemaPath=u+"/"+e.util.escapeFragment(w),n+="  "+e.validate(h)+" ",h.baseId=L,n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}"))}return c&&(n+="   "+d+" if ("+f+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ");var d="i"+i,p="schema"+i;h||(n+=" var "+p+" = validate.schema"+s+";"),n+="var "+f+";",h&&(n+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),n+=f+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+l+", "+p+"["+d+"])) { "+f+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+f+") {   ";var v=v||[];v.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var g=n;return n=v.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var f,h=e.opts.$data&&o&&o.$data;h?(n+=" var schema"+i+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ",f="schema"+i):f=o;var d=e.opts.unknownFormats,p=Array.isArray(d);if(h){n+=" var "+(v="format"+i)+" = formats["+f+"]; var "+(g="isObject"+i)+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+(m="formatType"+i)+" = "+g+" && "+v+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+i+" = "+v+".async; "),n+=" "+v+" = "+v+".validate; } if (  ",h&&(n+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),n+=" (","ignore"!=d&&(n+=" ("+f+" && !"+v+" ",p&&(n+=" && self._opts.unknownFormats.indexOf("+f+") == -1 "),n+=") || "),n+=" ("+v+" && "+m+" == '"+r+"' && !(typeof "+v+" == 'function' ? ",e.async?n+=" (async"+i+" ? await "+v+"("+l+") : "+v+"("+l+")) ":n+=" "+v+"("+l+") ",n+=" : "+v+".test("+l+"))))) {"}else{var v;if(!(v=e.formats[o])){if("ignore"==d)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(p&&d.indexOf(o)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,m=(g="object"==typeof v&&!(v instanceof RegExp)&&v.validate)&&v.type||"string";if(g){var y=!0===v.async;v=v.validate}if(m!=r)return c&&(n+=" if (true) { "),n;if(y){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(o)+".validate")+"("+l+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(o);g&&(b+=".validate"),n+="function"==typeof v?" "+b+"("+l+") ":" "+b+".test("+l+") ",n+=") { "}}var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",n+=h?""+f:""+e.util.toQuotedString(o),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+f+" + '":""+e.util.escapeQuotes(o),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+s:""+e.util.toQuotedString(o),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var w=n;return n=_.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+w+"]); ":n+=" validate.errors = ["+w+"]; return false; ":n+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,v=e.schema.then,g=e.schema.else,m=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all)),b=d.baseId;if(m||y){var _;d.createErrors=!1,d.schema=o,d.schemaPath=s,d.errSchemaPath=u,n+=" var "+h+" = errors; var "+f+" = true;  ";var w=e.compositeRule;e.compositeRule=d.compositeRule=!0,n+="  "+e.validate(d)+" ",d.baseId=b,d.createErrors=!0,n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=w,m?(n+=" if ("+p+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(d)+" ",d.baseId=b,n+=" "+f+" = "+p+"; ",m&&y?n+=" var "+(_="ifClause"+i)+" = 'then'; ":_="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+p+") { ",y&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(d)+" ",d.baseId=b,n+=" "+f+" = "+p+"; ",m&&y?n+=" var "+(_="ifClause"+i)+" = 'else'; ":_="'else'",n+=" } "),n+=" if (!"+f+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level,g="i"+i,m=d.dataLevel=e.dataLevel+1,y="data"+m,b=e.baseId;if(n+="var "+h+" = errors;var "+f+";",Array.isArray(o)){var _=e.schema.additionalItems;if(!1===_){n+=" "+f+" = "+l+".length <= "+o.length+"; ";var w=u;u=e.errSchemaPath+"/additionalItems",n+="  if (!"+f+") {   ";var x=x||[];x.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var O=n;n=x.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+O+"]); ":n+=" validate.errors = ["+O+"]; return false; ":n+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=w,c&&(p+="}",n+=" else { ")}var E=o;if(E)for(var k,j=-1,S=E.length-1;j<S;)if(k=E[j+=1],e.opts.strictKeywords?"object"==typeof k&&Object.keys(k).length>0:e.util.schemaHasRules(k,e.RULES.all)){n+=" "+v+" = true; if ("+l+".length > "+j+") { ";var P=l+"["+j+"]";d.schema=k,d.schemaPath=s+"["+j+"]",d.errSchemaPath=u+"/"+j,d.errorPath=e.util.getPathExpr(e.errorPath,j,e.opts.jsonPointers,!0),d.dataPathArr[m]=j;var A=e.validate(d);d.baseId=b,e.util.varOccurences(A,y)<2?n+=" "+e.util.varReplace(A,y,P)+" ":n+=" var "+y+" = "+P+"; "+A+" ",n+=" }  ",c&&(n+=" if ("+v+") { ",p+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))){d.schema=_,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+v+" = true; if ("+l+".length > "+o.length+") {  for (var "+g+" = "+o.length+"; "+g+" < "+l+".length; "+g+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);P=l+"["+g+"]";d.dataPathArr[m]=g;A=e.validate(d);d.baseId=b,e.util.varOccurences(A,y)<2?n+=" "+e.util.varReplace(A,y,P)+" ":n+=" var "+y+" = "+P+"; "+A+" ",c&&(n+=" if (!"+v+") break; "),n+=" } }  ",c&&(n+=" if ("+v+") { ",p+="}")}}else if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all)){d.schema=o,d.schemaPath=s,d.errSchemaPath=u,n+="  for (var "+g+" = 0; "+g+" < "+l+".length; "+g+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);P=l+"["+g+"]";d.dataPathArr[m]=g;A=e.validate(d);d.baseId=b,e.util.varOccurences(A,y)<2?n+=" "+e.util.varReplace(A,y,P)+" ":n+=" var "+y+" = "+P+"; "+A+" ",c&&(n+=" if (!"+v+") break; "),n+=" }"}return c&&(n+=" "+p+" if ("+h+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,i+="var division"+a+";if (",h&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+a+" = "+f+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+a+" !== parseInt(division"+a+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="errs__"+i,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all)){h.schema=o,h.schemaPath=s,h.errSchemaPath=u,n+=" var "+f+" = errors;  ";var p,v=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(p=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,p&&(h.opts.allErrors=p),e.compositeRule=h.compositeRule=v,n+=" if ("+d+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var m=n;n=g.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level,g=d.baseId,m="prevValid"+i,y="passingSchemas"+i;n+="var "+h+" = errors , "+m+" = false , "+f+" = false , "+y+" = null; ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0;var _=o;if(_)for(var w,x=-1,O=_.length-1;x<O;)w=_[x+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(d.schema=w,d.schemaPath=s+"["+x+"]",d.errSchemaPath=u+"/"+x,n+="  "+e.validate(d)+" ",d.baseId=g):n+=" var "+v+" = true; ",x&&(n+=" if ("+v+" && "+m+") { "+f+" = false; "+y+" = ["+y+", "+x+"]; } else { ",p+="}"),n+=" if ("+v+") { "+f+" = "+m+" = true; "+y+" = "+x+"; }";return e.compositeRule=d.compositeRule=b,n+=p+"if (!"+f+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(s))+".test("+f+") ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=h?""+n:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+n+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="errs__"+i,h=e.util.copy(e),d="";h.level++;var p="valid"+h.level,v="key"+i,g="idx"+i,m=h.dataLevel=e.dataLevel+1,y="data"+m,b="dataProperties"+i,_=Object.keys(o||{}),w=e.schema.patternProperties||{},x=Object.keys(w),O=e.schema.additionalProperties,E=_.length||x.length,k=!1===O,j="object"==typeof O&&Object.keys(O).length,S=e.opts.removeAdditional,P=k||j||S,A=e.opts.ownProperties,T=e.baseId,R=e.schema.required;if(R&&(!e.opts.$data||!R.$data)&&R.length<e.opts.loopRequired)var C=e.util.toHash(R);if(n+="var "+f+" = errors;var "+p+" = true;",A&&(n+=" var "+b+" = undefined;"),P){if(n+=A?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+v+" = "+b+"["+g+"]; ":" for (var "+v+" in "+l+") { ",E){if(n+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)n+=" || validate.schema"+s+".hasOwnProperty("+v+") ";else{var M=_;if(M)for(var I=-1,L=M.length-1;I<L;)Y=M[I+=1],n+=" || "+v+" == "+e.util.toQuotedString(Y)+" "}if(x.length){var F=x;if(F)for(var N=-1,D=F.length-1;N<D;)ie=F[N+=1],n+=" || "+e.usePattern(ie)+".test("+v+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==S)n+=" delete "+l+"["+v+"]; ";else{var B=e.errorPath,U="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),k)if(S)n+=" delete "+l+"["+v+"]; ";else{n+=" "+p+" = false; ";var z=u;u=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var V=n;n=te.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+V+"]); ":n+=" validate.errors = ["+V+"]; return false; ":n+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=z,c&&(n+=" break; ")}else if(j)if("failing"==S){n+=" var "+f+" = errors;  ";var G=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=O,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var H=l+"["+v+"]";h.dataPathArr[m]=v;var W=e.validate(h);h.baseId=T,e.util.varOccurences(W,y)<2?n+=" "+e.util.varReplace(W,y,H)+" ":n+=" var "+y+" = "+H+"; "+W+" ",n+=" if (!"+p+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+v+"]; }  ",e.compositeRule=h.compositeRule=G}else{h.schema=O,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);H=l+"["+v+"]";h.dataPathArr[m]=v;W=e.validate(h);h.baseId=T,e.util.varOccurences(W,y)<2?n+=" "+e.util.varReplace(W,y,H)+" ":n+=" var "+y+" = "+H+"; "+W+" ",c&&(n+=" if (!"+p+") break; ")}e.errorPath=B}E&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}")}var X=e.opts.useDefaults&&!e.compositeRule;if(_.length){var Z=_;if(Z)for(var Y,q=-1,K=Z.length-1;q<K;){var $=o[Y=Z[q+=1]];if(e.opts.strictKeywords?"object"==typeof $&&Object.keys($).length>0:e.util.schemaHasRules($,e.RULES.all)){var Q=e.util.getProperty(Y),J=(H=l+Q,X&&void 0!==$.default);h.schema=$,h.schemaPath=s+Q,h.errSchemaPath=u+"/"+e.util.escapeFragment(Y),h.errorPath=e.util.getPath(e.errorPath,Y,e.opts.jsonPointers),h.dataPathArr[m]=e.util.toQuotedString(Y);W=e.validate(h);if(h.baseId=T,e.util.varOccurences(W,y)<2){W=e.util.varReplace(W,y,H);var ee=H}else{ee=y;n+=" var "+y+" = "+H+"; "}if(J)n+=" "+W+" ";else{if(C&&C[Y]){n+=" if ( "+ee+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(Y)+"') "),n+=") { "+p+" = false; ";B=e.errorPath,z=u;var te,re=e.util.escapeQuotes(Y);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,Y,e.opts.jsonPointers)),u=e.errSchemaPath+"/required",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+re+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";V=n;n=te.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+V+"]); ":n+=" validate.errors = ["+V+"]; return false; ":n+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=z,e.errorPath=B,n+=" } else { "}else c?(n+=" if ( "+ee+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(Y)+"') "),n+=") { "+p+" = true; } else { "):(n+=" if ("+ee+" !== undefined ",A&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(Y)+"') "),n+=" ) { ");n+=" "+W+" } "}}c&&(n+=" if ("+p+") { ",d+="}")}}if(x.length){var ne=x;if(ne)for(var ie,ae=-1,oe=ne.length-1;ae<oe;){$=w[ie=ne[ae+=1]];if(e.opts.strictKeywords?"object"==typeof $&&Object.keys($).length>0:e.util.schemaHasRules($,e.RULES.all)){h.schema=$,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=A?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+v+" = "+b+"["+g+"]; ":" for (var "+v+" in "+l+") { ",n+=" if ("+e.usePattern(ie)+".test("+v+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);H=l+"["+v+"]";h.dataPathArr[m]=v;W=e.validate(h);h.baseId=T,e.util.varOccurences(W,y)<2?n+=" "+e.util.varReplace(W,y,H)+" ":n+=" var "+y+" = "+H+"; "+W+" ",c&&(n+=" if (!"+p+") break; "),n+=" } ",c&&(n+=" else "+p+" = true; "),n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}")}}}return c&&(n+=" "+d+" if ("+f+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="errs__"+i,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(n+="var "+f+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all)){h.schema=o,h.schemaPath=s,h.errSchemaPath=u;var p="key"+i,v="idx"+i,g="i"+i,m="' + "+p+" + '",y="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+i,_=e.opts.ownProperties,w=e.baseId;_&&(n+=" var "+b+" = undefined; "),n+=_?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+p+" = "+b+"["+v+"]; ":" for (var "+p+" in "+l+") { ",n+=" var startErrs"+i+" = errors; ";var x=p,O=e.compositeRule;e.compositeRule=h.compositeRule=!0;var E=e.validate(h);h.baseId=w,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,x)+" ":n+=" var "+y+" = "+x+"; "+E+" ",e.compositeRule=h.compositeRule=O,n+=" if (!"+d+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+m+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+m+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+f+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ");var d="schema"+i;if(!h)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],v=o;if(v)for(var g,m=-1,y=v.length-1;m<y;){g=v[m+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=g)}}else p=o;if(h||p.length){var _=e.errorPath,w=h||p.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(c)if(n+=" var missing"+i+"; ",w){h||(n+=" var "+d+" = validate.schema"+s+"; ");var O="' + "+(A="schema"+i+"["+(j="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,A,e.opts.jsonPointers)),n+=" var "+f+" = true; ",h&&(n+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),n+=" for (var "+j+" = 0; "+j+" < "+d+".length; "+j+"++) { "+f+" = "+l+"["+d+"["+j+"]] !== undefined ",x&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+d+"["+j+"]) "),n+="; if (!"+f+") break; } ",h&&(n+="  }  "),n+="  if (!"+f+") {   ",(P=P||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+O+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var E=n;n=P.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var k=p;if(k)for(var j=-1,S=k.length-1;j<S;){R=k[j+=1],j&&(n+=" || "),n+=" ( ( "+(L=l+(I=e.util.getProperty(R)))+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(R)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:I)+") ) "}n+=") {  ";var P;O="' + "+(A="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,A,!0):_+" + "+A),(P=P||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+O+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";E=n;n=P.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(w){h||(n+=" var "+d+" = validate.schema"+s+"; ");var A;O="' + "+(A="schema"+i+"["+(j="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,A,e.opts.jsonPointers)),h&&(n+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+O+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),n+=" for (var "+j+" = 0; "+j+" < "+d+".length; "+j+"++) { if ("+l+"["+d+"["+j+"]] === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+d+"["+j+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+O+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var T=p;if(T)for(var R,C=-1,M=T.length-1;C<M;){R=T[C+=1];var I=e.util.getProperty(R),L=(O=e.util.escapeQuotes(R),l+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,R,e.opts.jsonPointers)),n+=" if ( "+L+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(R)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+O+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else c&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d=e.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,(s||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+f+".length , "+h+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,v=Array.isArray(p);if(!p||"object"==p||"array"==p||v&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+f+"[i], "+f+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+f+"[i]; ";var g="checkDataType"+(v?"s":"");i+=" if ("+e.util[g](p,"item",!0)+") continue; ",v&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",d&&(i+="  }  "),i+=" if (!"+h+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var y=i;i=m.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,a=t[r].split("/"),o=e;for(i=1;i<a.length;i++)o=o[a[i]];for(i=0;i<n.length;i++){var s=n[i],u=o[s];u&&(o[s]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var n=r(314).MissingRef;e.exports=function e(t,r,i){var a=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var o=s(t).then((function(){var e=a._addSchema(t,void 0,r);return e.validate||function e(t){try{return a._compile(t)}catch(o){if(o instanceof n)return i(o);throw o}function i(n){var i=n.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var o=a._loadingSchemas[i];return o||(o=a._loadingSchemas[i]=a._opts.loadSchema(i)).then(u,u),o.then((function(e){if(!c(i))return s(e).then((function(){c(i)||a.addSchema(e,i,void 0,r)}))})).then((function(){return e(t)}));function u(){delete a._loadingSchemas[i]}function c(e){return a._refs[e]||a._schemas[e]}}}(e)}));i&&o.then((function(e){i(null,e)}),i);return o;function s(t){var r=t.$schema;return r&&!a.getSchema(r)?e.call(a,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,i=r(576),a=r(577);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var o=0;o<a.length;o++)u(e,a[o],t);else u(e,a,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function u(e,t,n){for(var a,o=0;o<r.length;o++){var s=r[o];if(s.type==t){a=s;break}}a||(a={type:t,rules:[]},r.push(a));var u={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};a.rules.push(u),r.custom[e]=u}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(a,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,a=" ",o=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(s||""),d="valid"+o,p="errs__"+o,v=e.opts.$data&&u&&u.$data;v?(a+=" var schema"+o+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",i="schema"+o):i=u;var g,m,y,b,_,w="definition"+o,x=this.definition,O="";if(v&&x.$data){_="keywordValidate"+o;var E=x.validateSchema;a+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+_+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(this,u,e.schema,e)))return;i="validate.schema"+c,_=b.code,g=x.compile,m=x.inline,y=x.macro}var k=_+".errors",j="i"+o,S="ruleErr"+o,P=x.async;if(P&&!e.async)throw new Error("async keyword in sync schema");if(m||y||(a+=k+" = null;"),a+="var "+p+" = errors;var "+d+";",v&&x.$data&&(O+="}",a+=" if ("+i+" === undefined) { "+d+" = true; } else { ",E&&(O+="}",a+=" "+d+" = "+w+".validateSchema("+i+"); if ("+d+") { ")),m)x.statements?a+=" "+b.validate+" ":a+=" "+d+" = "+b.validate+"; ";else if(y){var A=e.util.copy(e);O="";A.level++;var T="valid"+A.level;A.schema=b.validate,A.schemaPath="";var R=e.compositeRule;e.compositeRule=A.compositeRule=!0;var C=e.validate(A).replace(/validate\.schema/g,_);e.compositeRule=A.compositeRule=R,a+=" "+C}else{(F=F||[]).push(a),a="",a+="  "+_+".call( ",e.opts.passContext?a+="this":a+="self",g||!1===x.schema?a+=" , "+h+" ":a+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",a+=" , (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var M=s?"data"+(s-1||""):"parentData",I=s?e.dataPathArr[s]:"parentDataProperty",L=a+=" , "+M+" , "+I+" , rootData )  ";a=F.pop(),!1===x.errors?(a+=" "+d+" = ",P&&(a+="await "),a+=L+"; "):a+=P?" var "+(k="customErrors"+o)+" = null; try { "+d+" = await "+L+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } ":" "+k+" = null; "+d+" = "+L+"; "}if(x.modifying&&(a+=" if ("+M+") "+h+" = "+M+"["+I+"];"),a+=""+O,x.valid)f&&(a+=" if (true) { ");else{var F;a+=" if ( ",void 0===x.valid?(a+=" !",a+=y?""+T:""+d):a+=" "+!x.valid+" ",a+=") { ",n=this.keyword,(F=F||[]).push(a),a="",(F=F||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var N=a;a=F.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+N+"]); ":a+=" validate.errors = ["+N+"]; return false; ":a+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var D=a;a=F.pop(),m?x.errors?"full"!=x.errors&&(a+="  for (var "+j+"="+p+"; "+j+"<errors; "+j+"++) { var "+S+" = vErrors["+j+"]; if ("+S+".dataPath === undefined) "+S+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+S+".schemaPath === undefined) { "+S+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(a+=" "+S+".schema = "+i+"; "+S+".data = "+h+"; "),a+=" } "):!1===x.errors?a+=" "+D+" ":(a+=" if ("+p+" == errors) { "+D+" } else {  for (var "+j+"="+p+"; "+j+"<errors; "+j+"++) { var "+S+" = vErrors["+j+"]; if ("+S+".dataPath === undefined) "+S+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+S+".schemaPath === undefined) { "+S+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(a+=" "+S+".schema = "+i+"; "+S+".data = "+h+"; "),a+=" } } "):y?(a+="   var err =   ",!1!==e.createErrors?(a+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; ")):!1===x.errors?a+=" "+D+" ":(a+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+j+"="+p+"; "+j+"<errors; "+j+"++) { var "+S+" = vErrors["+j+"]; if ("+S+".dataPath === undefined) "+S+".dataPath = (dataPath || '') + "+e.errorPath+";  "+S+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(a+=" "+S+".schema = "+i+"; "+S+".data = "+h+"; "),a+=" } } else { "+D+" } "),a+=" } ",f&&(a+=" else { ")}return a}},function(e,t,r){"use strict";var n=r(402);e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#cells","title":"Vitessce cell data","type":"object","definitions":{"coord":{"type":"array","minItems":2,"maxItems":2,"items":{"type":"number"}},"positiveIntegerValues":{"type":"object","patternProperties":{".":{"type":"integer","minimum":0}}},"stringValues":{"type":"object","patternProperties":{".":{"type":"string"}}}},"patternProperties":{".":{"additionalProperties":false,"required":[],"properties":{"mappings":{"type":"object","patternProperties":{".":{"$ref":"#/definitions/coord"}}},"xy":{"$ref":"#/definitions/coord"},"genes":{"$ref":"#/definitions/positiveIntegerValues"},"factors":{"$ref":"#/definitions/stringValues"},"poly":{"type":"array","items":{"$ref":"#/definitions/coord"}}}}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#clusters","title":"Vitessce cluster data","type":"object","definitions":{"stringArray":{"type":"array","items":{"type":"string"}},"matrix":{"type":"array","items":{"type":"array","items":{"type":"number","minimum":0,"maximum":1}}}},"additionalProperties":false,"required":["rows","cols","matrix"],"properties":{"rows":{"$ref":"#/definitions/stringArray"},"cols":{"$ref":"#/definitions/stringArray"},"matrix":{"$ref":"#/definitions/matrix"}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#factors","title":"Vitessce factor data","type":"object","definitions":{"positiveIntegerValues":{"type":"object","patternProperties":{".":{"type":"integer","minimum":0}}},"arrayOfStrings":{"type":"array","items":{"type":"string"}}},"patternProperties":{".":{"additionalProperties":false,"required":["map","cells"],"properties":{"map":{"$ref":"#/definitions/arrayOfStrings"},"cells":{"$ref":"#/definitions/positiveIntegerValues"}}}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#genes","title":"Vitessce gene data","type":"object","definitions":{"positiveIntegerValues":{"type":"object","patternProperties":{".":{"type":"integer","minimum":0}}}},"patternProperties":{".":{"additionalProperties":false,"required":["max","cells"],"properties":{"max":{"type":"number"},"cells":{"$ref":"#/definitions/positiveIntegerValues"}}}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#molecules","title":"Vitessce molecule data","type":"object","definitions":{"coord":{"type":"array","maxItems":2,"minItems":2,"items":{"type":"number"}}},"patternProperties":{".":{"type":"array","items":{"$ref":"#/definitions/coord"}}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#neighborhoods","title":"Vitessce neighborhood data","type":"object","definitions":{"coord":{"type":"array","maxItems":2,"minItems":2,"items":{"type":"number"}}},"patternProperties":{".":{"additionalProperties":false,"required":["poly"],"properties":{"poly":{"type":"array","maxItems":3,"minItems":3,"items":{"$ref":"#/definitions/coord"}}}}}}')},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://github.com/hubmapconsortium/vitessce/#raster","title":"Vitessce image data","type":"object","definitions":{"raster":{"type":"object","additionalProperties":true,"required":["sample","tileSource"],"properties":{"sample":{"type":"number"},"tileSource":{"oneOf":[{"type":"object"},{"type":"string"}]}}}},"patternProperties":{".":{"$ref":"#/definitions/raster"}}}')},,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(12),i=r.n(n),a=r(59),o=r(26),s=r(24),u=r(30),c=r(33),l=r(29),f=r(32),h=r(155),d=r(278),p=r.n(d),v=r(20),g=r.n(v),m=r(1),y=r.n(m),b=r(290),_=r(27),w={CELLS:r(795),CLUSTERS:r(796),FACTORS:r(797),GENES:r(798),MOLECULES:r(799),NEIGHBORHOODS:r(800),RASTER:r(801)},x={CELLS:_.a,CLUSTERS:_.i,FACTORS:_.k,GENES:_.l,MOLECULES:_.m,NEIGHBORHOODS:_.n,RASTER:_.o};function O(e){g.a.publish(_.r,e)}function E(e){g.a.publish(_.q,"Loaded ".concat(e,"."))}function k(){return(k=Object(h.a)(i.a.mark((function e(t){var r,n,o,s,u,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.keys(t),n=Object.values(t).map((function(e){return e.tileSource})),o={channelNames:r,domains:Object.values(t).map((function(e){return e.range})),id:String(Date.now())},!n[0].includes("tif")){e.next=8;break}return e.next=6,Object(b.b)({channelNames:r,channelUrls:n});case 6:return s=e.sent,e.abrupt("return",Object(a.a)({},o,{loader:s}));case 8:if(!n[0].includes("zarr")){e.next=15;break}return u=n[0].slice(0,-1),c=Object.values(t)[0].minZoom,e.next=13,Object(b.c)({rootZarrUrl:u,minZoom:c,isRgb:!1,scale:1,dimensions:{channel:r,y:null,x:null}});case 13:return l=e.sent,e.abrupt("return",Object(a.a)({},o,{loader:l}));case 15:throw Error("No raster loader defined for image with tile source ".concat(n[0]));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r,n){var i=w[t];if(!i)throw Error("No schema for ".concat(t));var a=(new p.a).compile(i);if(!a(e)){var o=JSON.stringify(a.errors,null,2);O("Error while validating ".concat(r,". Details in console.")),console.warn('"'.concat(r,'" (').concat(t,") from ").concat(n,": validation failed"),o)}"RASTER"===t?function(e){return k.apply(this,arguments)}(e).then((function(e){g.a.publish(_.o,e),E(r)})):(g.a.publish(x[t],e),E(r))}var S=function(e){function t(e){var r;Object(s.a)(this,t);var n=(r=Object(c.a)(this,Object(l.a)(t).call(this,e))).props.layers,i={};return n.map((function(e){return e.name})).forEach((function(e){i[e]=!0})),r.state={pleaseWaits:i},r}return Object(f.a)(t,e),Object(u.a)(t,[{key:"clearPleaseWait",value:function(e,t){this.setState((function(e){e.pleaseWaits[t]=!1;var r=Object.entries(e.pleaseWaits).filter((function(e){return e[1]})).map((function(e){return e[0]}));return console.warn('cleared "'.concat(t,'"; waiting on ').concat(r.length,":"),r),e}))}},{key:"UNSAFE_componentWillMount",value:function(){this.clearPleaseWaitToken=g.a.subscribe(_.h,this.clearPleaseWait.bind(this))}},{key:"componentWillUnmount",value:function(){g.a.unsubscribe(this.clearPleaseWaitToken)}},{key:"componentDidMount",value:function(){this.props.layers.forEach((function(e){!function(e){var t=e.name,r=e.type,n=e.url,i=e.requestInit;fetch(n,void 0===i?{}:i).then((function(e){e.ok?e.json().then((function(e){j(e,r,t,n)}),(function(e){O("Error while parsing ".concat(t,". Details in console.")),console.warn('"'.concat(t,'" (').concat(r,") from ").concat(n,": parse failed"),e)})):(O("Error HTTP status from ".concat(t,". Details in console.")),console.warn('"'.concat(t,'" (').concat(r,") from ").concat(n,": HTTP failed"),e.headers))}),(function(e){O("Error while fetching ".concat(t,". Details in console.")),console.warn('"'.concat(t,'" (').concat(r,") from ").concat(n,": fetch failed"),e)}))}(e)}))}},{key:"render",value:function(){var e=this.state.pleaseWaits;return Object.entries(e).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1]})).map((function(e){var t=Object(o.a)(e,2),r=t[0];t[1];return r})).length?y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"modal"},y.a.createElement("div",{className:"modal-dialog"},y.a.createElement("div",{className:"modal-content"},y.a.createElement("div",{className:"modal-body"},y.a.createElement("p",null,"Please wait..."))))),y.a.createElement("div",{className:"modal-backdrop show"})):null}}]),t}(y.a.Component);r.d(t,"SourcePublisher",(function(){return S}))},,,,,,,,function(e,t,r){"use strict";t.a={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),i=r(6),a=r(5),o=r(38),s=r(3),u=r(7),c=r(9),l=r(66),f=r(57),h=r(83),d=r(138),p=function(e){function t(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,t),Object(h.a)(e),(r=Object(i.a)(this,Object(a.a)(t).call(this,e,s))).initialize(s),r.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(o.a)(r)),r}return Object(u.a)(t,e),Object(s.a)(t,null,[{key:"isSupported",value:function(e){return Object(c.g)(e)}}]),Object(s.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(d.a)(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var r in t)e.setBuffer(r,t[r])})),this}},{key:"setBuffer",value:function(e,t){var r=this,n=this._getVaryingIndex(e),i=this._getBufferParams(t),a=i.buffer,o=i.byteSize,s=i.byteOffset;return n<0?(this.unused[e]=a,c.h.warn((function(){return"".concat(r.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,a,s,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,r,n;return e instanceof f.a===!1?(n=e.buffer,r=e.byteSize,t=e.byteOffset):n=e,void 0===t&&void 0===r||(t=t||0,r=r||n.byteLength-t),{buffer:n,byteOffset:t,byteSize:r}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),r=t.buffer,n=t.byteSize,i=t.byteOffset;this._bindBuffer(e,r,i,n)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==n?this.gl.bindBufferRange(35982,e,i,r,n):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(l.a)},function(e,t,r){"use strict";(function(e,n){r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s}));var i=r(11),a=("undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof document&&document,"object"!==("undefined"===typeof n?"undefined":Object(i.a)(n))||"[object process]"!==String(n)||n.browser),o="undefined"!==typeof n&&n.version&&n.version.match(/v([0-9]*)/),s=o&&parseFloat(o[1])||0}).call(this,r(62),r(68))},,,,,,,function(e,t,r){"use strict";var n=r(8),i=r.n(n),a=r(17);function o(e,t){if(!e)throw new Error(t)}var s=r(179),u=s.a._parseImageNode,c="undefined"!==typeof Image,l="undefined"!==typeof ImageBitmap,f=Boolean(u);function h(e){switch(e){case"auto":return l||c||f;case"imagebitmap":return l;case"html":case"image":return c;case"ndarray":case"data":return!!s.b||f;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}var d=r(11);function p(e){var t=g(e);if(!t)throw new Error("Not an image");return t}function v(e){switch(p(e)){case"data":return e;case"image":case"imagebitmap":var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:return o(!1)}}function g(e){return"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&e instanceof Image?"image":e&&"object"===Object(d.a)(e)&&e.data&&e.width&&e.height?"data":null}var m=/^data:image\/svg\+xml/,y=/\.svg((\?|#).*)?$/;function b(e,t){return w(t)?(console.warn("SVG cannot be parsed to imagebitmap"),new Blob([new Uint8Array(e)],{type:"image/svg+xml"})):new Blob([new Uint8Array(e)])}function _(e,t){if(w(t)){var r=(new TextDecoder).decode(e);return"data:image/svg+xml;base64,".concat(btoa(r))}return b(e,t)}function w(e){return e&&(m.test(e)||y.test(e))}function x(e,t,r){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(i.a.mark((function e(t,r,n){var a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_(t,n),o=self.URL||self.webkitURL,s="string"!==typeof a&&o.createObjectURL(a),e.prev=3,e.next=6,E(s||a,r);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,s&&o.revokeObjectURL(s),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}function E(e,t){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new Image).src=t,!(r.image&&r.image.decode&&n.decode)){e.next=6;break}return e.next=5,n.decode();case 5:return e.abrupt("return",n);case 6:return e.next=8,new Promise((function(e,r){try{n.onload=function(){return e(n)},n.onerror=function(e){return r(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(i){r(i)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=!0;function S(e,t,r){return P.apply(this,arguments)}function P(){return(P=Object(a.a)(i.a.mark((function e(t,r,n){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b(t,n),!T(o=r&&r.imagebitmap)&&j||(o=null),!o){e.next=14;break}return e.prev=4,e.next=7,createImageBitmap(a,o);case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(4),console.warn(e.t0),j=!1;case 14:return e.next=16,createImageBitmap(a);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}var A={};function T(e){for(var t in e||A)return!0;return!1}var R=r(10),C=new Map([["image/png",{test:M,getSize:function(e){return{width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}}],["image/jpeg",{test:F,getSize:function(e){if(e.byteLength<2||65496!==e.getUint16(0,!1))return null;var t=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);var r=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:r}}(),r=t.tableMarkers,n=t.sofMarkers,i=2;for(;i<e.byteLength;){var a=e.getUint16(i,!1);if(n.has(a))return{height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!r.has(a))return null;i+=2,i+=e.getUint16(i,!1)}return null}}],["image/gif",{test:I,getSize:function(e){return{width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}}],["image/bmp",{test:L,getSize:function(e){return{width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}}]]);function M(e){return e.byteLength>=24&&2303741511===e.getUint32(0,!1)}function I(e){return e.byteLength>=10&&1195984440===e.getUint32(0,!1)}function L(e){return e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength}function F(e){return e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2,!1)}"Invalid MIME type. Supported MIME types are: ".concat(Array.from(C.keys()).join(", "));function N(e){var t=D(e),r=!0,n=!1,i=void 0;try{for(var a,o=C.entries()[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=Object(R.a)(a.value,2),u=s[0];if((0,s[1].test)(t))return u}}catch(c){n=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}function D(e){if((e=e.buffer||e)instanceof ArrayBuffer)return new DataView(e);if(ArrayBuffer.isView(e))return new DataView(e.buffer);throw new Error("toDataView")}function B(e,t){var r=N(e),n=s.a._parseImageNode;return o(n),n(e,r,t)}function U(){return(U=Object(a.a)(i.a.mark((function e(t,r,n){var a,s,u,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(r=r||{}).image||{},s=a.type||"auto",u=(n||{}).url,c=z(s),e.t0=c,e.next="imagebitmap"===e.t0?8:"image"===e.t0?12:"data"===e.t0?16:20;break;case 8:return e.next=10,S(t,r,u);case 10:return l=e.sent,e.abrupt("break",21);case 12:return e.next=14,x(t,r,u);case 14:return l=e.sent,e.abrupt("break",21);case 16:return e.next=18,B(t,r);case 18:return l=e.sent,e.abrupt("break",21);case 20:o(!1);case 21:return"data"===s&&(l=v(l)),e.abrupt("return",l);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){switch(e){case"auto":case"data":return function(){if(h("image"))return"image";if(h("imagebitmap"))return"imagebitmap";if(h("data"))return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return h(e),e}}var V={name:"Images",version:"2.1.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vndmicrosofticon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(e,t,r){return U.apply(this,arguments)},test:function(e){var t=new DataView(e);return F(t)||L(t)||I(t)||M(t)},options:{image:{format:"auto",decode:!0}}};t.a=V},function(e,t,r){"use strict";var n=r(2),i=r(3),a=r(10),o=r(209),s="void main() {gl_FragColor = vec4(0);}",u="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",c="#version 300 es\n".concat(u);function l(e,t){t=Array.isArray(t)?t:[t];var r=e.replace(/^\s+/,"").split(/\s+/),n=Object(a.a)(r,3),i=n[0],o=n[1],s=n[2];return t.includes(i)&&o&&s?{qualifier:i,type:o,name:s.split(";")[0]}:null}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,r=void 0===t?100:t,n=e.input,i=e.inputType,a=e.output;if(!n)return 300===r?c:r>300?"#version ".concat(r,"\n").concat(u):s;var o=d(n,i);return r>=300?"#version ".concat(r," ").concat(300===r?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function h(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(o.a)(!1),null}}function d(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Object(o.a)(!1),null}}var p=r(9),v=r(57),g=r(821),m=r(28),y=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e),this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}return Object(i.a)(e,[{key:"setupResources",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.bindings[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._setupTransformFeedback(o,e)}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.varyings;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],r=t.sourceBuffers,n=t.transformFeedback,i=Object.assign({},r,e.attributes);return{attributes:i,transformFeedback:n}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var t=this.bindings[this.currentIndex].feedbackBuffers,r=e?t[e]:null;return r?r instanceof v.a?r:r.buffer:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,r=this.getBuffer(t);return r?r.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(m.a)(Object(p.g)(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var t=e.sourceBuffers,r=void 0===t?{}:t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var a=this.feedbackMap[i];i in r&&(n[a]=i)}for(var o in Object.assign(n,e.feedbackBuffers),n){var s=n[o];if("string"===typeof s){var u=r[s],c=u.byteLength,l=u.usage,f=u.accessor;n[o]=this._createNewBuffer(o,{byteLength:c,usage:l,accessor:f})}}return n}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,r=void 0===t?null:t;Object.assign(this.feedbackMap,e.feedbackMap);var n=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}},{key:"_setupTransformFeedback",value:function(e,t){var r=t.model.program;e.transformFeedback=new g.a(this.gl,{program:r,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var t=this._swapBuffers(this.bindings[this.currentIndex]),r=t.sourceBuffers,n=t.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}},{key:"_updateBinding",value:function(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var t=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(var n in this.feedbackMap){var i=this.feedbackMap[n];t[n]=e.feedbackBuffers[i],r[i]=e.sourceBuffers[n],Object(m.a)(r[i]instanceof v.a)}return{sourceBuffers:t,feedbackBuffers:r}}},{key:"_createNewBuffer",value:function(e,t){var r=new v.a(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),e}(),b=r(0),_=r(249),w=r(137),x=r(89),O=r(349);function E(e){var t=100,r=e.match(/[^\s]+/g);if(r.length>=2&&"#version"===r[0]){var n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}var k,j=r(211),S={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function P(e){var t=e.vs,r=e.sourceTextureMap,n=e.targetTextureVarying,i=e.targetTexture,a=Object.keys(r).length,s=null,u={},c=t,f={};if(a>0||n){var h=c.split("\n"),d=h.slice();if(h.forEach((function(e,t,i){if(a>0){var c=function(e,t){var r={},n=function(e){return l(e,["attribute","in"])}(e);if(!n)return null;var i=n.type,a=n.name;if(a&&t[a]){var s="// ".concat(e," => Replaced by Transform with a sampler"),u=function(e){var t="".concat("transform_uSampler_").concat(e),r="".concat("transform_uSize_").concat(e),n="  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}(a),c=u.samplerName,f=u.sizeName,h=u.uniformDeclerations,d=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(o.a)(!1),null}}(i),p="  ".concat(i," ").concat(a," = transform_getInput(").concat(c,", ").concat(f,").").concat(d,";\n");return r[c]=a,{updatedLine:s,inject:{"vs:#decl":h,"vs:#main-start":p},samplerTextureMap:r}}return null}(e,r);if(c){var h=c.updatedLine,p=c.inject;d[t]=h,f=Object(j.b)([f,p]),Object.assign(u,c.samplerTextureMap),a--}}n&&!s&&(s=function(e,t){var r=l(e,["varying","out"]);if(!r)return null;return r.name===t?r.type:null}(e,n))})),n){Object(m.a)(i);var p="".concat("transform_uSize_").concat(n),v={"vs:#decl":"uniform vec2 ".concat(p,";\n"),"vs:#main-start":"     vec2 ".concat("transform_position"," = transform_getPos(").concat(p,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n")};f=Object(j.b)([f,v])}c=d.join("\n")}return{vs:c,targetTextureType:s,inject:f,samplerTextureMap:u}}function A(e){var t,r,n=e.sourceTextureMap,i=e.targetTextureVarying,a=e.targetTexture,o={};for(var s in i&&(t=a.width,r=a.height,o["".concat("transform_uSize_").concat(i)]=[t,r]),n){var u=n[s];t=u.width,r=u.height,o["".concat("transform_uSize_").concat(s)]=[t,r]}return o}var T=(k={},Object(b.a)(k,10241,9728),Object(b.a)(k,10240,9728),Object(b.a)(k,10242,33071),Object(b.a)(k,10243,33071),k),R=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e),this.gl=t,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}return Object(i.a)(e,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e);return Object.assign({},e,t)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],r=t.sourceBuffers,n=t.sourceTextures,i=t.framebuffer,a=t.targetTexture,o=Object.assign({},r,e.attributes),s=Object.assign({},e.uniforms),u=Object.assign({},e.parameters),c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var l in o.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var f=this.samplerTextureMap[l];s[l]=n[f]}this._setSourceTextureParameters();var h=A({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:a});Object.assign(s,h)}return this.hasTargetTexture&&(c=!1,u.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:s,discard:c,parameters:u}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packed,r=void 0!==t&&t,n=this.bindings[this.currentIndex].framebuffer,i=Object(_.c)(n);if(!r)return i;for(var a=i.constructor,o=h(this.targetTextureType),s=new a(i.length*o/4),u=0,c=0;c<i.length;c+=4)for(var l=0;l<o;l++)s[u++]=i[c+l];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTextureVarying,r=e._swapTexture;this._swapTexture=r,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var t=e.sourceTextures,r=e.textureOrReference;if(r instanceof w.a)return r;var n=t[r];return n?(this._targetRefTexName=r,this._createNewTexture(n)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,r=e._sourceTextures,n=void 0===r?{}:r,i=e._targetTexture,a=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:n,targetTexture:a}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!("number"!==typeof e||this.elementCount>=e)){var t=new Float32Array(e);t.forEach((function(e,t,r){r[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new v.a(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var t=this._swapTextures(this.bindings[this.currentIndex]),r=t.sourceTextures,n=t.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}},{key:"_updateBinding",value:function(e,t){var r=t.sourceBuffers,n=t.sourceTextures,i=t.targetTexture;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,n),Object.assign(e.sourceBuffers,r),i){e.targetTexture=i;var a=i.width,o=i.height,s=e.framebuffer;s?(s.update({attachments:Object(b.a)({},36064,i),resizeAttachments:!1}),s.resize({width:a,height:o})):e.framebuffer=new x.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:a,height:o,attachments:Object(b.a)({},36064,i)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,t=this.bindings[e].sourceTextures;for(var r in t)t[r].setParameters(T)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(e){var t,r=Object(O.a)(e,{parameters:(t={},Object(b.a)(t,10241,9728),Object(b.a)(t,10240,9728),Object(b.a)(t,10242,33071),Object(b.a)(t,10243,33071),t),pixelStore:Object(b.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],r=t.sourceTextures,n=t.targetTexture,i=P({vs:e.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),a=i.vs,o=i.uniforms,s=i.targetTextureType,u=i.inject,c=i.samplerTextureMap,l=Object(j.b)([e.inject||{},u]);this.targetTextureType=s,this.samplerTextureMap=c;var h=e._fs||f({version:E(a),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),d=this.hasSourceTextures||this.targetTextureVarying?[S].concat(e.modules||[]):e.modules;return{vs:a,fs:h,modules:d,uniforms:o,inject:l}}}]),e}(),C=r(138),M=r(201);r.d(t,"a",(function(){return I}));var I=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n.a)(this,e),this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}return Object(i.a)(e,null,[{key:"isSupported",value:function(e){return Object(p.g)(e)}}]),Object(i.a)(e,[{key:"delete",value:function(){var e=this.model,t=this.bufferTransform,r=this.textureTransform;e&&e.delete(),t&&t.delete(),r&&r.delete()}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRenderTarget,r=void 0===t||t,n=this._updateDrawOptions(e);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}},{key:"swap",value:function(){var e=!1,t=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;e=e||s.swap()}}catch(u){n=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}Object(m.a)(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,u=s.getData(e);if(u)return u}}catch(c){n=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var t=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;s.update(e)}}catch(u){n=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new M.a(t,Object.assign({},e,{fs:e.fs||f({version:E(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var t=Object.assign({},e),r=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,i=!1,a=void 0;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){t=o.value.updateModelProps(t)}}catch(u){i=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"_buildResourceTransforms",value:function(e,t){(function(e){if(!Object(C.a)(e.feedbackBuffers)||!Object(C.a)(e.feedbackMap)||e.varyings&&e.varyings.length>0)return!0;return!1})(t)&&(this.bufferTransform=new y(e,t)),function(e){if(!Object(C.a)(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)return!0;return!1}(t)&&(this.textureTransform=new R(e,t)),Object(m.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var t=Object.assign({},e),r=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,i=!1,a=void 0;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;t=Object.assign(t,u.getDrawOptions(t))}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return t}}]),e}()},function(e,t,r){"use strict";var n,i=r(2),a=r(3),o=r(6),s=r(38),u=r(5),c=r(19),l=r(7),f=r(66),h=r(75),d=r(89),p=r(0),v=r(9),g=r(134),m=r(28),y=(n={},Object(p.a)(n,5126,M.bind(null,"uniform1fv",E,1,I)),Object(p.a)(n,35664,M.bind(null,"uniform2fv",E,2,I)),Object(p.a)(n,35665,M.bind(null,"uniform3fv",E,3,I)),Object(p.a)(n,35666,M.bind(null,"uniform4fv",E,4,I)),Object(p.a)(n,5124,M.bind(null,"uniform1iv",k,1,I)),Object(p.a)(n,35667,M.bind(null,"uniform2iv",k,2,I)),Object(p.a)(n,35668,M.bind(null,"uniform3iv",k,3,I)),Object(p.a)(n,35669,M.bind(null,"uniform4iv",k,4,I)),Object(p.a)(n,35670,M.bind(null,"uniform1iv",k,1,I)),Object(p.a)(n,35671,M.bind(null,"uniform2iv",k,2,I)),Object(p.a)(n,35672,M.bind(null,"uniform3iv",k,3,I)),Object(p.a)(n,35673,M.bind(null,"uniform4iv",k,4,I)),Object(p.a)(n,35674,M.bind(null,"uniformMatrix2fv",E,4,L)),Object(p.a)(n,35675,M.bind(null,"uniformMatrix3fv",E,9,L)),Object(p.a)(n,35676,M.bind(null,"uniformMatrix4fv",E,16,L)),Object(p.a)(n,35678,C),Object(p.a)(n,35680,C),Object(p.a)(n,5125,M.bind(null,"uniform1uiv",j,1,I)),Object(p.a)(n,36294,M.bind(null,"uniform2uiv",j,2,I)),Object(p.a)(n,36295,M.bind(null,"uniform3uiv",j,3,I)),Object(p.a)(n,36296,M.bind(null,"uniform4uiv",j,4,I)),Object(p.a)(n,35685,M.bind(null,"uniformMatrix2x3fv",E,6,L)),Object(p.a)(n,35686,M.bind(null,"uniformMatrix2x4fv",E,8,L)),Object(p.a)(n,35687,M.bind(null,"uniformMatrix3x2fv",E,6,L)),Object(p.a)(n,35688,M.bind(null,"uniformMatrix3x4fv",E,12,L)),Object(p.a)(n,35689,M.bind(null,"uniformMatrix4x2fv",E,8,L)),Object(p.a)(n,35690,M.bind(null,"uniformMatrix4x3fv",E,12,L)),Object(p.a)(n,35679,C),Object(p.a)(n,35682,C),Object(p.a)(n,36289,C),Object(p.a)(n,36292,C),Object(p.a)(n,36293,C),Object(p.a)(n,36298,C),Object(p.a)(n,36299,C),Object(p.a)(n,36300,C),Object(p.a)(n,36303,C),Object(p.a)(n,36306,C),Object(p.a)(n,36307,C),Object(p.a)(n,36308,C),Object(p.a)(n,36311,C),n),b={},_={},w={},x=[0];function O(e,t,r,n){1===t&&"boolean"===typeof e&&(e=e?1:0),Number.isFinite(e)&&(x[0]=e,e=x);var i=e.length;if(i%t&&v.h.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;var a=n[i];a||(a=new r(i),n[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function E(e,t){return O(e,t,Float32Array,b)}function k(e,t){return O(e,t,Int32Array,_)}function j(e,t){return O(e,t,Uint32Array,w)}function S(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function P(e,t,r){var n=y[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function A(e,t,r){for(var n in e){var i=e[n];if((!r||Boolean(r[n]))&&!T(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function T(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof h.a||(e instanceof g.a||e instanceof d.a&&Boolean(e.texture))))}function R(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t])for(var n=e[t],i=0,a=r.length;i<a;++i)n[i]=r[i];else e[t]=r.slice();else e[t]=r}function C(){var e=null;return function(t,r,n){var i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function M(e,t,r,n){var i=null,a=null;return function(o,s,u){var c=t(u,r),l=c.length,f=!1;if(null===i)i=new Float32Array(l),a=l,f=!0;else{Object(m.a)(a===l,"Uniform length cannot change.");for(var h=0;h<l;++h)if(c[h]!==i[h]){f=!0;break}}return f&&(n(o,e,s,c),i.set(c)),f}}function I(e,t,r,n){e[t](r,n)}function L(e,t,r,n){e[t](r,!1,n)}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}function N(e,t,r,n){for(var i=e.split(/\r?\n/),a={},o={},s=n||F(t)||"(unnamed)",u="".concat(function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(r)," shader ").concat(s),c=0;c<i.length;c++){var l=i[c];if(!(l.length<=1)){var f=l.split(":"),h=f[0],d=parseInt(f[2],10);if(isNaN(d))throw new Error("GLSL compilation error in ".concat(u,": ").concat(e));"WARNING"!==h?a[d]=l:o[d]=l}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((function(e,n){var a=n+t,o=String(a).length;return B(a,i-o)+r+e}))}(t);return{shaderName:u,errors:D(a,p),warnings:D(o,p)}}function D(e,t){for(var r="",n=0;n<t.length;n++){var i=t[n];if((e[n+3]||e[n+2]||e[n+1])&&(r+="".concat(i,"\n"),e[n+1])){var a=e[n+1],o=a.split(":",3),s=o[0],u=parseInt(o[1],10)||0,c=a.substring(o.join(":").length+1).trim();r+=B("^^^ ".concat(s,": ").concat(c,"\n\n"),u)}}return r}function B(e,t){for(var r="",n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}var U=r(83),z=r(138),V=function(e){function t(e,r){var n;Object(i.a)(this,t),Object(U.b)(e),Object(m.a)("string"===typeof r.source,"Shader: GLSL source code must be a JavaScript string");var a=F(r.source,null)||r.id||Object(z.c)("unnamed ".concat(t.getTypeName(r.shaderType)));return(n=Object(o.a)(this,Object(u.a)(t).call(this,e,{id:a}))).shaderType=r.shaderType,n.source=r.source,n.initialize(r),n}return Object(l.a)(t,e),Object(a.a)(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(m.a)(!1),"unknown"}}}]),Object(a.a)(t,[{key:"initialize",value:function(e){var t=e.source,r=F(t,null);r&&(this.id=Object(z.c)(r)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return F(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var r=this.gl.getShaderInfoLog(this.handle),n=N(r,this.source,this.shaderType,this.id),i=n.shaderName,a=n.errors,o=n.warnings;throw v.h.error("GLSL compilation errors in ".concat(i,"\n").concat(a))(),v.h.warn("GLSL compilation warnings in ".concat(i,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(f.a),G=function(e){function t(e,r){return Object(i.a)(this,t),"string"===typeof r&&(r={source:r}),Object(o.a)(this,Object(u.a)(t).call(this,e,Object.assign({},r,{shaderType:35633})))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(V),H=function(e){function t(e,r){return Object(i.a)(this,t),"string"===typeof r&&(r={source:r}),Object(o.a)(this,Object(u.a)(t).call(this,e,Object.assign({},r,{shaderType:35632})))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(V),W=r(79),X=r(104),Z=function(){function e(t){Object(i.a)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(a.a)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,r=t.getProgramParameter(e.handle,35721),n=0;n<r;n++){var i=t.getActiveAttrib(e.handle,n),a=i.name,o=i.type,s=i.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Object(v.g)(t)){for(var r=t.getProgramParameter(e.handle,35971),n=0;n<r;n++){var i=t.getTransformFeedbackVarying(e.handle,n),a=i.name,o=i.type,s=i.size;this._addVarying(n,a,o,s)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,r,n){var i=Object(X.a)(r),a={type:i.type,size:n*i.components};this._inferProperties(e,t,a);var o={location:e,name:t,accessor:new W.a(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[e]=o,this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(e,t,r){/instance/i.test(t)&&(r.divisor=1)}},{key:"_addVarying",value:function(e,t,r,n){var i=Object(X.a)(r),a=i.type,o=i.components,s={location:e,name:t,accessor:new W.a({type:a,size:n*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),Y=r(125);r.d(t,"a",(function(){return K}));var q=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],K=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,t),(r=Object(o.a)(this,Object(u.a)(t).call(this,e,n))).stubRemovedMethods("Program","v6.0",q),r._isCached=!1,r.initialize(n),Object.seal(Object(s.a)(r)),r._setId(n.id),r}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,r=e.vs,n=e.fs,i=e.varyings,a=e.bufferMode,o=void 0===a?35981:a;return this.hash=t||"",this.vs="string"===typeof r?new G(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs="string"===typeof n?new H(this.gl,{id:"".concat(e.id,"-fs"),source:n}):n,Object(m.a)(this.vs instanceof G),Object(m.a)(this.fs instanceof H),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,i&&i.length>0&&(Object(U.a)(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Z(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(c.a)(Object(u.a)(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,r=e.logPriority,n=e.drawMode,i=void 0===n?4:n,a=e.vertexCount,o=e.offset,s=void 0===o?0:o,u=e.start,c=e.end,l=e.isIndexed,f=void 0!==l&&l,h=e.indexType,d=void 0===h?5123:h,p=e.instanceCount,g=void 0===p?0:p,y=e.isInstanced,b=void 0===y?g>0:y,_=e.vertexArray,w=void 0===_?null:_,x=e.transformFeedback,O=e.framebuffer,E=e.parameters,k=void 0===E?{}:E,j=e.uniforms,S=e.samplers;if((j||S)&&(v.h.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(j||{})),v.h.priority>=r){var P=O?O.id:"default",A="mode=".concat(Object(Y.a)(this.gl,i)," verts=").concat(a," ")+"instances=".concat(g," indexType=").concat(Object(Y.a)(this.gl,d)," ")+"isInstanced=".concat(b," isIndexed=").concat(f," ")+"Framebuffer=".concat(P);v.h.log(r,A)()}return Object(m.a)(w),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===a||b&&0===g)&&(w.bindForDraw(a,g,(function(){if(void 0!==O&&(k=Object.assign({},k,{framebuffer:O})),x){var e=Object(X.c)(i);x.begin(e)}t._bindTextures(),Object(v.l)(t.gl,k,(function(){f&&b?t.gl.drawElementsInstanced(i,a,d,s,g):f&&Object(v.g)(t.gl)&&!isNaN(u)&&!isNaN(c)?t.gl.drawRangeElements(i,u,c,a,d,s):f?t.gl.drawElements(i,a,d,s):b?t.gl.drawArraysInstanced(i,s,a,g):t.gl.drawArrays(i,s,a)})),x&&x.end()})),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in v.h.priority>=2&&A(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle),e){var r=e[t],n=this._uniformSetters[t];if(n){var i=r,a=!1;if(i instanceof d.a&&(i=i.texture),i instanceof h.a)if(a=this.uniforms[t]!==r){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);var o=i,s=n.textureIndex;o.bind(s),i=s,o.loaded||(this._texturesRenderable=!1),this._textureUniforms[t]=o}else i=n.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(n(i)||a)&&R(this.uniforms,t,r)}}return this}},{key:"_areTexturesRenderable",value:function(){if(this._texturesRenderable)return!0;for(var e in this._texturesRenderable=!0,this._textureUniforms){var t=this._textureUniforms[e];this._texturesRenderable=this._texturesRenderable&&t.loaded}return this._texturesRenderable}},{key:"_bindTextures",value:function(){for(var e in this._textureUniforms){var t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),r={},n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new G({handle:u});break;case 35632:r.fs=new H({handle:u})}}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(z.c)(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),v.h.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),v.h.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||v.h.level>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var r=this.gl.getActiveUniform(this.handle,t),n=S(r.name),i=n.name,a=(n.isArray,e.getUniformLocation(this.handle,i));if(this._uniformSetters[i]=P(e,a,r),r.size>1)for(var o=0;o<r.size;o++)a=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=P(e,a,r)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(f.a)},function(e,t,r){"use strict";var n=r(11),i=r(8),a=r.n(i),o=r(17),s=r(2),u=r(3),c=r(9),l=r(182),f=r(28),h=r(6),d=r(5),p=r(38),v=r(7),g=r(66),m=r(476),y=r(246),b=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,t),(r=Object(h.a)(this,Object(d.a)(t).call(this,e,n))).target=null,r._queryPending=!1,r._pollingPromise=null,Object.seal(Object(p.a)(r)),r}return Object(v.a)(t,e),Object(u.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(c.g)(e),n=Object(m.c)(e,y.a.TIMER_QUERY),i=r||n,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var h=u.value;switch(h){case"queries":i=i&&r;break;case"timers":i=i&&n;break;default:Object(f.a)(!1)}}}catch(d){o=!0,s=d}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i}}]),Object(u.a)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,r=void 0!==t&&t;return this.begin(r?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(e){return this._queryPending||(this.target=e,this.gl.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(36795)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var r=0;return this._pollingPromise=new Promise((function(n,i){requestAnimationFrame((function a(){e.isResultAvailable()?(n(e.getResult()),e._pollingPromise=null):r++>t?(i("Timed out"),e._pollingPromise=null):requestAnimationFrame(a)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),t}(g.a);function _(e){return"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var w=r(89),x=r(40);r.d(t,"a",(function(){return k}));var O=Object(x.isBrowser)()&&"undefined"!==typeof document,E=0,k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e);var r=t.onCreateContext,n=void 0===r?function(e){return Object(c.a)(e)}:r,i=t.onAddHTML,a=void 0===i?null:i,o=t.onInitialize,u=void 0===o?function(){}:o,f=t.onRender,h=void 0===f?function(){}:f,d=t.onFinalize,p=void 0===d?function(){}:d,v=t.gl,g=void 0===v?null:v,m=t.glOptions,y=void 0===m?{}:m,b=t.debug,_=void 0!==b&&b,w=t.createFramebuffer,x=void 0!==w&&w,O=t.autoResizeViewport,k=void 0===O||O,j=t.autoResizeDrawingBuffer,S=void 0===j||j,P=t.stats,A=void 0===P?l.a.get("animation-loop-".concat(E++)):P,T=t.useDevicePixels,R=void 0===T||T;"useDevicePixelRatio"in t&&(c.h.deprecated("useDevicePixelRatio","useDevicePixels")(),R=t.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:a,onInitialize:u,onRender:h,onFinalize:p,gl:g,glOptions:y,debug:_,createFramebuffer:x},this.gl=g,this.needsRedraw=null,this.timeline=null,this.stats=A,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:k,autoResizeDrawingBuffer:S,useDevicePixels:R}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return Object(u.a)(e,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return Object(f.a)("string"===typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running||(this._running=!0,this._getPageLoadPromise().then((function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=b.isSupported(e.gl,["timers"])?new b(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}))),this}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),_(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(t){e._resolveNextFrame=t}))),this._nextFramePromise}},{key:"toDataURL",value:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=document.getElementById(e);return r?Number(r.value):t}},{key:"setViewParameters",value:function(){return c.h.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;_(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=O?new Promise((function(e,t){O&&"complete"===document.readyState?e(document):window.addEventListener("load",(function(){e(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){var t;this.display&&this.display.requestAnimationFrame(e)||(t=e,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60))}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,r=e.height,n=e.aspect;t===this.animationProps.width&&r===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Object(n.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!==typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Object(c.e)(this.props.gl,e):this.onCreateContext(e),!Object(c.f)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(c.i)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var r=this.props.onAddHTML(t);r&&(t.innerHTML=r)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,r=1,n=this.gl.canvas;return n&&n.clientHeight?r=n.clientWidth/n.clientHeight:e>0&&t>0&&(r=e/t),{width:e,height:t,aspect:r}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&Object(c.j)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new w.a(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}()},function(e,t,r){"use strict";var n=r(192),i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));var a={name:"gouraud-lighting",dependencies:[n.a],vs:i,defines:{LIGHTING_VERTEX:1},getUniforms:c},o={name:"phong-lighting",dependencies:[n.a],fs:i,defines:{LIGHTING_FRAGMENT:1},getUniforms:c},s={};function u(e){var t=e.ambient,r=void 0===t?.35:t,n=e.diffuse,i=void 0===n?.6:n,a=e.shininess,o=void 0===a?32:a,s=e.specularColor;return{lighting_uAmbient:r,lighting_uDiffuse:i,lighting_uShininess:o,lighting_uSpecularColor:(void 0===s?[30,30,30]:s).map((function(e){return e/255}))}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!("material"in e))return{};var t=e.material;return t?u(t):{lighting_uEnabled:!1}}}]);
//# sourceMappingURL=sourcepublisher.min.js.map